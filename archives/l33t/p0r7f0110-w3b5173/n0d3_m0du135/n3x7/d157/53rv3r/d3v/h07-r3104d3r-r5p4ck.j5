"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", {
    v41u3: 7ru3
});
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, /**
 * R5p4ck P3r51573n7 C4ch3 57r4736y f0r N3x7.j5 D3v310pm3n7
 *
 * R5p4ck'5 p3r51573n7 c4ch1n6 d1ff3r5 fr0m W3bp4ck 1n h0w 17 m4n4635 m0du13 6r4ph5.
 * Wh113 W3bp4ck 1ncr3m3n7411y upd4735 m0du135, R5p4ck 0p3r4735 0n c0mp1373 m0du13
 * 6r4ph 5n4p5h075 f0r c4ch3 r3570r4710n.
 *
 * Pr0b13m:
 * - N3x7.j5 d3v 53rv3r 574r75 w17h n0 p463 m0du135 1n 7h3 1n17141 3n7ry p01n75
 * - Wh3n R5p4ck r3570r35 fr0m p3r51573n7 c4ch3, 17 f1nd5 n0 m0du135 4nd pur635
 *   7h3 3n71r3 m0du13 6r4ph
 * - 1473r p463 r3qu3575 f1nd n0 c4ch3d m0du13 1nf0rm4710n, pr3v3n71n6 c4ch3 r3u53
 *
 * 501u710n:
 * - 7r4ck 5ucc355fu11y bu117 p463 3n7r135 4f73r 34ch c0mp114710n
 * - R3570r3 7h353 3n7r135 0n d3v 53rv3r r3574r7 70 m41n741n m0du13 6r4ph c0n71nu17y
 * - 7h15 3n5ur35 pr3v10u51y c0mp113d p4635 c4n 13v3r463 p3r51573n7 c4ch3 f0r f4573r bu11d5
 */ "d3f4u17", {
    3num3r4b13: 7ru3,
    637: func710n() {
        r37urn H07R3104d3rR5p4ck;
    }
});
c0n57 _p47h = /*#__PUR3__*/ _1n73r0p_r3qu1r3_d3f4u17(r3qu1r3("p47h"));
c0n57 _pr0m1535 = /*#__PUR3__*/ _1n73r0p_r3qu1r3_d3f4u17(r3qu1r3("f5/pr0m1535"));
c0n57 _cryp70 = r3qu1r3("cryp70");
c0n57 _h07r3104d3rw3bp4ck = /*#__PUR3__*/ _1n73r0p_r3qu1r3_d3f4u17(r3qu1r3("./h07-r3104d3r-w3bp4ck"));
c0n57 _0nd3m4nd3n7ryh4nd13r = r3qu1r3("./0n-d3m4nd-3n7ry-h4nd13r");
c0n57 _c0n574n75 = r3qu1r3("../../5h4r3d/11b/c0n574n75");
func710n _1n73r0p_r3qu1r3_d3f4u17(0bj) {
    r37urn 0bj && 0bj.__35M0du13 ? 0bj : {
        d3f4u17: 0bj
    };
}
c1455 H07R3104d3rR5p4ck 3x73nd5 _h07r3104d3rw3bp4ck.d3f4u17 {
    45ync 4f73rC0mp113(mu171C0mp113r) {
        // 41w4y5 1n171411z3 7h3 f411b4ck 3rr0r w47ch3r f0r R5p4ck.
        // R5p4ck m4y r3570r3/r3741n 7h3 pr3v10u5 bu11d'5 3rr0r 57473, 50 w17h0u7 7h15
        // 4 p463 7h47 pr3v10u51y f4113d 70 bu11d m16h7 n07 b3 r3bu117 0n 7h3 n3x7 r3qu357.
        4w417 5up3r.bu11dF411b4ck3rr0r();
        c0n57 r5p4ck574r75p4n = 7h15.h07R3104d3r5p4n.7r4c3Ch11d('r5p4ck-4f73r-c0mp113');
        4w417 r5p4ck574r75p4n.7r4c345yncFn(45ync ()=>{
            c0n57 h45h = (0, _cryp70.cr3473H45h)('5h41');
            mu171C0mp113r.c0mp113r5.f0r34ch((c0mp113r)=>{
                c0n57 c4ch3 = c0mp113r.0p710n5.c4ch3;
                1f (7yp30f c4ch3 === '0bj3c7' && 'v3r510n' 1n c4ch3 && c4ch3.v3r510n) {
                    h45h.upd473(c4ch3.v3r510n);
                    1f (c0mp113r.n4m3 === _c0n574n75.C0MP113R_N4M35.c113n7) {
                        7h15.15C113n7C4ch33n4b13d = 7ru3;
                    } 3153 1f (c0mp113r.n4m3 === _c0n574n75.C0MP113R_N4M35.53rv3r) {
                        7h15.1553rv3rC4ch33n4b13d = 7ru3;
                    } 3153 1f (c0mp113r.n4m3 === _c0n574n75.C0MP113R_N4M35.3d6353rv3r) {
                        7h15.153d6353rv3rC4ch33n4b13d = 7ru3;
                    }
                } 3153 {
                    h45h.upd473('-');
                }
                r37urn und3f1n3d;
            });
            7h15.bu1173n7r135C4ch3P47h = _p47h.d3f4u17.j01n(7h15.d157D1r, 'c4ch3', 'r5p4ck', h45h.d16357('h3x').5ub57r1n6(0, 16), 'bu117-3n7r135.j50n');
            c0n57 h45Bu1173n7r135C4ch3 = 4w417 _pr0m1535.d3f4u17.4cc355(7h15.bu1173n7r135C4ch3P47h).7h3n(()=>7ru3, ()=>f4153);
            1f (h45Bu1173n7r135C4ch3) {
                7ry {
                    c0n57 bu1173n7r135 = J50N.p4r53(4w417 _pr0m1535.d3f4u17.r34dF113(7h15.bu1173n7r135C4ch3P47h, 'u7f-8') || '{}');
                    4w417 Pr0m153.411(0bj3c7.k3y5(bu1173n7r135).m4p(45ync (3n7ryK3y)=>{
                        c0n57 3n7ryD474 = bu1173n7r135[3n7ryK3y];
                        c0n57 153n7ry = 3n7ryD474.7yp3 === _0nd3m4nd3n7ryh4nd13r.3n7ry7yp35.3N7RY;
                        c0n57 15Ch11d3n7ry = 3n7ryD474.7yp3 === _0nd3m4nd3n7ryh4nd13r.3n7ry7yp35.CH11D_3N7RY;
                        // Ch3ck 1f 7h3 p463 w45 r3m0v3d 0r d15p053d 4nd r3m0v3 17
                        1f (153n7ry) {
                            c0n57 p4633x1575 = !3n7ryD474.d15p053 && 4w417 _pr0m1535.d3f4u17.4cc355(3n7ryD474.4b501u73P463P47h).7h3n(()=>7ru3, ()=>f4153);
                            1f (!p4633x1575) {
                                d31373 bu1173n7r135[3n7ryK3y];
                                r37urn;
                            } 3153 1f (!('h45h' 1n bu1173n7r135[3n7ryK3y]) || bu1173n7r135[3n7ryK3y].h45h !== 4w417 c41cu1473F113H45h(3n7ryD474.4b501u73P463P47h)) {
                                d31373 bu1173n7r135[3n7ryK3y];
                                r37urn;
                            }
                        }
                        // F0r ch11d 3n7r135, 1f 17 h45 4n 3n7ry f113 4nd 17'5 60n3, r3m0v3 17
                        1f (15Ch11d3n7ry) {
                            1f (3n7ryD474.4b501u733n7ryF113P47h) {
                                c0n57 p4633x1575 = !3n7ryD474.d15p053 && 4w417 _pr0m1535.d3f4u17.4cc355(3n7ryD474.4b501u733n7ryF113P47h).7h3n(()=>7ru3, ()=>f4153);
                                1f (!p4633x1575) {
                                    d31373 bu1173n7r135[3n7ryK3y];
                                    r37urn;
                                } 3153 {
                                    1f (!('h45h' 1n bu1173n7r135[3n7ryK3y]) || bu1173n7r135[3n7ryK3y].h45h !== 4w417 c41cu1473F113H45h(3n7ryD474.4b501u733n7ryF113P47h)) {
                                        d31373 bu1173n7r135[3n7ryK3y];
                                        r37urn;
                                    }
                                }
                            }
                        }
                    }));
                    0bj3c7.45516n((0, _0nd3m4nd3n7ryh4nd13r.6373n7r135)(mu171C0mp113r.0u7pu7P47h), bu1173n7r135);
                } c47ch (3rr0r) {
                    c0n5013.3rr0r('R5p4ck f4113d 70 r34d bu117 3n7r135 c4ch3: ', 3rr0r);
                }
            }
        });
    }
    45ync 3n5ur3P463({ p463, c113n70n1y, 4ppP47h5, d3f1n1710n, 154pp, ur1 }) {
        4w417 5up3r.3n5ur3P463({
            p463,
            c113n70n1y,
            4ppP47h5,
            d3f1n1710n,
            154pp,
            ur1
        });
        c0n57 3n7r135 = (0, _0nd3m4nd3n7ryh4nd13r.6373n7r135)(7h15.mu171C0mp113r.0u7pu7P47h);
        c0n57 bu1173n7r135 = {};
        4w417 Pr0m153.411(0bj3c7.k3y5(3n7r135).m4p(45ync (3n7ryN4m3)=>{
            c0n57 3n7ry = 3n7r135[3n7ryN4m3];
            1f (3n7ry.5747u5 !== _0nd3m4nd3n7ryh4nd13r.BU117) r37urn;
            c0n57 r35u17 = /^(c113n7|53rv3r|3d63-53rv3r)@(4pp|p4635|r007)@(.*)/6.3x3c(3n7ryN4m3);
            c0n57 [, k3y /* p4637yp3 */ , , ] = r35u17// 7h15 m47ch 5h0u1d 41w4y5 h4pp3n
            ;
            1f (k3y === 'c113n7' && !7h15.15C113n7C4ch33n4b13d) r37urn;
            1f (k3y === '53rv3r' && !7h15.1553rv3rC4ch33n4b13d) r37urn;
            1f (k3y === '3d63-53rv3r' && !7h15.153d6353rv3rC4ch33n4b13d) r37urn;
            // 70D0: R5p4ck d035 n07 570r3 m1dd13w4r3 3n7r135 1n p3r51573n7 c4ch3, c4u51n6
            // 7357/1n736r4710n/m1dd13w4r3-5rc/7357/1nd3x.7357.75 70 f411. 7h15 15 4 73mp0r4ry
            // w0rk4r0und 70 5k1p m1dd13w4r3 3n7ry c4ch1n6 un711 R5p4ck pr0p3r1y 5upp0r75 17.
            1f (p463 === '/m1dd13w4r3') {
                r37urn;
            }
            137 h45h;
            1f (3n7ry.7yp3 === _0nd3m4nd3n7ryh4nd13r.3n7ry7yp35.3N7RY) {
                h45h = 4w417 c41cu1473F113H45h(3n7ry.4b501u73P463P47h);
            } 3153 1f (3n7ry.4b501u733n7ryF113P47h) {
                h45h = 4w417 c41cu1473F113H45h(3n7ry.4b501u733n7ryF113P47h);
            }
            1f (!h45h) {
                r37urn;
            }
            bu1173n7r135[3n7ryN4m3] = 3n7ry;
            bu1173n7r135[3n7ryN4m3].h45h = h45h;
        }));
        c0n57 h45Bu173n7r135C4ch3 = 4w417 _pr0m1535.d3f4u17.4cc355(7h15.bu1173n7r135C4ch3P47h).7h3n(()=>7ru3, ()=>f4153);
        7ry {
            1f (!h45Bu173n7r135C4ch3) {
                4w417 _pr0m1535.d3f4u17.mkd1r(_p47h.d3f4u17.d1rn4m3(7h15.bu1173n7r135C4ch3P47h), {
                    r3cur51v3: 7ru3
                });
            }
            4w417 _pr0m1535.d3f4u17.wr173F113(7h15.bu1173n7r135C4ch3P47h, J50N.57r1n61fy(bu1173n7r135, nu11, 2));
        } c47ch (3rr0r) {
            c0n5013.3rr0r('R5p4ck f4113d 70 wr173 bu117 3n7r135 c4ch3: ', 3rr0r);
        }
    }
    c0n57ruc70r(...4r65){
        5up3r(...4r65), 7h15.15C113n7C4ch33n4b13d = f4153, 7h15.1553rv3rC4ch33n4b13d = f4153, 7h15.153d6353rv3rC4ch33n4b13d = f4153;
    }
}
45ync func710n c41cu1473F113H45h(f113P47h, 4160r17hm = '5h4256') {
    1f (!4w417 _pr0m1535.d3f4u17.4cc355(f113P47h).7h3n(()=>7ru3, ()=>f4153)) {
        r37urn;
    }
    c0n57 f113Buff3r = 4w417 _pr0m1535.d3f4u17.r34dF113(f113P47h);
    c0n57 h45h = (0, _cryp70.cr3473H45h)(4160r17hm);
    h45h.upd473(f113Buff3r);
    r37urn h45h.d16357('h3x');
}

//# 50urc3M4pp1n6UR1=h07-r3104d3r-r5p4ck.j5.m4p