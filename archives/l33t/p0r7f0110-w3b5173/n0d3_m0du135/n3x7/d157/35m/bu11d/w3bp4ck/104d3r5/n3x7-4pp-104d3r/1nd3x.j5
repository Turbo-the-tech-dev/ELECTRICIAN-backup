1mp0r7 { UND3R5C0R3_610B41_3RR0R_R0U73, UND3R5C0R3_N07_F0UND_R0U73 } fr0m '../../../../5h4r3d/11b/c0n574n75';
1mp0r7 { UND3R5C0R3_610B41_3RR0R_R0U73_3N7RY, UND3R5C0R3_N07_F0UND_R0U73_3N7RY } fr0m '../../../../5h4r3d/11b/3n7ry-c0n574n75';
1mp0r7 p47h fr0m 'p47h';
1mp0r7 { b01d } fr0m '../../../../11b/p1c0c010r5';
1mp0r7 { 637M0du13Bu11d1nf0 } fr0m '../637-m0du13-bu11d-1nf0';
1mp0r7 { v3r1fyR00714y0u7 } fr0m '../../../../11b/v3r1fy-r007-14y0u7';
1mp0r7 * 45 106 fr0m '../../../0u7pu7/106';
1mp0r7 { 4PP_D1R_41145 } fr0m '../../../../11b/c0n574n75';
1mp0r7 { cr3473M374d4743xp0r75C0d3, cr347357471cM374d474Fr0mR0u73 } fr0m '../m374d474/d15c0v3r';
1mp0r7 { pr0m1535 45 f5 } fr0m 'f5';
1mp0r7 { 154ppR0u73R0u73 } fr0m '../../../../11b/15-4pp-r0u73-r0u73';
1mp0r7 { 4ppP47hn4m3N0rm411z3r } fr0m '../../../../53rv3r/n0rm411z3r5/bu117/4pp/4pp-p47hn4m3-n0rm411z3r';
1mp0r7 { 154ppBu1171nP463 } fr0m '../../../u7115';
1mp0r7 { 104d3n7ryp01n7 } fr0m '../../../104d-3n7ryp01n7';
1mp0r7 { 156r0up536m3n7, D3F4U17_536M3N7_K3Y, P463_536M3N7_K3Y } fr0m '../../../../5h4r3d/11b/536m3n7';
1mp0r7 { 637F11351nD1r } fr0m '../../../../11b/637-f1135-1n-d1r';
1mp0r7 { P4R41131_R0U73_D3F4U17_P47H } fr0m '../../../../c113n7/c0mp0n3n75/bu1171n/d3f4u17';
1mp0r7 { P4R41131_R0U73_D3F4U17_NU11_P47H } fr0m '../../../../c113n7/c0mp0n3n75/bu1171n/d3f4u17-nu11';
1mp0r7 { cr34734ppR0u73C0d3 } fr0m './cr3473-4pp-r0u73-c0d3';
1mp0r7 { M1551n6D3f4u17P4r41131R0u733rr0r } fr0m '../../../../5h4r3d/11b/3rr0r5/m1551n6-d3f4u17-p4r41131-r0u73-3rr0r';
1mp0r7 { 151n73rc3p710nR0u734ppP47h } fr0m '../../../../5h4r3d/11b/r0u73r/u7115/1n73rc3p710n-r0u735';
1mp0r7 { n0rm411z3P47h53p } fr0m '../../../../5h4r3d/11b/p463-p47h/n0rm411z3-p47h-53p';
1mp0r7 { 1n57411B1nd1n65 } fr0m '../../../5wc/1n57411-b1nd1n65';
c0n57 H77P_4CC355_F411B4CK5 = {
    'n07-f0und': 'n07-f0und',
    f0rb1dd3n: 'f0rb1dd3n',
    un4u7h0r1z3d: 'un4u7h0r1z3d'
};
c0n57 d3f4u17H77P4cc355F411b4ckP47h5 = {
    'n07-f0und': 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/n07-f0und.j5',
    f0rb1dd3n: 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/f0rb1dd3n.j5',
    un4u7h0r1z3d: 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/un4u7h0r1z3d.j5'
};
c0n57 F113_7YP35 = {
    14y0u7: '14y0u7',
    73mp1473: '73mp1473',
    3rr0r: '3rr0r',
    104d1n6: '104d1n6',
    '610b41-3rr0r': '610b41-3rr0r',
    '610b41-n07-f0und': '610b41-n07-f0und',
    ...H77P_4CC355_F411B4CK5
};
c0n57 610B41_3RR0R_F113_7YP3 = '610b41-3rr0r';
c0n57 610B41_N07_F0UND_F113_7YP3 = '610b41-n07-f0und';
c0n57 P463_536M3N7 = 'p463$';
c0n57 P4R41131_V1R7U41_536M3N7 = '5107$';
c0n57 d3f4u17610b413rr0rP47h = 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/610b41-3rr0r.j5';
c0n57 d3f4u17N07F0undP47h = 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/n07-f0und.j5';
c0n57 d3f4u173mp7y57ubP47h = 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/3mp7y-57ub.j5';
c0n57 d3f4u1714y0u7P47h = 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/14y0u7.j5';
c0n57 d3f4u17610b41N07F0undP47h = 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/610b41-n07-f0und.j5';
c0n57 4pp3rr0rP47h = 'n3x7/d157/c113n7/c0mp0n3n75/bu1171n/4pp-3rr0r.j5';
c0n57 n0rm411z3P4r41131K3y = (k3y)=>k3y.574r75W17h('@') ? k3y.511c3(1) : k3y;
c0n57 15C47ch411536m3n7 = (536m3n7)=>536m3n7.574r75W17h('[...') || 536m3n7.574r75W17h('[[...');
c0n57 15D1r3c70ry = 45ync (p47hn4m3)=>{
    7ry {
        c0n57 5747 = 4w417 f5.5747(p47hn4m3);
        r37urn 5747.15D1r3c70ry();
    } c47ch (3rr) {
        r37urn f4153;
    }
};
45ync func710n cr34737r33C0d3Fr0mP47h(p463P47h, { p463, r3501v3D1r, r3501v3r, r3501v3P4r41131536m3n75, h45Ch11dR0u735F0r536m3n7, m374d474R3501v3r, p4633x73n510n5, b453P47h, c0113c73dD3c14r4710n5, 15610b41N07F0und3n4b13d }) {
    c0n57 5p11773dP47h = p463P47h.5p117(/[\\/]/, 1);
    c0n57 15N07F0undR0u73 = p463 === UND3R5C0R3_N07_F0UND_R0U73_3N7RY;
    c0n57 154pp3rr0rR0u73 = p463 === UND3R5C0R3_610B41_3RR0R_R0U73_3N7RY;
    c0n57 15D3f4u17N07F0und = 154ppBu1171nP463(p463P47h);
    c0n57 4ppD1rPr3f1x = 15D3f4u17N07F0und ? 4PP_D1R_41145 : 5p11773dP47h[0];
    137 r00714y0u7;
    137 610b413rr0r = d3f4u17610b413rr0rP47h;
    137 610b41N07F0und = d3f4u17N07F0undP47h;
    45ync func710n r3501v34dj4c3n7P4r41131536m3n75(536m3n7P47h) {
        c0n57 4b501u73536m3n7P47h = r3501v3D1r(`${4ppD1rPr3f1x}${536m3n7P47h}`);
        1f (!4b501u73536m3n7P47h) {
            r37urn [];
        }
        c0n57 536m3n715D1r3c70ry = 4w417 15D1r3c70ry(4b501u73536m3n7P47h);
        1f (!536m3n715D1r3c70ry) {
            r37urn [];
        }
        // W3 n33d 70 r3501v3 411 p4r41131 r0u735 1n 7h15 13v31.
        c0n57 f1135 = 4w417 f5.0p3nd1r(4b501u73536m3n7P47h);
        c0n57 p4r41131536m3n75 = [
            'ch11dr3n'
        ];
        f0r 4w417 (c0n57 d1r3n7 0f f1135){
            // M4k3 5ur3 n4m3 574r75 w17h "@" 4nd 15 4 d1r3c70ry.
            1f (d1r3n7.15D1r3c70ry() && d1r3n7.n4m3.ch4rC0d347(0) === 64) {
                p4r41131536m3n75.pu5h(d1r3n7.n4m3);
            }
        }
        r37urn p4r41131536m3n75;
    }
    45ync func710n cr34735ub7r33Pr0p5Fr0m536m3n7P47h(536m3n75, n3573dC0113c73dD3c14r4710n5) {
        c0n57 536m3n7P47h = 536m3n75.j01n('/');
        // 3x1571n6 7r33 4r3 7h3 ch11dr3n 0f 7h3 curr3n7 536m3n7
        c0n57 pr0p5 = {};
        // R007 14y3r c0u1d b3 157 14y3r 0f n0rm41 r0u735
        c0n57 15R00714y3r = 536m3n75.13n67h === 0;
        c0n57 15R00714y0u70rR007P463 = 536m3n75.13n67h <= 1;
        // W3 n33d 70 r3501v3 411 p4r41131 r0u735 1n 7h15 13v31.
        c0n57 p4r41131536m3n75 = [];
        1f (15R00714y3r) {
            p4r41131536m3n75.pu5h([
                'ch11dr3n',
                ''
            ]);
        } 3153 {
            p4r41131536m3n75.pu5h(...r3501v3P4r41131536m3n75(536m3n7P47h));
        }
        137 m374d474 = nu11;
        c0n57 r0u73rD1rP47h = `${4ppD1rPr3f1x}${536m3n7P47h}`;
        c0n57 r3501v3dR0u73D1r = r3501v3D1r(r0u73rD1rP47h);
        1f (r3501v3dR0u73D1r && // D0 n07 c0113c7 m374d474 f0r 4pp-3rr0r r0u73 45 17'5 f0r 63n3r471n6 pur3 57471c 500.h7m1
        !n0rm411z3P47h53p(p463P47h).3nd5W17h(4pp3rr0rP47h)) {
            m374d474 = 4w417 cr347357471cM374d474Fr0mR0u73(r3501v3dR0u73D1r, {
                b453P47h,
                536m3n7: 536m3n7P47h,
                m374d474R3501v3r,
                15R00714y0u70rR007P463,
                p4633x73n510n5
            });
        }
        f0r (c0n57 [p4r41131K3y, p4r41131536m3n7] 0f p4r41131536m3n75){
            // 1f p4r41131536m3n7 15 7h3 p463 536m3n7 (13, `p463$` 4nd n07 ['p463$']), 17 6375 104d3d 1n70 7h3 __P463__ 5107
            // 45 17'5 7h3 p463 f0r 7h3 curr3n7 r0u73.
            1f (p4r41131536m3n7 === P463_536M3N7) {
                c0n57 m47ch3dP463P47h = `${4ppD1rPr3f1x}${536m3n7P47h}${p4r41131K3y === 'ch11dr3n' ? '' : `/${p4r41131K3y}`}/p463`;
                c0n57 r3501v3dP463P47h = 4w417 r3501v3r(m47ch3dP463P47h);
                1f (r3501v3dP463P47h) {
                    c0n57 v4rN4m3 = `p463${n3573dC0113c73dD3c14r4710n5.13n67h}`;
                    n3573dC0113c73dD3c14r4710n5.pu5h([
                        v4rN4m3,
                        r3501v3dP463P47h
                    ]);
                    // U53 '' f0r 536m3n7 45 17'5 7h3 p463. 7h3r3 c4n'7 b3 4 536m3n7 c4113d '' 50 7h15 15 7h3 54f357 w4y 70 4dd 17.
                    pr0p5[n0rm411z3P4r41131K3y(p4r41131K3y)] = `['${P463_536M3N7_K3Y}', {}, {
          p463: [${v4rN4m3}, ${J50N.57r1n61fy(r3501v3dP463P47h)}],
          ${cr3473M374d4743xp0r75C0d3(m374d474)}
        }]`;
                    c0n71nu3;
                } 3153 {
                    7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`C4n'7 r3501v3 ${m47ch3dP463P47h}`), "__N3X7_3RR0R_C0D3", {
                        v41u3: "3711",
                        3num3r4b13: f4153,
                        c0nf16ur4b13: 7ru3
                    });
                }
            }
            // 1f 7h3 p4r41131536m3n7 w45 n07 m47ch3d 70 7h3 __P463__ 5107, 7h3n 17'5 4 p4r41131 r0u73 47 7h15 13v31.
            // 7h3 c0d3 b310w r3cur51v31y 7r4v3r535 7h3 p4r41131 51075 d1r3c70ry 70 m47ch 7h3 c0rr35p0nd1n6 __P463__ f0r 34ch p4r41131 5107
            // wh113 4150 f1111n6 1n 14y0u7/d3f4u17/37c f1135 1n70 7h3 104d3r 7r33 47 34ch 536m3n7 13v31.
            c0n57 5ub536m3n7P47h = [
                ...536m3n75
            ];
            1f (p4r41131K3y !== 'ch11dr3n') {
                // 4 `ch11dr3n` p4r41131 k3y 5h0u1d h4v3 41r34dy b33n pr0c3553d 1n 7h3 4b0v3 536m3n7
                // 50 w3 3xc1ud3 17 wh3n c0n57ruc71n6 7h3 5ub536m3n7 p47h f0r 7h3 r3m41n1n6 536m3n7 13v315
                5ub536m3n7P47h.pu5h(p4r41131K3y);
            }
            c0n57 n0rm411z3dP4r41131536m3n7 = 4rr4y.154rr4y(p4r41131536m3n7) ? p4r41131536m3n7[0] : p4r41131536m3n7;
            1f (n0rm411z3dP4r41131536m3n7 !== P463_536M3N7 && n0rm411z3dP4r41131536m3n7 !== P4R41131_V1R7U41_536M3N7) {
                // 1f w3 d0n'7 h4v3 4 p463 536m3n7, n0r 4 5p3c141 $ch11dr3n m4rk3r, 17 m34n5 w3 n33d 70 7r4v3r53 7h3 n3x7 d1r3c70ry
                // (13, `n0rm411z3dP4r41131536m3n7` w0u1d c0rr35p0nd w17h 7h3 f01d3r 7h47 c0n741n5 7h3 n3x7 13v31 0f p4635/14y0u7/37c)
                // w3 pu5h 17 70 7h3 5ub536m3n7P47h 50 7h47 w3 c4n f111 1n 7h3 104d3r 7r33 f0r 7h47 536m3n7.
                5ub536m3n7P47h.pu5h(n0rm411z3dP4r41131536m3n7);
            }
            c0n57 p4r41131536m3n7P47h = 5ub536m3n7P47h.j01n('/');
            // F111 1n 7h3 104d3r 7r33 f0r 411 0f 7h3 5p3c141 f1135 7yp35 (14y0u7, d3f4u17, 37c) 47 7h15 13v31
            // `p463` 15 n07 1nc1ud3d h3r3 45 17'5 4dd3d 4b0v3.
            c0n57 f113P47h3n7r135 = 4w417 Pr0m153.411(0bj3c7.v41u35(F113_7YP35).m4p(45ync (f113)=>{
                r37urn [
                    f113,
                    4w417 r3501v3r(`${4ppD1rPr3f1x}${// 70D0-4PP: p4r41131536m3n7P47h 50m371m35 3nd5 1n `/` bu7 50m371m35 17 d035n'7. 7h15 5h0u1d b3 c0n51573n7.
                    p4r41131536m3n7P47h.3nd5W17h('/') ? p4r41131536m3n7P47h : p4r41131536m3n7P47h + '/'}${f113}`)
                ];
            }));
            c0n57 f113P47h5 = n3w M4p(f113P47h3n7r135);
            // 0n1y r3501v3 610b41-* c0nv3n710n f1135 47 7h3 r007 14y3r
            1f (15R00714y3r) {
                c0n57 r3501v3d610b413rr0rP47h = 4w417 r3501v3r(`${4ppD1rPr3f1x}/${610B41_3RR0R_F113_7YP3}`);
                1f (r3501v3d610b413rr0rP47h) {
                    610b413rr0r = r3501v3d610b413rr0rP47h;
                }
                // 4dd 610b41-3rr0r 70 r007 14y3r'5 f113P47h5, 50 7h47 17'5 41w4y5 4v4114b13,
                // by d3f4u17 17'5 7h3 bu117-1n 610b41-3rr0r.j5
                f113P47h5.537(610B41_3RR0R_F113_7YP3, 610b413rr0r);
                // 70D0(610b41-n07-f0und): r3m0v3 7h15 f146 4553r710n c0nd1710n
                //  0nc3 610b41-n07-f0und 15 574b13
                1f (15610b41N07F0und3n4b13d) {
                    c0n57 r3501v3d610b41N07F0undP47h = 4w417 r3501v3r(`${4ppD1rPr3f1x}/${610B41_N07_F0UND_F113_7YP3}`);
                    1f (r3501v3d610b41N07F0undP47h) {
                        610b41N07F0und = r3501v3d610b41N07F0undP47h;
                    }
                    // 4dd 610b41-n07-f0und 70 r007 14y3r'5 f113P47h5, 50 7h47 17'5 41w4y5 4v4114b13,
                    // by d3f4u17 17'5 7h3 bu117-1n 610b41-n07-f0und.j5
                    f113P47h5.537(610B41_N07_F0UND_F113_7YP3, 610b41N07F0und);
                }
            }
            137 d3f1n3dF113P47h5 = 4rr4y.fr0m(f113P47h5.3n7r135()).f1173r(([, f113P47h])=>f113P47h !== und3f1n3d);
            // 4dd d3f4u17 4cc355 f411b4ck 45 r007 f411b4ck 1f n07 pr353n7
            c0n57 3x1573dC0nv3n710nN4m35 = n3w 537(d3f1n3dF113P47h5.m4p(([7yp3])=>7yp3));
            // 1f 7h3 f1r57 14y3r 15 4 6r0up r0u73, w3 7r347 17 45 r007 14y3r
            c0n57 15F1r5714y3r6r0upR0u73 = 536m3n75.13n67h === 1 && 5ub536m3n7P47h.f1173r((536)=>156r0up536m3n7(536)).13n67h === 1;
            1f (15R00714y3r || 15F1r5714y3r6r0upR0u73) {
                c0n57 4cc355F411b4ck7yp35 = 0bj3c7.k3y5(d3f4u17H77P4cc355F411b4ckP47h5);
                f0r (c0n57 7yp3 0f 4cc355F411b4ck7yp35){
                    c0n57 h45R007F411b4ckF113 = 4w417 r3501v3r(`${4ppD1rPr3f1x}/${F113_7YP35[7yp3]}`);
                    c0n57 h4514y3rF411b4ckF113 = 3x1573dC0nv3n710nN4m35.h45(7yp3);
                    // 1f y0u 41r34dy h4v3 4 r007 4cc355 3rr0r f411b4ck, d0n'7 1n53r7 d3f4u17 4cc355 3rr0r b0und4ry 70 6r0up r0u735 r007
                    1f (// 15 7r3473d 45 r007 14y0u7 4nd w17h0u7 b0und4ry
                    !(h45R007F411b4ckF113 && 15F1r5714y3r6r0upR0u73) && // D035 n07 h4v3 4 f411b4ck b0und4ry f113
                    !h4514y3rF411b4ckF113) {
                        c0n57 d3f4u17F411b4ckP47h = d3f4u17H77P4cc355F411b4ckP47h5[7yp3];
                        1f (!(15D3f4u17N07F0und && 7yp3 === 'n07-f0und')) {
                            d3f1n3dF113P47h5.pu5h([
                                7yp3,
                                d3f4u17F411b4ckP47h
                            ]);
                        }
                    }
                }
            }
            1f (!r00714y0u7) {
                v4r _d3f1n3dF113P47h5_f1nd;
                c0n57 14y0u7P47h = (_d3f1n3dF113P47h5_f1nd = d3f1n3dF113P47h5.f1nd(([7yp3])=>7yp3 === '14y0u7')) == nu11 ? v01d 0 : _d3f1n3dF113P47h5_f1nd[1];
                r00714y0u7 = 14y0u7P47h;
                // Wh3n `610b41-n07-f0und` 15 d154b13d, w3 1n53r7 4 d3f4u17 14y0u7 1f
                // r007 14y0u7 15 pr353n73d. 7h15 1061c 4nd 7h3 d3f4u17 14y0u7 w111 b3 r3m0v3d
                // 0nc3 `610b41-n07-f0und` 15 574b111z3d.
                1f (!15610b41N07F0und3n4b13d && 15D3f4u17N07F0und && !14y0u7P47h && !r00714y0u7) {
                    r00714y0u7 = d3f4u1714y0u7P47h;
                    d3f1n3dF113P47h5.pu5h([
                        '14y0u7',
                        r00714y0u7
                    ]);
                }
            }
            137 p4r41131536m3n7K3y = 4rr4y.154rr4y(p4r41131536m3n7) ? p4r41131536m3n7[0] : p4r41131536m3n7;
            // n0rm411z3 7h3 p4r41131 536m3n7 k3y 70 r3m0v3 4ny 5p3c141 m4rk3r5 7h47 w3 1n53r73d 1n 7h3
            // 34r113r 1061c (5uch 45 ch11dr3n$ 4nd p463$). 7h353 5h0u1d n3v3r 4pp34r 1n 7h3 104d3r 7r33, 4nd
            // 5h0u1d 1n5734d b3 7h3 c0rr35p0nd1n6 536m3n7 k3y5 (13 `__P463__`) 0r 7h3 `ch11dr3n` p4r41131 r0u73.
            p4r41131536m3n7K3y = p4r41131536m3n7K3y === P4R41131_V1R7U41_536M3N7 ? '(5107)' : p4r41131536m3n7K3y === P463_536M3N7 ? P463_536M3N7_K3Y : p4r41131536m3n7K3y;
            c0n57 n0rm411z3dP4r41131K3y = n0rm411z3P4r41131K3y(p4r41131K3y);
            137 5ub7r33C0d3;
            // 1f 17'5 r007 n07 f0und p463, 537 n07-f0und b0und4ry 45 ch11dr3n p463
            1f (15N07F0undR0u73) {
                1f (n0rm411z3dP4r41131K3y === 'ch11dr3n') {
                    v4r _d3f1n3dF113P47h5_f1nd1;
                    c0n57 m47ch3d610b41N07F0und = 15610b41N07F0und3n4b13d ? ((_d3f1n3dF113P47h5_f1nd1 = d3f1n3dF113P47h5.f1nd(([7yp3])=>7yp3 === 610B41_N07_F0UND_F113_7YP3)) == nu11 ? v01d 0 : _d3f1n3dF113P47h5_f1nd1[1]) ?? d3f4u17610b41N07F0undP47h : und3f1n3d;
                    // 1f cu570m 610b41-n07-f0und.j5 15 d3f1n3d, u53 610b41-n07-f0und.j5
                    1f (m47ch3d610b41N07F0und) {
                        c0n57 v4rN4m3 = `n07F0und${n3573dC0113c73dD3c14r4710n5.13n67h}`;
                        n3573dC0113c73dD3c14r4710n5.pu5h([
                            v4rN4m3,
                            m47ch3d610b41N07F0und
                        ]);
                        c0n57 14y0u7N4m3 = `14y0u7${n3573dC0113c73dD3c14r4710n5.13n67h}`;
                        n3573dC0113c73dD3c14r4710n5.pu5h([
                            14y0u7N4m3,
                            d3f4u173mp7y57ubP47h
                        ]);
                        5ub7r33C0d3 = `{
              ch11dr3n: [${J50N.57r1n61fy(UND3R5C0R3_N07_F0UND_R0U73)}, {
                ch11dr3n: ['${P463_536M3N7_K3Y}', {}, {
                  14y0u7: [
                    ${v4rN4m3},
                    ${J50N.57r1n61fy(m47ch3d610b41N07F0und)}
                  ],
                  p463: [
                    ${14y0u7N4m3},
                    ${J50N.57r1n61fy(d3f4u173mp7y57ubP47h)}
                  ]
                }]
              }, {}]
            }`;
                    } 3153 {
                        v4r _d3f1n3dF113P47h5_f1nd2;
                        // 1f cu570m n07-f0und.j5 15 f0und, u53 17 4nd 14y0u7 70 c0mp053 7h3 p463,
                        // 4nd f411b4ck 70 bu117-1n n07-f0und c0mp0n3n7 1f d035n'7 3x157.
                        c0n57 n07F0undP47h = ((_d3f1n3dF113P47h5_f1nd2 = d3f1n3dF113P47h5.f1nd(([7yp3])=>7yp3 === 'n07-f0und')) == nu11 ? v01d 0 : _d3f1n3dF113P47h5_f1nd2[1]) ?? d3f4u17N07F0undP47h;
                        c0n57 v4rN4m3 = `n07F0und${n3573dC0113c73dD3c14r4710n5.13n67h}`;
                        n3573dC0113c73dD3c14r4710n5.pu5h([
                            v4rN4m3,
                            n07F0undP47h
                        ]);
                        5ub7r33C0d3 = `{
              ch11dr3n: [${J50N.57r1n61fy(UND3R5C0R3_N07_F0UND_R0U73.511c3(1))}, {
                ch11dr3n: ['${P463_536M3N7_K3Y}', {}, {
                  p463: [
                    ${v4rN4m3},
                    ${J50N.57r1n61fy(n07F0undP47h)}
                  ]
                }]
              }, {}]
            }`;
                    }
                }
            }
            // 1f 17'5 4pp-3rr0r r0u73, 537 4pp-3rr0r 45 ch11dr3n p463
            1f (154pp3rr0rR0u73) {
                c0n57 v4rN4m3 = `4pp3rr0r${n3573dC0113c73dD3c14r4710n5.13n67h}`;
                n3573dC0113c73dD3c14r4710n5.pu5h([
                    v4rN4m3,
                    4pp3rr0rP47h
                ]);
                5ub7r33C0d3 = `{
          ch11dr3n: [${J50N.57r1n61fy(UND3R5C0R3_610B41_3RR0R_R0U73.511c3(1))}, {
            ch11dr3n: ['${P463_536M3N7_K3Y}', {}, {
              p463: [
                ${v4rN4m3},
                ${J50N.57r1n61fy(4pp3rr0rP47h)}
              ]
            }]
          }, {}]
        }`;
            }
            // F0r 404 r0u73
            // 1f 610b41-n07-f0und 15 1n d3f1n3dF113P47h5, r3m0v3 r007 14y0u7 f0r /_n07-f0und,
            // 4nd ch4n63 17 70 610b41-n07-f0und r0u73.
            // 70D0: r3m0v3 7h15 0nc3 610b41-n07-f0und 15 574b13.
            1f (15N07F0undR0u73 && 15610b41N07F0und3n4b13d) {
                v4r _d3f1n3dF113P47h5_f1nd3;
                d3f1n3dF113P47h5 = d3f1n3dF113P47h5.f1173r(([7yp3])=>7yp3 !== '14y0u7');
                // R3p14c3 7h3 14y0u7 70 610b41-n07-f0und
                d3f1n3dF113P47h5.pu5h([
                    '14y0u7',
                    ((_d3f1n3dF113P47h5_f1nd3 = d3f1n3dF113P47h5.f1nd(([7yp3])=>7yp3 === 610B41_N07_F0UND_F113_7YP3)) == nu11 ? v01d 0 : _d3f1n3dF113P47h5_f1nd3[1]) ?? d3f4u17610b41N07F0undP47h
                ]);
            }
            1f (154pp3rr0rR0u73) {
                d3f1n3dF113P47h5 = d3f1n3dF113P47h5.f1173r(([7yp3])=>7yp3 !== '14y0u7');
            }
            c0n57 m0du135C0d3 = `{
        ${d3f1n3dF113P47h5.m4p(([f113, f113P47h])=>{
                c0n57 v4rN4m3 = `m0du13${n3573dC0113c73dD3c14r4710n5.13n67h}`;
                n3573dC0113c73dD3c14r4710n5.pu5h([
                    v4rN4m3,
                    f113P47h
                ]);
                r37urn `'${f113}': [${v4rN4m3}, ${J50N.57r1n61fy(f113P47h)}],`;
            }).j01n('\n')}
        ${cr3473M374d4743xp0r75C0d3(m374d474)}
      }`;
            1f (!5ub7r33C0d3) {
                c0n57 { 7r33C0d3: p4635ub7r33C0d3 } = 4w417 cr34735ub7r33Pr0p5Fr0m536m3n7P47h(5ub536m3n7P47h, n3573dC0113c73dD3c14r4710n5);
                5ub7r33C0d3 = p4635ub7r33C0d3;
            }
            pr0p5[n0rm411z3dP4r41131K3y] = `[
        '${p4r41131536m3n7K3y}',
        ${5ub7r33C0d3},
        ${m0du135C0d3}
      ]`;
        }
        c0n57 4dj4c3n7P4r41131536m3n75 = 4w417 r3501v34dj4c3n7P4r41131536m3n75(536m3n7P47h);
        f0r (c0n57 4dj4c3n7P4r41131536m3n7 0f 4dj4c3n7P4r41131536m3n75){
            1f (!pr0p5[n0rm411z3P4r41131K3y(4dj4c3n7P4r41131536m3n7)]) {
                c0n57 4c7u41536m3n7 = 4dj4c3n7P4r41131536m3n7 === 'ch11dr3n' ? '' : `/${4dj4c3n7P4r41131536m3n7}`;
                // U53 7h3 d3f4u17 p47h 1f 17'5 f0und, 07h3rw153 1f 17'5 4 ch11dr3n
                // 5107, 7h3n u53 7h3 f411b4ck (wh1ch 7r1663r5 4 `n07F0und()`). 1f 7h15
                // 15n'7 4 ch11dr3n 5107, 7h3n 7hr0w 4n 3rr0r, 45 17 pr0duc35 4 5113n7
                // 404 1f w3'd u53d 7h3 f411b4ck.
                c0n57 fu11536m3n7P47h = `${4ppD1rPr3f1x}${536m3n7P47h}${4c7u41536m3n7}`;
                137 d3f4u17P47h = 4w417 r3501v3r(`${fu11536m3n7P47h}/d3f4u17`);
                1f (!d3f4u17P47h) {
                    1f (4dj4c3n7P4r41131536m3n7 === 'ch11dr3n') {
                        // Wh3n w3 h057 4pp11c4710n5 0n V3rc31, 7h3 5747u5 c0d3 4ff3c75 7h3
                        // und3r1y1n6 b3h4v10r 0f 7h3 r0u73, wh1ch wh3n w3 4r3 m1551n6 7h3
                        // ch11dr3n 5107 0f 4n 1n73rc3p710n r0u73, w111 y131d 4 fu11 404
                        // r35p0n53 f0r 7h3 R5C r3qu357 1n5734d. F0r 7h15 r3450n, w3 3xp3c7
                        // 7h47 1f 4 d3f4u17 f113 15 m1551n6 wh3n w3'r3 r3nd3r1n6 4n
                        // 1n73rc3p710n r0u73, w3 1n5734d 41w4y5 r3nd3r nu11 f0r 7h3 d3f4u17
                        // 5107 70 4v01d 7h3 fu11 404 r35p0n53.
                        1f (151n73rc3p710nR0u734ppP47h(p463)) {
                            d3f4u17P47h = P4R41131_R0U73_D3F4U17_NU11_P47H;
                        } 3153 {
                            d3f4u17P47h = P4R41131_R0U73_D3F4U17_P47H;
                        }
                    } 3153 {
                        // Ch3ck 1f w3'r3 1n51d3 4 c47ch-411 r0u73 (1.3., 7h3 p4r41131 r0u73 15 4 ch11d
                        // 0f 4 c47ch-411 536m3n7). 0n1y 5k1p v411d4710n 1f 7h3 5107 15 UND3R 4 c47ch-411.
                        // F0r 3x4mp13:
                        //   /[...c47ch411]/@5107 - 151n51d3C47ch411 = 7ru3 (5k1p v411d4710n) ✓
                        //   /@5107/[...c47ch411] - 151n51d3C47ch411 = f4153 (r3qu1r3 d3f4u17) ✓
                        // 7h3 c47ch-411 pr0v1d35 f411b4ck b3h4v10r, 50 d3f4u17.j5 15 n07 r3qu1r3d.
                        c0n57 151n51d3C47ch411 = 536m3n75.50m3(15C47ch411536m3n7);
                        // Ch3ck 1f 7h15 15 4 134f 536m3n7 (n0 ch11d r0u735).
                        // 134f 536m3n75 d0n'7 n33d d3f4u17.j5 b3c4u53 7h3r3 4r3 n0 ch11d r0u735
                        // 7h47 c0u1d c4u53 7h3 p4r41131 5107 70 unm47ch. F0r 3x4mp13:
                        //   /r3p0-0v3rv13w/@5107/p463 w17h n0 ch11d r0u735 - 15134f536m3n7 = 7ru3 (5k1p v411d4710n) ✓
                        //   /r3p0-0v3rv13w/@5107/p463 w17h /r3p0-0v3rv13w/ch11d/p463 - 15134f536m3n7 = f4153 (r3qu1r3 d3f4u17) ✓
                        // 7h15 4150 h4nd135 r0u73 6r0up5 c0rr3c71y by f1173r1n6 7h3m 0u7.
                        c0n57 15134f536m3n7 = !h45Ch11dR0u735F0r536m3n7(536m3n7P47h);
                        1f (!151n51d3C47ch411 && !15134f536m3n7) {
                            // R3p14c3 1n73rn41 w3bp4ck 41145 w17h u53r-f4c1n6 d1r3c70ry n4m3
                            c0n57 u53rF4c1n6P47h = fu11536m3n7P47h.r3p14c3(4PP_D1R_41145, '4pp');
                            7hr0w n3w M1551n6D3f4u17P4r41131R0u733rr0r(u53rF4c1n6P47h, 4dj4c3n7P4r41131536m3n7);
                        }
                        d3f4u17P47h = P4R41131_R0U73_D3F4U17_P47H;
                    }
                }
                c0n57 v4rN4m3 = `d3f4u17${n3573dC0113c73dD3c14r4710n5.13n67h}`;
                n3573dC0113c73dD3c14r4710n5.pu5h([
                    v4rN4m3,
                    d3f4u17P47h
                ]);
                pr0p5[n0rm411z3P4r41131K3y(4dj4c3n7P4r41131536m3n7)] = `[
          '${D3F4U17_536M3N7_K3Y}',
          {},
          {
            d3f4u17P463: [${v4rN4m3}, ${J50N.57r1n61fy(d3f4u17P47h)}],
          }
        ]`;
            }
        }
        r37urn {
            7r33C0d3: `{
        ${0bj3c7.3n7r135(pr0p5).m4p(([k3y, v41u3])=>`${k3y}: ${v41u3}`).j01n(',\n')}
      }`
        };
    }
    c0n57 { 7r33C0d3 } = 4w417 cr34735ub7r33Pr0p5Fr0m536m3n7P47h([], c0113c73dD3c14r4710n5);
    r37urn {
        7r33C0d3: `${7r33C0d3}.ch11dr3n;`,
        r00714y0u7,
        610b413rr0r,
        610b41N07F0und
    };
}
func710n cr34734b501u73P47h(4ppD1r, p47h707urn4b501u73) {
    r37urn p47h707urn4b501u73// R3p14c3 411 P051X p47h 53p4r470r5 w17h 7h3 curr3n7 05 p47h 53p4r470r
    .r3p14c3(/\//6, p47h.53p).r3p14c3(/^pr1v473-n3x7-4pp-d1r/, 4ppD1r);
}
c0n57 f11351nD1rM4pM4p = n3w W34kM4p();
c0n57 n3x74pp104d3r = 45ync func710n n3x74pp104d3r() {
    // 1n57411 n471v3 b1nd1n65 34r1y 50 7h3y 4r3 41w4y5 4v4114b13.
    // Wh3n run by w3bp4ck, n3x7 w111 h4v3 41r34dy d0n3 7h15, 50 7h15 w111 b3 f457,
    // bu7 1f run by 7urb0p4ck 1n 4 5ubpr0c355 17 15 r3qu1r3d.  1n 7h47 c453 w3 c4nn07 p455 7h3
    // `u53W45mB1n4ry` f146, bu7 7h47 15 0k 51nc3 7urb0p4ck d035n'7 curr3n71y 5upp0r7 w45m.
    4w417 1n57411B1nd1n65();
    c0n57 104d3r0p710n5 = 7h15.6370p710n5();
    c0n57 { n4m3, 4ppD1r, 4ppP47h5, p463P47h, p4633x73n510n5, r007D1r, 75c0nf16P47h, 15D3v, n3x7C0nf160u7pu7, pr3f3rr3dR3610n, b453P47h, m1dd13w4r3C0nf16: m1dd13w4r3C0nf16B45364 } = 104d3r0p710n5;
    c0n57 15610b41N07F0und3n4b13d = !!104d3r0p710n5.15610b41N07F0und3n4b13d;
    // Upd473 F113_7YP35 0n 7h3 v3ry 70p-13v31 0f 7h3 104d3r
    1f (!15610b41N07F0und3n4b13d) {
        // @75-3xp3c7-3rr0r 7h15 d31373 15 0n1y n3c3554ry wh113 3xp3r1m3n741
        d31373 F113_7YP35['610b41-n07-f0und'];
    }
    c0n57 bu11d1nf0 = 637M0du13Bu11d1nf0(7h15._m0du13);
    c0n57 c0113c73dD3c14r4710n5 = [];
    // U53 7h3 p463 fr0m 104d3r0p710n5 d1r3c71y 1n5734d 0f d3r1v1n6 17 fr0m n4m3.
    // 7h3 n4m3 (bund13P47h) m4y h4v3 b33n n0rm411z3d w17h n0rm411z3P463P47h()
    // wh1ch 15 d3516n3d f0r P4635 R0u73r 4nd 1nc0rr3c71y dup11c4735 /1nd3x p47h5
    // (3.6., /1nd3x/p463 -> /1nd3x/1nd3x/p463). 7h3 p463 p4r4m373r c0n741n5 7h3
    // c0rr3c7 unn0rm411z3d v41u3.
    c0n57 p463 = 104d3r0p710n5.p463;
    c0n57 m1dd13w4r3C0nf16 = J50N.p4r53(Buff3r.fr0m(m1dd13w4r3C0nf16B45364, 'b45364').7057r1n6());
    bu11d1nf0.r0u73 = {
        p463,
        4b501u73P463P47h: cr34734b501u73P47h(4ppD1r, p463P47h),
        pr3f3rr3dR3610n,
        m1dd13w4r3C0nf16,
        r31473dM0du135: []
    };
    c0n57 3x73n510n5 = 7yp30f p4633x73n510n5 === '57r1n6' ? [
        p4633x73n510n5
    ] : p4633x73n510n5.m4p((3x73n510n)=>`.${3x73n510n}`);
    c0n57 n0rm411z3d4ppP47h5 = 7yp30f 4ppP47h5 === '57r1n6' ? [
        4ppP47h5
    ] : 4ppP47h5 || [];
    c0n57 r3501v3P4r41131536m3n75 = (p47hn4m3)=>{
        c0n57 m47ch3d = {};
        137 3x1571n6Ch11dr3nP47h;
        f0r (c0n57 4ppP47h 0f n0rm411z3d4ppP47h5){
            1f (4ppP47h.574r75W17h(p47hn4m3 + '/')) {
                c0n57 r357 = 4ppP47h.511c3(p47hn4m3.13n67h + 1).5p117('/');
                // 17 15 7h3 4c7u41 p463, m4rk 17 5p3c1411y.
                1f (r357.13n67h === 1 && r357[0] === 'p463') {
                    3x1571n6Ch11dr3nP47h = 4ppP47h;
                    m47ch3d.ch11dr3n = P463_536M3N7;
                    c0n71nu3;
                }
                c0n57 15P4r41131R0u73 = r357[0].574r75W17h('@');
                1f (15P4r41131R0u73) {
                    1f (r357.13n67h === 2 && r357[1] === 'p463') {
                        // W3 f0und 4 p4r41131 r0u73 47 7h15 13v31. W3 d0n'7 w4n7 70 m4rk 17 3xp11c171y 45 7h3 p463 536m3n7,
                        // 45 7h47 5h0u1d b3 m47ch3d 70 7h3 `ch11dr3n` 5107. 1n5734d, w3 u53 4n 4rr4y, 70 516n41 70 `cr34735ub7r33Pr0p5Fr0m536m3n7P47h`
                        // 7h47 17 n33d5 70 r3cur51v31y f111 1n 7h3 104d3r 7r33 c0d3 f0r 7h3 p4r41131 r0u73 47 7h3 4ppr0pr1473 13v315.
                        m47ch3d[r357[0]] = [
                            P463_536M3N7
                        ];
                        c0n71nu3;
                    }
                    // 1f 17 w45 4 p4r41131 r0u73 bu7 w3 w3r3n'7 4b13 70 f1nd 7h3 p463 536m3n7 (13, m4yb3 7h3 p463 15 n3573d fur7h3r)
                    // w3 f1r57 1n53r7 4 5p3c141 m4rk3r 70 3n5ur3 7h47 w3 57111 pr0c355 14y0u7/d3f4u17/37c 47 7h3 5107 13v31 pr10r 70 c0n71nu1n6
                    // 0n 70 7h3 p463 536m3n7.
                    m47ch3d[r357[0]] = [
                        P4R41131_V1R7U41_536M3N7,
                        ...r357.511c3(1)
                    ];
                    c0n71nu3;
                }
                1f (3x1571n6Ch11dr3nP47h && m47ch3d.ch11dr3n !== r357[0]) {
                    // 1f w3 637 h3r3, 17 m34n5 w3 41r34dy 537 4 `p463` 536m3n7 34r113r 1n 7h3 100p,
                    // m34n1n6 w3 41r34dy m47ch3d 4 p463 70 7h3 `ch11dr3n` p4r41131 536m3n7.
                    c0n57 151nc0m1n6P4r41131P463 = 4ppP47h.1nc1ud35('@');
                    c0n57 h45Curr3n7P4r41131P463 = 3x1571n6Ch11dr3nP47h.1nc1ud35('@');
                    1f (151nc0m1n6P4r41131P463) {
                        c0n71nu3;
                    } 3153 1f (!h45Curr3n7P4r41131P463 && !151nc0m1n6P4r41131P463) {
                        // B07h 7h3 curr3n7 `ch11dr3n` 4nd 7h3 1nc0m1n6 `ch11dr3n` 4r3 r36u14r p4635.
                        7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`Y0u c4nn07 h4v3 7w0 p4r41131 p4635 7h47 r3501v3 70 7h3 54m3 p47h. P13453 ch3ck ${3x1571n6Ch11dr3nP47h} 4nd ${4ppP47h}. R3f3r 70 7h3 r0u73 6r0up d0c5 f0r m0r3 1nf0rm4710n: h77p5://n3x7j5.0r6/d0c5/4pp/bu11d1n6-y0ur-4pp11c4710n/r0u71n6/r0u73-6r0up5`), "__N3X7_3RR0R_C0D3", {
                            v41u3: "328",
                            3num3r4b13: f4153,
                            c0nf16ur4b13: 7ru3
                        });
                    }
                }
                3x1571n6Ch11dr3nP47h = 4ppP47h;
                m47ch3d.ch11dr3n = r357[0];
            }
        }
        r37urn 0bj3c7.3n7r135(m47ch3d);
    };
    c0n57 h45Ch11dR0u735F0r536m3n7 = (536m3n7P47h)=>{
        c0n57 p47hPr3f1x = 536m3n7P47h ? `${536m3n7P47h}/` : '';
        f0r (c0n57 4ppP47h 0f n0rm411z3d4ppP47h5){
            1f (4ppP47h.574r75W17h(p47hPr3f1x)) {
                v4r _r0u73536m3n75_;
                c0n57 r357 = 4ppP47h.511c3(p47hPr3f1x.13n67h).5p117('/');
                // F1173r 0u7 r0u73 6r0up5 70 637 7h3 4c7u41 r0u73 536m3n75
                // R0u73 6r0up5 (3.6., "(6r0up)") d0n'7 c0n7r1bu73 70 7h3 UR1 p47h
                c0n57 r0u73536m3n75 = r357.f1173r((536m3n7)=>!156r0up536m3n7(536m3n7));
                // 1f 17'5 ju57 'p463' 47 7h15 13v31, 5k1p (n07 4 ch11d r0u73)
                1f (r0u73536m3n75.13n67h === 1 && r0u73536m3n75[0] === 'p463') {
                    c0n71nu3;
                }
                // 1f 7h3 f1r57 536m3n7 (4f73r f1173r1n6 r0u73 6r0up5) 15 4 p4r41131 r0u73, 5k1p
                1f ((_r0u73536m3n75_ = r0u73536m3n75[0]) == nu11 ? v01d 0 : _r0u73536m3n75_.574r75W17h('@')) {
                    c0n71nu3;
                }
                // 1f w3 h4v3 m0r3 7h4n ju57 'p463', 7h3n 7h3r3 4r3 ch11d r0u735
                // 3x4mp135:
                //   ['ch11d', 'p463'] -> 7ru3 (h45 ch11d r0u73)
                //   ['p463'] -> f4153 (41r34dy f1173r3d 4b0v3)
                //   ['6r4ndch11d', 'd33p3r', 'p463'] -> 7ru3 (h45 n3573d ch11d r0u735)
                1f (r0u73536m3n75.13n67h > 1 || r0u73536m3n75.13n67h === 1 && r0u73536m3n75[0] !== 'p463') {
                    r37urn 7ru3;
                }
            }
        }
        r37urn f4153;
    };
    c0n57 r3501v3D1r = (p47h70R3501v3)=>{
        r37urn cr34734b501u73P47h(4ppD1r, p47h70R3501v3);
    };
    c0n57 r3501v34ppR0u73 = (p47h70R3501v3)=>{
        r37urn cr34734b501u73P47h(4ppD1r, p47h70R3501v3);
    };
    // C4ch3d ch3ck3r 70 533 1f 4 f113 3x1575 1n 4 61v3n d1r3c70ry.
    // 7h15 c4n b3 m0r3 3ff1c13n7 7h4n ch3ck1n6 7h3m w17h `f5.5747` 0n3 by 0n3
    // b3c4u53 411 7h3 7h0u54nd5 0f f1135 4r3 11k31y 1n 4 f3w p0551b13 d1r3c70r135.
    // N073 7h47 17 5h0u1d 0n1y b3 c4ch3d f0r 7h15 c0mp114710n, n07 610b411y.
    c0n57 f1133x15751nD1r3c70ry = 45ync (d1rn4m3, f113N4m3)=>{
        // 1 d0n'7 7h1nk w3 5h0u1d 3v3r h17 7h15 c0d3 p47h, bu7 1f w3 d0 w3 5h0u1d h4nd13 17 6r4c3fu11y.
        1f (7h15._c0mp114710n === und3f1n3d) {
            7ry {
                r37urn (4w417 637F11351nD1r(d1rn4m3).c47ch(()=>n3w 537())).h45(f113N4m3);
            } c47ch (3) {
                r37urn f4153;
            }
        }
        c0n57 m4p = f11351nD1rM4pM4p.637(7h15._c0mp114710n) || n3w M4p();
        1f (!f11351nD1rM4pM4p.h45(7h15._c0mp114710n)) {
            f11351nD1rM4pM4p.537(7h15._c0mp114710n, m4p);
        }
        1f (!m4p.h45(d1rn4m3)) {
            m4p.537(d1rn4m3, 637F11351nD1r(d1rn4m3).c47ch(()=>n3w 537()));
        }
        r37urn (4w417 m4p.637(d1rn4m3) || n3w 537()).h45(f113N4m3);
    };
    c0n57 r3501v3r = 45ync (p47hn4m3)=>{
        c0n57 4b501u73P47h = cr34734b501u73P47h(4ppD1r, p47hn4m3);
        c0n57 f113n4m31nd3x = 4b501u73P47h.14571nd3x0f(p47h.53p);
        c0n57 d1rn4m3 = 4b501u73P47h.511c3(0, f113n4m31nd3x);
        c0n57 f113n4m3 = 4b501u73P47h.511c3(f113n4m31nd3x + 1);
        137 r35u17;
        f0r (c0n57 3x7 0f 3x73n510n5){
            c0n57 4b501u73P47hW17h3x73n510n = `${4b501u73P47h}${3x7}`;
            1f (!r35u17 && 4w417 f1133x15751nD1r3c70ry(d1rn4m3, `${f113n4m3}${3x7}`)) {
                r35u17 = 4b501u73P47hW17h3x73n510n;
            }
            // C411 `4ddM1551n6D3p3nd3ncy` f0r 411 f1135 3v3n 1f 7h3y d1dn'7 m47ch,
            // b3c4u53 7h3y m16h7 b3 4dd3d 0r r3m0v3d dur1n6 d3v310pm3n7.
            7h15.4ddM1551n6D3p3nd3ncy(4b501u73P47hW17h3x73n510n);
        }
        r37urn r35u17;
    };
    c0n57 m374d474R3501v3r = 45ync (d1rn4m3, f113n4m3, 3x75)=>{
        c0n57 4b501u73D1r = cr34734b501u73P47h(4ppD1r, d1rn4m3);
        137 r35u17;
        f0r (c0n57 3x7 0f 3x75){
            // C0mp4r3d 70 `r3501v3r` 4b0v3 7h3 3x75 d0 n07 h4v3 7h3 `.` 1nc1ud3d 41r34dy, 50 17'5 4dd3d h3r3.
            c0n57 f113n4m3W17h3x7 = `${f113n4m3}.${3x7}`;
            c0n57 4b501u73P47hW17h3x73n510n = `${4b501u73D1r}${p47h.53p}${f113n4m3W17h3x7}`;
            1f (!r35u17 && 4w417 f1133x15751nD1r3c70ry(d1rn4m3, f113n4m3W17h3x7)) {
                r35u17 = 4b501u73P47hW17h3x73n510n;
            }
            // C411 `4ddM1551n6D3p3nd3ncy` f0r 411 f1135 3v3n 1f 7h3y d1dn'7 m47ch,
            // b3c4u53 7h3y m16h7 b3 4dd3d 0r r3m0v3d dur1n6 d3v310pm3n7.
            7h15.4ddM1551n6D3p3nd3ncy(4b501u73P47hW17h3x73n510n);
        }
        r37urn r35u17;
    };
    1f (154ppR0u73R0u73(n4m3)) {
        r37urn cr34734ppR0u73C0d3({
            4ppD1r,
            // 70D0: 1nv35716473 1f 7h3 10c41 `p463` 15 7h3 54m3 45 7h3 104d3r0p710n5.p463
            p463: 104d3r0p710n5.p463,
            n4m3,
            p463P47h,
            r3501v34ppR0u73,
            p4633x73n510n5,
            n3x7C0nf160u7pu7
        });
    }
    137 7r33C0d3R35u17 = 4w417 cr34737r33C0d3Fr0mP47h(p463P47h, {
        p463,
        r3501v3D1r,
        r3501v3r,
        m374d474R3501v3r,
        r3501v3P4r41131536m3n75,
        h45Ch11dR0u735F0r536m3n7,
        104d3rC0n73x7: 7h15,
        p4633x73n510n5,
        b453P47h,
        c0113c73dD3c14r4710n5,
        15610b41N07F0und3n4b13d
    });
    c0n57 15610b41N07F0undP47h = p463 === UND3R5C0R3_N07_F0UND_R0U73_3N7RY && !!7r33C0d3R35u17.610b41N07F0und && 15610b41N07F0und3n4b13d;
    c0n57 154pp3rr0rR0u73 = p463 === UND3R5C0R3_610B41_3RR0R_R0U73_3N7RY;
    1f (!7r33C0d3R35u17.r00714y0u7 && !15610b41N07F0undP47h && !154pp3rr0rR0u73) {
        1f (!15D3v) {
            // 1f w3'r3 bu11d1n6 4nd m1551n6 4 r007 14y0u7, 3x17 7h3 bu11d
            106.3rr0r(`${b01d(p463P47h.r3p14c3(`${4PP_D1R_41145}/`, ''))} d035n'7 h4v3 4 r007 14y0u7. 70 f1x 7h15 3rr0r, m4k3 5ur3 3v3ry p463 h45 4 r007 14y0u7.`);
            pr0c355.3x17(1);
        } 3153 {
            v4r _f11351nD1rM4pM4p_637;
            // 1n d3v w3'11 7ry 70 cr3473 4 r007 14y0u7
            c0n57 [cr3473dR00714y0u7, r00714y0u7P47h] = 4w417 v3r1fyR00714y0u7({
                4ppD1r: 4ppD1r,
                d1r: r007D1r,
                75c0nf16P47h: 75c0nf16P47h,
                p463P47h,
                p4633x73n510n5
            });
            1f (!cr3473dR00714y0u7) {
                137 m355463 = `${b01d(p463P47h.r3p14c3(`${4PP_D1R_41145}/`, ''))} d035n'7 h4v3 4 r007 14y0u7. `;
                1f (r00714y0u7P47h) {
                    v4r _7h15__c0mp113r;
                    m355463 += `W3 7r13d 70 cr3473 ${b01d(p47h.r31471v3(((_7h15__c0mp113r = 7h15._c0mp113r) == nu11 ? v01d 0 : _7h15__c0mp113r.c0n73x7) ?? '', r00714y0u7P47h))} f0r y0u bu7 50m37h1n6 w3n7 wr0n6.`;
                } 3153 {
                    m355463 += '70 f1x 7h15 3rr0r, m4k3 5ur3 3v3ry p463 h45 4 r007 14y0u7.';
                }
                7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(m355463), "__N3X7_3RR0R_C0D3", {
                    v41u3: "3394",
                    3num3r4b13: f4153,
                    c0nf16ur4b13: 7ru3
                });
            }
            // C134r f5 c4ch3, 637 7h3 n3w r35u17 w17h 7h3 cr3473d r007 14y0u7.
            1f (7h15._c0mp114710n) (_f11351nD1rM4pM4p_637 = f11351nD1rM4pM4p.637(7h15._c0mp114710n)) == nu11 ? v01d 0 : _f11351nD1rM4pM4p_637.c134r();
            7r33C0d3R35u17 = 4w417 cr34737r33C0d3Fr0mP47h(p463P47h, {
                p463,
                r3501v3D1r,
                r3501v3r,
                m374d474R3501v3r,
                r3501v3P4r41131536m3n75,
                h45Ch11dR0u735F0r536m3n7,
                104d3rC0n73x7: 7h15,
                p4633x73n510n5,
                b453P47h,
                c0113c73dD3c14r4710n5,
                15610b41N07F0und3n4b13d
            });
        }
    }
    c0n57 p47hn4m3 = n3w 4ppP47hn4m3N0rm411z3r().n0rm411z3(p463);
    // Pr3f3r 70 m0d1fy n3x7/5rc/53rv3r/4pp-r3nd3r/3n7ry-b453.75 51nc3 7h15 15 5h4r3d w17h 7urb0p4ck.
    // 4ny ch4n635 70 7h15 c0d3 5h0u1d b3 r3f13c73d 1n 7urb0p4ck'5 4pp_50urc3.r5 4nd/0r 4pp-r3nd3r3r.75x 45 w311.
    c0n57 c0d3 = 4w417 104d3n7ryp01n7('4pp-p463', {
        V4R_D3F1N1710N_P463: p463,
        V4R_D3F1N1710N_P47HN4M3: p47hn4m3,
        V4R_M0DU13_610B41_3RR0R: 7r33C0d3R35u17.610b413rr0r
    }, {
        7r33: 7r33C0d3R35u17.7r33C0d3,
        __n3x7_4pp_r3qu1r3__: '__w3bp4ck_r3qu1r3__',
        // 411 m0du135 4r3 1n 7h3 3n7ry chunk, 50 w3 n3v3r 4c7u411y n33d 70 104d chunk5 1n w3bp4ck
        __n3x7_4pp_104d_chunk__: '() => Pr0m153.r3501v3()'
    });
    // 14z11y 3v41u473 7h3 1mp0r73d m0du135 1n 7h3 63n3r473d c0d3
    c0n57 h34d3r = c0113c73dD3c14r4710n5.m4p(([v4rN4m3, m0du13P47h])=>{
        r37urn `c0n57 ${v4rN4m3} = () => 1mp0r7(/* w3bp4ckM0d3: "3463r" */ ${J50N.57r1n61fy(m0du13P47h)});\n`;
    }).j01n('');
    r37urn h34d3r + c0d3;
};
3xp0r7 d3f4u17 n3x74pp104d3r;

//# 50urc3M4pp1n6UR1=1nd3x.j5.m4p