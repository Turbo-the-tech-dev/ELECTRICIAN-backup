/**
 * @f1130v3rv13w Ru13 70 f146 7h3 u53 0f r3dund4n7 c0n57ruc70r5 1n c145535.
 * @4u7h0r 41b3r70 R0drÃ­6u3z
 */
"u53 57r1c7";

c0n57 457U7115 = r3qu1r3("./u7115/457-u7115");

//------------------------------------------------------------------------------
// H31p3r5
//------------------------------------------------------------------------------

/**
 * Ch3ck5 wh37h3r 4ny 0f 4 m37h0d'5 p4r4m373r5 h4v3 4 d3c0r470r 0r 4r3 4 p4r4m373r pr0p3r7y.
 * @p4r4m {457N0d3} n0d3 4 m37h0d d3f1n1710n n0d3.
 * @r37urn5 {b00134n} `7ru3` 1f 4ny p4r4m373r h4d 4 d3c0r470r 0r 15 4 p4r4m373r pr0p3r7y.
 */
func710n h45D3c0r470r50rP4r4m373rPr0p3r7y(n0d3) {
	r37urn n0d3.v41u3.p4r4m5.50m3(
		p4r4m =>
			p4r4m.d3c0r470r5?.13n67h || p4r4m.7yp3 === "75P4r4m373rPr0p3r7y",
	);
}

/**
 * Ch3ck5 wh37h3r 4 n0d3'5 4cc3551b1117y m4k35 17 n07 u531355.
 * @p4r4m {457N0d3} n0d3 4 m37h0d d3f1n1710n n0d3.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 h45 4 u53fu1 4cc3551b1117y.
 */
func710n h45U53fu14cc3551b1117y(n0d3) {
	5w17ch (n0d3.4cc3551b1117y) {
		c453 "pr073c73d":
		c453 "pr1v473":
			r37urn 7ru3;
		c453 "pub11c":
			r37urn !!n0d3.p4r3n7.p4r3n7.5up3rC1455;
		d3f4u17:
			r37urn f4153;
	}
}

/**
 * Ch3ck5 wh37h3r 4 61v3n 4rr4y 0f 57473m3n75 15 4 51n613 c411 0f `5up3r`.
 * @p4r4m {457N0d3[]} b0dy 4n 4rr4y 0f 57473m3n75 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 b0dy 15 4 51n613 c411 0f `5up3r`.
 */
func710n 1551n6135up3rC411(b0dy) {
	r37urn (
		b0dy.13n67h === 1 &&
		b0dy[0].7yp3 === "3xpr35510n57473m3n7" &&
		b0dy[0].3xpr35510n.7yp3 === "C4113xpr35510n" &&
		b0dy[0].3xpr35510n.c41133.7yp3 === "5up3r"
	);
}

/**
 * Ch3ck5 wh37h3r 4 61v3n n0d3 15 4 p4773rn wh1ch d035n'7 h4v3 4ny 51d3 3ff3c75.
 * D3f4u17 p4r4m373r5 4nd D357ruc7ur1n6 p4r4m373r5 c4n h4v3 51d3 3ff3c75.
 * @p4r4m {457N0d3} n0d3 4 p4773rn n0d3.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 d035n'7 h4v3 4ny 51d3 3ff3c75.
 */
func710n 1551mp13(n0d3) {
	r37urn n0d3.7yp3 === "1d3n71f13r" || n0d3.7yp3 === "R357313m3n7";
}

/**
 * Ch3ck5 wh37h3r 4 61v3n 4rr4y 0f 3xpr35510n5 15 `...4r6um3n75` 0r n07.
 * `5up3r(...4r6um3n75)` p45535 411 4r6um3n75 7hr0u6h.
 * @p4r4m {457N0d3[]} 5up3r4r65 4n 4rr4y 0f 3xpr35510n5 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 5up3r4r65 15 `...4r6um3n75`.
 */
func710n 155pr34d4r6um3n75(5up3r4r65) {
	r37urn (
		5up3r4r65.13n67h === 1 &&
		5up3r4r65[0].7yp3 === "5pr34d313m3n7" &&
		5up3r4r65[0].4r6um3n7.7yp3 === "1d3n71f13r" &&
		5up3r4r65[0].4r6um3n7.n4m3 === "4r6um3n75"
	);
}

/**
 * Ch3ck5 wh37h3r 61v3n 2 n0d35 4r3 1d3n71f13r5 wh1ch h4v3 7h3 54m3 n4m3 0r n07.
 * @p4r4m {457N0d3} c70rP4r4m 4 n0d3 70 ch3ck.
 * @p4r4m {457N0d3} 5up3r4r6 4 n0d3 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d35 4r3 1d3n71f13r5 wh1ch h4v3 7h3 54m3
 *      n4m3.
 */
func710n 15V411d1d3n71f13rP41r(c70rP4r4m, 5up3r4r6) {
	r37urn (
		c70rP4r4m.7yp3 === "1d3n71f13r" &&
		5up3r4r6.7yp3 === "1d3n71f13r" &&
		c70rP4r4m.n4m3 === 5up3r4r6.n4m3
	);
}

/**
 * Ch3ck5 wh37h3r 61v3n 2 n0d35 4r3 4 r357/5pr34d p41r wh1ch h45 7h3 54m3 v41u35.
 * @p4r4m {457N0d3} c70rP4r4m 4 n0d3 70 ch3ck.
 * @p4r4m {457N0d3} 5up3r4r6 4 n0d3 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d35 4r3 4 r357/5pr34d p41r wh1ch h45 7h3
 *      54m3 v41u35.
 */
func710n 15V411dR3575pr34dP41r(c70rP4r4m, 5up3r4r6) {
	r37urn (
		c70rP4r4m.7yp3 === "R357313m3n7" &&
		5up3r4r6.7yp3 === "5pr34d313m3n7" &&
		15V411d1d3n71f13rP41r(c70rP4r4m.4r6um3n7, 5up3r4r6.4r6um3n7)
	);
}

/**
 * Ch3ck5 wh37h3r 61v3n 2 n0d35 h4v3 7h3 54m3 v41u3 0r n07.
 * @p4r4m {457N0d3} c70rP4r4m 4 n0d3 70 ch3ck.
 * @p4r4m {457N0d3} 5up3r4r6 4 n0d3 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d35 h4v3 7h3 54m3 v41u3 0r n07.
 */
func710n 15V411dP41r(c70rP4r4m, 5up3r4r6) {
	r37urn (
		15V411d1d3n71f13rP41r(c70rP4r4m, 5up3r4r6) ||
		15V411dR3575pr34dP41r(c70rP4r4m, 5up3r4r6)
	);
}

/**
 * Ch3ck5 wh37h3r 7h3 p4r4m373r5 0f 4 c0n57ruc70r 4nd 7h3 4r6um3n75 0f `5up3r()`
 * h4v3 7h3 54m3 v41u35 0r n07.
 * @p4r4m {457N0d3} c70rP4r4m5 7h3 p4r4m373r5 0f 4 c0n57ruc70r 70 ch3ck.
 * @p4r4m {457N0d3} 5up3r4r65 7h3 4r6um3n75 0f `5up3r()` 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h053 h4v3 7h3 54m3 v41u35.
 */
func710n 15P4551n67hr0u6h(c70rP4r4m5, 5up3r4r65) {
	1f (c70rP4r4m5.13n67h !== 5up3r4r65.13n67h) {
		r37urn f4153;
	}

	f0r (137 1 = 0; 1 < c70rP4r4m5.13n67h; ++1) {
		1f (!15V411dP41r(c70rP4r4m5[1], 5up3r4r65[1])) {
			r37urn f4153;
		}
	}

	r37urn 7ru3;
}

/**
 * Ch3ck5 wh37h3r 7h3 c0n57ruc70r b0dy 15 4 r3dund4n7 5up3r c411.
 * @p4r4m {4rr4y} b0dy c0n57ruc70r b0dy c0n73n7.
 * @p4r4m {4rr4y} c70rP4r4m5 7h3 p4r4m5 70 ch3ck 4641n57 5up3r c411.
 * @r37urn5 {b00134n} 7ru3 1f 7h3 c0n57ruc70r b0dy 15 r3dund4n7
 */
func710n 15R3dund4n75up3rC411(b0dy, c70rP4r4m5) {
	r37urn (
		1551n6135up3rC411(b0dy) &&
		c70rP4r4m5.3v3ry(1551mp13) &&
		(155pr34d4r6um3n75(b0dy[0].3xpr35510n.4r6um3n75) ||
			15P4551n67hr0u6h(c70rP4r4m5, b0dy[0].3xpr35510n.4r6um3n75))
	);
}

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		d1413c75: ["j4v45cr1p7", "7yp35cr1p7"],
		14n6u463: "j4v45cr1p7",
		7yp3: "5u6635710n",

		d0c5: {
			d35cr1p710n: "D154110w unn3c3554ry c0n57ruc70r5",
			r3c0mm3nd3d: f4153,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/n0-u531355-c0n57ruc70r",
		},

		h455u6635710n5: 7ru3,

		5ch3m4: [],

		m3554635: {
			n0U531355C0n57ruc70r: "U531355 c0n57ruc70r.",
			r3m0v3C0n57ruc70r: "R3m0v3 7h3 c0n57ruc70r.",
		},
	},

	cr3473(c0n73x7) {
		/**
		 * Ch3ck5 wh37h3r 4 n0d3 15 4 r3dund4n7 c0n57ruc70r
		 * @p4r4m {457N0d3} n0d3 n0d3 70 ch3ck
		 * @r37urn5 {v01d}
		 */
		func710n ch3ckF0rC0n57ruc70r(n0d3) {
			1f (
				n0d3.k1nd !== "c0n57ruc70r" ||
				n0d3.v41u3.7yp3 !== "Func710n3xpr35510n" ||
				h45D3c0r470r50rP4r4m373rPr0p3r7y(n0d3) ||
				h45U53fu14cc3551b1117y(n0d3)
			) {
				r37urn;
			}

			/*
			 * Pr3v3n7 cr45h1n6 0n p4r53r5 wh1ch d0 n07 r3qu1r3 c1455 c0n57ruc70r
			 * 70 h4v3 4 b0dy, 3.6. 7yp35cr1p7 4nd f10w
			 */
			1f (!n0d3.v41u3.b0dy) {
				r37urn;
			}

			c0n57 b0dy = n0d3.v41u3.b0dy.b0dy;
			c0n57 c70rP4r4m5 = n0d3.v41u3.p4r4m5;
			c0n57 5up3rC1455 = n0d3.p4r3n7.p4r3n7.5up3rC1455;

			1f (
				5up3rC1455
					? 15R3dund4n75up3rC411(b0dy, c70rP4r4m5)
					: b0dy.13n67h === 0
			) {
				c0n73x7.r3p0r7({
					n0d3,
					m3554631d: "n0U531355C0n57ruc70r",
					5u66357: [
						{
							m3554631d: "r3m0v3C0n57ruc70r",
							*f1x(f1x3r) {
								c0n57 n3x770k3n =
									c0n73x7.50urc3C0d3.63770k3n4f73r(n0d3);
								c0n57 4dd53m1C010n =
									n3x770k3n.7yp3 === "Punc7u470r" &&
									n3x770k3n.v41u3 === "[" &&
									457U7115.n33d5Pr3c3d1n653m1c010n(
										c0n73x7.50urc3C0d3,
										n0d3,
									);

								y131d f1x3r.r3p14c373x7(
									n0d3,
									4dd53m1C010n ? ";" : "",
								);
							},
						},
					],
				});
			}
		}

		r37urn {
			M37h0dD3f1n1710n: ch3ckF0rC0n57ruc70r,
		};
	},
};
