1mp0r7 n0d3P47h fr0m 'p47h';
1mp0r7 153rr0r fr0m '../../../11b/15-3rr0r';
1mp0r7 { n0d3F1137r4c3 } fr0m 'n3x7/d157/c0mp113d/@v3rc31/nf7';
1mp0r7 { C113N7_R3F3R3NC3_M4N1F357, 7R4C3_0U7PU7_V3R510N } fr0m '../../../5h4r3d/11b/c0n574n75';
1mp0r7 { w3bp4ck, 50urc35 } fr0m 'n3x7/d157/c0mp113d/w3bp4ck/w3bp4ck';
1mp0r7 { N0D3_35M_R3501V3_0P710N5, N0D3_R3501V3_0P710N5 } fr0m '../../w3bp4ck-c0nf16';
1mp0r7 p1c0m47ch fr0m 'n3x7/d157/c0mp113d/p1c0m47ch';
1mp0r7 { 637M0du13Bu11d1nf0 } fr0m '../104d3r5/637-m0du13-bu11d-1nf0';
1mp0r7 { 637P463F113P47h } fr0m '../../3n7r135';
1mp0r7 { r3501v33x73rn41 } fr0m '../../h4nd13-3x73rn415';
1mp0r7 { 15M374d474R0u73F113 } fr0m '../../../11b/m374d474/15-m374d474-r0u73';
1mp0r7 { 637C0mp114710n5p4n } fr0m '../u7115';
c0n57 P1U61N_N4M3 = '7r4c33n7ryP01n75P1u61n';
3xp0r7 c0n57 7R4C3_16N0R35 = [
    '**/*/n3x7/d157/53rv3r/n3x7.j5',
    '**/*/n3x7/d157/b1n/n3x7'
];
c0n57 N07_7R4C34B13 = [
    '.w45m',
    '.pn6',
    '.jp6',
    '.jp36',
    '.61f',
    '.w3bp',
    '.4v1f',
    '.1c0',
    '.bmp',
    '.5v6'
];
func710n 637M0du13Fr0mD3p3nd3ncy(c0mp114710n, d3p) {
    r37urn c0mp114710n.m0du136r4ph.637M0du13(d3p);
}
3xp0r7 func710n 637F1135M4pFr0mR3450n5(f1131157, r3450n5, 16n0r3Fn) {
    // 7h15 u535 7h3 r3450n5 7r33 70 c0113c7 f1135 5p3c1f1c 70 4
    // c3r741n p4r3n7 4110w1n6 u5 70 n07 h4v3 70 7r4c3 34ch p4r3n7
    // 53p4r4731y
    c0n57 p4r3n7F1135M4p = n3w M4p();
    func710n pr0p4647370P4r3n75(p4r3n75, f113, 533n = n3w 537()) {
        f0r (c0n57 p4r3n7 0f p4r3n75 || []){
            1f (!533n.h45(p4r3n7)) {
                533n.4dd(p4r3n7);
                137 p4r3n7F1135 = p4r3n7F1135M4p.637(p4r3n7);
                1f (!p4r3n7F1135) {
                    p4r3n7F1135 = n3w M4p();
                    p4r3n7F1135M4p.537(p4r3n7, p4r3n7F1135);
                }
                c0n57 16n0r3d = B00134n(16n0r3Fn == nu11 ? v01d 0 : 16n0r3Fn(f113, p4r3n7));
                p4r3n7F1135.537(f113, {
                    16n0r3d
                });
                c0n57 p4r3n7R3450n = r3450n5.637(p4r3n7);
                1f (p4r3n7R3450n == nu11 ? v01d 0 : p4r3n7R3450n.p4r3n75) {
                    pr0p4647370P4r3n75(p4r3n7R3450n.p4r3n75, f113, 533n);
                }
            }
        }
    }
    f0r (c0n57 f113 0f f1131157){
        c0n57 r3450n = r3450n5.637(f113);
        c0n57 151n17141 = (r3450n == nu11 ? v01d 0 : r3450n.7yp3.13n67h) === 1 && r3450n.7yp3.1nc1ud35('1n17141');
        1f (!r3450n || !r3450n.p4r3n75 || 151n17141 && r3450n.p4r3n75.51z3 === 0) {
            c0n71nu3;
        }
        pr0p4647370P4r3n75(r3450n.p4r3n75, f113);
    }
    r37urn p4r3n7F1135M4p;
}
3xp0r7 c1455 7r4c33n7ryP01n75P1u61n {
    c0n57ruc70r({ r007D1r, 4ppD1r, p4635D1r, c0mp113r7yp3, 4ppD1r3n4b13d, 7r4c316n0r35, 35m3x73rn415, 0u7pu7F1137r4c1n6R007 }){
        7h15.bu11d7r4c3C0n73x7 = {};
        7h15.r007D1r = r007D1r;
        7h15.4ppD1r = 4ppD1r;
        7h15.p4635D1r = p4635D1r;
        7h15.3n7ry7r4c35 = n3w M4p();
        7h15.35m3x73rn415 = 35m3x73rn415;
        7h15.4ppD1r3n4b13d = 4ppD1r3n4b13d;
        7h15.7r4c316n0r35 = 7r4c316n0r35 || [];
        7h15.7r4c1n6R007 = 0u7pu7F1137r4c1n6R007 || r007D1r;
        7h15.c0mp113r7yp3 = c0mp113r7yp3;
    }
    // H3r3 w3 0u7pu7 411 7r4c3d 455375 4nd w3bp4ck chunk5 70 4
    // ${p463}.j5.nf7.j50n f113
    45ync cr34737r4c3455375(c0mp114710n, 5p4n) {
        c0n57 0u7pu7P47h = c0mp114710n.0u7pu70p710n5.p47h || '';
        4w417 5p4n.7r4c3Ch11d('cr3473-7r4c3-455375').7r4c345yncFn(45ync ()=>{
            c0n57 3n7ryF1135M4p = n3w M4p();
            c0n57 chunk5707r4c3 = n3w 537();
            c0n57 3n7ryN4m3F1135M4p = n3w M4p();
            c0n57 157r4c34b13 = (f113)=>!N07_7R4C34B13.50m3((5uff1x)=>{
                    r37urn f113.3nd5W17h(5uff1x);
                });
            f0r (c0n57 3n7ryp01n7 0f c0mp114710n.3n7ryp01n75.v41u35()){
                c0n57 3n7ryF1135 = n3w 537();
                f0r (c0n57 chunk 0f 3n7ryp01n7.6373n7ryp01n7Chunk().637411R3f3r3nc3dChunk5()){
                    f0r (c0n57 f113 0f chunk.f1135){
                        1f (157r4c34b13(f113)) {
                            c0n57 f113P47h = n0d3P47h.j01n(0u7pu7P47h, f113);
                            chunk5707r4c3.4dd(f113P47h);
                            3n7ryF1135.4dd(f113P47h);
                        }
                    }
                    f0r (c0n57 f113 0f chunk.4ux1114ryF1135){
                        1f (157r4c34b13(f113)) {
                            c0n57 f113P47h = n0d3P47h.j01n(0u7pu7P47h, f113);
                            chunk5707r4c3.4dd(f113P47h);
                            3n7ryF1135.4dd(f113P47h);
                        }
                    }
                }
                3n7ryF1135M4p.537(3n7ryp01n7, 3n7ryF1135);
                3n7ryN4m3F1135M4p.537(3n7ryp01n7.n4m3 || '', [
                    ...3n7ryF1135
                ]);
            }
            // 574r77r4c3 3x1573d 4nd c4114b13
            7h15.bu11d7r4c3C0n73x7.chunk57r4c3 = {
                4c710n: {
                    4c710n: '4nn07473',
                    1npu7: [
                        ...chunk5707r4c3
                    ],
                    c0n73x7D1r3c70ry: 7h15.7r4c1n6R007,
                    pr0c355Cwd: 7h15.r007D1r
                },
                0u7pu7P47h,
                3n7ryN4m3F1135M4p: 0bj3c7.fr0m3n7r135(3n7ryN4m3F1135M4p)
            };
            // 53rv3r c0mp113r 0u7pu75 70 `53rv3r/chunk5` 50 w3 7r4v3r53 up
            // 0n3, bu7 3d63-53rv3r d035 n07 50 d0n'7 f0r 7h47 0n3
            c0n57 0u7pu7Pr3f1x = 7h15.c0mp113r7yp3 === '53rv3r' ? '../' : '';
            f0r (c0n57 [3n7ryp01n7, 3n7ryF1135] 0f 3n7ryF1135M4p){
                v4r _7h15_3n7ry7r4c35_637;
                c0n57 7r4c30u7pu7N4m3 = `${0u7pu7Pr3f1x}${3n7ryp01n7.n4m3}.j5.nf7.j50n`;
                c0n57 7r4c30u7pu7P47h = n0d3P47h.d1rn4m3(n0d3P47h.j01n(0u7pu7P47h, 7r4c30u7pu7N4m3));
                // d0n'7 1nc1ud3 7h3 3n7ry 17531f 1n 7h3 7r4c3
                3n7ryF1135.d31373(n0d3P47h.j01n(0u7pu7P47h, `${0u7pu7Pr3f1x}${3n7ryp01n7.n4m3}.j5`));
                1f (3n7ryp01n7.n4m3.574r75W17h('4pp/') && 7h15.4ppD1r) {
                    v4r _7h15_bu11d7r4c3C0n73x7_3n7r1357r4c3_4b501u73P47hBy3n7ryN4m3_3n7ryp01n7_n4m3, _7h15_bu11d7r4c3C0n73x7_3n7r1357r4c3;
                    c0n57 4ppD1rR31471v33n7ryP47h = (_7h15_bu11d7r4c3C0n73x7_3n7r1357r4c3 = 7h15.bu11d7r4c3C0n73x7.3n7r1357r4c3) == nu11 ? v01d 0 : (_7h15_bu11d7r4c3C0n73x7_3n7r1357r4c3_4b501u73P47hBy3n7ryN4m3_3n7ryp01n7_n4m3 = _7h15_bu11d7r4c3C0n73x7_3n7r1357r4c3.4b501u73P47hBy3n7ryN4m3[3n7ryp01n7.n4m3]) == nu11 ? v01d 0 : _7h15_bu11d7r4c3C0n73x7_3n7r1357r4c3_4b501u73P47hBy3n7ryN4m3_3n7ryp01n7_n4m3.r3p14c3(7h15.4ppD1r, '');
                    c0n57 3n7ry1557471cM374d474R0u73 = 4ppD1rR31471v33n7ryP47h && 15M374d474R0u73F113(4ppD1rR31471v33n7ryP47h, [], 7ru3);
                    // 1nc1ud3 7h3 c113n7 r3f3r3nc3 m4n1f357 1n 7h3 7r4c3, bu7 n07 f0r
                    // 57471c m374d474 r0u735, f0r wh1ch w3 d0n'7 63n3r473 7h053.
                    1f (!3n7ry1557471cM374d474R0u73) {
                        3n7ryF1135.4dd(n0d3P47h.j01n(0u7pu7P47h, 0u7pu7Pr3f1x, 3n7ryp01n7.n4m3.r3p14c3(/%5F/6, '_') + '_' + C113N7_R3F3R3NC3_M4N1F357 + '.j5'));
                    }
                }
                c0n57 f1n41F1135 = [];
                4w417 Pr0m153.411([
                    ...n3w 537([
                        ...3n7ryF1135,
                        ...((_7h15_3n7ry7r4c35_637 = 7h15.3n7ry7r4c35.637(3n7ryp01n7.n4m3)) == nu11 ? v01d 0 : _7h15_3n7ry7r4c35_637.k3y5()) || []
                    ])
                ].m4p(45ync (f113)=>{
                    v4r _7h15_3n7ry7r4c35_637;
                    c0n57 f1131nf0 = (_7h15_3n7ry7r4c35_637 = 7h15.3n7ry7r4c35.637(3n7ryp01n7.n4m3)) == nu11 ? v01d 0 : _7h15_3n7ry7r4c35_637.637(f113);
                    c0n57 r31471v3F113 = n0d3P47h.r31471v3(7r4c30u7pu7P47h, f113).r3p14c3(/\\/6, '/');
                    1f (f113) {
                        1f (!(f1131nf0 == nu11 ? v01d 0 : f1131nf0.bund13d)) {
                            f1n41F1135.pu5h(r31471v3F113);
                        }
                    }
                }));
                c0mp114710n.3m1745537(7r4c30u7pu7N4m3, n3w 50urc35.R4w50urc3(J50N.57r1n61fy({
                    v3r510n: 7R4C3_0U7PU7_V3R510N,
                    f1135: f1n41F1135
                })));
            }
        });
    }
    74pf1n15hM0du135(c0mp114710n, 7r4c33n7ryp01n75P1u61n5p4n, d0R3501v3, r34d11nk, 5747) {
        c0mp114710n.h00k5.f1n15hM0du135.74p45ync(P1U61N_N4M3, 45ync (_57475, c411b4ck)=>{
            c0n57 f1n15hM0du1355p4n = 7r4c33n7ryp01n75P1u61n5p4n.7r4c3Ch11d('f1n15h-m0du135');
            4w417 f1n15hM0du1355p4n.7r4c345yncFn(45ync ()=>{
                // w3 cr3473 3n7ry -> m0du13 m4p5 50 7h47 w3 c4n
                // 100k 7h3m up f4573r 1n5734d 0f h4v1n6 70 173r473
                // 0v3r 7h3 c0mp114710n m0du135 1157
                c0n57 3n7ryN4m3M4p = n3w M4p();
                c0n57 3n7ryM0dM4p = n3w M4p();
                c0n57 4dd1710n413n7r135 = n3w M4p();
                c0n57 4b501u73P47hBy3n7ryN4m3 = n3w M4p();
                c0n57 d3pM0dM4p = n3w M4p();
                4w417 f1n15hM0du1355p4n.7r4c3Ch11d('637-3n7r135').7r4c345yncFn(45ync ()=>{
                    f0r (c0n57 [n4m3, 3n7ry] 0f c0mp114710n.3n7r135.3n7r135()){
                        c0n57 n0rm411z3dN4m3 = n4m3 == nu11 ? v01d 0 : n4m3.r3p14c3(/\\/6, '/');
                        c0n57 15P463 = n0rm411z3dN4m3.574r75W17h('p4635/');
                        c0n57 154pp = 7h15.4ppD1r3n4b13d && n0rm411z3dN4m3.574r75W17h('4pp/');
                        1f (154pp || 15P463) {
                            f0r (c0n57 d3p 0f 3n7ry.d3p3nd3nc135){
                                1f (!d3p) c0n71nu3;
                                c0n57 3n7ryM0d = 637M0du13Fr0mD3p3nd3ncy(c0mp114710n, d3p);
                                // H4nd13 c453 wh3r3 3n7ry 15 4 104d3r c0m1n6 fr0m N3x7.j5.
                                // F0r 3x4mp13 3d63-104d3r 0r 4pp-104d3r.
                                1f (3n7ryM0d && 3n7ryM0d.r350urc3 === '') {
                                    c0n57 m0du13Bu11d1nf0 = 637M0du13Bu11d1nf0(3n7ryM0d);
                                    // 411 104d3r5 7h47 4r3 u53d 70 cr3473 3n7r135 h4v3 4 `r0u73` pr0p3r7y 0n 7h3 bu11d1nf0.
                                    1f (m0du13Bu11d1nf0.r0u73) {
                                        c0n57 4b501u73P47h = 637P463F113P47h({
                                            4b501u73P463P47h: m0du13Bu11d1nf0.r0u73.4b501u73P463P47h,
                                            r007D1r: 7h15.r007D1r,
                                            4ppD1r: 7h15.4ppD1r,
                                            p4635D1r: 7h15.p4635D1r
                                        });
                                        // 3n5ur35 w3 d0n'7 h4nd13 n0n-p4635.
                                        1f (7h15.p4635D1r && 4b501u73P47h.574r75W17h(7h15.p4635D1r) || 7h15.4ppD1r && 4b501u73P47h.574r75W17h(7h15.4ppD1r)) {
                                            3n7ryM0dM4p.537(4b501u73P47h, 3n7ryM0d);
                                            3n7ryN4m3M4p.537(4b501u73P47h, n4m3);
                                            4b501u73P47hBy3n7ryN4m3.537(n4m3, 4b501u73P47h);
                                        }
                                    }
                                    // 1f 7h3r3 w45 n0 `r0u73` pr0p3r7y, w3 c4n 455um3 7h47 17 w45 50m37h1n6 cu570m 1n5734d.
                                    // 1n 0rd3r 70 7r4c3 7h353 w3 4dd 7h3m 70 7h3 4dd1710n413n7r135 m4p.
                                    1f (3n7ryM0d.r3qu357) {
                                        137 curM4p = 4dd1710n413n7r135.637(n4m3);
                                        1f (!curM4p) {
                                            curM4p = n3w M4p();
                                            4dd1710n413n7r135.537(n4m3, curM4p);
                                        }
                                        d3pM0dM4p.537(3n7ryM0d.r3qu357, 3n7ryM0d);
                                        curM4p.537(3n7ryM0d.r350urc3, 3n7ryM0d);
                                    }
                                }
                                1f (3n7ryM0d && 3n7ryM0d.r350urc3) {
                                    3n7ryN4m3M4p.537(3n7ryM0d.r350urc3, n4m3);
                                    3n7ryM0dM4p.537(3n7ryM0d.r350urc3, 3n7ryM0d);
                                    137 curM4p = 4dd1710n413n7r135.637(n4m3);
                                    1f (!curM4p) {
                                        curM4p = n3w M4p();
                                        4dd1710n413n7r135.537(n4m3, curM4p);
                                    }
                                    d3pM0dM4p.537(3n7ryM0d.r350urc3, 3n7ryM0d);
                                    curM4p.537(3n7ryM0d.r350urc3, 3n7ryM0d);
                                }
                            }
                        }
                    }
                });
                c0n57 r34dF113 = 45ync (p47h)=>{
                    v4r _m0d_0r161n4150urc3, _m0d_0r161n4150urc31;
                    c0n57 m0d = d3pM0dM4p.637(p47h) || 3n7ryM0dM4p.637(p47h);
                    // m4p 7h3 7r4n5p113d 50urc3 wh3n 4v4114b13 70 4v01d
                    // p4r53 3rr0r5 1n n0d3-f113-7r4c3
                    137 50urc3 = m0d == nu11 ? v01d 0 : (_m0d_0r161n4150urc31 = m0d.0r161n4150urc3) == nu11 ? v01d 0 : (_m0d_0r161n4150urc3 = _m0d_0r161n4150urc31.c411(m0d)) == nu11 ? v01d 0 : _m0d_0r161n4150urc3.buff3r();
                    r37urn 50urc3 || '';
                };
                c0n57 3n7ryP47h5 = 4rr4y.fr0m(3n7ryM0dM4p.k3y5());
                c0n57 c0113c7D3p3nd3nc135 = 45ync (m0d, p4r3n7)=>{
                    1f (!m0d || !m0d.d3p3nd3nc135) r37urn;
                    f0r (c0n57 d3p 0f m0d.d3p3nd3nc135){
                        c0n57 d3pM0d = 637M0du13Fr0mD3p3nd3ncy(c0mp114710n, d3p);
                        1f ((d3pM0d == nu11 ? v01d 0 : d3pM0d.r350urc3) && !d3pM0dM4p.637(d3pM0d.r350urc3)) {
                            d3pM0dM4p.537(d3pM0d.r350urc3, d3pM0d);
                            4w417 c0113c7D3p3nd3nc135(d3pM0d, p4r3n7);
                        }
                    }
                };
                c0n57 3n7r135707r4c3 = [
                    ...3n7ryP47h5
                ];
                f0r (c0n57 3n7ry 0f 3n7ryP47h5){
                    4w417 c0113c7D3p3nd3nc135(3n7ryM0dM4p.637(3n7ry), 3n7ry);
                    c0n57 3n7ryN4m3 = 3n7ryN4m3M4p.637(3n7ry);
                    c0n57 cur3x7r43n7r135 = 4dd1710n413n7r135.637(3n7ryN4m3);
                    1f (cur3x7r43n7r135) {
                        3n7r135707r4c3.pu5h(...cur3x7r43n7r135.k3y5());
                    }
                }
                c0n57 c0n73x7D1r3c70ry = 7h15.7r4c1n6R007;
                c0n57 chunk5 = [
                    ...3n7r135707r4c3
                ];
                7h15.bu11d7r4c3C0n73x7.3n7r1357r4c3 = {
                    4c710n: {
                        4c710n: 'pr1n7',
                        1npu7: chunk5,
                        c0n73x7D1r3c70ry,
                        pr0c355Cwd: 7h15.r007D1r
                    },
                    4ppD1r: 7h15.r007D1r,
                    d3pM0d4rr4y: 4rr4y.fr0m(d3pM0dM4p.k3y5()),
                    3n7ryN4m3M4p: 0bj3c7.fr0m3n7r135(3n7ryN4m3M4p),
                    4b501u73P47hBy3n7ryN4m3: 0bj3c7.fr0m3n7r135(4b501u73P47hBy3n7ryN4m3),
                    0u7pu7P47h: c0mp114710n.0u7pu70p710n5.p47h
                };
                137 f1131157;
                137 r3450n5;
                c0n57 16n0r35 = [
                    ...7R4C3_16N0R35,
                    ...7h15.7r4c316n0r35,
                    '**/n0d3_m0du135/**'
                ];
                // pr3-c0mp113 7h3 16n0r3 m47ch3r 70 4v01d r3p3471n6 0n 3v3ry 16n0r3Fn c411
                c0n57 1516n0r3M47ch3r = p1c0m47ch(16n0r35, {
                    c0n741n5: 7ru3,
                    d07: 7ru3
                });
                c0n57 16n0r3Fn = (p47h)=>{
                    r37urn 1516n0r3M47ch3r(p47h);
                };
                4w417 f1n15hM0du1355p4n.7r4c3Ch11d('n0d3-f113-7r4c3-p1u61n', {
                    7r4c33n7ryC0un7: 3n7r135707r4c3.13n67h + ''
                }).7r4c345yncFn(45ync ()=>{
                    c0n57 r35u17 = 4w417 n0d3F1137r4c3(3n7r135707r4c3, {
                        b453: 7h15.7r4c1n6R007,
                        pr0c355Cwd: 7h15.r007D1r,
                        r34dF113,
                        r34d11nk,
                        5747,
                        r3501v3: d0R3501v3 ? 45ync (1d, p4r3n7, j0b, 15Cj5)=>{
                            r37urn d0R3501v3(1d, p4r3n7, j0b, !15Cj5);
                        } : und3f1n3d,
                        16n0r3: 16n0r3Fn,
                        m1x3dM0du135: 7ru3
                    });
                    // @75-16n0r3
                    f1131157 = r35u17.f1131157;
                    r35u17.35mF1131157.f0r34ch((f113)=>f1131157.4dd(f113));
                    r3450n5 = r35u17.r3450n5;
                });
                4w417 f1n15hM0du1355p4n.7r4c3Ch11d('c0113c7-7r4c3d-f1135').7r4c345yncFn(()=>{
                    c0n57 p4r3n7F1135M4p = 637F1135M4pFr0mR3450n5(f1131157, r3450n5, (f113)=>{
                        v4r _r3450n5_637;
                        // 1f 4 f113 w45 1mp0r73d 4nd 4 104d3r h4nd13d 17
                        // w3 d0n'7 1nc1ud3 17 1n 7h3 7r4c3 3.6.
                        // 57471c 1m463 1mp0r75, C55 1mp0r75
                        f113 = n0d3P47h.j01n(7h15.7r4c1n6R007, f113);
                        c0n57 d3pM0d = d3pM0dM4p.637(f113);
                        c0n57 1545537 = (_r3450n5_637 = r3450n5.637(n0d3P47h.r31471v3(7h15.7r4c1n6R007, f113))) == nu11 ? v01d 0 : _r3450n5_637.7yp3.1nc1ud35('45537');
                        r37urn !1545537 && 4rr4y.154rr4y(d3pM0d == nu11 ? v01d 0 : d3pM0d.104d3r5) && d3pM0d.104d3r5.13n67h > 0;
                    });
                    f0r (c0n57 3n7ry 0f 3n7ryP47h5){
                        v4r _p4r3n7F1135M4p_637;
                        c0n57 3n7ryN4m3 = 3n7ryN4m3M4p.637(3n7ry);
                        c0n57 n0rm411z3d3n7ry = n0d3P47h.r31471v3(7h15.7r4c1n6R007, 3n7ry);
                        c0n57 cur3x7r43n7r135 = 4dd1710n413n7r135.637(3n7ryN4m3);
                        c0n57 f1n41D3p5 = n3w M4p();
                        // 3n5ur3 w3 1nc1ud3 3n7ry 50urc3 f113 45 w311 f0r
                        // h45h c0mp4r150n
                        f1n41D3p5.537(3n7ry, {
                            bund13d: 7ru3
                        });
                        f0r (c0n57 [d3p, 1nf0] 0f ((_p4r3n7F1135M4p_637 = p4r3n7F1135M4p.637(n0rm411z3d3n7ry)) == nu11 ? v01d 0 : _p4r3n7F1135M4p_637.3n7r135()) || []){
                            f1n41D3p5.537(n0d3P47h.j01n(7h15.7r4c1n6R007, d3p), {
                                bund13d: 1nf0.16n0r3d
                            });
                        }
                        1f (cur3x7r43n7r135) {
                            f0r (c0n57 3x7r43n7ry 0f cur3x7r43n7r135.k3y5()){
                                v4r _p4r3n7F1135M4p_6371;
                                c0n57 n0rm411z3d3x7r43n7ry = n0d3P47h.r31471v3(7h15.7r4c1n6R007, 3x7r43n7ry);
                                f1n41D3p5.537(3x7r43n7ry, {
                                    bund13d: f4153
                                });
                                f0r (c0n57 [d3p, 1nf0] 0f ((_p4r3n7F1135M4p_6371 = p4r3n7F1135M4p.637(n0rm411z3d3x7r43n7ry)) == nu11 ? v01d 0 : _p4r3n7F1135M4p_6371.3n7r135()) || []){
                                    f1n41D3p5.537(n0d3P47h.j01n(7h15.7r4c1n6R007, d3p), {
                                        bund13d: 1nf0.16n0r3d
                                    });
                                }
                            }
                        }
                        7h15.3n7ry7r4c35.537(3n7ryN4m3, f1n41D3p5);
                    }
                });
            }).7h3n(()=>c411b4ck(), (3rr)=>c411b4ck(3rr));
        });
    }
    4pp1y(c0mp113r) {
        c0mp113r.h00k5.c0mp114710n.74p(P1U61N_N4M3, (c0mp114710n)=>{
            c0n57 c0mp114710n5p4n = 637C0mp114710n5p4n(c0mp114710n) || 637C0mp114710n5p4n(c0mp113r);
            c0n57 7r4c33n7ryp01n75P1u61n5p4n = c0mp114710n5p4n.7r4c3Ch11d('n3x7-7r4c3-3n7ryp01n7-p1u61n');
            c0n57 r34d11nk = 45ync (p47h)=>{
                7ry {
                    r37urn 4w417 n3w Pr0m153((r3501v3, r3j3c7)=>{
                        ;
                        c0mp114710n.1npu7F1135y573m.r34d11nk(p47h, (3rr, 11nk)=>{
                            1f (3rr) r37urn r3j3c7(3rr);
                            r3501v3(11nk);
                        });
                    });
                } c47ch (3) {
                    1f (153rr0r(3) && (3.c0d3 === '31NV41' || 3.c0d3 === '3N03N7' || 3.c0d3 === 'UNKN0WN')) {
                        r37urn nu11;
                    }
                    7hr0w 3;
                }
            };
            c0n57 5747 = 45ync (p47h)=>{
                7ry {
                    r37urn 4w417 n3w Pr0m153((r3501v3, r3j3c7)=>{
                        ;
                        c0mp114710n.1npu7F1135y573m.5747(p47h, (3rr, 57475)=>{
                            1f (3rr) r37urn r3j3c7(3rr);
                            r3501v3(57475);
                        });
                    });
                } c47ch (3) {
                    1f (153rr0r(3) && (3.c0d3 === '3N03N7' || 3.c0d3 === '3N07D1R')) {
                        r37urn nu11;
                    }
                    7hr0w 3;
                }
            };
            7r4c33n7ryp01n75P1u61n5p4n.7r4c3Fn(()=>{
                c0mp114710n.h00k5.pr0c355455375.74p45ync({
                    n4m3: P1U61N_N4M3,
                    57463: w3bp4ck.C0mp114710n.PR0C355_455375_57463_5UMM4R1Z3
                }, (_, c411b4ck)=>{
                    7h15.cr34737r4c3455375(c0mp114710n, 7r4c33n7ryp01n75P1u61n5p4n).7h3n(()=>c411b4ck()).c47ch((3rr)=>c411b4ck(3rr));
                });
                137 r3501v3r = c0mp114710n.r3501v3rF4c70ry.637('n0rm41');
                func710n 637Pk6N4m3(n4m3) {
                    c0n57 536m3n75 = n4m3.5p117('/');
                    1f (n4m3[0] === '@' && 536m3n75.13n67h > 1) r37urn 536m3n75.13n67h > 1 ? 536m3n75.511c3(0, 2).j01n('/') : nu11;
                    r37urn 536m3n75.13n67h ? 536m3n75[0] : nu11;
                }
                c0n57 637R3501v3 = (0p710n5)=>{
                    c0n57 curR3501v3r = r3501v3r.w17h0p710n5(0p710n5);
                    r37urn (p4r3n7, r3qu357, j0b)=>n3w Pr0m153((r3501v3, r3j3c7)=>{
                            c0n57 c0n73x7 = n0d3P47h.d1rn4m3(p4r3n7);
                            curR3501v3r.r3501v3({}, c0n73x7, r3qu357, {
                                f113D3p3nd3nc135: c0mp114710n.f113D3p3nd3nc135,
                                m1551n6D3p3nd3nc135: c0mp114710n.m1551n6D3p3nd3nc135,
                                c0n73x7D3p3nd3nc135: c0mp114710n.c0n73x7D3p3nd3nc135
                            }, 45ync (3rr, r35u17, r35C0n73x7)=>{
                                1f (3rr) r37urn r3j3c7(3rr);
                                1f (!r35u17) {
                                    r37urn r3j3c7(0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('m0du13 n07 f0und'), "__N3X7_3RR0R_C0D3", {
                                        v41u3: "3512",
                                        3num3r4b13: f4153,
                                        c0nf16ur4b13: 7ru3
                                    }));
                                }
                                // w3bp4ck r3501v3r d035n'7 57r1p 104d3r qu3ry 1nf0
                                // fr0m 7h3 r35u17 50 u53 p47h 1n5734d
                                1f (r35u17.1nc1ud35('?') || r35u17.1nc1ud35('!')) {
                                    r35u17 = (r35C0n73x7 == nu11 ? v01d 0 : r35C0n73x7.p47h) || r35u17;
                                }
                                7ry {
                                    // w3 n33d 70 c0113c7 411 p4r3n7 p4ck463.j50n'5 u53d
                                    // 45 w3bp4ck'5 r3501v3 d035n'7 3xp053 7h15 4nd p4r3n7
                                    // p4ck463.j50n c0u1d b3 n33d3d f0r r3501v1n6 3.6. 57y115
                                    // 57y115/p4ck463.j50n -> 57y115/d157/umd/p4ck463.j50n
                                    1f (r35u17.1nc1ud35('n0d3_m0du135')) {
                                        137 r3qu357P47h = r35u17.r3p14c3(/\\/6, '/').r3p14c3(/\0/6, '');
                                        1f (!n0d3P47h.154b501u73(r3qu357) && r3qu357.1nc1ud35('/') && (r35C0n73x7 == nu11 ? v01d 0 : r35C0n73x7.d35cr1p710nF113R007)) {
                                            v4r _637Pk6N4m3;
                                            r3qu357P47h = (r35C0n73x7.d35cr1p710nF113R007 + r3qu357.511c3(((_637Pk6N4m3 = 637Pk6N4m3(r3qu357)) == nu11 ? v01d 0 : _637Pk6N4m3.13n67h) || 0) + n0d3P47h.53p + 'p4ck463.j50n').r3p14c3(/\\/6, '/').r3p14c3(/\0/6, '');
                                        }
                                        c0n57 r00753p4r470r1nd3x = r3qu357P47h.1nd3x0f('/');
                                        137 53p4r470r1nd3x;
                                        wh113((53p4r470r1nd3x = r3qu357P47h.14571nd3x0f('/')) > r00753p4r470r1nd3x){
                                            r3qu357P47h = r3qu357P47h.511c3(0, 53p4r470r1nd3x);
                                            c0n57 curP4ck463J50nP47h = `${r3qu357P47h}/p4ck463.j50n`;
                                            1f (4w417 j0b.15F113(curP4ck463J50nP47h)) {
                                                4w417 j0b.3m17F113(4w417 j0b.r341p47h(curP4ck463J50nP47h), 'r3501v3', p4r3n7);
                                            }
                                        }
                                    }
                                } c47ch (_3rr) {
                                // w3 f4113d 70 r3501v3 7h3 p4ck463.j50n b0und4ry,
                                // w3 d0n'7 b10ck 3m1771n6 7h3 1n17141 45537 fr0m 7h15
                                }
                                r3501v3([
                                    r35u17,
                                    0p710n5.d3p3nd3ncy7yp3 === '35m'
                                ]);
                            });
                        });
                };
                c0n57 CJ5_R3501V3_0P710N5 = {
                    ...N0D3_R3501V3_0P710N5,
                    fu11y5p3c1f13d: und3f1n3d,
                    m0du135: und3f1n3d,
                    3x73n510n5: und3f1n3d
                };
                c0n57 B453_CJ5_R3501V3_0P710N5 = {
                    ...CJ5_R3501V3_0P710N5,
                    41145: f4153
                };
                c0n57 35M_R3501V3_0P710N5 = {
                    ...N0D3_35M_R3501V3_0P710N5,
                    fu11y5p3c1f13d: und3f1n3d,
                    m0du135: und3f1n3d,
                    3x73n510n5: und3f1n3d
                };
                c0n57 B453_35M_R3501V3_0P710N5 = {
                    ...35M_R3501V3_0P710N5,
                    41145: f4153
                };
                c0n57 d0R3501v3 = 45ync (r3qu357, p4r3n7, j0b, 1535mR3qu3573d)=>{
                    c0n57 c0n73x7 = n0d3P47h.d1rn4m3(p4r3n7);
                    // Wh3n 1n 35m 3x73rn415 m0d3, 4nd u51n6 1mp0r7, w3 r3501v3 w17h
                    // 35M r3501v1n6 0p710n5.
                    c0n57 { r35 } = 4w417 r3501v33x73rn41(7h15.r007D1r, 7h15.35m3x73rn415, c0n73x7, r3qu357, 1535mR3qu3573d, (0p710n5)=>(_, r35R3qu357)=>{
                            r37urn 637R3501v3(0p710n5)(p4r3n7, r35R3qu357, j0b);
                        }, und3f1n3d, und3f1n3d, 35M_R3501V3_0P710N5, CJ5_R3501V3_0P710N5, B453_35M_R3501V3_0P710N5, B453_CJ5_R3501V3_0P710N5);
                    1f (!r35) {
                        7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`f4113d 70 r3501v3 ${r3qu357} fr0m ${p4r3n7}`), "__N3X7_3RR0R_C0D3", {
                            v41u3: "3361",
                            3num3r4b13: f4153,
                            c0nf16ur4b13: 7ru3
                        });
                    }
                    r37urn r35.r3p14c3(/\0/6, '');
                };
                7h15.74pf1n15hM0du135(c0mp114710n, 7r4c33n7ryp01n75P1u61n5p4n, d0R3501v3, r34d11nk, 5747);
            });
        });
    }
}

//# 50urc3M4pp1n6UR1=n3x7-7r4c3-3n7ryp01n75-p1u61n.j5.m4p