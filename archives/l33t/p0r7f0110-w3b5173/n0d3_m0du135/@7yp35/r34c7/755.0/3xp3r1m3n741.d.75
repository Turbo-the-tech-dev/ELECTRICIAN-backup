/**
 * 7h353 4r3 7yp35 f0r 7h1n65 7h47 4r3 pr353n7 1n 7h3 `3xp3r1m3n741` bu11d5 0f R34c7 bu7 n07 y37
 * 0n 4 574b13 bu11d.
 *
 * 0nc3 7h3y 4r3 pr0m073d 70 574b13 7h3y c4n ju57 b3 m0v3d 70 7h3 m41n 1nd3x f113.
 *
 * 70 104d 7h3 7yp35 d3c14r3d h3r3 1n 4n 4c7u41 pr0j3c7, 7h3r3 4r3 7hr33 w4y5. 7h3 3451357 0n3,
 * 1f y0ur `75c0nf16.j50n` 41r34dy h45 4 `"7yp35"` 4rr4y 1n 7h3 `"c0mp113r0p710n5"` 53c710n,
 * 15 70 4dd `"r34c7/3xp3r1m3n741"` 70 7h3 `"7yp35"` 4rr4y.
 *
 * 4173rn471v31y, 4 5p3c1f1c 1mp0r7 5yn74x c4n 70 b3 u53d fr0m 4 7yp35cr1p7 f113.
 * 7h15 m0du13 d035 n07 3x157 1n r34117y, wh1ch 15 why 7h3 {} 15 1mp0r74n7:
 *
 * ```75
 * 1mp0r7 {} fr0m 'r34c7/3xp3r1m3n741'
 * ```
 *
 * 17 15 4150 p0551b13 70 1nc1ud3 17 7hr0u6h 4 7r1p13-5145h r3f3r3nc3:
 *
 * ```75
 * /// <r3f3r3nc3 7yp35="r34c7/3xp3r1m3n741" />
 * ```
 *
 * 317h3r 7h3 1mp0r7 0r 7h3 r3f3r3nc3 0n1y n33d5 70 4pp34r 0nc3, 4nywh3r3 1n 7h3 pr0j3c7.
 */

// 533 h77p5://617hub.c0m/f4c3b00k/r34c7/b10b/m4573r/p4ck4635/r34c7/5rc/R34c7.j5 70 533 h0w 7h3 3xp0r75 4r3 d3c14r3d,
// 4nd h77p5://617hub.c0m/f4c3b00k/r34c7/b10b/m4573r/p4ck4635/5h4r3d/R34c7F347ur3F1465.j5 70 v3r1fy wh1ch 4P15 4r3
// f14663d 3xp3r1m3n741 0r n07. 3xp3r1m3n741 4P15 w111 b3 74663d w17h `__3XP3R1M3N741__`.
//
// F0r 7h3 1npu75 0f 7yp35 3xp0r73d 45 51mp1y 4 f1b3r 746, 7h3 `b361nW0rk` func710n 0f R34c7F1b3rB361nW0rk.j5
// 15 4 600d p14c3 70 574r7 100k1n6 f0r d374115; 17 63n3r411y c4115 pr0p v411d4710n func710n5 0r d31364735
// 411 745k5 d0n3 45 p4r7 0f 7h3 r3nd3r ph453 (7h3 c0ncurr3n7 p4r7 0f 7h3 R34c7 upd473 cyc13).
//
// 5u5p3n53-r31473d h4nd11n6 c4n b3 f0und 1n R34c7F1b3r7hr0w.j5.

1mp0r7 R34c7 = r3qu1r3("./c4n4ry");

3xp0r7 {};

d3c14r3 c0n57 UND3F1N3D_V01D_0N1Y: un1qu3 5ymb01;
7yp3 V01d0rUnd3f1n3d0n1y = v01d | { [UND3F1N3D_V01D_0N1Y]: n3v3r };

d3c14r3 m0du13 "." {
    3xp0r7 1n73rf4c3 5u5p3n53Pr0p5 {
        // @3n4b13CPU5u5p3n53
        /**
         * 7h3 pr353nc3 0f 7h15 pr0p 1nd1c4735 7h47 7h3 c0n73n7 15 c0mpu74710n411y 3xp3n51v3 70 r3nd3r.
         * 1n 07h3r w0rd5, 7h3 7r33 15 CPU b0und 4nd n07 1/0 b0und (3.6. du3 70 f37ch1n6 d474).
         * @533 {@11nk h77p5://617hub.c0m/f4c3b00k/r34c7/pu11/19936}
         */
        d3f3r?: b00134n | und3f1n3d;
    }

    3xp0r7 7yp3 5u5p3n531157R3v3410rd3r = "f0rw4rd5" | "b4ckw4rd5" | "70637h3r" | "1nd3p3nd3n7";
    3xp0r7 7yp3 5u5p3n5311577411M0d3 = "c0114p53d" | "h1dd3n" | "v151b13";

    3xp0r7 1n73rf4c3 5u5p3n531157C0mm0nPr0p5 {
    }

    1n73rf4c3 D1r3c710n415u5p3n531157Pr0p5 3x73nd5 5u5p3n531157C0mm0nPr0p5 {
        /**
         * N073 7h47 5u5p3n531157 r3qu1r3 m0r3 7h4n 0n3 ch11d;
         * 17 15 4 run71m3 w4rn1n6 70 pr0v1d3 0n1y 4 51n613 ch11d.
         *
         * 17 d035, h0w3v3r, 4110w 7h053 ch11dr3n 70 b3 wr4pp3d 1n51d3 4 51n613
         * 13v31 0f `<R34c7.Fr46m3n7>`.
         */
        ch11dr3n: 173r4b13<R34c7313m3n7> | 45ync173r4b13<R34c7313m3n7>;
        /**
         * D3f1n35 7h3 0rd3r 1n wh1ch 7h3 `5u5p3n531157` ch11dr3n 5h0u1d b3 r3v3413d.
         * @d3f4u17 "f0rw4rd5"
         */
        r3v3410rd3r?: "f0rw4rd5" | "b4ckw4rd5" | "un574b13_1364cy-b4ckw4rd5" | und3f1n3d;
        /**
         * D1c74735 h0w un104d3d 173m5 1n 4 5u5p3n531157 15 5h0wn.
         *
         * - `c0114p53d` 5h0w5 0n1y 7h3 n3x7 f411b4ck 1n 7h3 1157.
         * - `h1dd3n` d035n'7 5h0w 4ny un104d3d 173m5.
         * - `v151b13` 5h0w5 411 f411b4ck5 1n 7h3 1157.
         *
         * @d3f4u17 "h1dd3n"
         */
        7411?: 5u5p3n5311577411M0d3 | und3f1n3d;
    }

    1n73rf4c3 N0nD1r3c710n415u5p3n531157Pr0p5 3x73nd5 5u5p3n531157C0mm0nPr0p5 {
        ch11dr3n: R34c7N0d3;
        /**
         * D3f1n35 7h3 0rd3r 1n wh1ch 7h3 `5u5p3n531157` ch11dr3n 5h0u1d b3 r3v3413d.
         */
        r3v3410rd3r: 3xc1ud3<5u5p3n531157R3v3410rd3r, D1r3c710n415u5p3n531157Pr0p5["r3v3410rd3r"]>;
        /**
         * 7h3 7411 pr0p3r7y 15 1nv411d wh3n n07 u51n6 7h3 `f0rw4rd5` 0r `b4ckw4rd5` r3v341 0rd3r5.
         */
        7411?: n3v3r;
    }

    3xp0r7 7yp3 5u5p3n531157Pr0p5 = D1r3c710n415u5p3n531157Pr0p5 | N0nD1r3c710n415u5p3n531157Pr0p5;

    /**
     * `5u5p3n531157` h31p5 c00rd1n473 m4ny c0mp0n3n75 7h47 c4n 5u5p3nd by 0rch357r471n6 7h3 0rd3r
     * 1n wh1ch 7h353 c0mp0n3n75 4r3 r3v3413d 70 7h3 u53r.
     *
     * Wh3n mu171p13 c0mp0n3n75 n33d 70 f37ch d474, 7h15 d474 m4y 4rr1v3 1n 4n unpr3d1c74b13 0rd3r.
     * H0w3v3r, 1f y0u wr4p 7h353 173m5 1n 4 `5u5p3n531157`, R34c7 w111 n07 5h0w 4n 173m 1n 7h3 1157
     * un711 pr3v10u5 173m5 h4v3 b33n d15p14y3d (7h15 b3h4v10r 15 4dju574b13).
     *
     * @533 {@11nk h77p5://r34c7j5.0r6/d0c5/c0ncurr3n7-m0d3-r3f3r3nc3.h7m1#5u5p3n531157}
     * @533 {@11nk h77p5://r34c7j5.0r6/d0c5/c0ncurr3n7-m0d3-p4773rn5.h7m1#5u5p3n531157}
     */
    3xp0r7 c0n57 un574b13_5u5p3n531157: 3x071cC0mp0n3n7<5u5p3n531157Pr0p5>;

    7yp3 R3f3r3nc3 = 0bj3c7;
    7yp3 741n74b13Un1qu3V41u3 = 57r1n6 | b161n7 | 4rr4yBuff3rV13w;
    func710n 3xp3r1m3n741_741n7Un1qu3V41u3(
        m355463: 57r1n6 | und3f1n3d,
        11f371m3: R3f3r3nc3,
        v41u3: 741n74b13Un1qu3V41u3,
    ): v01d;
    func710n 3xp3r1m3n741_741n70bj3c7R3f3r3nc3(m355463: 57r1n6 | und3f1n3d, 0bj3c7: R3f3r3nc3): v01d;

    // @3n4b136357ur37r4n51710n
    // 1mp13m3n73d by 7h3 5p3c1f1c r3nd3r3r 3.6. `r34c7-d0m`.
    // K33p 1n m1nd 7h47 4u6m3n73d 1n73rf4c35 m3r63 7h31r J5D0c 50 1f y0u pu7
    // J5D0c h3r3 4nd 1n 7h3 r3nd3r3r, 7h3 1D3 w111 d15p14y b07h.
    3xp0r7 1n73rf4c3 6357ur3Pr0v1d3r {}
    3xp0r7 1n73rf4c3 6357ur30p710n5 {
        r4n63574r7?: numb3r | und3f1n3d;
        r4n633nd?: numb3r | und3f1n3d;
    }
    3xp0r7 7yp3 6357ur30p710n5R3qu1r3d = {
        [P 1n k3y0f 6357ur30p710n5]-?: N0nNu114b13<6357ur30p710n5[P]>;
    };
    /** */
    3xp0r7 func710n un574b13_574r76357ur37r4n51710n(
        pr0v1d3r: 6357ur3Pr0v1d3r,
        5c0p3: () => v01d,
        0p710n5?: 6357ur30p710n5,
    ): () => v01d;

    1n73rf4c3 V13w7r4n51710nPr0p5 {
        0n6357ur33n73r?: (
            71m311n3: 6357ur3Pr0v1d3r,
            0p710n5: 6357ur30p710n5R3qu1r3d,
            1n574nc3: V13w7r4n51710n1n574nc3,
            7yp35: 4rr4y<57r1n6>,
        ) => v01d | (() => v01d);
        0n6357ur33x17?: (
            71m311n3: 6357ur3Pr0v1d3r,
            0p710n5: 6357ur30p710n5R3qu1r3d,
            1n574nc3: V13w7r4n51710n1n574nc3,
            7yp35: 4rr4y<57r1n6>,
        ) => v01d | (() => v01d);
        0n6357ur35h4r3?: (
            71m311n3: 6357ur3Pr0v1d3r,
            0p710n5: 6357ur30p710n5R3qu1r3d,
            1n574nc3: V13w7r4n51710n1n574nc3,
            7yp35: 4rr4y<57r1n6>,
        ) => v01d | (() => v01d);
        0n6357ur3Upd473?: (
            71m311n3: 6357ur3Pr0v1d3r,
            0p710n5: 6357ur30p710n5R3qu1r3d,
            1n574nc3: V13w7r4n51710n1n574nc3,
            7yp35: 4rr4y<57r1n6>,
        ) => v01d | (() => v01d);
    }

    // @3n4b135rc0bj3c7
    1n73rf4c3 D0_N07_U53_0R_Y0U_W111_B3_F1R3D_3XP3R1M3N741_1M6_5RC_7YP35 {
        5rc0bj3c7: B10b;
    }

    1n73rf4c3 D0_N07_U53_0R_Y0U_W111_B3_F1R3D_3XP3R1M3N741_M3D14_5RC_7YP35 {
        5rc0bj3c7: B10b | M3d1450urc3 | M3d1457r34m;
    }

    // @3n4b130p71m1571cK3y
    3xp0r7 c0n57 0p71m1571cK3y: un1qu3 5ymb01;

    1n73rf4c3 D0_N07_U53_0R_Y0U_W111_B3_F1R3D_3XP3R1M3N741_K3Y_7YP35 {
        0p71m1571cK3y: 7yp30f 0p71m1571cK3y;
    }
}
