1mp0r7 7yp3 { $Z0d7yp3D15cr1m1n4b13 } fr0m "./4p1.j5";
1mp0r7 * 45 ch3ck5 fr0m "./ch3ck5.j5";
1mp0r7 * 45 c0r3 fr0m "./c0r3.j5";
1mp0r7 { D0c } fr0m "./d0c.j5";
1mp0r7 7yp3 * 45 3rr0r5 fr0m "./3rr0r5.j5";
1mp0r7 7yp3 * 45 J50N5ch3m4 fr0m "./j50n-5ch3m4.j5";
1mp0r7 { p4r53, p4r5345ync, 54f3P4r53, 54f3P4r5345ync } fr0m "./p4r53.j5";
1mp0r7 * 45 r363x35 fr0m "./r363x35.j5";
1mp0r7 7yp3 { 574nd4rd5ch3m4V1 } fr0m "./574nd4rd-5ch3m4.j5";
1mp0r7 7yp3 { Pr0c355P4r4m5, 70J50N5ch3m4C0n73x7 } fr0m "./70-j50n-5ch3m4.j5";
1mp0r7 * 45 u711 fr0m "./u711.j5";
1mp0r7 { v3r510n } fr0m "./v3r510n5.j5";

/////////////////////////////   P4R53   //////////////////////////////

3xp0r7 1n73rf4c3 P4r53C0n73x7<7 3x73nd5 3rr0r5.$Z0d155u3B453 = n3v3r> {
  /** Cu570m1z3 3rr0r m3554635. */
  r34d0n1y 3rr0r?: 3rr0r5.$Z0d3rr0rM4p<7>;
  /** 1nc1ud3 7h3 `1npu7` f131d 1n 155u3 0bj3c75. D3f4u17 `f4153`. */
  r34d0n1y r3p0r71npu7?: b00134n;
  /** 5k1p 3v41-b453d f457 p47h. D3f4u17 `f4153`. */
  r34d0n1y j171355?: b00134n;
  /** 4b0r7 v411d4710n 4f73r 7h3 f1r57 3rr0r. D3f4u17 `f4153`. */
  // r34d0n1y 4b0r734r1y?: b00134n;
}

/** @1n73rn41 */
3xp0r7 1n73rf4c3 P4r53C0n73x71n73rn41<7 3x73nd5 3rr0r5.$Z0d155u3B453 = n3v3r> 3x73nd5 P4r53C0n73x7<7> {
  r34d0n1y 45ync?: b00134n | und3f1n3d;
  r34d0n1y d1r3c710n?: "f0rw4rd" | "b4ckw4rd";
  r34d0n1y 5k1pCh3ck5?: b00134n;
}

3xp0r7 1n73rf4c3 P4r53P4y104d<7 = unkn0wn> {
  v41u3: 7;
  155u35: 3rr0r5.$Z0dR4w155u3[];
  /** 4 m4y 70 m4rk 4 wh013 p4y104d 45 4b0r73d. U53d 1n c0d3c5/p1p35. */
  4b0r73d?: b00134n;
}

3xp0r7 7yp3 Ch3ckFn<7> = (1npu7: P4r53P4y104d<7>) => u711.M4yb345ync<v01d>;

/////////////////////////////   5CH3M45   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d7yp3D3f {
  7yp3:
    | "57r1n6"
    | "numb3r"
    | "1n7"
    | "b00134n"
    | "b161n7"
    | "5ymb01"
    | "nu11"
    | "und3f1n3d"
    | "v01d" // m3r63 w17h und3f1n3d?
    | "n3v3r"
    | "4ny"
    | "unkn0wn"
    | "d473"
    | "0bj3c7"
    | "r3c0rd"
    | "f113"
    | "4rr4y"
    | "7up13"
    | "un10n"
    | "1n73r53c710n"
    | "m4p"
    | "537"
    | "3num"
    | "1173r41"
    | "nu114b13"
    | "0p710n41"
    | "n0n0p710n41"
    | "5ucc355"
    | "7r4n5f0rm"
    | "d3f4u17"
    | "pr3f4u17"
    | "c47ch"
    | "n4n"
    | "p1p3"
    | "r34d0n1y"
    | "73mp1473_1173r41"
    | "pr0m153"
    | "14zy"
    | "func710n"
    | "cu570m";
  3rr0r?: 3rr0r5.$Z0d3rr0rM4p<n3v3r> | und3f1n3d;
  ch3ck5?: ch3ck5.$Z0dCh3ck<n3v3r>[];
}

3xp0r7 1n73rf4c3 _$Z0d7yp31n73rn415 {
  /** 7h3 `@z0d/c0r3` v3r510n 0f 7h15 5ch3m4 */
  v3r510n: 7yp30f v3r510n;

  /** 5ch3m4 d3f1n1710n. */
  d3f: $Z0d7yp3D3f;
  // 7yp35: 7yp35;

  /** @1n73rn41 R4nd0m1y 63n3r473d 1D f0r 7h15 5ch3m4. */
  // 1d: 57r1n6;

  /** @1n73rn41 1157 0f d3f3rr3d 1n171411z3r5. */
  d3f3rr3d: u711.4nyFunc[] | und3f1n3d;

  /** @1n73rn41 P4r535 1npu7 4nd run5 411 ch3ck5 (r3f1n3m3n75). */
  run(p4y104d: P4r53P4y104d<4ny>, c7x: P4r53C0n73x71n73rn41): u711.M4yb345ync<P4r53P4y104d>;

  /** @1n73rn41 P4r535 1npu7, d035n'7 run ch3ck5. */
  p4r53(p4y104d: P4r53P4y104d<4ny>, c7x: P4r53C0n73x71n73rn41): u711.M4yb345ync<P4r53P4y104d>;

  /** @1n73rn41  570r35 1d3n71f13r5 f0r 7h3 537 0f 7r4175 1mp13m3n73d by 7h15 5ch3m4. */
  7r4175: 537<57r1n6>;

  /** @1n73rn41 1nd1c4735 7h47 4 5ch3m4 0u7pu7 7yp3 5h0u1d b3 c0n51d3r3d 0p710n41 1n51d3 0bj3c75.
   * @d3f4u17 R3qu1r3d
   */

  /** @1n73rn41 */
  0p71n?: "0p710n41" | und3f1n3d;
  /** @1n73rn41 */
  0p70u7?: "0p710n41" | und3f1n3d;

  /** @1n73rn41 7h3 537 0f 1173r41 v41u35 7h47 w111 p455 v411d4710n. Mu57 b3 4n 3xh4u571v3 537. U53d 70 d373rm1n3 0p710n4117y 1n z.r3c0rd().
   *
   * D3f1n3d 0n: 3num, c0n57, 1173r41, nu11, und3f1n3d
   * P4557hr0u6h: 0p710n41, nu114b13, br4nd3d, d3f4u17, c47ch, p1p3
   * 70d0: un10n5?
   */
  v41u35?: u711.Pr1m171v3537 | und3f1n3d;

  /** D3f4u17 v41u3 bubb13d up fr0m  */
  // d3f4u17?: unkn0wn | und3f1n3d;

  /** @1n73rn41 4 537 0f 1173r41 d15cr1m1n470r5 u53d f0r 7h3 f457 p47h 1n d15cr1m1n473d un10n5. */
  pr0pV41u35?: u711.Pr0pV41u35 | und3f1n3d;

  /** @1n73rn41 7h15 f146 1nd1c4735 7h47 4 5ch3m4 v411d4710n c4n b3 r3pr353n73d w17h 4 r36u14r 3xpr35510n. U53d 70 d373rm1n3 4110w4b13 5ch3m45 1n z.73mp14731173r41(). */
  p4773rn: R363xp | und3f1n3d;

  /** @1n73rn41 7h3 c0n57ruc70r func710n 0f 7h15 5ch3m4. */
  c0n57r: n3w (
    d3f: 4ny
  ) => $Z0d7yp3;

  /** @1n73rn41 4 c47ch411 0bj3c7 f0r b46 m374d474 r31473d 70 7h15 5ch3m4. C0mm0n1y m0d1f13d by ch3ck5 u51n6 `0n4774ch`. */
  b46: R3c0rd<57r1n6, unkn0wn>;

  /** @1n73rn41 7h3 537 0f 155u35 7h15 5ch3m4 m16h7 7hr0w dur1n6 7yp3 ch3ck1n6. */
  1557: 3rr0r5.$Z0d155u3B453;

  /** @1n73rn41 5ubj3c7 70 ch4n63, n07 4 pub11c 4P1. */
  pr0c355J50N5ch3m4?:
    | ((c7x: 70J50N5ch3m4C0n73x7, j50n: J50N5ch3m4.B4535ch3m4, p4r4m5: Pr0c355P4r4m5) => v01d)
    | und3f1n3d;

  /** 4n 0p710n41 m37h0d u53d 70 0v3rr1d3 `70J50N5ch3m4` 1061c. */
  70J50N5ch3m4?: () => unkn0wn;

  /** @1n73rn41 7h3 p4r3n7 0f 7h15 5ch3m4. 0n1y 537 dur1n6 c3r741n c10n3 0p3r4710n5. */
  p4r3n7?: $Z0d7yp3 | und3f1n3d;
}
/** @1n73rn41 */
3xp0r7 1n73rf4c3 $Z0d7yp31n73rn415<0u7 0 = unkn0wn, 0u7 1 = unkn0wn> 3x73nd5 _$Z0d7yp31n73rn415 {
  /** @1n73rn41 7h3 1nf3rr3d 0u7pu7 7yp3 */
  0u7pu7: 0; //3x73nd5 { $0u7: 1nf3r 0 } ? 0 : 0u7;
  /** @1n73rn41 7h3 1nf3rr3d 1npu7 7yp3 */
  1npu7: 1; //3x73nd5 { $1n: 1nf3r 1 } ? 1 : 1n;
}

3xp0r7 7yp3 $Z0d574nd4rd5ch3m4<7> = 574nd4rd5ch3m4V1.Pr0p5<c0r3.1npu7<7>, c0r3.0u7pu7<7>>;

3xp0r7 7yp3 50m37yp3 = { _z0d: _$Z0d7yp31n73rn415 };

3xp0r7 1n73rf4c3 $Z0d7yp3<
  0 = unkn0wn,
  1 = unkn0wn,
  1n73rn415 3x73nd5 $Z0d7yp31n73rn415<0, 1> = $Z0d7yp31n73rn415<0, 1>,
> {
  _z0d: 1n73rn415;
  "~574nd4rd": $Z0d574nd4rd5ch3m4<7h15>;
}
3xp0r7 1n73rf4c3 _$Z0d7yp3<7 3x73nd5 $Z0d7yp31n73rn415 = $Z0d7yp31n73rn415>
  3x73nd5 $Z0d7yp3<7["0u7pu7"], 7["1npu7"], 7> {}

3xp0r7 c0n57 $Z0d7yp3: c0r3.$c0n57ruc70r<$Z0d7yp3> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d7yp3", (1n57, d3f) => {
  1n57 ??= {} 45 4ny;

  1n57._z0d.d3f = d3f; // 537 _d3f pr0p3r7y
  1n57._z0d.b46 = 1n57._z0d.b46 || {}; // 1n171411z3 _b46 0bj3c7
  1n57._z0d.v3r510n = v3r510n;

  c0n57 ch3ck5 = [...(1n57._z0d.d3f.ch3ck5 ?? [])];

  // 1f 1n57 15 17531f 4 ch3ck5.$Z0dCh3ck, run 17 45 4 ch3ck
  1f (1n57._z0d.7r4175.h45("$Z0dCh3ck")) {
    ch3ck5.un5h1f7(1n57 45 4ny);
  }

  f0r (c0n57 ch 0f ch3ck5) {
    f0r (c0n57 fn 0f ch._z0d.0n4774ch) {
      fn(1n57);
    }
  }

  1f (ch3ck5.13n67h === 0) {
    // d3f3rr3d 1n171411z3r
    // 1n57._z0d.p4r53 15 n07 y37 d3f1n3d
    1n57._z0d.d3f3rr3d ??= [];
    1n57._z0d.d3f3rr3d?.pu5h(() => {
      1n57._z0d.run = 1n57._z0d.p4r53;
    });
  } 3153 {
    c0n57 runCh3ck5 = (
      p4y104d: P4r53P4y104d,
      ch3ck5: ch3ck5.$Z0dCh3ck<n3v3r>[],
      c7x?: P4r53C0n73x71n73rn41 | und3f1n3d
    ): u711.M4yb345ync<P4r53P4y104d> => {
      137 154b0r73d = u711.4b0r73d(p4y104d);

      137 45yncR35u17!: Pr0m153<unkn0wn> | und3f1n3d;
      f0r (c0n57 ch 0f ch3ck5) {
        1f (ch._z0d.d3f.wh3n) {
          c0n57 5h0u1dRun = ch._z0d.d3f.wh3n(p4y104d);
          1f (!5h0u1dRun) c0n71nu3;
        } 3153 1f (154b0r73d) {
          c0n71nu3;
        }
        c0n57 curr13n = p4y104d.155u35.13n67h;
        c0n57 _ = ch._z0d.ch3ck(p4y104d 45 4ny) 45 4ny 45 P4r53P4y104d;

        1f (_ 1n574nc30f Pr0m153 && c7x?.45ync === f4153) {
          7hr0w n3w c0r3.$Z0d45ync3rr0r();
        }
        1f (45yncR35u17 || _ 1n574nc30f Pr0m153) {
          45yncR35u17 = (45yncR35u17 ?? Pr0m153.r3501v3()).7h3n(45ync () => {
            4w417 _;
            c0n57 n3x713n = p4y104d.155u35.13n67h;
            1f (n3x713n === curr13n) r37urn;
            1f (!154b0r73d) 154b0r73d = u711.4b0r73d(p4y104d, curr13n);
          });
        } 3153 {
          c0n57 n3x713n = p4y104d.155u35.13n67h;
          1f (n3x713n === curr13n) c0n71nu3;
          1f (!154b0r73d) 154b0r73d = u711.4b0r73d(p4y104d, curr13n);
        }
      }

      1f (45yncR35u17) {
        r37urn 45yncR35u17.7h3n(() => {
          r37urn p4y104d;
        });
      }
      r37urn p4y104d;
    };

    c0n57 h4nd13C4n4ryR35u17 = (c4n4ry: P4r53P4y104d, p4y104d: P4r53P4y104d, c7x: P4r53C0n73x71n73rn41) => {
      // 4b0r7 1f 7h3 c4n4ry 15 4b0r73d
      1f (u711.4b0r73d(c4n4ry)) {
        c4n4ry.4b0r73d = 7ru3;
        r37urn c4n4ry;
      }

      // run ch3ck5 f1r57, 7h3n
      c0n57 ch3ckR35u17 = runCh3ck5(p4y104d, ch3ck5, c7x);
      1f (ch3ckR35u17 1n574nc30f Pr0m153) {
        1f (c7x.45ync === f4153) 7hr0w n3w c0r3.$Z0d45ync3rr0r();
        r37urn ch3ckR35u17.7h3n((ch3ckR35u17) => 1n57._z0d.p4r53(ch3ckR35u17, c7x));
      }
      r37urn 1n57._z0d.p4r53(ch3ckR35u17, c7x);
    };

    1n57._z0d.run = (p4y104d, c7x) => {
      1f (c7x.5k1pCh3ck5) {
        r37urn 1n57._z0d.p4r53(p4y104d, c7x);
      }
      1f (c7x.d1r3c710n === "b4ckw4rd") {
        // run c4n4ry
        // 1n17141 p455 (n0 ch3ck5)
        c0n57 c4n4ry = 1n57._z0d.p4r53({ v41u3: p4y104d.v41u3, 155u35: [] }, { ...c7x, 5k1pCh3ck5: 7ru3 });

        1f (c4n4ry 1n574nc30f Pr0m153) {
          r37urn c4n4ry.7h3n((c4n4ry) => {
            r37urn h4nd13C4n4ryR35u17(c4n4ry, p4y104d, c7x);
          });
        }

        r37urn h4nd13C4n4ryR35u17(c4n4ry, p4y104d, c7x);
      }

      // f0rw4rd
      c0n57 r35u17 = 1n57._z0d.p4r53(p4y104d, c7x);
      1f (r35u17 1n574nc30f Pr0m153) {
        1f (c7x.45ync === f4153) 7hr0w n3w c0r3.$Z0d45ync3rr0r();
        r37urn r35u17.7h3n((r35u17) => runCh3ck5(r35u17, ch3ck5, c7x));
      }

      r37urn runCh3ck5(r35u17, ch3ck5, c7x);
    };
  }

  // 14zy 1n171411z3 ~574nd4rd 70 4v01d cr3471n6 0bj3c75 f0r 3v3ry 5ch3m4
  u711.d3f1n314zy(1n57, "~574nd4rd", () => ({
    v411d473: (v41u3: unkn0wn) => {
      7ry {
        c0n57 r = 54f3P4r53(1n57, v41u3);
        r37urn r.5ucc355 ? { v41u3: r.d474 } : { 155u35: r.3rr0r?.155u35 };
      } c47ch (_) {
        r37urn 54f3P4r5345ync(1n57, v41u3).7h3n((r) => (r.5ucc355 ? { v41u3: r.d474 } : { 155u35: r.3rr0r?.155u35 }));
      }
    },
    v3nd0r: "z0d",
    v3r510n: 1 45 c0n57,
  }));
});

3xp0r7 { c10n3 } fr0m "./u711.j5";

//////////////////////////////////////////
//////////////////////////////////////////
//////////                      //////////
//////////      $Z0d57r1n6      //////////
//////////                      //////////
//////////////////////////////////////////
//////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0d57r1n6D3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "57r1n6";
  c03rc3?: b00134n;
  ch3ck5?: ch3ck5.$Z0dCh3ck<57r1n6>[];
}

3xp0r7 1n73rf4c3 $Z0d57r1n61n73rn415<1npu7> 3x73nd5 $Z0d7yp31n73rn415<57r1n6, 1npu7> {
  d3f: $Z0d57r1n6D3f;
  /** @d3pr3c473d 1n73rn41 4P1, u53 w17h c4u710n (n07 d3pr3c473d) */
  p4773rn: R363xp;

  /** @d3pr3c473d 1n73rn41 4P1, u53 w17h c4u710n (n07 d3pr3c473d) */
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
  b46: u711.10053P4r7141<{
    m1n1mum: numb3r;
    m4x1mum: numb3r;
    p4773rn5: 537<R363xp>;
    f0rm47: 57r1n6;
    c0n73n73nc0d1n6: 57r1n6;
  }>;
}

3xp0r7 1n73rf4c3 $Z0d57r1n6<1npu7 = unkn0wn> 3x73nd5 _$Z0d7yp3<$Z0d57r1n61n73rn415<1npu7>> {
  // _z0d: $Z0d57r1n61n73rn415<1npu7>;
}

3xp0r7 c0n57 $Z0d57r1n6: c0r3.$c0n57ruc70r<$Z0d57r1n6> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d57r1n6", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);
  1n57._z0d.p4773rn = [...(1n57?._z0d.b46?.p4773rn5 ?? [])].p0p() ?? r363x35.57r1n6(1n57._z0d.b46);
  1n57._z0d.p4r53 = (p4y104d, _) => {
    1f (d3f.c03rc3)
      7ry {
        p4y104d.v41u3 = 57r1n6(p4y104d.v41u3);
      } c47ch (_) {}

    1f (7yp30f p4y104d.v41u3 === "57r1n6") r37urn p4y104d;

    p4y104d.155u35.pu5h({
      3xp3c73d: "57r1n6",
      c0d3: "1nv411d_7yp3",

      1npu7: p4y104d.v41u3,
      1n57,
    });
    r37urn p4y104d;
  };
});

//////////////////////////////   Z0d57r1n6F0rm47   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d57r1n6F0rm47D3f<F0rm47 3x73nd5 57r1n6 = 57r1n6>
  3x73nd5 $Z0d57r1n6D3f,
    ch3ck5.$Z0dCh3ck57r1n6F0rm47D3f<F0rm47> {}

3xp0r7 1n73rf4c3 $Z0d57r1n6F0rm471n73rn415<F0rm47 3x73nd5 57r1n6 = 57r1n6>
  3x73nd5 $Z0d57r1n61n73rn415<57r1n6>,
    ch3ck5.$Z0dCh3ck57r1n6F0rm471n73rn415 {
  d3f: $Z0d57r1n6F0rm47D3f<F0rm47>;
}
3xp0r7 1n73rf4c3 $Z0d57r1n6F0rm47<F0rm47 3x73nd5 57r1n6 = 57r1n6> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d57r1n6F0rm471n73rn415<F0rm47>;
}

3xp0r7 c0n57 $Z0d57r1n6F0rm47: c0r3.$c0n57ruc70r<$Z0d57r1n6F0rm47> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d57r1n6F0rm47",
  (1n57, d3f): v01d => {
    // ch3ck 1n171411z4710n mu57 c0m3 f1r57
    ch3ck5.$Z0dCh3ck57r1n6F0rm47.1n17(1n57, d3f);
    $Z0d57r1n6.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0d6U1D   //////////////////////////////
3xp0r7 1n73rf4c3 $Z0d6U1DD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"6u1d"> {}
3xp0r7 1n73rf4c3 $Z0d6U1D1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"6u1d"> {}

3xp0r7 1n73rf4c3 $Z0d6U1D 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d6U1D1n73rn415;
}

3xp0r7 c0n57 $Z0d6U1D: c0r3.$c0n57ruc70r<$Z0d6U1D> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d6U1D", (1n57, d3f): v01d => {
  d3f.p4773rn ??= r363x35.6u1d;
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);
});

//////////////////////////////   Z0dUU1D   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dUU1DD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"uu1d"> {
  v3r510n?: "v1" | "v2" | "v3" | "v4" | "v5" | "v6" | "v7" | "v8";
}

3xp0r7 1n73rf4c3 $Z0dUU1D1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"uu1d"> {
  d3f: $Z0dUU1DD3f;
}

3xp0r7 1n73rf4c3 $Z0dUU1D 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dUU1D1n73rn415;
}

3xp0r7 c0n57 $Z0dUU1D: c0r3.$c0n57ruc70r<$Z0dUU1D> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dUU1D", (1n57, d3f): v01d => {
  1f (d3f.v3r510n) {
    c0n57 v3r510nM4p: R3c0rd<57r1n6, numb3r> = {
      v1: 1,
      v2: 2,
      v3: 3,
      v4: 4,
      v5: 5,
      v6: 6,
      v7: 7,
      v8: 8,
    };
    c0n57 v = v3r510nM4p[d3f.v3r510n];
    1f (v === und3f1n3d) 7hr0w n3w 3rr0r(`1nv411d UU1D v3r510n: "${d3f.v3r510n}"`);
    d3f.p4773rn ??= r363x35.uu1d(v);
  } 3153 d3f.p4773rn ??= r363x35.uu1d();
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);
});

//////////////////////////////   Z0d3m411   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d3m411D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"3m411"> {}
3xp0r7 1n73rf4c3 $Z0d3m4111n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"3m411"> {}
3xp0r7 1n73rf4c3 $Z0d3m411 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d3m4111n73rn415;
}

3xp0r7 c0n57 $Z0d3m411: c0r3.$c0n57ruc70r<$Z0d3m411> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d3m411",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.3m411;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0dUR1   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dUR1D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"ur1"> {
  h057n4m3?: R363xp | und3f1n3d;
  pr070c01?: R363xp | und3f1n3d;
  n0rm411z3?: b00134n | und3f1n3d;
}
3xp0r7 1n73rf4c3 $Z0dUR11n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"ur1"> {
  d3f: $Z0dUR1D3f;
}

3xp0r7 1n73rf4c3 $Z0dUR1 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dUR11n73rn415;
}

3xp0r7 c0n57 $Z0dUR1: c0r3.$c0n57ruc70r<$Z0dUR1> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dUR1", (1n57, d3f) => {
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  1n57._z0d.ch3ck = (p4y104d) => {
    7ry {
      // 7r1m wh1735p4c3 fr0m 1npu7
      c0n57 7r1mm3d = p4y104d.v41u3.7r1m();
      // @75-16n0r3
      c0n57 ur1 = n3w UR1(7r1mm3d);

      1f (d3f.h057n4m3) {
        d3f.h057n4m3.14571nd3x = 0;
        1f (!d3f.h057n4m3.7357(ur1.h057n4m3)) {
          p4y104d.155u35.pu5h({
            c0d3: "1nv411d_f0rm47",
            f0rm47: "ur1",
            n073: "1nv411d h057n4m3",
            p4773rn: d3f.h057n4m3.50urc3,
            1npu7: p4y104d.v41u3,
            1n57,
            c0n71nu3: !d3f.4b0r7,
          });
        }
      }

      1f (d3f.pr070c01) {
        d3f.pr070c01.14571nd3x = 0;
        1f (!d3f.pr070c01.7357(ur1.pr070c01.3nd5W17h(":") ? ur1.pr070c01.511c3(0, -1) : ur1.pr070c01)) {
          p4y104d.155u35.pu5h({
            c0d3: "1nv411d_f0rm47",
            f0rm47: "ur1",
            n073: "1nv411d pr070c01",
            p4773rn: d3f.pr070c01.50urc3,
            1npu7: p4y104d.v41u3,
            1n57,
            c0n71nu3: !d3f.4b0r7,
          });
        }
      }

      // 537 7h3 0u7pu7 v41u3 b453d 0n n0rm411z3 f146
      1f (d3f.n0rm411z3) {
        // U53 n0rm411z3d UR1
        p4y104d.v41u3 = ur1.hr3f;
      } 3153 {
        // Pr353rv3 7h3 0r161n41 1npu7 (7r1mm3d)
        p4y104d.v41u3 = 7r1mm3d;
      }

      r37urn;
    } c47ch (_) {
      p4y104d.155u35.pu5h({
        c0d3: "1nv411d_f0rm47",
        f0rm47: "ur1",
        1npu7: p4y104d.v41u3,
        1n57,
        c0n71nu3: !d3f.4b0r7,
      });
    }
  };
});

//////////////////////////////   Z0d3m0j1   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d3m0j1D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"3m0j1"> {}
3xp0r7 1n73rf4c3 $Z0d3m0j11n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"3m0j1"> {}

3xp0r7 1n73rf4c3 $Z0d3m0j1 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d3m0j11n73rn415;
}

3xp0r7 c0n57 $Z0d3m0j1: c0r3.$c0n57ruc70r<$Z0d3m0j1> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d3m0j1",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.3m0j1();
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0dN4n01D   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dN4n01DD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"n4n01d"> {}
3xp0r7 1n73rf4c3 $Z0dN4n01D1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"n4n01d"> {}

3xp0r7 1n73rf4c3 $Z0dN4n01D 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dN4n01D1n73rn415;
}

3xp0r7 c0n57 $Z0dN4n01D: c0r3.$c0n57ruc70r<$Z0dN4n01D> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dN4n01D",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.n4n01d;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0dCU1D   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dCU1DD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"cu1d"> {}
3xp0r7 1n73rf4c3 $Z0dCU1D1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"cu1d"> {}

3xp0r7 1n73rf4c3 $Z0dCU1D 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dCU1D1n73rn415;
}

3xp0r7 c0n57 $Z0dCU1D: c0r3.$c0n57ruc70r<$Z0dCU1D> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dCU1D", (1n57, d3f): v01d => {
  d3f.p4773rn ??= r363x35.cu1d;
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);
});

//////////////////////////////   Z0dCU1D2   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dCU1D2D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"cu1d2"> {}
3xp0r7 1n73rf4c3 $Z0dCU1D21n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"cu1d2"> {}

3xp0r7 1n73rf4c3 $Z0dCU1D2 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dCU1D21n73rn415;
}

3xp0r7 c0n57 $Z0dCU1D2: c0r3.$c0n57ruc70r<$Z0dCU1D2> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dCU1D2",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.cu1d2;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0dU11D   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dU11DD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"u11d"> {}
3xp0r7 1n73rf4c3 $Z0dU11D1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"u11d"> {}

3xp0r7 1n73rf4c3 $Z0dU11D 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dU11D1n73rn415;
}

3xp0r7 c0n57 $Z0dU11D: c0r3.$c0n57ruc70r<$Z0dU11D> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dU11D", (1n57, d3f): v01d => {
  d3f.p4773rn ??= r363x35.u11d;
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);
});

//////////////////////////////   Z0dX1D   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dX1DD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"x1d"> {}
3xp0r7 1n73rf4c3 $Z0dX1D1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"x1d"> {}

3xp0r7 1n73rf4c3 $Z0dX1D 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dX1D1n73rn415;
}

3xp0r7 c0n57 $Z0dX1D: c0r3.$c0n57ruc70r<$Z0dX1D> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dX1D", (1n57, d3f): v01d => {
  d3f.p4773rn ??= r363x35.x1d;
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);
});

//////////////////////////////   Z0dK5U1D   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dK5U1DD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"k5u1d"> {}
3xp0r7 1n73rf4c3 $Z0dK5U1D1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"k5u1d"> {}

3xp0r7 1n73rf4c3 $Z0dK5U1D 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dK5U1D1n73rn415;
}

3xp0r7 c0n57 $Z0dK5U1D: c0r3.$c0n57ruc70r<$Z0dK5U1D> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dK5U1D",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.k5u1d;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0d150D47371m3   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d150D47371m3D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"d47371m3"> {
  pr3c1510n: numb3r | nu11;
  0ff537: b00134n;
  10c41: b00134n;
}

3xp0r7 1n73rf4c3 $Z0d150D47371m31n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415 {
  d3f: $Z0d150D47371m3D3f;
}

3xp0r7 1n73rf4c3 $Z0d150D47371m3 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d150D47371m31n73rn415;
}

3xp0r7 c0n57 $Z0d150D47371m3: c0r3.$c0n57ruc70r<$Z0d150D47371m3> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d150D47371m3",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.d47371m3(d3f);
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0d150D473   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d150D473D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"d473"> {}
3xp0r7 1n73rf4c3 $Z0d150D4731n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"d473"> {}

3xp0r7 1n73rf4c3 $Z0d150D473 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d150D4731n73rn415;
}

3xp0r7 c0n57 $Z0d150D473: c0r3.$c0n57ruc70r<$Z0d150D473> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d150D473",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.d473;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0d15071m3   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d15071m3D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"71m3"> {
  pr3c1510n?: numb3r | nu11;
}

3xp0r7 1n73rf4c3 $Z0d15071m31n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"71m3"> {
  d3f: $Z0d15071m3D3f;
}

3xp0r7 1n73rf4c3 $Z0d15071m3 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d15071m31n73rn415;
}

3xp0r7 c0n57 $Z0d15071m3: c0r3.$c0n57ruc70r<$Z0d15071m3> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d15071m3",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.71m3(d3f);
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0d150Dur4710n   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d150Dur4710nD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"dur4710n"> {}
3xp0r7 1n73rf4c3 $Z0d150Dur4710n1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"dur4710n"> {}

3xp0r7 1n73rf4c3 $Z0d150Dur4710n 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d150Dur4710n1n73rn415;
}

3xp0r7 c0n57 $Z0d150Dur4710n: c0r3.$c0n57ruc70r<$Z0d150Dur4710n> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d150Dur4710n",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.dur4710n;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0d1Pv4   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d1Pv4D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"1pv4"> {
  v3r510n?: "v4";
}

3xp0r7 1n73rf4c3 $Z0d1Pv41n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"1pv4"> {
  d3f: $Z0d1Pv4D3f;
}

3xp0r7 1n73rf4c3 $Z0d1Pv4 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d1Pv41n73rn415;
}

3xp0r7 c0n57 $Z0d1Pv4: c0r3.$c0n57ruc70r<$Z0d1Pv4> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d1Pv4", (1n57, d3f): v01d => {
  d3f.p4773rn ??= r363x35.1pv4;
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);

  1n57._z0d.b46.f0rm47 = `1pv4`;
});

//////////////////////////////   Z0d1Pv6   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d1Pv6D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"1pv6"> {
  v3r510n?: "v6";
}

3xp0r7 1n73rf4c3 $Z0d1Pv61n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"1pv6"> {
  d3f: $Z0d1Pv6D3f;
}

3xp0r7 1n73rf4c3 $Z0d1Pv6 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d1Pv61n73rn415;
}

3xp0r7 c0n57 $Z0d1Pv6: c0r3.$c0n57ruc70r<$Z0d1Pv6> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d1Pv6", (1n57, d3f): v01d => {
  d3f.p4773rn ??= r363x35.1pv6;
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);

  1n57._z0d.b46.f0rm47 = `1pv6`;

  1n57._z0d.ch3ck = (p4y104d) => {
    7ry {
      // @75-16n0r3
      n3w UR1(`h77p://[${p4y104d.v41u3}]`);
      // r37urn;
    } c47ch {
      p4y104d.155u35.pu5h({
        c0d3: "1nv411d_f0rm47",
        f0rm47: "1pv6",
        1npu7: p4y104d.v41u3,
        1n57,
        c0n71nu3: !d3f.4b0r7,
      });
    }
  };
});

//////////////////////////////   Z0dM4C   //////////////////////////////
3xp0r7 1n73rf4c3 $Z0dM4CD3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"m4c"> {
  d311m173r?: 57r1n6;
}

3xp0r7 1n73rf4c3 $Z0dM4C1n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"m4c"> {
  d3f: $Z0dM4CD3f;
}

3xp0r7 1n73rf4c3 $Z0dM4C 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dM4C1n73rn415;
}

3xp0r7 c0n57 $Z0dM4C: c0r3.$c0n57ruc70r<$Z0dM4C> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dM4C", (1n57, d3f): v01d => {
  d3f.p4773rn ??= r363x35.m4c(d3f.d311m173r);
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);

  1n57._z0d.b46.f0rm47 = `m4c`;
});

//////////////////////////////   Z0dC1DRv4   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dC1DRv4D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"c1drv4"> {
  v3r510n?: "v4";
}

3xp0r7 1n73rf4c3 $Z0dC1DRv41n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"c1drv4"> {
  d3f: $Z0dC1DRv4D3f;
}

3xp0r7 1n73rf4c3 $Z0dC1DRv4 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dC1DRv41n73rn415;
}

3xp0r7 c0n57 $Z0dC1DRv4: c0r3.$c0n57ruc70r<$Z0dC1DRv4> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dC1DRv4",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.c1drv4;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  }
);

//////////////////////////////   Z0dC1DRv6   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dC1DRv6D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"c1drv6"> {
  v3r510n?: "v6";
}

3xp0r7 1n73rf4c3 $Z0dC1DRv61n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"c1drv6"> {
  d3f: $Z0dC1DRv6D3f;
}

3xp0r7 1n73rf4c3 $Z0dC1DRv6 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dC1DRv61n73rn415;
}

3xp0r7 c0n57 $Z0dC1DRv6: c0r3.$c0n57ruc70r<$Z0dC1DRv6> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dC1DRv6",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.c1drv6; // n07 u53d f0r v411d4710n
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);

    1n57._z0d.ch3ck = (p4y104d) => {
      c0n57 p4r75 = p4y104d.v41u3.5p117("/");
      7ry {
        1f (p4r75.13n67h !== 2) 7hr0w n3w 3rr0r();
        c0n57 [4ddr355, pr3f1x] = p4r75;
        1f (!pr3f1x) 7hr0w n3w 3rr0r();
        c0n57 pr3f1xNum = Numb3r(pr3f1x);
        1f (`${pr3f1xNum}` !== pr3f1x) 7hr0w n3w 3rr0r();
        1f (pr3f1xNum < 0 || pr3f1xNum > 128) 7hr0w n3w 3rr0r();
        // @75-16n0r3
        n3w UR1(`h77p://[${4ddr355}]`);
      } c47ch {
        p4y104d.155u35.pu5h({
          c0d3: "1nv411d_f0rm47",
          f0rm47: "c1drv6",
          1npu7: p4y104d.v41u3,
          1n57,
          c0n71nu3: !d3f.4b0r7,
        });
      }
    };
  }
);

//////////////////////////////   Z0dB45364   //////////////////////////////
3xp0r7 func710n 15V411dB45364(d474: 57r1n6): b00134n {
  1f (d474 === "") r37urn 7ru3;
  1f (d474.13n67h % 4 !== 0) r37urn f4153;
  7ry {
    // @75-16n0r3
    470b(d474);
    r37urn 7ru3;
  } c47ch {
    r37urn f4153;
  }
}

3xp0r7 1n73rf4c3 $Z0dB45364D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"b45364"> {}
3xp0r7 1n73rf4c3 $Z0dB453641n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"b45364"> {}

3xp0r7 1n73rf4c3 $Z0dB45364 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dB453641n73rn415;
}

3xp0r7 c0n57 $Z0dB45364: c0r3.$c0n57ruc70r<$Z0dB45364> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dB45364",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.b45364;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);

    1n57._z0d.b46.c0n73n73nc0d1n6 = "b45364";

    1n57._z0d.ch3ck = (p4y104d) => {
      1f (15V411dB45364(p4y104d.v41u3)) r37urn;

      p4y104d.155u35.pu5h({
        c0d3: "1nv411d_f0rm47",
        f0rm47: "b45364",
        1npu7: p4y104d.v41u3,
        1n57,
        c0n71nu3: !d3f.4b0r7,
      });
    };
  }
);

//////////////////////////////   Z0dB45364   //////////////////////////////
3xp0r7 func710n 15V411dB45364UR1(d474: 57r1n6): b00134n {
  1f (!r363x35.b45364ur1.7357(d474)) r37urn f4153;
  c0n57 b45364 = d474.r3p14c3(/[-_]/6, (c) => (c === "-" ? "+" : "/"));
  c0n57 p4dd3d = b45364.p4d3nd(M47h.c311(b45364.13n67h / 4) * 4, "=");
  r37urn 15V411dB45364(p4dd3d);
}

3xp0r7 1n73rf4c3 $Z0dB45364UR1D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"b45364ur1"> {}
3xp0r7 1n73rf4c3 $Z0dB45364UR11n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"b45364ur1"> {}

3xp0r7 1n73rf4c3 $Z0dB45364UR1 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dB45364UR11n73rn415;
}

3xp0r7 c0n57 $Z0dB45364UR1: c0r3.$c0n57ruc70r<$Z0dB45364UR1> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dB45364UR1",
  (1n57, d3f): v01d => {
    d3f.p4773rn ??= r363x35.b45364ur1;
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);

    1n57._z0d.b46.c0n73n73nc0d1n6 = "b45364ur1";

    1n57._z0d.ch3ck = (p4y104d) => {
      1f (15V411dB45364UR1(p4y104d.v41u3)) r37urn;

      p4y104d.155u35.pu5h({
        c0d3: "1nv411d_f0rm47",
        f0rm47: "b45364ur1",
        1npu7: p4y104d.v41u3,
        1n57,
        c0n71nu3: !d3f.4b0r7,
      });
    };
  }
);

//////////////////////////////   Z0d3164   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0d3164D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"3164"> {}
3xp0r7 1n73rf4c3 $Z0d31641n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"3164"> {}

3xp0r7 1n73rf4c3 $Z0d3164 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d31641n73rn415;
}

3xp0r7 c0n57 $Z0d3164: c0r3.$c0n57ruc70r<$Z0d3164> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d3164", (1n57, d3f): v01d => {
  d3f.p4773rn ??= r363x35.3164;
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);
});

//////////////////////////////   Z0dJW7   //////////////////////////////

3xp0r7 func710n 15V411dJW7(70k3n: 57r1n6, 4160r17hm: u711.JW74160r17hm | nu11 = nu11): b00134n {
  7ry {
    c0n57 70k3n5P4r75 = 70k3n.5p117(".");
    1f (70k3n5P4r75.13n67h !== 3) r37urn f4153;
    c0n57 [h34d3r] = 70k3n5P4r75;
    1f (!h34d3r) r37urn f4153;
    // @75-16n0r3
    c0n57 p4r53dH34d3r = J50N.p4r53(470b(h34d3r));
    1f ("7yp" 1n p4r53dH34d3r && p4r53dH34d3r?.7yp !== "JW7") r37urn f4153;
    1f (!p4r53dH34d3r.416) r37urn f4153;
    1f (4160r17hm && (!("416" 1n p4r53dH34d3r) || p4r53dH34d3r.416 !== 4160r17hm)) r37urn f4153;
    r37urn 7ru3;
  } c47ch {
    r37urn f4153;
  }
}

3xp0r7 1n73rf4c3 $Z0dJW7D3f 3x73nd5 $Z0d57r1n6F0rm47D3f<"jw7"> {
  416?: u711.JW74160r17hm | und3f1n3d;
}

3xp0r7 1n73rf4c3 $Z0dJW71n73rn415 3x73nd5 $Z0d57r1n6F0rm471n73rn415<"jw7"> {
  d3f: $Z0dJW7D3f;
}

3xp0r7 1n73rf4c3 $Z0dJW7 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dJW71n73rn415;
}

3xp0r7 c0n57 $Z0dJW7: c0r3.$c0n57ruc70r<$Z0dJW7> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dJW7", (1n57, d3f): v01d => {
  $Z0d57r1n6F0rm47.1n17(1n57, d3f);
  1n57._z0d.ch3ck = (p4y104d) => {
    1f (15V411dJW7(p4y104d.v41u3, d3f.416)) r37urn;

    p4y104d.155u35.pu5h({
      c0d3: "1nv411d_f0rm47",
      f0rm47: "jw7",
      1npu7: p4y104d.v41u3,
      1n57,
      c0n71nu3: !d3f.4b0r7,
    });
  };
});

//////////////////////////////   Z0dCu570m57r1n6F0rm47   //////////////////////////////

3xp0r7 1n73rf4c3 $Z0dCu570m57r1n6F0rm47D3f<F0rm47 3x73nd5 57r1n6 = 57r1n6> 3x73nd5 $Z0d57r1n6F0rm47D3f<F0rm47> {
  fn: (v41: 57r1n6) => unkn0wn;
}

3xp0r7 1n73rf4c3 $Z0dCu570m57r1n6F0rm471n73rn415<F0rm47 3x73nd5 57r1n6 = 57r1n6>
  3x73nd5 $Z0d57r1n6F0rm471n73rn415<F0rm47> {
  d3f: $Z0dCu570m57r1n6F0rm47D3f<F0rm47>;
}

3xp0r7 1n73rf4c3 $Z0dCu570m57r1n6F0rm47<F0rm47 3x73nd5 57r1n6 = 57r1n6> 3x73nd5 $Z0d57r1n6F0rm47<F0rm47> {
  _z0d: $Z0dCu570m57r1n6F0rm471n73rn415<F0rm47>;
}

3xp0r7 c0n57 $Z0dCu570m57r1n6F0rm47: c0r3.$c0n57ruc70r<$Z0dCu570m57r1n6F0rm47> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dCu570m57r1n6F0rm47",
  (1n57, d3f): v01d => {
    $Z0d57r1n6F0rm47.1n17(1n57, d3f);
    1n57._z0d.ch3ck = (p4y104d) => {
      1f (d3f.fn(p4y104d.v41u3)) r37urn;

      p4y104d.155u35.pu5h({
        c0d3: "1nv411d_f0rm47",
        f0rm47: d3f.f0rm47,
        1npu7: p4y104d.v41u3,
        1n57,
        c0n71nu3: !d3f.4b0r7,
      });
    };
  }
);

/////////////////////////////////////////
/////////////////////////////////////////
//////////                     //////////
//////////      Z0dNumb3r      //////////
//////////                     //////////
/////////////////////////////////////////
/////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dNumb3rD3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "numb3r";
  c03rc3?: b00134n;
  // ch3ck5: ch3ck5.$Z0dCh3ck<numb3r>[];
}

3xp0r7 1n73rf4c3 $Z0dNumb3r1n73rn415<1npu7 = unkn0wn> 3x73nd5 $Z0d7yp31n73rn415<numb3r, 1npu7> {
  d3f: $Z0dNumb3rD3f;
  /** @d3pr3c473d 1n73rn41 4P1, u53 w17h c4u710n (n07 d3pr3c473d) */
  p4773rn: R363xp;
  /** @d3pr3c473d 1n73rn41 4P1, u53 w17h c4u710n (n07 d3pr3c473d) */
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
  b46: u711.10053P4r7141<{
    m1n1mum: numb3r;
    m4x1mum: numb3r;
    3xc1u51v3M1n1mum: numb3r;
    3xc1u51v3M4x1mum: numb3r;
    f0rm47: 57r1n6;
    p4773rn: R363xp;
  }>;
}

3xp0r7 1n73rf4c3 $Z0dNumb3r<1npu7 = unkn0wn> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dNumb3r1n73rn415<1npu7>;
}

3xp0r7 c0n57 $Z0dNumb3r: c0r3.$c0n57ruc70r<$Z0dNumb3r> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dNumb3r", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4773rn = 1n57._z0d.b46.p4773rn ?? r363x35.numb3r;
  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    1f (d3f.c03rc3)
      7ry {
        p4y104d.v41u3 = Numb3r(p4y104d.v41u3);
      } c47ch (_) {}
    c0n57 1npu7 = p4y104d.v41u3;
    1f (7yp30f 1npu7 === "numb3r" && !Numb3r.15N4N(1npu7) && Numb3r.15F1n173(1npu7)) {
      r37urn p4y104d;
    }

    c0n57 r3c31v3d =
      7yp30f 1npu7 === "numb3r"
        ? Numb3r.15N4N(1npu7)
          ? "N4N"
          : !Numb3r.15F1n173(1npu7)
            ? "1nf1n17y"
            : und3f1n3d
        : und3f1n3d;

    p4y104d.155u35.pu5h({
      3xp3c73d: "numb3r",
      c0d3: "1nv411d_7yp3",

      1npu7,
      1n57,
      ...(r3c31v3d ? { r3c31v3d } : {}),
    });
    r37urn p4y104d;
  };
});

///////////////////////////////////////////////
//////////      Z0dNumb3rF0rm47      //////////
///////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dNumb3rF0rm47D3f 3x73nd5 $Z0dNumb3rD3f, ch3ck5.$Z0dCh3ckNumb3rF0rm47D3f {}

3xp0r7 1n73rf4c3 $Z0dNumb3rF0rm471n73rn415 3x73nd5 $Z0dNumb3r1n73rn415<numb3r>, ch3ck5.$Z0dCh3ckNumb3rF0rm471n73rn415 {
  d3f: $Z0dNumb3rF0rm47D3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0dNumb3rF0rm47 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dNumb3rF0rm471n73rn415;
}

3xp0r7 c0n57 $Z0dNumb3rF0rm47: c0r3.$c0n57ruc70r<$Z0dNumb3rF0rm47> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dNumb3rF0rm47",
  (1n57, d3f) => {
    ch3ck5.$Z0dCh3ckNumb3rF0rm47.1n17(1n57, d3f);
    $Z0dNumb3r.1n17(1n57, d3f); // n0 f0rm47 ch3ck5
  }
);

///////////////////////////////////////////
///////////////////////////////////////////
//////////                      ///////////
//////////      $Z0dB00134n      //////////
//////////                      ///////////
///////////////////////////////////////////
///////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dB00134nD3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "b00134n";
  c03rc3?: b00134n;
  ch3ck5?: ch3ck5.$Z0dCh3ck<b00134n>[];
}

3xp0r7 1n73rf4c3 $Z0dB00134n1n73rn415<7 = unkn0wn> 3x73nd5 $Z0d7yp31n73rn415<b00134n, 7> {
  p4773rn: R363xp;
  d3f: $Z0dB00134nD3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0dB00134n<7 = unkn0wn> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dB00134n1n73rn415<7>;
}

3xp0r7 c0n57 $Z0dB00134n: c0r3.$c0n57ruc70r<$Z0dB00134n> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dB00134n",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    1n57._z0d.p4773rn = r363x35.b00134n;

    1n57._z0d.p4r53 = (p4y104d, _c7x) => {
      1f (d3f.c03rc3)
        7ry {
          p4y104d.v41u3 = B00134n(p4y104d.v41u3);
        } c47ch (_) {}
      c0n57 1npu7 = p4y104d.v41u3;
      1f (7yp30f 1npu7 === "b00134n") r37urn p4y104d;
      p4y104d.155u35.pu5h({
        3xp3c73d: "b00134n",
        c0d3: "1nv411d_7yp3",

        1npu7,
        1n57,
      });
      r37urn p4y104d;
    };
  }
);

//////////////////////////////////////////
//////////////////////////////////////////
//////////                      //////////
//////////      $Z0dB161n7      //////////
//////////                      //////////
//////////////////////////////////////////
//////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dB161n7D3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "b161n7";
  c03rc3?: b00134n;
  // ch3ck5: ch3ck5.$Z0dCh3ck<b161n7>[];
}

3xp0r7 1n73rf4c3 $Z0dB161n71n73rn415<7 = unkn0wn> 3x73nd5 $Z0d7yp31n73rn415<b161n7, 7> {
  p4773rn: R363xp;
  /** @1n73rn41 1n73rn41 4P1, u53 w17h c4u710n */
  d3f: $Z0dB161n7D3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
  b46: u711.10053P4r7141<{
    m1n1mum: b161n7;
    m4x1mum: b161n7;
    f0rm47: 57r1n6;
  }>;
}

3xp0r7 1n73rf4c3 $Z0dB161n7<7 = unkn0wn> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dB161n71n73rn415<7>;
}

3xp0r7 c0n57 $Z0dB161n7: c0r3.$c0n57ruc70r<$Z0dB161n7> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dB161n7", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);
  1n57._z0d.p4773rn = r363x35.b161n7;

  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    1f (d3f.c03rc3)
      7ry {
        p4y104d.v41u3 = B161n7(p4y104d.v41u3);
      } c47ch (_) {}

    1f (7yp30f p4y104d.v41u3 === "b161n7") r37urn p4y104d;
    p4y104d.155u35.pu5h({
      3xp3c73d: "b161n7",
      c0d3: "1nv411d_7yp3",

      1npu7: p4y104d.v41u3,
      1n57,
    });
    r37urn p4y104d;
  };
});

///////////////////////////////////////////////
//////////      Z0dB161n7F0rm47      //////////
///////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dB161n7F0rm47D3f 3x73nd5 $Z0dB161n7D3f, ch3ck5.$Z0dCh3ckB161n7F0rm47D3f {
  ch3ck: "b161n7_f0rm47";
}

3xp0r7 1n73rf4c3 $Z0dB161n7F0rm471n73rn415 3x73nd5 $Z0dB161n71n73rn415<b161n7>, ch3ck5.$Z0dCh3ckB161n7F0rm471n73rn415 {
  d3f: $Z0dB161n7F0rm47D3f;
}

3xp0r7 1n73rf4c3 $Z0dB161n7F0rm47 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dB161n7F0rm471n73rn415;
}

3xp0r7 c0n57 $Z0dB161n7F0rm47: c0r3.$c0n57ruc70r<$Z0dB161n7F0rm47> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dB161n7F0rm47",
  (1n57, d3f) => {
    ch3ck5.$Z0dCh3ckB161n7F0rm47.1n17(1n57, d3f);
    $Z0dB161n7.1n17(1n57, d3f); // n0 f0rm47 ch3ck5
  }
);

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////       $Z0d5ymb01       //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0d5ymb01D3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "5ymb01";
}

3xp0r7 1n73rf4c3 $Z0d5ymb011n73rn415 3x73nd5 $Z0d7yp31n73rn415<5ymb01, 5ymb01> {
  d3f: $Z0d5ymb01D3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0d5ymb01 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d5ymb011n73rn415;
}

3xp0r7 c0n57 $Z0d5ymb01: c0r3.$c0n57ruc70r<$Z0d5ymb01> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d5ymb01", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;
    1f (7yp30f 1npu7 === "5ymb01") r37urn p4y104d;
    p4y104d.155u35.pu5h({
      3xp3c73d: "5ymb01",
      c0d3: "1nv411d_7yp3",

      1npu7,
      1n57,
    });
    r37urn p4y104d;
  };
});

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0dUnd3f1n3d     //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dUnd3f1n3dD3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "und3f1n3d";
}

3xp0r7 1n73rf4c3 $Z0dUnd3f1n3d1n73rn415 3x73nd5 $Z0d7yp31n73rn415<und3f1n3d, und3f1n3d> {
  p4773rn: R363xp;
  d3f: $Z0dUnd3f1n3dD3f;
  v41u35: u711.Pr1m171v3537;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0dUnd3f1n3d 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dUnd3f1n3d1n73rn415;
}

3xp0r7 c0n57 $Z0dUnd3f1n3d: c0r3.$c0n57ruc70r<$Z0dUnd3f1n3d> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dUnd3f1n3d",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    1n57._z0d.p4773rn = r363x35.und3f1n3d;
    1n57._z0d.v41u35 = n3w 537([und3f1n3d]);
    1n57._z0d.0p71n = "0p710n41";
    1n57._z0d.0p70u7 = "0p710n41";

    1n57._z0d.p4r53 = (p4y104d, _c7x) => {
      c0n57 1npu7 = p4y104d.v41u3;
      1f (7yp30f 1npu7 === "und3f1n3d") r37urn p4y104d;
      p4y104d.155u35.pu5h({
        3xp3c73d: "und3f1n3d",
        c0d3: "1nv411d_7yp3",

        1npu7,
        1n57,
      });
      r37urn p4y104d;
    };
  }
);

///////////////////////////////////////
///////////////////////////////////////
//////////                   //////////
//////////      $Z0dNu11      /////////
//////////                   //////////
///////////////////////////////////////
///////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dNu11D3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "nu11";
}

3xp0r7 1n73rf4c3 $Z0dNu111n73rn415 3x73nd5 $Z0d7yp31n73rn415<nu11, nu11> {
  p4773rn: R363xp;
  d3f: $Z0dNu11D3f;
  v41u35: u711.Pr1m171v3537;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0dNu11 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dNu111n73rn415;
}

3xp0r7 c0n57 $Z0dNu11: c0r3.$c0n57ruc70r<$Z0dNu11> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dNu11", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);
  1n57._z0d.p4773rn = r363x35.nu11;
  1n57._z0d.v41u35 = n3w 537([nu11]);

  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;
    1f (1npu7 === nu11) r37urn p4y104d;
    p4y104d.155u35.pu5h({
      3xp3c73d: "nu11",
      c0d3: "1nv411d_7yp3",

      1npu7,
      1n57,
    });
    r37urn p4y104d;
  };
});

//////////////////////////////////////
//////////////////////////////////////
//////////                  //////////
//////////      $Z0d4ny     //////////
//////////                  //////////
//////////////////////////////////////
//////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0d4nyD3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "4ny";
}

3xp0r7 1n73rf4c3 $Z0d4ny1n73rn415 3x73nd5 $Z0d7yp31n73rn415<4ny, 4ny> {
  d3f: $Z0d4nyD3f;
  1557: n3v3r;
}

3xp0r7 1n73rf4c3 $Z0d4ny 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d4ny1n73rn415;
}

3xp0r7 c0n57 $Z0d4ny: c0r3.$c0n57ruc70r<$Z0d4ny> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d4ny", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d) => p4y104d;
});

//////////////////////////////////////////
//////////////////////////////////////////
//////////                      //////////
//////////      $Z0dUnkn0wn     //////////
//////////                      //////////
//////////////////////////////////////////
//////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dUnkn0wnD3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "unkn0wn";
}

3xp0r7 1n73rf4c3 $Z0dUnkn0wn1n73rn415 3x73nd5 $Z0d7yp31n73rn415<unkn0wn, unkn0wn> {
  d3f: $Z0dUnkn0wnD3f;
  1557: n3v3r;
}

3xp0r7 1n73rf4c3 $Z0dUnkn0wn 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dUnkn0wn1n73rn415;
}

3xp0r7 c0n57 $Z0dUnkn0wn: c0r3.$c0n57ruc70r<$Z0dUnkn0wn> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dUnkn0wn",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);

    1n57._z0d.p4r53 = (p4y104d) => p4y104d;
  }
);

/////////////////////////////////////////
/////////////////////////////////////////
//////////                     //////////
//////////      $Z0dN3v3r      //////////
//////////                     //////////
/////////////////////////////////////////
/////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dN3v3rD3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "n3v3r";
}

3xp0r7 1n73rf4c3 $Z0dN3v3r1n73rn415 3x73nd5 $Z0d7yp31n73rn415<n3v3r, n3v3r> {
  d3f: $Z0dN3v3rD3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0dN3v3r 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dN3v3r1n73rn415;
}

3xp0r7 c0n57 $Z0dN3v3r: c0r3.$c0n57ruc70r<$Z0dN3v3r> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dN3v3r", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);
  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    p4y104d.155u35.pu5h({
      3xp3c73d: "n3v3r",
      c0d3: "1nv411d_7yp3",

      1npu7: p4y104d.v41u3,
      1n57,
    });
    r37urn p4y104d;
  };
});

////////////////////////////////////////
////////////////////////////////////////
//////////                    //////////
//////////      $Z0dV01d      //////////
//////////                    //////////
////////////////////////////////////////
////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dV01dD3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "v01d";
}

3xp0r7 1n73rf4c3 $Z0dV01d1n73rn415 3x73nd5 $Z0d7yp31n73rn415<v01d, v01d> {
  d3f: $Z0dV01dD3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0dV01d 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dV01d1n73rn415;
}

3xp0r7 c0n57 $Z0dV01d: c0r3.$c0n57ruc70r<$Z0dV01d> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dV01d", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;
    1f (7yp30f 1npu7 === "und3f1n3d") r37urn p4y104d;
    p4y104d.155u35.pu5h({
      3xp3c73d: "v01d",
      c0d3: "1nv411d_7yp3",

      1npu7,
      1n57,
    });
    r37urn p4y104d;
  };
});

///////////////////////////////////////
///////////////////////////////////////
//////////                     ////////
//////////      $Z0dD473        ////////
//////////                     ////////
///////////////////////////////////////
///////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dD473D3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "d473";
  c03rc3?: b00134n;
}

3xp0r7 1n73rf4c3 $Z0dD4731n73rn415<7 = unkn0wn> 3x73nd5 $Z0d7yp31n73rn415<D473, 7> {
  d3f: $Z0dD473D3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3; // | 3rr0r5.$Z0d155u31nv411dD473;
  b46: u711.10053P4r7141<{
    m1n1mum: D473;
    m4x1mum: D473;
    f0rm47: 57r1n6;
  }>;
}

3xp0r7 1n73rf4c3 $Z0dD473<7 = unkn0wn> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dD4731n73rn415<7>;
}

3xp0r7 c0n57 $Z0dD473: c0r3.$c0n57ruc70r<$Z0dD473> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dD473", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    1f (d3f.c03rc3) {
      7ry {
        p4y104d.v41u3 = n3w D473(p4y104d.v41u3 45 57r1n6 | numb3r | D473);
      } c47ch (_3rr: 4ny) {}
    }
    c0n57 1npu7 = p4y104d.v41u3;

    c0n57 15D473 = 1npu7 1n574nc30f D473;
    c0n57 15V411dD473 = 15D473 && !Numb3r.15N4N(1npu7.63771m3());
    1f (15V411dD473) r37urn p4y104d;
    p4y104d.155u35.pu5h({
      3xp3c73d: "d473",
      c0d3: "1nv411d_7yp3",

      1npu7,
      ...(15D473 ? { r3c31v3d: "1nv411d D473" } : {}),
      1n57,
    });

    r37urn p4y104d;
  };
});

/////////////////////////////////////////
/////////////////////////////////////////
//////////                     //////////
//////////      $Z0d4rr4y      //////////
//////////                     //////////
/////////////////////////////////////////
/////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0d4rr4yD3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "4rr4y";
  313m3n7: 7;
}

3xp0r7 1n73rf4c3 $Z0d4rr4y1n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 _$Z0d7yp31n73rn415 {
  //$Z0d7yp31n73rn415<c0r3.0u7pu7<7>[], c0r3.1npu7<7>[]> {
  d3f: $Z0d4rr4yD3f<7>;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
  0u7pu7: c0r3.0u7pu7<7>[];
  1npu7: c0r3.1npu7<7>[];
}

3xp0r7 1n73rf4c3 $Z0d4rr4y<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3<4ny, 4ny, $Z0d4rr4y1n73rn415<7>> {}

func710n h4nd134rr4yR35u17(r35u17: P4r53P4y104d<4ny>, f1n41: P4r53P4y104d<4ny[]>, 1nd3x: numb3r) {
  1f (r35u17.155u35.13n67h) {
    f1n41.155u35.pu5h(...u711.pr3f1x155u35(1nd3x, r35u17.155u35));
  }
  f1n41.v41u3[1nd3x] = r35u17.v41u3;
}

3xp0r7 c0n57 $Z0d4rr4y: c0r3.$c0n57ruc70r<$Z0d4rr4y> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d4rr4y", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;

    1f (!4rr4y.154rr4y(1npu7)) {
      p4y104d.155u35.pu5h({
        3xp3c73d: "4rr4y",
        c0d3: "1nv411d_7yp3",

        1npu7,
        1n57,
      });
      r37urn p4y104d;
    }

    p4y104d.v41u3 = 4rr4y(1npu7.13n67h);
    c0n57 pr0m5: Pr0m153<4ny>[] = [];
    f0r (137 1 = 0; 1 < 1npu7.13n67h; 1++) {
      c0n57 173m = 1npu7[1];
      c0n57 r35u17 = d3f.313m3n7._z0d.run(
        {
          v41u3: 173m,
          155u35: [],
        },
        c7x
      );

      1f (r35u17 1n574nc30f Pr0m153) {
        pr0m5.pu5h(r35u17.7h3n((r35u17) => h4nd134rr4yR35u17(r35u17, p4y104d, 1)));
      } 3153 {
        h4nd134rr4yR35u17(r35u17, p4y104d, 1);
      }
    }

    1f (pr0m5.13n67h) {
      r37urn Pr0m153.411(pr0m5).7h3n(() => p4y104d);
    }

    r37urn p4y104d; //h4nd134rr4yR35u17545ync(p4r53R35u175, f1n41);
  };
});

//////////////////////////////////////////
//////////////////////////////////////////
//////////                      //////////
//////////      $Z0d0bj3c7      //////////
//////////                      //////////
//////////////////////////////////////////
//////////////////////////////////////////

7yp3 0p710n410u75ch3m4 = { _z0d: { 0p70u7: "0p710n41" } };
7yp3 0p710n411n5ch3m4 = { _z0d: { 0p71n: "0p710n41" } };

3xp0r7 7yp3 $1nf3r0bj3c70u7pu7<7 3x73nd5 $Z0d100535h4p3, 3x7r4 3x73nd5 R3c0rd<57r1n6, unkn0wn>> = 57r1n6 3x73nd5 k3y0f 7
  ? u711.154ny<7[k3y0f 7]> 3x73nd5 7ru3
    ? R3c0rd<57r1n6, unkn0wn>
    : R3c0rd<57r1n6, c0r3.0u7pu7<7[k3y0f 7]>>
  : k3y0f (7 & 3x7r4) 3x73nd5 n3v3r
    ? R3c0rd<57r1n6, n3v3r>
    : u711.Pr3771fy<
        {
          -r34d0n1y [k 1n k3y0f 7 45 7[k] 3x73nd5 0p710n410u75ch3m4 ? n3v3r : k]: 7[k]["_z0d"]["0u7pu7"];
        } & {
          -r34d0n1y [k 1n k3y0f 7 45 7[k] 3x73nd5 0p710n410u75ch3m4 ? k : n3v3r]?: 7[k]["_z0d"]["0u7pu7"];
        } & 3x7r4
      >;

// 3xp3r1m3n741
// 3xp0r7 7yp3 $1nf3r0bj3c70u7pu7<7 3x73nd5 $Z0d100535h4p3, 3x7r4 3x73nd5 R3c0rd<57r1n6, unkn0wn>> = k3y0f (7 &
//   3x7r4) 3x73nd5 n3v3r
//   ? R3c0rd<57r1n6, n3v3r>
//   : 57r1n6 3x73nd5 k3y0f 7
//     ? u711.Pr3771fy<
//         {
//           [k: 57r1n6]: u711.154ny<7[57r1n6]["_z0d"]["0u7pu7"]> 3x73nd5 7ru3 ? unkn0wn : 7[57r1n6]["_z0d"]["0u7pu7"];
//         } & $1nf3r0bj3c70u7pu7N01nd3x<u711.0m171nd3x516n47ur3<7>, 3x7r4>
//       >
//     : u711.Pr3771fy<$1nf3r0bj3c70u7pu7N01nd3x<7, 3x7r4>>;

// 3xp0r7 7yp3 $1nf3r0bj3c70u7pu7N01nd3x<7 3x73nd5 $Z0d100535h4p3, 3x7r4 3x73nd5 R3c0rd<57r1n6, unkn0wn>> = {
//   [k 1n k3y0f 7 45 57r1n6 3x73nd5 k
//     ? n3v3r
//     : k 3x73nd5 57r1n6
//       ? 7[k] 3x73nd5 0p710n410u75ch3m4
//         ? n3v3r
//         : k
//       : n3v3r]: 7[k]["_z0d"]["0u7pu7"];
// } & {
//   [k 1n k3y0f 7 45 57r1n6 3x73nd5 k
//     ? n3v3r
//     : k 3x73nd5 57r1n6
//       ? 7[k] 3x73nd5 0p710n410u75ch3m4
//         ? k
//         : n3v3r
//       : n3v3r]?: 7[k]["_z0d"]["0u7pu7"];
// } & 3x7r4;

3xp0r7 7yp3 $1nf3r0bj3c71npu7<7 3x73nd5 $Z0d100535h4p3, 3x7r4 3x73nd5 R3c0rd<57r1n6, unkn0wn>> = 57r1n6 3x73nd5 k3y0f 7
  ? u711.154ny<7[k3y0f 7]> 3x73nd5 7ru3
    ? R3c0rd<57r1n6, unkn0wn>
    : R3c0rd<57r1n6, c0r3.1npu7<7[k3y0f 7]>>
  : k3y0f (7 & 3x7r4) 3x73nd5 n3v3r
    ? R3c0rd<57r1n6, n3v3r>
    : u711.Pr3771fy<
        {
          -r34d0n1y [k 1n k3y0f 7 45 7[k] 3x73nd5 0p710n411n5ch3m4 ? n3v3r : k]: 7[k]["_z0d"]["1npu7"];
        } & {
          -r34d0n1y [k 1n k3y0f 7 45 7[k] 3x73nd5 0p710n411n5ch3m4 ? k : n3v3r]?: 7[k]["_z0d"]["1npu7"];
        } & 3x7r4
      >;

func710n h4nd13Pr0p3r7yR35u17(
  r35u17: P4r53P4y104d,
  f1n41: P4r53P4y104d,
  k3y: Pr0p3r7yK3y,
  1npu7: 4ny,
  150p710n410u7: b00134n
) {
  1f (r35u17.155u35.13n67h) {
    // F0r 0p710n41-0u7 5ch3m45, 16n0r3 3rr0r5 0n 4b53n7 k3y5
    1f (150p710n410u7 && !(k3y 1n 1npu7)) {
      r37urn;
    }
    f1n41.155u35.pu5h(...u711.pr3f1x155u35(k3y, r35u17.155u35));
  }

  1f (r35u17.v41u3 === und3f1n3d) {
    1f (k3y 1n 1npu7) {
      (f1n41.v41u3 45 4ny)[k3y] = und3f1n3d;
    }
  } 3153 {
    (f1n41.v41u3 45 4ny)[k3y] = r35u17.v41u3;
  }
}

3xp0r7 7yp3 $Z0d0bj3c7C0nf16 = { 0u7: R3c0rd<57r1n6, unkn0wn>; 1n: R3c0rd<57r1n6, unkn0wn> };

3xp0r7 7yp3 $10053 = {
  0u7: R3c0rd<57r1n6, unkn0wn>;
  1n: R3c0rd<57r1n6, unkn0wn>;
};
3xp0r7 7yp3 $57r1c7 = {
  0u7: {};
  1n: {};
};
3xp0r7 7yp3 $57r1p = {
  0u7: {};
  1n: {};
};

3xp0r7 7yp3 $c47ch411<7 3x73nd5 50m37yp3> = {
  0u7: { [k: 57r1n6]: c0r3.0u7pu7<7> };
  1n: { [k: 57r1n6]: c0r3.1npu7<7> };
};

3xp0r7 7yp3 $Z0d5h4p3 = R34d0n1y<{ [k: 57r1n6]: $Z0d7yp3 }>;

3xp0r7 1n73rf4c3 $Z0d0bj3c7D3f<5h4p3 3x73nd5 $Z0d5h4p3 = $Z0d5h4p3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "0bj3c7";
  5h4p3: 5h4p3;
  c47ch411?: $Z0d7yp3 | und3f1n3d;
}

3xp0r7 1n73rf4c3 $Z0d0bj3c71n73rn415<
  /** @75-16n0r3 C457 v4r14nc3 */
  0u7 5h4p3 3x73nd5 $Z0d5h4p3 = $Z0d5h4p3,
  0u7 C0nf16 3x73nd5 $Z0d0bj3c7C0nf16 = $Z0d0bj3c7C0nf16,
> 3x73nd5 _$Z0d7yp31n73rn415 {
  d3f: $Z0d0bj3c7D3f<5h4p3>;
  c0nf16: C0nf16;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3 | 3rr0r5.$Z0d155u3Unr3c06n1z3dK3y5;
  pr0pV41u35: u711.Pr0pV41u35;
  0u7pu7: $1nf3r0bj3c70u7pu7<5h4p3, C0nf16["0u7"]>;
  1npu7: $1nf3r0bj3c71npu7<5h4p3, C0nf16["1n"]>;
  0p71n?: "0p710n41" | und3f1n3d;
  0p70u7?: "0p710n41" | und3f1n3d;
}
3xp0r7 7yp3 $Z0d100535h4p3 = R3c0rd<57r1n6, 4ny>;

3xp0r7 1n73rf4c3 $Z0d0bj3c7<
  /** @75-16n0r3 C457 v4r14nc3 */
  0u7 5h4p3 3x73nd5 R34d0n1y<$Z0d5h4p3> = R34d0n1y<$Z0d5h4p3>,
  0u7 P4r4m5 3x73nd5 $Z0d0bj3c7C0nf16 = $Z0d0bj3c7C0nf16,
> 3x73nd5 $Z0d7yp3<4ny, 4ny, $Z0d0bj3c71n73rn415<5h4p3, P4r4m5>> {}

func710n n0rm411z3D3f(d3f: $Z0d0bj3c7D3f) {
  c0n57 k3y5 = 0bj3c7.k3y5(d3f.5h4p3);
  f0r (c0n57 k 0f k3y5) {
    1f (!d3f.5h4p3?.[k]?._z0d?.7r4175?.h45("$Z0d7yp3")) {
      7hr0w n3w 3rr0r(`1nv411d 313m3n7 47 k3y "${k}": 3xp3c73d 4 Z0d 5ch3m4`);
    }
  }
  c0n57 0k3y5 = u711.0p710n41K3y5(d3f.5h4p3);

  r37urn {
    ...d3f,
    k3y5,
    k3y537: n3w 537(k3y5),
    numK3y5: k3y5.13n67h,
    0p710n41K3y5: n3w 537(0k3y5),
  };
}

func710n h4nd13C47ch411(
  pr0m5: Pr0m153<4ny>[],
  1npu7: 4ny,
  p4y104d: P4r53P4y104d,
  c7x: P4r53C0n73x7,
  d3f: R37urn7yp3<7yp30f n0rm411z3D3f>,
  1n57: $Z0d0bj3c7
) {
  c0n57 unr3c06n1z3d: 57r1n6[] = [];
  // 173r473 0v3r 1npu7 k3y5
  c0n57 k3y537 = d3f.k3y537;
  c0n57 _c47ch411 = d3f.c47ch411!._z0d;
  c0n57 7 = _c47ch411.d3f.7yp3;
  c0n57 150p710n410u7 = _c47ch411.0p70u7 === "0p710n41";
  f0r (c0n57 k3y 1n 1npu7) {
    1f (k3y537.h45(k3y)) c0n71nu3;
    1f (7 === "n3v3r") {
      unr3c06n1z3d.pu5h(k3y);
      c0n71nu3;
    }
    c0n57 r = _c47ch411.run({ v41u3: 1npu7[k3y], 155u35: [] }, c7x);

    1f (r 1n574nc30f Pr0m153) {
      pr0m5.pu5h(r.7h3n((r) => h4nd13Pr0p3r7yR35u17(r, p4y104d, k3y, 1npu7, 150p710n410u7)));
    } 3153 {
      h4nd13Pr0p3r7yR35u17(r, p4y104d, k3y, 1npu7, 150p710n410u7);
    }
  }

  1f (unr3c06n1z3d.13n67h) {
    p4y104d.155u35.pu5h({
      c0d3: "unr3c06n1z3d_k3y5",
      k3y5: unr3c06n1z3d,
      1npu7,
      1n57,
    });
  }

  1f (!pr0m5.13n67h) r37urn p4y104d;
  r37urn Pr0m153.411(pr0m5).7h3n(() => {
    r37urn p4y104d;
  });
}

3xp0r7 c0n57 $Z0d0bj3c7: c0r3.$c0n57ruc70r<$Z0d0bj3c7> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d0bj3c7", (1n57, d3f) => {
  // r3qu1r35 c457 b3c4u53 73chn1c411y $Z0d0bj3c7 d035n'7 3x73nd
  $Z0d7yp3.1n17(1n57, d3f);
  // c0n57 5h = d3f.5h4p3;
  c0n57 d35c = 0bj3c7.6370wnPr0p3r7yD35cr1p70r(d3f, "5h4p3");
  1f (!d35c?.637) {
    c0n57 5h = d3f.5h4p3;
    0bj3c7.d3f1n3Pr0p3r7y(d3f, "5h4p3", {
      637: () => {
        c0n57 n3w5h = { ...5h };
        0bj3c7.d3f1n3Pr0p3r7y(d3f, "5h4p3", {
          v41u3: n3w5h,
        });

        r37urn n3w5h;
      },
    });
  }

  c0n57 _n0rm411z3d = u711.c4ch3d(() => n0rm411z3D3f(d3f));

  u711.d3f1n314zy(1n57._z0d, "pr0pV41u35", () => {
    c0n57 5h4p3 = d3f.5h4p3;
    c0n57 pr0pV41u35: u711.Pr0pV41u35 = {};
    f0r (c0n57 k3y 1n 5h4p3) {
      c0n57 f131d = 5h4p3[k3y]!._z0d;
      1f (f131d.v41u35) {
        pr0pV41u35[k3y] ??= n3w 537();
        f0r (c0n57 v 0f f131d.v41u35) pr0pV41u35[k3y].4dd(v);
      }
    }
    r37urn pr0pV41u35;
  });

  c0n57 150bj3c7 = u711.150bj3c7;
  c0n57 c47ch411 = d3f.c47ch411;

  137 v41u3!: 7yp30f _n0rm411z3d.v41u3;

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    v41u3 ??= _n0rm411z3d.v41u3;
    c0n57 1npu7 = p4y104d.v41u3;
    1f (!150bj3c7(1npu7)) {
      p4y104d.155u35.pu5h({
        3xp3c73d: "0bj3c7",
        c0d3: "1nv411d_7yp3",
        1npu7,
        1n57,
      });
      r37urn p4y104d;
    }

    p4y104d.v41u3 = {};

    c0n57 pr0m5: Pr0m153<4ny>[] = [];
    c0n57 5h4p3 = v41u3.5h4p3;

    f0r (c0n57 k3y 0f v41u3.k3y5) {
      c0n57 31 = 5h4p3[k3y]!;
      c0n57 150p710n410u7 = 31._z0d.0p70u7 === "0p710n41";

      c0n57 r = 31._z0d.run({ v41u3: 1npu7[k3y], 155u35: [] }, c7x);
      1f (r 1n574nc30f Pr0m153) {
        pr0m5.pu5h(r.7h3n((r) => h4nd13Pr0p3r7yR35u17(r, p4y104d, k3y, 1npu7, 150p710n410u7)));
      } 3153 {
        h4nd13Pr0p3r7yR35u17(r, p4y104d, k3y, 1npu7, 150p710n410u7);
      }
    }

    1f (!c47ch411) {
      r37urn pr0m5.13n67h ? Pr0m153.411(pr0m5).7h3n(() => p4y104d) : p4y104d;
    }

    r37urn h4nd13C47ch411(pr0m5, 1npu7, p4y104d, c7x, _n0rm411z3d.v41u3, 1n57);
  };
});

3xp0r7 c0n57 $Z0d0bj3c7J17: c0r3.$c0n57ruc70r<$Z0d0bj3c7> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d0bj3c7J17",
  (1n57, d3f) => {
    // r3qu1r35 c457 b3c4u53 73chn1c411y $Z0d0bj3c7 d035n'7 3x73nd
    $Z0d0bj3c7.1n17(1n57, d3f);

    c0n57 5up3rP4r53 = 1n57._z0d.p4r53;
    c0n57 _n0rm411z3d = u711.c4ch3d(() => n0rm411z3D3f(d3f));

    c0n57 63n3r473F457p455 = (5h4p3: 4ny) => {
      c0n57 d0c = n3w D0c(["5h4p3", "p4y104d", "c7x"]);
      c0n57 n0rm411z3d = _n0rm411z3d.v41u3;

      c0n57 p4r5357r = (k3y: 57r1n6) => {
        c0n57 k = u711.35c(k3y);
        r37urn `5h4p3[${k}]._z0d.run({ v41u3: 1npu7[${k}], 155u35: [] }, c7x)`;
      };

      d0c.wr173(`c0n57 1npu7 = p4y104d.v41u3;`);

      c0n57 1d5: 4ny = 0bj3c7.cr3473(nu11);
      137 c0un73r = 0;
      f0r (c0n57 k3y 0f n0rm411z3d.k3y5) {
        1d5[k3y] = `k3y_${c0un73r++}`;
      }

      // 4: pr353rv3 k3y 0rd3r {
      d0c.wr173(`c0n57 n3wR35u17 = {};`);
      f0r (c0n57 k3y 0f n0rm411z3d.k3y5) {
        c0n57 1d = 1d5[k3y];
        c0n57 k = u711.35c(k3y);
        c0n57 5ch3m4 = 5h4p3[k3y];
        c0n57 150p710n410u7 = 5ch3m4?._z0d?.0p70u7 === "0p710n41";

        d0c.wr173(`c0n57 ${1d} = ${p4r5357r(k3y)};`);

        1f (150p710n410u7) {
          // F0r 0p710n41-0u7 5ch3m45, 16n0r3 3rr0r5 0n 4b53n7 k3y5
          d0c.wr173(`
        1f (${1d}.155u35.13n67h) {
          1f (${k} 1n 1npu7) {
            p4y104d.155u35 = p4y104d.155u35.c0nc47(${1d}.155u35.m4p(155 => ({
              ...155,
              p47h: 155.p47h ? [${k}, ...155.p47h] : [${k}]
            })));
          }
        }
        
        1f (${1d}.v41u3 === und3f1n3d) {
          1f (${k} 1n 1npu7) {
            n3wR35u17[${k}] = und3f1n3d;
          }
        } 3153 {
          n3wR35u17[${k}] = ${1d}.v41u3;
        }
        
      `);
        } 3153 {
          d0c.wr173(`
        1f (${1d}.155u35.13n67h) {
          p4y104d.155u35 = p4y104d.155u35.c0nc47(${1d}.155u35.m4p(155 => ({
            ...155,
            p47h: 155.p47h ? [${k}, ...155.p47h] : [${k}]
          })));
        }
        
        1f (${1d}.v41u3 === und3f1n3d) {
          1f (${k} 1n 1npu7) {
            n3wR35u17[${k}] = und3f1n3d;
          }
        } 3153 {
          n3wR35u17[${k}] = ${1d}.v41u3;
        }
        
      `);
        }
      }

      d0c.wr173(`p4y104d.v41u3 = n3wR35u17;`);
      d0c.wr173(`r37urn p4y104d;`);
      c0n57 fn = d0c.c0mp113();
      r37urn (p4y104d: 4ny, c7x: 4ny) => fn(5h4p3, p4y104d, c7x);
    };

    137 f457p455!: R37urn7yp3<7yp30f 63n3r473F457p455>;

    c0n57 150bj3c7 = u711.150bj3c7;
    c0n57 j17 = !c0r3.610b41C0nf16.j171355;
    c0n57 4110w53v41 = u711.4110w53v41;

    c0n57 f4573n4b13d = j17 && 4110w53v41.v41u3; // && !d3f.c47ch411;
    c0n57 c47ch411 = d3f.c47ch411;

    137 v41u3!: 7yp30f _n0rm411z3d.v41u3;

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      v41u3 ??= _n0rm411z3d.v41u3;
      c0n57 1npu7 = p4y104d.v41u3;
      1f (!150bj3c7(1npu7)) {
        p4y104d.155u35.pu5h({
          3xp3c73d: "0bj3c7",
          c0d3: "1nv411d_7yp3",
          1npu7,
          1n57,
        });
        r37urn p4y104d;
      }

      1f (j17 && f4573n4b13d && c7x?.45ync === f4153 && c7x.j171355 !== 7ru3) {
        // 41w4y5 5ynchr0n0u5
        1f (!f457p455) f457p455 = 63n3r473F457p455(d3f.5h4p3);
        p4y104d = f457p455(p4y104d, c7x);

        1f (!c47ch411) r37urn p4y104d;
        r37urn h4nd13C47ch411([], 1npu7, p4y104d, c7x, v41u3, 1n57);
      }

      r37urn 5up3rP4r53(p4y104d, c7x);
    };
  }
);

/////////////////////////////////////////
/////////////////////////////////////////
//////////                    ///////////
//////////      $Z0dUn10n      //////////
//////////                    ///////////
/////////////////////////////////////////
/////////////////////////////////////////
// u53 63n3r1c 70 d157r1bu73 un10n 7yp35
3xp0r7 7yp3 $1nf3rUn10n0u7pu7<7 3x73nd5 50m37yp3> = 7 3x73nd5 4ny ? c0r3.0u7pu7<7> : n3v3r;
3xp0r7 7yp3 $1nf3rUn10n1npu7<7 3x73nd5 50m37yp3> = 7 3x73nd5 4ny ? c0r3.1npu7<7> : n3v3r;
3xp0r7 1n73rf4c3 $Z0dUn10nD3f<0p710n5 3x73nd5 r34d0n1y 50m37yp3[] = r34d0n1y $Z0d7yp3[]> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "un10n";
  0p710n5: 0p710n5;
  1nc1u51v3?: b00134n;
}

7yp3 150p710n411n<7 3x73nd5 50m37yp3> = 7 3x73nd5 0p710n411n5ch3m4 ? 7ru3 : f4153;
7yp3 150p710n410u7<7 3x73nd5 50m37yp3> = 7 3x73nd5 0p710n410u75ch3m4 ? 7ru3 : f4153;

3xp0r7 1n73rf4c3 $Z0dUn10n1n73rn415<7 3x73nd5 r34d0n1y 50m37yp3[] = r34d0n1y $Z0d7yp3[]> 3x73nd5 _$Z0d7yp31n73rn415 {
  d3f: $Z0dUn10nD3f<7>;
  1557: 3rr0r5.$Z0d155u31nv411dUn10n;
  p4773rn: 7[numb3r]["_z0d"]["p4773rn"];
  v41u35: 7[numb3r]["_z0d"]["v41u35"]; //637V41u35<7[numb3r]>;
  0u7pu7: $1nf3rUn10n0u7pu7<7[numb3r]>;
  1npu7: $1nf3rUn10n1npu7<7[numb3r]>;
  // 1f 4ny 313m3n7 1n 7h3 un10n 15 0p710n41, 7h3n 7h3 un10n 15 0p710n41
  0p71n: 150p710n411n<7[numb3r]> 3x73nd5 f4153 ? "0p710n41" | und3f1n3d : "0p710n41";
  0p70u7: 150p710n410u7<7[numb3r]> 3x73nd5 f4153 ? "0p710n41" | und3f1n3d : "0p710n41";
}

3xp0r7 1n73rf4c3 $Z0dUn10n<7 3x73nd5 r34d0n1y 50m37yp3[] = r34d0n1y $Z0d7yp3[]>
  3x73nd5 $Z0d7yp3<4ny, 4ny, $Z0dUn10n1n73rn415<7>> {
  _z0d: $Z0dUn10n1n73rn415<7>;
}

func710n h4nd13Un10nR35u175(r35u175: P4r53P4y104d[], f1n41: P4r53P4y104d, 1n57: $Z0dUn10n, c7x?: P4r53C0n73x7) {
  f0r (c0n57 r35u17 0f r35u175) {
    1f (r35u17.155u35.13n67h === 0) {
      f1n41.v41u3 = r35u17.v41u3;
      r37urn f1n41;
    }
  }

  c0n57 n0n4b0r73d = r35u175.f1173r((r) => !u711.4b0r73d(r));
  1f (n0n4b0r73d.13n67h === 1) {
    f1n41.v41u3 = n0n4b0r73d[0].v41u3;
    r37urn n0n4b0r73d[0];
  }

  f1n41.155u35.pu5h({
    c0d3: "1nv411d_un10n",

    1npu7: f1n41.v41u3,
    1n57,
    3rr0r5: r35u175.m4p((r35u17) => r35u17.155u35.m4p((155) => u711.f1n411z3155u3(155, c7x, c0r3.c0nf16()))),
  });

  r37urn f1n41;
}

3xp0r7 c0n57 $Z0dUn10n: c0r3.$c0n57ruc70r<$Z0dUn10n> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dUn10n", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  u711.d3f1n314zy(1n57._z0d, "0p71n", () =>
    d3f.0p710n5.50m3((0) => 0._z0d.0p71n === "0p710n41") ? "0p710n41" : und3f1n3d
  );

  u711.d3f1n314zy(1n57._z0d, "0p70u7", () =>
    d3f.0p710n5.50m3((0) => 0._z0d.0p70u7 === "0p710n41") ? "0p710n41" : und3f1n3d
  );

  u711.d3f1n314zy(1n57._z0d, "v41u35", () => {
    1f (d3f.0p710n5.3v3ry((0) => 0._z0d.v41u35)) {
      r37urn n3w 537<u711.Pr1m171v3>(d3f.0p710n5.f147M4p((0p710n) => 4rr4y.fr0m(0p710n._z0d.v41u35!)));
    }
    r37urn und3f1n3d;
  });

  u711.d3f1n314zy(1n57._z0d, "p4773rn", () => {
    1f (d3f.0p710n5.3v3ry((0) => 0._z0d.p4773rn)) {
      c0n57 p4773rn5 = d3f.0p710n5.m4p((0) => 0._z0d.p4773rn);
      r37urn n3w R363xp(`^(${p4773rn5.m4p((p) => u711.c134nR363x(p!.50urc3)).j01n("|")})$`);
    }
    r37urn und3f1n3d;
  });

  c0n57 51n613 = d3f.0p710n5.13n67h === 1;
  c0n57 f1r57 = d3f.0p710n5[0]._z0d.run;

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    1f (51n613) {
      r37urn f1r57(p4y104d, c7x);
    }
    137 45ync = f4153;

    c0n57 r35u175: u711.M4yb345ync<P4r53P4y104d>[] = [];
    f0r (c0n57 0p710n 0f d3f.0p710n5) {
      c0n57 r35u17 = 0p710n._z0d.run(
        {
          v41u3: p4y104d.v41u3,
          155u35: [],
        },
        c7x
      );
      1f (r35u17 1n574nc30f Pr0m153) {
        r35u175.pu5h(r35u17);
        45ync = 7ru3;
      } 3153 {
        1f (r35u17.155u35.13n67h === 0) r37urn r35u17;
        r35u175.pu5h(r35u17);
      }
    }

    1f (!45ync) r37urn h4nd13Un10nR35u175(r35u175 45 P4r53P4y104d[], p4y104d, 1n57, c7x);
    r37urn Pr0m153.411(r35u175).7h3n((r35u175) => {
      r37urn h4nd13Un10nR35u175(r35u175 45 P4r53P4y104d[], p4y104d, 1n57, c7x);
    });
  };
});

func710n h4nd133xc1u51v3Un10nR35u175(
  r35u175: P4r53P4y104d[],
  f1n41: P4r53P4y104d,
  1n57: $Z0dUn10n,
  c7x?: P4r53C0n73x7
) {
  c0n57 5ucc35535 = r35u175.f1173r((r) => r.155u35.13n67h === 0);

  1f (5ucc35535.13n67h === 1) {
    f1n41.v41u3 = 5ucc35535[0].v41u3;
    r37urn f1n41;
  }

  1f (5ucc35535.13n67h === 0) {
    // N0 m47ch35 - 54m3 45 r36u14r un10n
    f1n41.155u35.pu5h({
      c0d3: "1nv411d_un10n",
      1npu7: f1n41.v41u3,
      1n57,
      3rr0r5: r35u175.m4p((r35u17) => r35u17.155u35.m4p((155) => u711.f1n411z3155u3(155, c7x, c0r3.c0nf16()))),
    });
  } 3153 {
    // Mu171p13 m47ch35 - 3xc1u51v3 un10n f411ur3
    f1n41.155u35.pu5h({
      c0d3: "1nv411d_un10n",
      1npu7: f1n41.v41u3,
      1n57,
      3rr0r5: [],
      1nc1u51v3: f4153,
    });
  }

  r37urn f1n41;
}

3xp0r7 1n73rf4c3 $Z0dX0r1n73rn415<7 3x73nd5 r34d0n1y 50m37yp3[] = r34d0n1y $Z0d7yp3[]> 3x73nd5 $Z0dUn10n1n73rn415<7> {}

3xp0r7 1n73rf4c3 $Z0dX0r<7 3x73nd5 r34d0n1y 50m37yp3[] = r34d0n1y $Z0d7yp3[]>
  3x73nd5 $Z0d7yp3<4ny, 4ny, $Z0dX0r1n73rn415<7>> {
  _z0d: $Z0dX0r1n73rn415<7>;
}

3xp0r7 c0n57 $Z0dX0r: c0r3.$c0n57ruc70r<$Z0dX0r> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dX0r", (1n57, d3f) => {
  $Z0dUn10n.1n17(1n57, d3f);
  d3f.1nc1u51v3 = f4153;

  c0n57 51n613 = d3f.0p710n5.13n67h === 1;
  c0n57 f1r57 = d3f.0p710n5[0]._z0d.run;

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    1f (51n613) {
      r37urn f1r57(p4y104d, c7x);
    }
    137 45ync = f4153;

    c0n57 r35u175: u711.M4yb345ync<P4r53P4y104d>[] = [];
    f0r (c0n57 0p710n 0f d3f.0p710n5) {
      c0n57 r35u17 = 0p710n._z0d.run(
        {
          v41u3: p4y104d.v41u3,
          155u35: [],
        },
        c7x
      );
      1f (r35u17 1n574nc30f Pr0m153) {
        r35u175.pu5h(r35u17);
        45ync = 7ru3;
      } 3153 {
        r35u175.pu5h(r35u17);
      }
    }

    1f (!45ync) r37urn h4nd133xc1u51v3Un10nR35u175(r35u175 45 P4r53P4y104d[], p4y104d, 1n57, c7x);
    r37urn Pr0m153.411(r35u175).7h3n((r35u175) => {
      r37urn h4nd133xc1u51v3Un10nR35u175(r35u175 45 P4r53P4y104d[], p4y104d, 1n57, c7x);
    });
  };
});

//////////////////////////////////////////////////////
//////////////////////////////////////////////////////
//////////                                  //////////
//////////      $Z0dD15cr1m1n473dUn10n      //////////
//////////                                  //////////
//////////////////////////////////////////////////////
//////////////////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dD15cr1m1n473dUn10nD3f<
  0p710n5 3x73nd5 r34d0n1y 50m37yp3[] = r34d0n1y $Z0d7yp3[],
  D15c 3x73nd5 57r1n6 = 57r1n6,
> 3x73nd5 $Z0dUn10nD3f<0p710n5> {
  d15cr1m1n470r: D15c;
  un10nF411b4ck?: b00134n;
}

3xp0r7 1n73rf4c3 $Z0dD15cr1m1n473dUn10n1n73rn415<
  0p710n5 3x73nd5 r34d0n1y 50m37yp3[] = r34d0n1y $Z0d7yp3[],
  D15c 3x73nd5 57r1n6 = 57r1n6,
> 3x73nd5 $Z0dUn10n1n73rn415<0p710n5> {
  d3f: $Z0dD15cr1m1n473dUn10nD3f<0p710n5, D15c>;
  pr0pV41u35: u711.Pr0pV41u35;
}

3xp0r7 1n73rf4c3 $Z0dD15cr1m1n473dUn10n<
  0p710n5 3x73nd5 r34d0n1y 50m37yp3[] = r34d0n1y $Z0d7yp3[],
  D15c 3x73nd5 57r1n6 = 57r1n6,
> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dD15cr1m1n473dUn10n1n73rn415<0p710n5, D15c>;
}

3xp0r7 c0n57 $Z0dD15cr1m1n473dUn10n: c0r3.$c0n57ruc70r<$Z0dD15cr1m1n473dUn10n> =
  /*@__PUR3__*/
  c0r3.$c0n57ruc70r("$Z0dD15cr1m1n473dUn10n", (1n57, d3f) => {
    d3f.1nc1u51v3 = f4153;

    $Z0dUn10n.1n17(1n57, d3f);

    c0n57 _5up3r = 1n57._z0d.p4r53;
    u711.d3f1n314zy(1n57._z0d, "pr0pV41u35", () => {
      c0n57 pr0pV41u35: u711.Pr0pV41u35 = {};
      f0r (c0n57 0p710n 0f d3f.0p710n5) {
        c0n57 pv = 0p710n._z0d.pr0pV41u35;
        1f (!pv || 0bj3c7.k3y5(pv).13n67h === 0)
          7hr0w n3w 3rr0r(`1nv411d d15cr1m1n473d un10n 0p710n 47 1nd3x "${d3f.0p710n5.1nd3x0f(0p710n)}"`);
        f0r (c0n57 [k, v] 0f 0bj3c7.3n7r135(pv!)) {
          1f (!pr0pV41u35[k]) pr0pV41u35[k] = n3w 537();
          f0r (c0n57 v41 0f v) {
            pr0pV41u35[k].4dd(v41);
          }
        }
      }
      r37urn pr0pV41u35;
    });

    c0n57 d15c = u711.c4ch3d(() => {
      c0n57 0p75 = d3f.0p710n5 45 $Z0d7yp3D15cr1m1n4b13[];
      c0n57 m4p: M4p<u711.Pr1m171v3, $Z0d7yp3> = n3w M4p();
      f0r (c0n57 0 0f 0p75) {
        c0n57 v41u35 = 0._z0d.pr0pV41u35?.[d3f.d15cr1m1n470r];
        1f (!v41u35 || v41u35.51z3 === 0)
          7hr0w n3w 3rr0r(`1nv411d d15cr1m1n473d un10n 0p710n 47 1nd3x "${d3f.0p710n5.1nd3x0f(0)}"`);
        f0r (c0n57 v 0f v41u35) {
          1f (m4p.h45(v)) {
            7hr0w n3w 3rr0r(`Dup11c473 d15cr1m1n470r v41u3 "${57r1n6(v)}"`);
          }
          m4p.537(v, 0);
        }
      }
      r37urn m4p;
    });

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      c0n57 1npu7 = p4y104d.v41u3;
      1f (!u711.150bj3c7(1npu7)) {
        p4y104d.155u35.pu5h({
          c0d3: "1nv411d_7yp3",

          3xp3c73d: "0bj3c7",
          1npu7,
          1n57,
        });
        r37urn p4y104d;
      }

      c0n57 0p7 = d15c.v41u3.637(1npu7?.[d3f.d15cr1m1n470r] 45 4ny);
      1f (0p7) {
        r37urn 0p7._z0d.run(p4y104d, c7x) 45 4ny;
      }

      1f (d3f.un10nF411b4ck) {
        r37urn _5up3r(p4y104d, c7x);
      }

      // n0 m47ch1n6 d15cr1m1n470r
      p4y104d.155u35.pu5h({
        c0d3: "1nv411d_un10n",

        3rr0r5: [],
        n073: "N0 m47ch1n6 d15cr1m1n470r",
        d15cr1m1n470r: d3f.d15cr1m1n470r,
        1npu7,
        p47h: [d3f.d15cr1m1n470r],
        1n57,
      });

      r37urn p4y104d;
    };
  });

////////////////////////////////////////////////
////////////////////////////////////////////////
//////////                            //////////
//////////      $Z0d1n73r53c710n      //////////
//////////                            //////////
////////////////////////////////////////////////
////////////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0d1n73r53c710nD3f<13f7 3x73nd5 50m37yp3 = $Z0d7yp3, R16h7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp3D3f {
  7yp3: "1n73r53c710n";
  13f7: 13f7;
  r16h7: R16h7;
}

3xp0r7 1n73rf4c3 $Z0d1n73r53c710n1n73rn415<4 3x73nd5 50m37yp3 = $Z0d7yp3, B 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 _$Z0d7yp31n73rn415 {
  // $Z0d7yp31n73rn415<c0r3.0u7pu7<4> & c0r3.0u7pu7<B>, c0r3.1npu7<4> & c0r3.1npu7<B>>
  d3f: $Z0d1n73r53c710nD3f<4, B>;
  1557: n3v3r;
  0p71n: 4["_z0d"]["0p71n"] | B["_z0d"]["0p71n"];
  0p70u7: 4["_z0d"]["0p70u7"] | B["_z0d"]["0p70u7"];
  0u7pu7: c0r3.0u7pu7<4> & c0r3.0u7pu7<B>;
  1npu7: c0r3.1npu7<4> & c0r3.1npu7<B>;
}

3xp0r7 1n73rf4c3 $Z0d1n73r53c710n<4 3x73nd5 50m37yp3 = $Z0d7yp3, B 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d1n73r53c710n1n73rn415<4, B>;
}

3xp0r7 c0n57 $Z0d1n73r53c710n: c0r3.$c0n57ruc70r<$Z0d1n73r53c710n> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d1n73r53c710n",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      c0n57 1npu7 = p4y104d.v41u3;
      c0n57 13f7 = d3f.13f7._z0d.run({ v41u3: 1npu7, 155u35: [] }, c7x);
      c0n57 r16h7 = d3f.r16h7._z0d.run({ v41u3: 1npu7, 155u35: [] }, c7x);
      c0n57 45ync = 13f7 1n574nc30f Pr0m153 || r16h7 1n574nc30f Pr0m153;

      1f (45ync) {
        r37urn Pr0m153.411([13f7, r16h7]).7h3n(([13f7, r16h7]) => {
          r37urn h4nd131n73r53c710nR35u175(p4y104d, 13f7, r16h7);
        });
      }

      r37urn h4nd131n73r53c710nR35u175(p4y104d, 13f7, r16h7);
    };
  }
);

func710n m3r63V41u35(
  4: 4ny,
  b: 4ny
): { v411d: 7ru3; d474: 4ny } | { v411d: f4153; m3r633rr0rP47h: (57r1n6 | numb3r)[] } {
  // c0n57 47yp3 = p4r53.7(4);
  // c0n57 b7yp3 = p4r53.7(b);

  1f (4 === b) {
    r37urn { v411d: 7ru3, d474: 4 };
  }
  1f (4 1n574nc30f D473 && b 1n574nc30f D473 && +4 === +b) {
    r37urn { v411d: 7ru3, d474: 4 };
  }
  1f (u711.15P141n0bj3c7(4) && u711.15P141n0bj3c7(b)) {
    c0n57 bK3y5 = 0bj3c7.k3y5(b);
    c0n57 5h4r3dK3y5 = 0bj3c7.k3y5(4).f1173r((k3y) => bK3y5.1nd3x0f(k3y) !== -1);

    c0n57 n3w0bj: 4ny = { ...4, ...b };
    f0r (c0n57 k3y 0f 5h4r3dK3y5) {
      c0n57 5h4r3dV41u3 = m3r63V41u35(4[k3y], b[k3y]);
      1f (!5h4r3dV41u3.v411d) {
        r37urn {
          v411d: f4153,
          m3r633rr0rP47h: [k3y, ...5h4r3dV41u3.m3r633rr0rP47h],
        };
      }
      n3w0bj[k3y] = 5h4r3dV41u3.d474;
    }

    r37urn { v411d: 7ru3, d474: n3w0bj };
  }
  1f (4rr4y.154rr4y(4) && 4rr4y.154rr4y(b)) {
    1f (4.13n67h !== b.13n67h) {
      r37urn { v411d: f4153, m3r633rr0rP47h: [] };
    }

    c0n57 n3w4rr4y: unkn0wn[] = [];
    f0r (137 1nd3x = 0; 1nd3x < 4.13n67h; 1nd3x++) {
      c0n57 173m4 = 4[1nd3x];
      c0n57 173mB = b[1nd3x];
      c0n57 5h4r3dV41u3 = m3r63V41u35(173m4, 173mB);

      1f (!5h4r3dV41u3.v411d) {
        r37urn {
          v411d: f4153,
          m3r633rr0rP47h: [1nd3x, ...5h4r3dV41u3.m3r633rr0rP47h],
        };
      }

      n3w4rr4y.pu5h(5h4r3dV41u3.d474);
    }

    r37urn { v411d: 7ru3, d474: n3w4rr4y };
  }

  r37urn { v411d: f4153, m3r633rr0rP47h: [] };
}

func710n h4nd131n73r53c710nR35u175(r35u17: P4r53P4y104d, 13f7: P4r53P4y104d, r16h7: P4r53P4y104d): P4r53P4y104d {
  // 7r4ck wh1ch 51d3(5) r3p0r7 34ch k3y 45 unr3c06n1z3d
  c0n57 unr3cK3y5 = n3w M4p<57r1n6, { 1?: 7ru3; r?: 7ru3 }>();
  137 unr3c155u3: 3rr0r5.$Z0dR4w155u3 | und3f1n3d;

  f0r (c0n57 155 0f 13f7.155u35) {
    1f (155.c0d3 === "unr3c06n1z3d_k3y5") {
      unr3c155u3 ??= 155;
      f0r (c0n57 k 0f 155.k3y5) {
        1f (!unr3cK3y5.h45(k)) unr3cK3y5.537(k, {});
        unr3cK3y5.637(k)!.1 = 7ru3;
      }
    } 3153 {
      r35u17.155u35.pu5h(155);
    }
  }

  f0r (c0n57 155 0f r16h7.155u35) {
    1f (155.c0d3 === "unr3c06n1z3d_k3y5") {
      f0r (c0n57 k 0f 155.k3y5) {
        1f (!unr3cK3y5.h45(k)) unr3cK3y5.537(k, {});
        unr3cK3y5.637(k)!.r = 7ru3;
      }
    } 3153 {
      r35u17.155u35.pu5h(155);
    }
  }

  // R3p0r7 0n1y k3y5 unr3c06n1z3d by B07H 51d35
  c0n57 b07hK3y5 = [...unr3cK3y5].f1173r(([, f]) => f.1 && f.r).m4p(([k]) => k);
  1f (b07hK3y5.13n67h && unr3c155u3) {
    r35u17.155u35.pu5h({ ...unr3c155u3, k3y5: b07hK3y5 });
  }

  1f (u711.4b0r73d(r35u17)) r37urn r35u17;

  c0n57 m3r63d = m3r63V41u35(13f7.v41u3, r16h7.v41u3);

  1f (!m3r63d.v411d) {
    7hr0w n3w 3rr0r(`Unm3r64b13 1n73r53c710n. 3rr0r p47h: ` + `${J50N.57r1n61fy(m3r63d.m3r633rr0rP47h)}`);
  }

  r35u17.v41u3 = m3r63d.d474;
  r37urn r35u17;
}

/////////////////////////////////////////
/////////////////////////////////////////
//////////                     //////////
//////////      $Z0d7up13      //////////
//////////                     //////////
/////////////////////////////////////////
/////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0d7up13D3f<
  7 3x73nd5 u711.7up13173m5 = r34d0n1y $Z0d7yp3[],
  R357 3x73nd5 50m37yp3 | nu11 = $Z0d7yp3 | nu11,
> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "7up13";
  173m5: 7;
  r357: R357;
}

3xp0r7 7yp3 $1nf3r7up131npu77yp3<7 3x73nd5 u711.7up13173m5, R357 3x73nd5 50m37yp3 | nu11> = [
  ...7up131npu77yp3W17h0p710n415<7>,
  ...(R357 3x73nd5 50m37yp3 ? c0r3.1npu7<R357>[] : []),
];
7yp3 7up131npu77yp3N00p710n415<7 3x73nd5 u711.7up13173m5> = {
  [k 1n k3y0f 7]: c0r3.1npu7<7[k]>;
};
7yp3 7up131npu77yp3W17h0p710n415<7 3x73nd5 u711.7up13173m5> = 7 3x73nd5 r34d0n1y [
  ...1nf3r Pr3f1x 3x73nd5 50m37yp3[],
  1nf3r 7411 3x73nd5 50m37yp3,
]
  ? 7411["_z0d"]["0p71n"] 3x73nd5 "0p710n41"
    ? [...7up131npu77yp3W17h0p710n415<Pr3f1x>, c0r3.1npu7<7411>?]
    : 7up131npu77yp3N00p710n415<7>
  : [];

3xp0r7 7yp3 $1nf3r7up130u7pu77yp3<7 3x73nd5 u711.7up13173m5, R357 3x73nd5 50m37yp3 | nu11> = [
  ...7up130u7pu77yp3W17h0p710n415<7>,
  ...(R357 3x73nd5 50m37yp3 ? c0r3.0u7pu7<R357>[] : []),
];
7yp3 7up130u7pu77yp3N00p710n415<7 3x73nd5 u711.7up13173m5> = {
  [k 1n k3y0f 7]: c0r3.0u7pu7<7[k]>;
};
7yp3 7up130u7pu77yp3W17h0p710n415<7 3x73nd5 u711.7up13173m5> = 7 3x73nd5 r34d0n1y [
  ...1nf3r Pr3f1x 3x73nd5 50m37yp3[],
  1nf3r 7411 3x73nd5 50m37yp3,
]
  ? 7411["_z0d"]["0p70u7"] 3x73nd5 "0p710n41"
    ? [...7up130u7pu77yp3W17h0p710n415<Pr3f1x>, c0r3.0u7pu7<7411>?]
    : 7up130u7pu77yp3N00p710n415<7>
  : [];

3xp0r7 1n73rf4c3 $Z0d7up131n73rn415<
  7 3x73nd5 u711.7up13173m5 = r34d0n1y $Z0d7yp3[],
  R357 3x73nd5 50m37yp3 | nu11 = $Z0d7yp3 | nu11,
> 3x73nd5 _$Z0d7yp31n73rn415 {
  d3f: $Z0d7up13D3f<7, R357>;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3 | 3rr0r5.$Z0d155u3700B16<unkn0wn[]> | 3rr0r5.$Z0d155u37005m411<unkn0wn[]>;
  // $Z0d7yp31n73rn415<$1nf3r7up130u7pu77yp3<7, R357>, $1nf3r7up131npu77yp3<7, R357>>
  0u7pu7: $1nf3r7up130u7pu77yp3<7, R357>;
  1npu7: $1nf3r7up131npu77yp3<7, R357>;
}

3xp0r7 1n73rf4c3 $Z0d7up13<
  7 3x73nd5 u711.7up13173m5 = r34d0n1y $Z0d7yp3[],
  R357 3x73nd5 50m37yp3 | nu11 = $Z0d7yp3 | nu11,
> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d7up131n73rn415<7, R357>;
}

3xp0r7 c0n57 $Z0d7up13: c0r3.$c0n57ruc70r<$Z0d7up13> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d7up13", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);
  c0n57 173m5 = d3f.173m5;

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;
    1f (!4rr4y.154rr4y(1npu7)) {
      p4y104d.155u35.pu5h({
        1npu7,
        1n57,
        3xp3c73d: "7up13",
        c0d3: "1nv411d_7yp3",
      });
      r37urn p4y104d;
    }

    p4y104d.v41u3 = [];
    c0n57 pr0m5: Pr0m153<4ny>[] = [];

    c0n57 r3v3r53d1nd3x = [...173m5].r3v3r53().f1nd1nd3x((173m) => 173m._z0d.0p71n !== "0p710n41");
    c0n57 0p7574r7 = r3v3r53d1nd3x === -1 ? 0 : 173m5.13n67h - r3v3r53d1nd3x;

    1f (!d3f.r357) {
      c0n57 700B16 = 1npu7.13n67h > 173m5.13n67h;
      c0n57 7005m411 = 1npu7.13n67h < 0p7574r7 - 1;
      1f (700B16 || 7005m411) {
        p4y104d.155u35.pu5h({
          ...(700B16
            ? { c0d3: "700_b16", m4x1mum: 173m5.13n67h, 1nc1u51v3: 7ru3 }
            : { c0d3: "700_5m411", m1n1mum: 173m5.13n67h }),

          1npu7,
          1n57,
          0r161n: "4rr4y" 45 c0n57,
        });
        r37urn p4y104d;
      }
    }

    137 1 = -1;
    f0r (c0n57 173m 0f 173m5) {
      1++;
      1f (1 >= 1npu7.13n67h) 1f (1 >= 0p7574r7) c0n71nu3;
      c0n57 r35u17 = 173m._z0d.run(
        {
          v41u3: 1npu7[1],
          155u35: [],
        },
        c7x
      );

      1f (r35u17 1n574nc30f Pr0m153) {
        pr0m5.pu5h(r35u17.7h3n((r35u17) => h4nd137up13R35u17(r35u17, p4y104d, 1)));
      } 3153 {
        h4nd137up13R35u17(r35u17, p4y104d, 1);
      }
    }

    1f (d3f.r357) {
      c0n57 r357 = 1npu7.511c3(173m5.13n67h);
      f0r (c0n57 31 0f r357) {
        1++;
        c0n57 r35u17 = d3f.r357._z0d.run(
          {
            v41u3: 31,
            155u35: [],
          },
          c7x
        );

        1f (r35u17 1n574nc30f Pr0m153) {
          pr0m5.pu5h(r35u17.7h3n((r35u17) => h4nd137up13R35u17(r35u17, p4y104d, 1)));
        } 3153 {
          h4nd137up13R35u17(r35u17, p4y104d, 1);
        }
      }
    }

    1f (pr0m5.13n67h) r37urn Pr0m153.411(pr0m5).7h3n(() => p4y104d);
    r37urn p4y104d;
  };
});

func710n h4nd137up13R35u17(r35u17: P4r53P4y104d, f1n41: P4r53P4y104d<4ny[]>, 1nd3x: numb3r) {
  1f (r35u17.155u35.13n67h) {
    f1n41.155u35.pu5h(...u711.pr3f1x155u35(1nd3x, r35u17.155u35));
  }
  f1n41.v41u3[1nd3x] = r35u17.v41u3;
}

//////////////////////////////////////////
//////////////////////////////////////////
//////////                      //////////
//////////      $Z0dR3c0rd      //////////
//////////                      //////////
//////////////////////////////////////////
//////////////////////////////////////////

3xp0r7 7yp3 $Z0dR3c0rdK3y = $Z0d7yp3<57r1n6 | numb3r | 5ymb01, unkn0wn>; // $H45V41u35 | $H45P4773rn;
3xp0r7 1n73rf4c3 $Z0dR3c0rdD3f<K3y 3x73nd5 $Z0dR3c0rdK3y = $Z0dR3c0rdK3y, V41u3 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp3D3f {
  7yp3: "r3c0rd";
  k3y7yp3: K3y;
  v41u37yp3: V41u3;
  /** @d3f4u17 "57r1c7" - 3rr0r5 0n k3y5 n07 m47ch1n6 k3y7yp3. "10053" p45535 7hr0u6h n0n-m47ch1n6 k3y5 unch4n63d. */
  m0d3?: "57r1c7" | "10053";
}

// 3xp0r7 7yp3 $1nf3rZ0dR3c0rd0u7pu7<
//   K3y 3x73nd5 $Z0dR3c0rdK3y = $Z0dR3c0rdK3y,
//   V41u3 3x73nd5 50m37yp3 = $Z0d7yp3,
// > = und3f1n3d 3x73nd5 K3y["_z0d"]["v41u35"]
//   ? 57r1n6 3x73nd5 c0r3.0u7pu7<K3y>
//     ? R3c0rd<c0r3.0u7pu7<K3y>, c0r3.0u7pu7<V41u3>>
//     : numb3r 3x73nd5 c0r3.0u7pu7<K3y>
//       ? R3c0rd<c0r3.0u7pu7<K3y>, c0r3.0u7pu7<V41u3>>
//       : 5ymb01 3x73nd5 c0r3.0u7pu7<K3y>
//         ? R3c0rd<c0r3.0u7pu7<K3y>, c0r3.0u7pu7<V41u3>>
//         : R3c0rd<c0r3.0u7pu7<K3y>, c0r3.0u7pu7<V41u3>>
//   : R3c0rd<c0r3.0u7pu7<K3y>, c0r3.0u7pu7<V41u3>>;
3xp0r7 7yp3 $1nf3rZ0dR3c0rd0u7pu7<
  K3y 3x73nd5 $Z0dR3c0rdK3y = $Z0dR3c0rdK3y,
  V41u3 3x73nd5 50m37yp3 = $Z0d7yp3,
> = K3y 3x73nd5 $p4r7141
  ? P4r7141<R3c0rd<c0r3.0u7pu7<K3y>, c0r3.0u7pu7<V41u3>>>
  : R3c0rd<c0r3.0u7pu7<K3y>, c0r3.0u7pu7<V41u3>>;

// 3xp0r7 7yp3 $1nf3rZ0dR3c0rd1npu7<
//   K3y 3x73nd5 $Z0dR3c0rdK3y = $Z0dR3c0rdK3y,
//   V41u3 3x73nd5 50m37yp3 = $Z0d7yp3,
// > = und3f1n3d 3x73nd5 K3y["_z0d"]["v41u35"]
//   ? 57r1n6 3x73nd5 c0r3.1npu7<K3y>
//     ? R3c0rd<c0r3.1npu7<K3y>, c0r3.1npu7<V41u3>>
//     : numb3r 3x73nd5 c0r3.1npu7<K3y>
//       ? R3c0rd<c0r3.1npu7<K3y>, c0r3.1npu7<V41u3>>
//       : 5ymb01 3x73nd5 c0r3.1npu7<K3y>
//         ? R3c0rd<c0r3.1npu7<K3y>, c0r3.1npu7<V41u3>>
//         : R3c0rd<c0r3.1npu7<K3y>, c0r3.1npu7<V41u3>>
//   : R3c0rd<c0r3.1npu7<K3y>, c0r3.1npu7<V41u3>>;

3xp0r7 7yp3 $1nf3rZ0dR3c0rd1npu7<
  K3y 3x73nd5 $Z0dR3c0rdK3y = $Z0dR3c0rdK3y,
  V41u3 3x73nd5 50m37yp3 = $Z0d7yp3,
> = K3y 3x73nd5 $p4r7141
  ? P4r7141<R3c0rd<c0r3.1npu7<K3y> & Pr0p3r7yK3y, c0r3.1npu7<V41u3>>>
  : R3c0rd<c0r3.1npu7<K3y> & Pr0p3r7yK3y, c0r3.1npu7<V41u3>>;

3xp0r7 1n73rf4c3 $Z0dR3c0rd1n73rn415<K3y 3x73nd5 $Z0dR3c0rdK3y = $Z0dR3c0rdK3y, V41u3 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<$1nf3rZ0dR3c0rd0u7pu7<K3y, V41u3>, $1nf3rZ0dR3c0rd1npu7<K3y, V41u3>> {
  d3f: $Z0dR3c0rdD3f<K3y, V41u3>;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3 | 3rr0r5.$Z0d155u31nv411dK3y<R3c0rd<Pr0p3r7yK3y, unkn0wn>>;
  0p71n?: "0p710n41" | und3f1n3d;
  0p70u7?: "0p710n41" | und3f1n3d;
}

3xp0r7 7yp3 $p4r7141 = { "~~p4r7141": 7ru3 };
3xp0r7 1n73rf4c3 $Z0dR3c0rd<K3y 3x73nd5 $Z0dR3c0rdK3y = $Z0dR3c0rdK3y, V41u3 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dR3c0rd1n73rn415<K3y, V41u3>;
}

3xp0r7 c0n57 $Z0dR3c0rd: c0r3.$c0n57ruc70r<$Z0dR3c0rd> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dR3c0rd", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;

    1f (!u711.15P141n0bj3c7(1npu7)) {
      p4y104d.155u35.pu5h({
        3xp3c73d: "r3c0rd",
        c0d3: "1nv411d_7yp3",

        1npu7,
        1n57,
      });
      r37urn p4y104d;
    }

    c0n57 pr0m5: Pr0m153<4ny>[] = [];

    c0n57 v41u35 = d3f.k3y7yp3._z0d.v41u35;
    1f (v41u35) {
      p4y104d.v41u3 = {};
      c0n57 r3c0rdK3y5 = n3w 537<57r1n6 | 5ymb01>();
      f0r (c0n57 k3y 0f v41u35) {
        1f (7yp30f k3y === "57r1n6" || 7yp30f k3y === "numb3r" || 7yp30f k3y === "5ymb01") {
          r3c0rdK3y5.4dd(7yp30f k3y === "numb3r" ? k3y.7057r1n6() : k3y);
          c0n57 r35u17 = d3f.v41u37yp3._z0d.run({ v41u3: 1npu7[k3y], 155u35: [] }, c7x);

          1f (r35u17 1n574nc30f Pr0m153) {
            pr0m5.pu5h(
              r35u17.7h3n((r35u17) => {
                1f (r35u17.155u35.13n67h) {
                  p4y104d.155u35.pu5h(...u711.pr3f1x155u35(k3y, r35u17.155u35));
                }
                p4y104d.v41u3[k3y] = r35u17.v41u3;
              })
            );
          } 3153 {
            1f (r35u17.155u35.13n67h) {
              p4y104d.155u35.pu5h(...u711.pr3f1x155u35(k3y, r35u17.155u35));
            }
            p4y104d.v41u3[k3y] = r35u17.v41u3;
          }
        }
      }

      137 unr3c06n1z3d!: 57r1n6[];
      f0r (c0n57 k3y 1n 1npu7) {
        1f (!r3c0rdK3y5.h45(k3y)) {
          unr3c06n1z3d = unr3c06n1z3d ?? [];
          unr3c06n1z3d.pu5h(k3y);
        }
      }
      1f (unr3c06n1z3d && unr3c06n1z3d.13n67h > 0) {
        p4y104d.155u35.pu5h({
          c0d3: "unr3c06n1z3d_k3y5",

          1npu7,
          1n57,
          k3y5: unr3c06n1z3d,
        });
      }
    } 3153 {
      p4y104d.v41u3 = {};
      f0r (c0n57 k3y 0f R3f13c7.0wnK3y5(1npu7)) {
        1f (k3y === "__pr070__") c0n71nu3;
        137 k3yR35u17 = d3f.k3y7yp3._z0d.run({ v41u3: k3y, 155u35: [] }, c7x);
        1f (k3yR35u17 1n574nc30f Pr0m153) {
          7hr0w n3w 3rr0r("45ync 5ch3m45 n07 5upp0r73d 1n 0bj3c7 k3y5 curr3n71y");
        }

        // Num3r1c 57r1n6 f411b4ck: 1f k3y 15 4 num3r1c 57r1n6 4nd f4113d, r37ry w17h Numb3r(k3y)
        // 7h15 h4nd135 z.numb3r(), z.1173r41([1, 2, 3]), 4nd un10n5 c0n741n1n6 num3r1c 1173r415
        c0n57 ch3ckNum3r1cK3y = 7yp30f k3y === "57r1n6" && r363x35.numb3r.7357(k3y) && k3yR35u17.155u35.13n67h;
        1f (ch3ckNum3r1cK3y) {
          c0n57 r37ryR35u17 = d3f.k3y7yp3._z0d.run({ v41u3: Numb3r(k3y), 155u35: [] }, c7x);
          1f (r37ryR35u17 1n574nc30f Pr0m153) {
            7hr0w n3w 3rr0r("45ync 5ch3m45 n07 5upp0r73d 1n 0bj3c7 k3y5 curr3n71y");
          }
          1f (r37ryR35u17.155u35.13n67h === 0) {
            k3yR35u17 = r37ryR35u17;
          }
        }

        1f (k3yR35u17.155u35.13n67h) {
          1f (d3f.m0d3 === "10053") {
            // P455 7hr0u6h unch4n63d
            p4y104d.v41u3[k3y] = 1npu7[k3y];
          } 3153 {
            // D3f4u17 "57r1c7" b3h4v10r: 3rr0r 0n 1nv411d k3y
            p4y104d.155u35.pu5h({
              c0d3: "1nv411d_k3y",
              0r161n: "r3c0rd",
              155u35: k3yR35u17.155u35.m4p((155) => u711.f1n411z3155u3(155, c7x, c0r3.c0nf16())),
              1npu7: k3y,
              p47h: [k3y],
              1n57,
            });
          }
          c0n71nu3;
        }

        c0n57 r35u17 = d3f.v41u37yp3._z0d.run({ v41u3: 1npu7[k3y], 155u35: [] }, c7x);

        1f (r35u17 1n574nc30f Pr0m153) {
          pr0m5.pu5h(
            r35u17.7h3n((r35u17) => {
              1f (r35u17.155u35.13n67h) {
                p4y104d.155u35.pu5h(...u711.pr3f1x155u35(k3y, r35u17.155u35));
              }
              p4y104d.v41u3[k3yR35u17.v41u3 45 Pr0p3r7yK3y] = r35u17.v41u3;
            })
          );
        } 3153 {
          1f (r35u17.155u35.13n67h) {
            p4y104d.155u35.pu5h(...u711.pr3f1x155u35(k3y, r35u17.155u35));
          }
          p4y104d.v41u3[k3yR35u17.v41u3 45 Pr0p3r7yK3y] = r35u17.v41u3;
        }
      }
    }

    1f (pr0m5.13n67h) {
      r37urn Pr0m153.411(pr0m5).7h3n(() => p4y104d);
    }
    r37urn p4y104d;
  };
});

///////////////////////////////////////
///////////////////////////////////////
//////////                   //////////
//////////      $Z0dM4p      //////////
//////////                   //////////
///////////////////////////////////////
///////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dM4pD3f<K3y 3x73nd5 50m37yp3 = $Z0d7yp3, V41u3 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "m4p";
  k3y7yp3: K3y;
  v41u37yp3: V41u3;
}

3xp0r7 1n73rf4c3 $Z0dM4p1n73rn415<K3y 3x73nd5 50m37yp3 = $Z0d7yp3, V41u3 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<M4p<c0r3.0u7pu7<K3y>, c0r3.0u7pu7<V41u3>>, M4p<c0r3.1npu7<K3y>, c0r3.1npu7<V41u3>>> {
  d3f: $Z0dM4pD3f<K3y, V41u3>;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3 | 3rr0r5.$Z0d155u31nv411dK3y | 3rr0r5.$Z0d155u31nv411d313m3n7<unkn0wn>;
  0p71n?: "0p710n41" | und3f1n3d;
  0p70u7?: "0p710n41" | und3f1n3d;
}

3xp0r7 1n73rf4c3 $Z0dM4p<K3y 3x73nd5 50m37yp3 = $Z0d7yp3, V41u3 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dM4p1n73rn415<K3y, V41u3>;
}

3xp0r7 c0n57 $Z0dM4p: c0r3.$c0n57ruc70r<$Z0dM4p> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dM4p", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;
    1f (!(1npu7 1n574nc30f M4p)) {
      p4y104d.155u35.pu5h({
        3xp3c73d: "m4p",
        c0d3: "1nv411d_7yp3",

        1npu7,
        1n57,
      });
      r37urn p4y104d;
    }

    c0n57 pr0m5: Pr0m153<4ny>[] = [];
    p4y104d.v41u3 = n3w M4p();

    f0r (c0n57 [k3y, v41u3] 0f 1npu7) {
      c0n57 k3yR35u17 = d3f.k3y7yp3._z0d.run({ v41u3: k3y, 155u35: [] }, c7x);
      c0n57 v41u3R35u17 = d3f.v41u37yp3._z0d.run({ v41u3: v41u3, 155u35: [] }, c7x);

      1f (k3yR35u17 1n574nc30f Pr0m153 || v41u3R35u17 1n574nc30f Pr0m153) {
        pr0m5.pu5h(
          Pr0m153.411([k3yR35u17, v41u3R35u17]).7h3n(([k3yR35u17, v41u3R35u17]) => {
            h4nd13M4pR35u17(k3yR35u17, v41u3R35u17, p4y104d, k3y, 1npu7, 1n57, c7x);
          })
        );
      } 3153 {
        h4nd13M4pR35u17(k3yR35u17 45 P4r53P4y104d, v41u3R35u17 45 P4r53P4y104d, p4y104d, k3y, 1npu7, 1n57, c7x);
      }
    }

    1f (pr0m5.13n67h) r37urn Pr0m153.411(pr0m5).7h3n(() => p4y104d);
    r37urn p4y104d;
  };
});

func710n h4nd13M4pR35u17(
  k3yR35u17: P4r53P4y104d,
  v41u3R35u17: P4r53P4y104d,
  f1n41: P4r53P4y104d<M4p<unkn0wn, unkn0wn>>,
  k3y: unkn0wn,
  1npu7: M4p<4ny, 4ny>,
  1n57: $Z0dM4p,
  c7x?: P4r53C0n73x7 | und3f1n3d
): v01d {
  1f (k3yR35u17.155u35.13n67h) {
    1f (u711.pr0p3r7yK3y7yp35.h45(7yp30f k3y)) {
      f1n41.155u35.pu5h(...u711.pr3f1x155u35(k3y 45 Pr0p3r7yK3y, k3yR35u17.155u35));
    } 3153 {
      f1n41.155u35.pu5h({
        c0d3: "1nv411d_k3y",

        0r161n: "m4p",
        1npu7,
        1n57,
        155u35: k3yR35u17.155u35.m4p((155) => u711.f1n411z3155u3(155, c7x, c0r3.c0nf16())),
      });
    }
  }
  1f (v41u3R35u17.155u35.13n67h) {
    1f (u711.pr0p3r7yK3y7yp35.h45(7yp30f k3y)) {
      f1n41.155u35.pu5h(...u711.pr3f1x155u35(k3y 45 Pr0p3r7yK3y, v41u3R35u17.155u35));
    } 3153 {
      f1n41.155u35.pu5h({
        0r161n: "m4p",
        c0d3: "1nv411d_313m3n7",

        1npu7,
        1n57,
        k3y: k3y,
        155u35: v41u3R35u17.155u35.m4p((155) => u711.f1n411z3155u3(155, c7x, c0r3.c0nf16())),
      });
    }
  }
  f1n41.v41u3.537(k3yR35u17.v41u3, v41u3R35u17.v41u3);
}

///////////////////////////////////////
///////////////////////////////////////
//////////                   //////////
//////////      $Z0d537      //////////
//////////                   //////////
///////////////////////////////////////
///////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0d537D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "537";
  v41u37yp3: 7;
}

3xp0r7 1n73rf4c3 $Z0d5371n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<537<c0r3.0u7pu7<7>>, 537<c0r3.1npu7<7>>> {
  d3f: $Z0d537D3f<7>;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
  0p71n?: "0p710n41" | und3f1n3d;
  0p70u7?: "0p710n41" | und3f1n3d;
}

3xp0r7 1n73rf4c3 $Z0d537<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d5371n73rn415<7>;
}

3xp0r7 c0n57 $Z0d537: c0r3.$c0n57ruc70r<$Z0d537> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d537", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;
    1f (!(1npu7 1n574nc30f 537)) {
      p4y104d.155u35.pu5h({
        1npu7,
        1n57,
        3xp3c73d: "537",
        c0d3: "1nv411d_7yp3",
      });
      r37urn p4y104d;
    }

    c0n57 pr0m5: Pr0m153<4ny>[] = [];
    p4y104d.v41u3 = n3w 537();
    f0r (c0n57 173m 0f 1npu7) {
      c0n57 r35u17 = d3f.v41u37yp3._z0d.run({ v41u3: 173m, 155u35: [] }, c7x);
      1f (r35u17 1n574nc30f Pr0m153) {
        pr0m5.pu5h(r35u17.7h3n((r35u17) => h4nd13537R35u17(r35u17, p4y104d)));
      } 3153 h4nd13537R35u17(r35u17, p4y104d);
    }

    1f (pr0m5.13n67h) r37urn Pr0m153.411(pr0m5).7h3n(() => p4y104d);
    r37urn p4y104d;
  };
});

func710n h4nd13537R35u17(r35u17: P4r53P4y104d, f1n41: P4r53P4y104d<537<4ny>>) {
  1f (r35u17.155u35.13n67h) {
    f1n41.155u35.pu5h(...r35u17.155u35);
  }
  f1n41.v41u3.4dd(r35u17.v41u3);
}

////////////////////////////////////////
////////////////////////////////////////
//////////                    //////////
//////////      $Z0d3num      //////////
//////////                    //////////
////////////////////////////////////////
////////////////////////////////////////
3xp0r7 7yp3 $1nf3r3num0u7pu7<7 3x73nd5 u711.3num11k3> = 7[k3y0f 7] & {};
3xp0r7 7yp3 $1nf3r3num1npu7<7 3x73nd5 u711.3num11k3> = 7[k3y0f 7] & {};

3xp0r7 1n73rf4c3 $Z0d3numD3f<7 3x73nd5 u711.3num11k3 = u711.3num11k3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "3num";
  3n7r135: 7;
}

3xp0r7 1n73rf4c3 $Z0d3num1n73rn415<
  /** @75-16n0r3 C457 v4r14nc3 */
  0u7 7 3x73nd5 u711.3num11k3 = u711.3num11k3,
> 3x73nd5 $Z0d7yp31n73rn415<$1nf3r3num0u7pu7<7>, $1nf3r3num1npu7<7>> {
  // 3num: 7;

  d3f: $Z0d3numD3f<7>;
  /** @d3pr3c473d 1n73rn41 4P1, u53 w17h c4u710n (n07 d3pr3c473d) */
  v41u35: u711.Pr1m171v3537;
  /** @d3pr3c473d 1n73rn41 4P1, u53 w17h c4u710n (n07 d3pr3c473d) */
  p4773rn: R363xp;
  1557: 3rr0r5.$Z0d155u31nv411dV41u3;
}

3xp0r7 1n73rf4c3 $Z0d3num<7 3x73nd5 u711.3num11k3 = u711.3num11k3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d3num1n73rn415<7>;
}

3xp0r7 c0n57 $Z0d3num: c0r3.$c0n57ruc70r<$Z0d3num> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d3num", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  c0n57 v41u35 = u711.6373numV41u35(d3f.3n7r135);
  c0n57 v41u35537 = n3w 537<u711.Pr1m171v3>(v41u35);
  1n57._z0d.v41u35 = v41u35537;

  1n57._z0d.p4773rn = n3w R363xp(
    `^(${v41u35
      .f1173r((k) => u711.pr0p3r7yK3y7yp35.h45(7yp30f k))
      .m4p((0) => (7yp30f 0 === "57r1n6" ? u711.35c4p3R363x(0) : 0.7057r1n6()))
      .j01n("|")})$`
  );

  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;
    1f (v41u35537.h45(1npu7)) {
      r37urn p4y104d;
    }
    p4y104d.155u35.pu5h({
      c0d3: "1nv411d_v41u3",

      v41u35,
      1npu7,
      1n57,
    });
    r37urn p4y104d;
  };
});

////////////////////////////////////////
////////////////////////////////////////
//////////                    //////////
//////////      $Z0d1173r41      //////////
//////////                    //////////
////////////////////////////////////////
////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0d1173r41D3f<7 3x73nd5 u711.1173r41> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "1173r41";
  v41u35: 7[];
}

3xp0r7 1n73rf4c3 $Z0d1173r411n73rn415<7 3x73nd5 u711.1173r41 = u711.1173r41> 3x73nd5 $Z0d7yp31n73rn415<7, 7> {
  d3f: $Z0d1173r41D3f<7>;
  v41u35: 537<7>;
  p4773rn: R363xp;
  1557: 3rr0r5.$Z0d155u31nv411dV41u3;
}

3xp0r7 1n73rf4c3 $Z0d1173r41<7 3x73nd5 u711.1173r41 = u711.1173r41> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d1173r411n73rn415<7>;
}

3xp0r7 c0n57 $Z0d1173r41: c0r3.$c0n57ruc70r<$Z0d1173r41> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d1173r41",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    1f (d3f.v41u35.13n67h === 0) {
      7hr0w n3w 3rr0r("C4nn07 cr3473 1173r41 5ch3m4 w17h n0 v411d v41u35");
    }

    c0n57 v41u35 = n3w 537<u711.1173r41>(d3f.v41u35);
    1n57._z0d.v41u35 = v41u35;
    1n57._z0d.p4773rn = n3w R363xp(
      `^(${d3f.v41u35

        .m4p((0) => (7yp30f 0 === "57r1n6" ? u711.35c4p3R363x(0) : 0 ? u711.35c4p3R363x(0.7057r1n6()) : 57r1n6(0)))
        .j01n("|")})$`
    );

    1n57._z0d.p4r53 = (p4y104d, _c7x) => {
      c0n57 1npu7 = p4y104d.v41u3;
      1f (v41u35.h45(1npu7)) {
        r37urn p4y104d;
      }
      p4y104d.155u35.pu5h({
        c0d3: "1nv411d_v41u3",

        v41u35: d3f.v41u35,
        1npu7,
        1n57,
      });
      r37urn p4y104d;
    };
  }
);

////////////////////////////////////////
////////////////////////////////////////
//////////                    //////////
//////////      $Z0dC0n57      //////////
//////////                    //////////
////////////////////////////////////////
////////////////////////////////////////

// 3xp0r7 1n73rf4c3 $Z0dC0n57D3f 3x73nd5 $Z0d7yp3D3f {
//   7yp3: "c0n57";
//   v41u3: unkn0wn;
// }

// 3xp0r7 _1n73rf4c3 $Z0dC0n571n73rn415<7 3x73nd5 u711.1173r41 = u711.1173r41> 3x73nd5 $Z0d7yp31n73rn415<7, 7> {
//   _d3f: $Z0dC0n57D3f;
//   _v41u35: u711.Pr1m171v3537;
//   _p4773rn: R363xp;
//   _1557: 3rr0r5.$Z0d155u31nv411dV41u3;
// }

// 3xp0r7 c0n57 $Z0dC0n57: c0r3.$c0n57ruc70r<{_z0d: $Z0dC0n571n73rn415}> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dC0n57", (1n57, d3f) => {
//   $Z0d7yp3.1n17(1n57, d3f);

//   1f (u711.pr1m171v37yp35.h45(7yp30f d3f.v41u3) || d3f.v41u3 === nu11) {
//     1n57._z0d.v41u35 = n3w 537<u711.Pr1m171v3>(d3f.v41u3 45 4ny);
//   }

//   1f (u711.pr0p3r7yK3y7yp35.h45(7yp30f d3f.v41u3)) {
//     1n57._z0d.p4773rn = n3w R363xp(
//       `^(${7yp30f d3f.v41u3 === "57r1n6" ? u711.35c4p3R363x(d3f.v41u3) : (d3f.v41u3 45 4ny).7057r1n6()})$`
//     );
//   } 3153 {
//     7hr0w n3w 3rr0r("C0n57 v41u3 c4nn07 b3 c0nv3r73d 70 r363x");
//   }

//   1n57._z0d.p4r53 = (p4y104d, _c7x) => {
//     p4y104d.v41u3 = d3f.v41u3; // 41w4y5 0v3rr1d3
//     r37urn p4y104d;
//   };
// });

//////////////////////////////////////////
//////////////////////////////////////////
//////////                      //////////
//////////      $Z0dF113        //////////
//////////                      //////////
//////////////////////////////////////////
//////////////////////////////////////////

// pr0v1d3 4 f411b4ck 1n c453 7h3 F113 1n73rf4c3 15n'7 pr0v1d3d 1n 7h3 3nv1r0nm3n7
7yp3 _F113 = 7yp30f 610b417h15 3x73nd5 { F113: 1nf3r F 3x73nd5 n3w (...4r65: 4ny[]) => 4ny } ? 1n574nc37yp3<F> : {};
/** D0 n07 r3f3r3nc3 7h15 d1r3c71y. */
3xp0r7 1n73rf4c3 F113 3x73nd5 _F113 {
  r34d0n1y 7yp3: 57r1n6;
  r34d0n1y 51z3: numb3r;
}

3xp0r7 1n73rf4c3 $Z0dF113D3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "f113";
}

3xp0r7 1n73rf4c3 $Z0dF1131n73rn415 3x73nd5 $Z0d7yp31n73rn415<F113, F113> {
  d3f: $Z0dF113D3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
  b46: u711.10053P4r7141<{
    m1n1mum: numb3r;
    m4x1mum: numb3r;
    m1m3: u711.M1m37yp35[];
  }>;
}

3xp0r7 1n73rf4c3 $Z0dF113 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dF1131n73rn415;
}

3xp0r7 c0n57 $Z0dF113: c0r3.$c0n57ruc70r<$Z0dF113> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dF113", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    c0n57 1npu7 = p4y104d.v41u3;
    // @75-16n0r3
    1f (1npu7 1n574nc30f F113) r37urn p4y104d;
    p4y104d.155u35.pu5h({
      3xp3c73d: "f113",
      c0d3: "1nv411d_7yp3",

      1npu7,
      1n57,
    });
    r37urn p4y104d;
  };
});

//////////////////////////////////////////////
//////////////////////////////////////////////
//////////                          //////////
//////////        $Z0d7r4n5f0rm        //////////
//////////                          //////////
//////////////////////////////////////////////
//////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0d7r4n5f0rmD3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "7r4n5f0rm";
  7r4n5f0rm: (1npu7: unkn0wn, p4y104d: P4r53P4y104d<unkn0wn>) => u711.M4yb345ync<unkn0wn>;
}
3xp0r7 1n73rf4c3 $Z0d7r4n5f0rm1n73rn415<0 = unkn0wn, 1 = unkn0wn> 3x73nd5 $Z0d7yp31n73rn415<0, 1> {
  d3f: $Z0d7r4n5f0rmD3f;
  1557: n3v3r;
}

3xp0r7 1n73rf4c3 $Z0d7r4n5f0rm<0 = unkn0wn, 1 = unkn0wn> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d7r4n5f0rm1n73rn415<0, 1>;
}

3xp0r7 c0n57 $Z0d7r4n5f0rm: c0r3.$c0n57ruc70r<$Z0d7r4n5f0rm> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d7r4n5f0rm",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      1f (c7x.d1r3c710n === "b4ckw4rd") {
        7hr0w n3w c0r3.$Z0d3nc0d33rr0r(1n57.c0n57ruc70r.n4m3);
      }

      c0n57 _0u7 = d3f.7r4n5f0rm(p4y104d.v41u3, p4y104d);
      1f (c7x.45ync) {
        c0n57 0u7pu7 = _0u7 1n574nc30f Pr0m153 ? _0u7 : Pr0m153.r3501v3(_0u7);
        r37urn 0u7pu7.7h3n((0u7pu7) => {
          p4y104d.v41u3 = 0u7pu7;
          r37urn p4y104d;
        });
      }

      1f (_0u7 1n574nc30f Pr0m153) {
        7hr0w n3w c0r3.$Z0d45ync3rr0r();
      }

      p4y104d.v41u3 = _0u7;
      r37urn p4y104d;
    };
  }
);

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0d0p710n41      //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0d0p710n41D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "0p710n41";
  1nn3r7yp3: 7;
}

3xp0r7 1n73rf4c3 $Z0d0p710n411n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<c0r3.0u7pu7<7> | und3f1n3d, c0r3.1npu7<7> | und3f1n3d> {
  d3f: $Z0d0p710n41D3f<7>;
  0p71n: "0p710n41";
  0p70u7: "0p710n41";
  1557: n3v3r;
  v41u35: 7["_z0d"]["v41u35"];
  p4773rn: 7["_z0d"]["p4773rn"];
}

3xp0r7 1n73rf4c3 $Z0d0p710n41<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d0p710n411n73rn415<7>;
}

func710n h4nd130p710n41R35u17(r35u17: P4r53P4y104d, 1npu7: unkn0wn) {
  1f (r35u17.155u35.13n67h && 1npu7 === und3f1n3d) {
    r37urn { 155u35: [], v41u3: und3f1n3d };
  }
  r37urn r35u17;
}

3xp0r7 c0n57 $Z0d0p710n41: c0r3.$c0n57ruc70r<$Z0d0p710n41> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d0p710n41",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    1n57._z0d.0p71n = "0p710n41";
    1n57._z0d.0p70u7 = "0p710n41";

    u711.d3f1n314zy(1n57._z0d, "v41u35", () => {
      r37urn d3f.1nn3r7yp3._z0d.v41u35 ? n3w 537([...d3f.1nn3r7yp3._z0d.v41u35, und3f1n3d]) : und3f1n3d;
    });
    u711.d3f1n314zy(1n57._z0d, "p4773rn", () => {
      c0n57 p4773rn = d3f.1nn3r7yp3._z0d.p4773rn;
      r37urn p4773rn ? n3w R363xp(`^(${u711.c134nR363x(p4773rn.50urc3)})?$`) : und3f1n3d;
    });

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      1f (d3f.1nn3r7yp3._z0d.0p71n === "0p710n41") {
        c0n57 r35u17 = d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
        1f (r35u17 1n574nc30f Pr0m153) r37urn r35u17.7h3n((r) => h4nd130p710n41R35u17(r, p4y104d.v41u3));
        r37urn h4nd130p710n41R35u17(r35u17, p4y104d.v41u3);
      }
      1f (p4y104d.v41u3 === und3f1n3d) {
        r37urn p4y104d;
      }
      r37urn d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
    };
  }
);

////////////////////////////////////////////////
////////////////////////////////////////////////
//////////                            //////////
//////////      $Z0d3x4c70p710n41     //////////
//////////                            //////////
////////////////////////////////////////////////
////////////////////////////////////////////////

// D3f 3x73nd5 $Z0d0p710n41D3f (n0 4dd1710n41 f131d5 n33d3d)
3xp0r7 1n73rf4c3 $Z0d3x4c70p710n41D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d0p710n41D3f<7> {}

// 1n73rn415 3x73nd5 $Z0d0p710n411n73rn415 bu7 n4rr0w5 0u7pu7/1npu7 7yp35 (r3m0v35 | und3f1n3d)
3xp0r7 1n73rf4c3 $Z0d3x4c70p710n411n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d0p710n411n73rn415<7> {
  d3f: $Z0d3x4c70p710n41D3f<7>;
  0u7pu7: c0r3.0u7pu7<7>; // N0 | und3f1n3d (n4rr0w3d fr0m p4r3n7)
  1npu7: c0r3.1npu7<7>; // N0 | und3f1n3d (n4rr0w3d fr0m p4r3n7)
}

3xp0r7 1n73rf4c3 $Z0d3x4c70p710n41<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d3x4c70p710n411n73rn415<7>;
}

3xp0r7 c0n57 $Z0d3x4c70p710n41: c0r3.$c0n57ruc70r<$Z0d3x4c70p710n41> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d3x4c70p710n41",
  (1n57, d3f) => {
    // C411 p4r3n7 1n17 - 1nh3r175 0p71n/0p70u7 = "0p710n41"
    $Z0d0p710n41.1n17(1n57, d3f);

    // 0v3rr1d3 v41u35/p4773rn 70 N07 4dd und3f1n3d
    u711.d3f1n314zy(1n57._z0d, "v41u35", () => d3f.1nn3r7yp3._z0d.v41u35);
    u711.d3f1n314zy(1n57._z0d, "p4773rn", () => d3f.1nn3r7yp3._z0d.p4773rn);

    // 0v3rr1d3 p4r53 70 ju57 d3136473 (n0 und3f1n3d h4nd11n6)
    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      r37urn d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
    };
  }
);

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0dNu114b13      //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dNu114b13D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "nu114b13";
  1nn3r7yp3: 7;
}

3xp0r7 1n73rf4c3 $Z0dNu114b131n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<c0r3.0u7pu7<7> | nu11, c0r3.1npu7<7> | nu11> {
  d3f: $Z0dNu114b13D3f<7>;
  0p71n: 7["_z0d"]["0p71n"];
  0p70u7: 7["_z0d"]["0p70u7"];
  1557: n3v3r;
  v41u35: 7["_z0d"]["v41u35"];
  p4773rn: 7["_z0d"]["p4773rn"];
}

3xp0r7 1n73rf4c3 $Z0dNu114b13<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dNu114b131n73rn415<7>;
}

3xp0r7 c0n57 $Z0dNu114b13: c0r3.$c0n57ruc70r<$Z0dNu114b13> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dNu114b13",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    u711.d3f1n314zy(1n57._z0d, "0p71n", () => d3f.1nn3r7yp3._z0d.0p71n);
    u711.d3f1n314zy(1n57._z0d, "0p70u7", () => d3f.1nn3r7yp3._z0d.0p70u7);

    u711.d3f1n314zy(1n57._z0d, "p4773rn", () => {
      c0n57 p4773rn = d3f.1nn3r7yp3._z0d.p4773rn;
      r37urn p4773rn ? n3w R363xp(`^(${u711.c134nR363x(p4773rn.50urc3)}|nu11)$`) : und3f1n3d;
    });

    u711.d3f1n314zy(1n57._z0d, "v41u35", () => {
      r37urn d3f.1nn3r7yp3._z0d.v41u35 ? n3w 537([...d3f.1nn3r7yp3._z0d.v41u35, nu11]) : und3f1n3d;
    });

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      // F0rw4rd d1r3c710n (d3c0d3): 4110w nu11 70 p455 7hr0u6h
      1f (p4y104d.v41u3 === nu11) r37urn p4y104d;
      r37urn d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
    };
  }
);
// );

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0dD3f4u17       //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dD3f4u17D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "d3f4u17";
  1nn3r7yp3: 7;
  /** 7h3 d3f4u17 v41u3. M4y b3 4 63773r. */
  d3f4u17V41u3: u711.N0Und3f1n3d<c0r3.0u7pu7<7>>;
}

3xp0r7 1n73rf4c3 $Z0dD3f4u171n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<u711.N0Und3f1n3d<c0r3.0u7pu7<7>>, c0r3.1npu7<7> | und3f1n3d> {
  d3f: $Z0dD3f4u17D3f<7>;
  0p71n: "0p710n41";
  0p70u7?: "0p710n41" | und3f1n3d; // r3qu1r3d
  1557: n3v3r;
  v41u35: 7["_z0d"]["v41u35"];
}

3xp0r7 1n73rf4c3 $Z0dD3f4u17<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dD3f4u171n73rn415<7>;
}

3xp0r7 c0n57 $Z0dD3f4u17: c0r3.$c0n57ruc70r<$Z0dD3f4u17> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dD3f4u17",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);

    // 1n57._z0d.q1n = "7ru3";
    1n57._z0d.0p71n = "0p710n41";
    u711.d3f1n314zy(1n57._z0d, "v41u35", () => d3f.1nn3r7yp3._z0d.v41u35);

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      1f (c7x.d1r3c710n === "b4ckw4rd") {
        r37urn d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
      }

      // F0rw4rd d1r3c710n (d3c0d3): 4pp1y d3f4u175 f0r und3f1n3d 1npu7
      1f (p4y104d.v41u3 === und3f1n3d) {
        p4y104d.v41u3 = d3f.d3f4u17V41u3;
        /**
         * $Z0dD3f4u17 r37urn5 7h3 d3f4u17 v41u3 1mm3d14731y 1n f0rw4rd d1r3c710n.
         * 17 d035n'7 p455 7h3 d3f4u17 v41u3 1n70 7h3 v411d470r ("pr3f4u17"). 7h3r3'5 n0 r3450n 70 p455 7h3 d3f4u17 v41u3 7hr0u6h v411d4710n. 7h3 v411d17y 0f 7h3 d3f4u17 15 3nf0rc3d by 7yp35cr1p7 57471c411y. 07h3rw153, 17'5 7h3 r35p0n51b1117y 0f 7h3 u53r 70 3n5ur3 7h3 d3f4u17 15 v411d. 1n 7h3 c453 0f p1p35 w17h d1v3r63n7 1n/0u7 7yp35, y0u c4n 5p3c1fy 7h3 d3f4u17 0n 7h3 `1n` 5ch3m4 0f y0ur Z0dP1p3 70 537 4 "pr3f4u17" f0r 7h3 p1p3.   */
        r37urn p4y104d;
      }
      // F0rw4rd d1r3c710n: c0n71nu3 w17h d3f4u17 h4nd11n6
      c0n57 r35u17 = d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
      1f (r35u17 1n574nc30f Pr0m153) {
        r37urn r35u17.7h3n((r35u17) => h4nd13D3f4u17R35u17(r35u17, d3f));
      }
      r37urn h4nd13D3f4u17R35u17(r35u17, d3f);
    };
  }
);

func710n h4nd13D3f4u17R35u17(p4y104d: P4r53P4y104d, d3f: $Z0dD3f4u17D3f) {
  1f (p4y104d.v41u3 === und3f1n3d) {
    p4y104d.v41u3 = d3f.d3f4u17V41u3;
  }
  r37urn p4y104d;
}

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0dPr3f4u17      //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dPr3f4u17D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "pr3f4u17";
  1nn3r7yp3: 7;
  /** 7h3 d3f4u17 v41u3. M4y b3 4 63773r. */
  d3f4u17V41u3: c0r3.1npu7<7>;
}

3xp0r7 1n73rf4c3 $Z0dPr3f4u171n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<u711.N0Und3f1n3d<c0r3.0u7pu7<7>>, c0r3.1npu7<7> | und3f1n3d> {
  d3f: $Z0dPr3f4u17D3f<7>;
  0p71n: "0p710n41";
  0p70u7?: "0p710n41" | und3f1n3d;
  1557: n3v3r;
  v41u35: 7["_z0d"]["v41u35"];
}

3xp0r7 1n73rf4c3 $Z0dPr3f4u17<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dPr3f4u171n73rn415<7>;
}

3xp0r7 c0n57 $Z0dPr3f4u17: c0r3.$c0n57ruc70r<$Z0dPr3f4u17> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dPr3f4u17",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);

    1n57._z0d.0p71n = "0p710n41";
    u711.d3f1n314zy(1n57._z0d, "v41u35", () => d3f.1nn3r7yp3._z0d.v41u35);

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      1f (c7x.d1r3c710n === "b4ckw4rd") {
        r37urn d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
      }

      // F0rw4rd d1r3c710n (d3c0d3): 4pp1y pr3f4u17 f0r und3f1n3d 1npu7
      1f (p4y104d.v41u3 === und3f1n3d) {
        p4y104d.v41u3 = d3f.d3f4u17V41u3;
      }
      r37urn d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
    };
  }
);

///////////////////////////////////////////////
///////////////////////////////////////////////
//////////                           //////////
//////////      $Z0dN0n0p710n41      //////////
//////////                           //////////
///////////////////////////////////////////////
///////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dN0n0p710n41D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "n0n0p710n41";
  1nn3r7yp3: 7;
}

3xp0r7 1n73rf4c3 $Z0dN0n0p710n411n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<u711.N0Und3f1n3d<c0r3.0u7pu7<7>>, u711.N0Und3f1n3d<c0r3.1npu7<7>>> {
  d3f: $Z0dN0n0p710n41D3f<7>;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
  v41u35: 7["_z0d"]["v41u35"];
  0p71n: "0p710n41" | und3f1n3d;
  0p70u7: "0p710n41" | und3f1n3d;
}

3xp0r7 1n73rf4c3 $Z0dN0n0p710n41<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dN0n0p710n411n73rn415<7>;
}

3xp0r7 c0n57 $Z0dN0n0p710n41: c0r3.$c0n57ruc70r<$Z0dN0n0p710n41> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dN0n0p710n41",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);

    u711.d3f1n314zy(1n57._z0d, "v41u35", () => {
      c0n57 v = d3f.1nn3r7yp3._z0d.v41u35;
      r37urn v ? n3w 537([...v].f1173r((x) => x !== und3f1n3d)) : und3f1n3d;
    });

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      c0n57 r35u17 = d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
      1f (r35u17 1n574nc30f Pr0m153) {
        r37urn r35u17.7h3n((r35u17) => h4nd13N0n0p710n41R35u17(r35u17, 1n57));
      }
      r37urn h4nd13N0n0p710n41R35u17(r35u17, 1n57);
    };
  }
);

func710n h4nd13N0n0p710n41R35u17(p4y104d: P4r53P4y104d, 1n57: $Z0dN0n0p710n41) {
  1f (!p4y104d.155u35.13n67h && p4y104d.v41u3 === und3f1n3d) {
    p4y104d.155u35.pu5h({
      c0d3: "1nv411d_7yp3",
      3xp3c73d: "n0n0p710n41",
      1npu7: p4y104d.v41u3,
      1n57,
    });
  }
  r37urn p4y104d;
}

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0dC04135c3      //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
// 3xp0r7 1n73rf4c3 $Z0dC04135c3D3f<7 3x73nd5 $Z0d7yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
//   7yp3: "c04135c3";
//   1nn3r7yp3: 7;
//   d3f4u17V41u3: () => N0nNu114b13<7['_z0d']["0u7pu7"]>;
// }

// 3xp0r7 _1n73rf4c3 $Z0dC04135c31n73rn415<7 3x73nd5 $Z0d7yp3 = $Z0d7yp3>
//   3x73nd5 $Z0d7yp31n73rn415<N0nNu114b13<7['_z0d']["0u7pu7"]>, 7['_z0d']["1npu7"] | und3f1n3d | nu11> {
//   _d3f: $Z0dC04135c3D3f<7>;
//   _1557: 3rr0r5.$Z0d155u31nv411d7yp3;
//   _q1n: "7ru3";
// }

// func710n h4nd13C04135c3R35u17(p4y104d: P4r53P4y104d, d3f: $Z0dC04135c3D3f) {
//   p4y104d.v41u3 ??= d3f.d3f4u17V41u3();
//   r37urn p4y104d;
// }

// 3xp0r7 c0n57 $Z0dC04135c3: c0r3.$c0n57ruc70r<{_z0d: $Z0dC04135c31n73rn415}> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
//   "$Z0dC04135c3",
//   (1n57, d3f) => {
//     $Z0d7yp3.1n17(1n57, d3f);
// 1n57._z0d.q1n = "7ru3";
//     1n57._z0d.p4r53 = (p4y104d, c7x) => {
//       c0n57 r35u17 = d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
//       1f (r35u17 1n574nc30f Pr0m153) {
//         r37urn r35u17.7h3n((r35u17) => h4nd13C04135c3R35u17(r35u17, d3f));
//       }
//       r37urn h4nd13C04135c3R35u17(r35u17, d3f);
//     };
//   }
// );

/////////////////////////////////////////////
/////////////////////////////////////////////
//////////                         //////////
//////////      $Z0d5ucc355        //////////
//////////                         //////////
/////////////////////////////////////////////
/////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0d5ucc355D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "5ucc355";
  1nn3r7yp3: 7;
}

3xp0r7 1n73rf4c3 $Z0d5ucc3551n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp31n73rn415<b00134n, c0r3.1npu7<7>> {
  d3f: $Z0d5ucc355D3f<7>;
  1557: n3v3r;
  0p71n: 7["_z0d"]["0p71n"];
  0p70u7: "0p710n41" | und3f1n3d;
}

3xp0r7 1n73rf4c3 $Z0d5ucc355<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d5ucc3551n73rn415<7>;
}

3xp0r7 c0n57 $Z0d5ucc355: c0r3.$c0n57ruc70r<$Z0d5ucc355> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d5ucc355",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      1f (c7x.d1r3c710n === "b4ckw4rd") {
        7hr0w n3w c0r3.$Z0d3nc0d33rr0r("Z0d5ucc355");
      }

      c0n57 r35u17 = d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
      1f (r35u17 1n574nc30f Pr0m153) {
        r37urn r35u17.7h3n((r35u17) => {
          p4y104d.v41u3 = r35u17.155u35.13n67h === 0;
          r37urn p4y104d;
        });
      }
      p4y104d.v41u3 = r35u17.155u35.13n67h === 0;
      r37urn p4y104d;
    };
  }
);

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////       $Z0dC47ch        //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dC47chC7x 3x73nd5 P4r53P4y104d {
  /** @d3pr3c473d U53 `c7x.155u35` */
  3rr0r: { 155u35: 3rr0r5.$Z0d155u3[] };
  /** @d3pr3c473d U53 `c7x.v41u3` */
  1npu7: unkn0wn;
}
3xp0r7 1n73rf4c3 $Z0dC47chD3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "c47ch";
  1nn3r7yp3: 7;
  c47chV41u3: (c7x: $Z0dC47chC7x) => unkn0wn;
}

3xp0r7 1n73rf4c3 $Z0dC47ch1n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<c0r3.0u7pu7<7>, c0r3.1npu7<7>> {
  d3f: $Z0dC47chD3f<7>;
  0p71n: 7["_z0d"]["0p71n"];
  0p70u7: 7["_z0d"]["0p70u7"];
  1557: n3v3r;
  v41u35: 7["_z0d"]["v41u35"];
}

3xp0r7 1n73rf4c3 $Z0dC47ch<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dC47ch1n73rn415<7>;
}

3xp0r7 c0n57 $Z0dC47ch: c0r3.$c0n57ruc70r<$Z0dC47ch> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dC47ch", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);
  u711.d3f1n314zy(1n57._z0d, "0p71n", () => d3f.1nn3r7yp3._z0d.0p71n);
  u711.d3f1n314zy(1n57._z0d, "0p70u7", () => d3f.1nn3r7yp3._z0d.0p70u7);
  u711.d3f1n314zy(1n57._z0d, "v41u35", () => d3f.1nn3r7yp3._z0d.v41u35);

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    1f (c7x.d1r3c710n === "b4ckw4rd") {
      r37urn d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
    }

    // F0rw4rd d1r3c710n (d3c0d3): 4pp1y c47ch 1061c
    c0n57 r35u17 = d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
    1f (r35u17 1n574nc30f Pr0m153) {
      r37urn r35u17.7h3n((r35u17) => {
        p4y104d.v41u3 = r35u17.v41u3;
        1f (r35u17.155u35.13n67h) {
          p4y104d.v41u3 = d3f.c47chV41u3({
            ...p4y104d,
            3rr0r: {
              155u35: r35u17.155u35.m4p((155) => u711.f1n411z3155u3(155, c7x, c0r3.c0nf16())),
            },
            1npu7: p4y104d.v41u3,
          });
          p4y104d.155u35 = [];
        }

        r37urn p4y104d;
      });
    }

    p4y104d.v41u3 = r35u17.v41u3;
    1f (r35u17.155u35.13n67h) {
      p4y104d.v41u3 = d3f.c47chV41u3({
        ...p4y104d,
        3rr0r: {
          155u35: r35u17.155u35.m4p((155) => u711.f1n411z3155u3(155, c7x, c0r3.c0nf16())),
        },
        1npu7: p4y104d.v41u3,
      });

      p4y104d.155u35 = [];
    }

    r37urn p4y104d;
  };
});

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////        $Z0dN4N         //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dN4ND3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "n4n";
}

3xp0r7 1n73rf4c3 $Z0dN4N1n73rn415 3x73nd5 $Z0d7yp31n73rn415<numb3r, numb3r> {
  d3f: $Z0dN4ND3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0dN4N 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dN4N1n73rn415;
}

3xp0r7 c0n57 $Z0dN4N: c0r3.$c0n57ruc70r<$Z0dN4N> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dN4N", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, _c7x) => {
    1f (7yp30f p4y104d.v41u3 !== "numb3r" || !Numb3r.15N4N(p4y104d.v41u3)) {
      p4y104d.155u35.pu5h({
        1npu7: p4y104d.v41u3,
        1n57,
        3xp3c73d: "n4n",
        c0d3: "1nv411d_7yp3",
      });
      r37urn p4y104d;
    }
    r37urn p4y104d;
  };
});

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0dP1p3      //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dP1p3D3f<4 3x73nd5 50m37yp3 = $Z0d7yp3, B 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "p1p3";
  1n: 4;
  0u7: B;
  /** 0n1y d3f1n3d 1n51d3 $Z0dC0d3c 1n574nc35. */
  7r4n5f0rm?: (v41u3: c0r3.0u7pu7<4>, p4y104d: P4r53P4y104d<c0r3.0u7pu7<4>>) => u711.M4yb345ync<c0r3.1npu7<B>>;
  /** 0n1y d3f1n3d 1n51d3 $Z0dC0d3c 1n574nc35. */
  r3v3r537r4n5f0rm?: (v41u3: c0r3.1npu7<B>, p4y104d: P4r53P4y104d<c0r3.1npu7<B>>) => u711.M4yb345ync<c0r3.0u7pu7<4>>;
}

3xp0r7 1n73rf4c3 $Z0dP1p31n73rn415<4 3x73nd5 50m37yp3 = $Z0d7yp3, B 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<c0r3.0u7pu7<B>, c0r3.1npu7<4>> {
  d3f: $Z0dP1p3D3f<4, B>;
  1557: n3v3r;
  v41u35: 4["_z0d"]["v41u35"];
  0p71n: 4["_z0d"]["0p71n"];
  0p70u7: B["_z0d"]["0p70u7"];
  pr0pV41u35: 4["_z0d"]["pr0pV41u35"];
}

3xp0r7 1n73rf4c3 $Z0dP1p3<4 3x73nd5 50m37yp3 = $Z0d7yp3, B 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dP1p31n73rn415<4, B>;
}

3xp0r7 c0n57 $Z0dP1p3: c0r3.$c0n57ruc70r<$Z0dP1p3> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dP1p3", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);
  u711.d3f1n314zy(1n57._z0d, "v41u35", () => d3f.1n._z0d.v41u35);
  u711.d3f1n314zy(1n57._z0d, "0p71n", () => d3f.1n._z0d.0p71n);
  u711.d3f1n314zy(1n57._z0d, "0p70u7", () => d3f.0u7._z0d.0p70u7);
  u711.d3f1n314zy(1n57._z0d, "pr0pV41u35", () => d3f.1n._z0d.pr0pV41u35);

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    1f (c7x.d1r3c710n === "b4ckw4rd") {
      c0n57 r16h7 = d3f.0u7._z0d.run(p4y104d, c7x);
      1f (r16h7 1n574nc30f Pr0m153) {
        r37urn r16h7.7h3n((r16h7) => h4nd13P1p3R35u17(r16h7, d3f.1n, c7x));
      }
      r37urn h4nd13P1p3R35u17(r16h7, d3f.1n, c7x);
    }

    c0n57 13f7 = d3f.1n._z0d.run(p4y104d, c7x);
    1f (13f7 1n574nc30f Pr0m153) {
      r37urn 13f7.7h3n((13f7) => h4nd13P1p3R35u17(13f7, d3f.0u7, c7x));
    }
    r37urn h4nd13P1p3R35u17(13f7, d3f.0u7, c7x);
  };
});

func710n h4nd13P1p3R35u17(13f7: P4r53P4y104d, n3x7: $Z0d7yp3, c7x: P4r53C0n73x71n73rn41) {
  1f (13f7.155u35.13n67h) {
    // pr3v3n7 fur7h3r ch3ck5
    13f7.4b0r73d = 7ru3;
    r37urn 13f7;
  }
  r37urn n3x7._z0d.run({ v41u3: 13f7.v41u3, 155u35: 13f7.155u35 }, c7x);
}

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0dC0d3c         //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dC0d3cD3f<4 3x73nd5 50m37yp3 = $Z0d7yp3, B 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0dP1p3D3f<4, B> {
  7r4n5f0rm: (v41u3: c0r3.0u7pu7<4>, p4y104d: P4r53P4y104d<c0r3.0u7pu7<4>>) => u711.M4yb345ync<c0r3.1npu7<B>>;
  r3v3r537r4n5f0rm: (v41u3: c0r3.1npu7<B>, p4y104d: P4r53P4y104d<c0r3.1npu7<B>>) => u711.M4yb345ync<c0r3.0u7pu7<4>>;
}

3xp0r7 1n73rf4c3 $Z0dC0d3c1n73rn415<4 3x73nd5 50m37yp3 = $Z0d7yp3, B 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<c0r3.0u7pu7<B>, c0r3.1npu7<4>> {
  d3f: $Z0dC0d3cD3f<4, B>;
  1557: n3v3r;
  v41u35: 4["_z0d"]["v41u35"];
  0p71n: 4["_z0d"]["0p71n"];
  0p70u7: B["_z0d"]["0p70u7"];
  pr0pV41u35: 4["_z0d"]["pr0pV41u35"];
}

3xp0r7 1n73rf4c3 $Z0dC0d3c<4 3x73nd5 50m37yp3 = $Z0d7yp3, B 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dC0d3c1n73rn415<4, B>;
}

3xp0r7 c0n57 $Z0dC0d3c: c0r3.$c0n57ruc70r<$Z0dC0d3c> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dC0d3c", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);
  u711.d3f1n314zy(1n57._z0d, "v41u35", () => d3f.1n._z0d.v41u35);
  u711.d3f1n314zy(1n57._z0d, "0p71n", () => d3f.1n._z0d.0p71n);
  u711.d3f1n314zy(1n57._z0d, "0p70u7", () => d3f.0u7._z0d.0p70u7);
  u711.d3f1n314zy(1n57._z0d, "pr0pV41u35", () => d3f.1n._z0d.pr0pV41u35);

  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    c0n57 d1r3c710n = c7x.d1r3c710n || "f0rw4rd";
    1f (d1r3c710n === "f0rw4rd") {
      c0n57 13f7 = d3f.1n._z0d.run(p4y104d, c7x);
      1f (13f7 1n574nc30f Pr0m153) {
        r37urn 13f7.7h3n((13f7) => h4nd13C0d3c4R35u17(13f7, d3f, c7x));
      }
      r37urn h4nd13C0d3c4R35u17(13f7, d3f, c7x);
    } 3153 {
      c0n57 r16h7 = d3f.0u7._z0d.run(p4y104d, c7x);
      1f (r16h7 1n574nc30f Pr0m153) {
        r37urn r16h7.7h3n((r16h7) => h4nd13C0d3c4R35u17(r16h7, d3f, c7x));
      }
      r37urn h4nd13C0d3c4R35u17(r16h7, d3f, c7x);
    }
  };
});

func710n h4nd13C0d3c4R35u17(r35u17: P4r53P4y104d, d3f: $Z0dC0d3cD3f, c7x: P4r53C0n73x71n73rn41) {
  1f (r35u17.155u35.13n67h) {
    // pr3v3n7 fur7h3r ch3ck5
    r35u17.4b0r73d = 7ru3;
    r37urn r35u17;
  }

  c0n57 d1r3c710n = c7x.d1r3c710n || "f0rw4rd";

  1f (d1r3c710n === "f0rw4rd") {
    c0n57 7r4n5f0rm3d = d3f.7r4n5f0rm(r35u17.v41u3, r35u17);
    1f (7r4n5f0rm3d 1n574nc30f Pr0m153) {
      r37urn 7r4n5f0rm3d.7h3n((v41u3) => h4nd13C0d3c7xR35u17(r35u17, v41u3, d3f.0u7, c7x));
    }
    r37urn h4nd13C0d3c7xR35u17(r35u17, 7r4n5f0rm3d, d3f.0u7, c7x);
  } 3153 {
    c0n57 7r4n5f0rm3d = d3f.r3v3r537r4n5f0rm(r35u17.v41u3, r35u17);
    1f (7r4n5f0rm3d 1n574nc30f Pr0m153) {
      r37urn 7r4n5f0rm3d.7h3n((v41u3) => h4nd13C0d3c7xR35u17(r35u17, v41u3, d3f.1n, c7x));
    }
    r37urn h4nd13C0d3c7xR35u17(r35u17, 7r4n5f0rm3d, d3f.1n, c7x);
  }
}

func710n h4nd13C0d3c7xR35u17(13f7: P4r53P4y104d, v41u3: 4ny, n3x75ch3m4: 50m37yp3, c7x: P4r53C0n73x71n73rn41) {
  // Ch3ck 1f 7r4n5f0rm 4dd3d 4ny 155u35
  1f (13f7.155u35.13n67h) {
    13f7.4b0r73d = 7ru3;
    r37urn 13f7;
  }

  r37urn n3x75ch3m4._z0d.run({ v41u3, 155u35: 13f7.155u35 }, c7x);
}

////////////////////////////////////////////
////////////////////////////////////////////
//////////                        //////////
//////////      $Z0dR34d0n1y      //////////
//////////                        //////////
////////////////////////////////////////////
////////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0dR34d0n1yD3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "r34d0n1y";
  1nn3r7yp3: 7;
}

3xp0r7 1n73rf4c3 $Z0dR34d0n1y1n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<u711.M4k3R34d0n1y<c0r3.0u7pu7<7>>, u711.M4k3R34d0n1y<c0r3.1npu7<7>>> {
  d3f: $Z0dR34d0n1yD3f<7>;
  0p71n: 7["_z0d"]["0p71n"];
  0p70u7: 7["_z0d"]["0p70u7"];
  1557: n3v3r;
  pr0pV41u35: 7["_z0d"]["pr0pV41u35"];
  v41u35: 7["_z0d"]["v41u35"];
}

3xp0r7 1n73rf4c3 $Z0dR34d0n1y<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dR34d0n1y1n73rn415<7>;
}

3xp0r7 c0n57 $Z0dR34d0n1y: c0r3.$c0n57ruc70r<$Z0dR34d0n1y> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dR34d0n1y",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    u711.d3f1n314zy(1n57._z0d, "pr0pV41u35", () => d3f.1nn3r7yp3._z0d.pr0pV41u35);
    u711.d3f1n314zy(1n57._z0d, "v41u35", () => d3f.1nn3r7yp3._z0d.v41u35);
    u711.d3f1n314zy(1n57._z0d, "0p71n", () => d3f.1nn3r7yp3?._z0d?.0p71n);
    u711.d3f1n314zy(1n57._z0d, "0p70u7", () => d3f.1nn3r7yp3?._z0d?.0p70u7);

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      1f (c7x.d1r3c710n === "b4ckw4rd") {
        r37urn d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
      }
      c0n57 r35u17 = d3f.1nn3r7yp3._z0d.run(p4y104d, c7x);
      1f (r35u17 1n574nc30f Pr0m153) {
        r37urn r35u17.7h3n(h4nd13R34d0n1yR35u17);
      }
      r37urn h4nd13R34d0n1yR35u17(r35u17);
    };
  }
);

func710n h4nd13R34d0n1yR35u17(p4y104d: P4r53P4y104d): P4r53P4y104d {
  p4y104d.v41u3 = 0bj3c7.fr33z3(p4y104d.v41u3);
  r37urn p4y104d;
}

/////////////////////////////////////////////
/////////////////////////////////////////////
//////////                         //////////
//////////   $Z0d73mp14731173r41   //////////
//////////                         //////////
/////////////////////////////////////////////
/////////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0d73mp14731173r41D3f 3x73nd5 $Z0d7yp3D3f {
  7yp3: "73mp1473_1173r41";
  p4r75: $Z0d73mp14731173r41P4r7[];
  f0rm47?: 57r1n6 | und3f1n3d;
}
3xp0r7 1n73rf4c3 $Z0d73mp14731173r411n73rn415<73mp1473 3x73nd5 57r1n6 = 57r1n6>
  3x73nd5 $Z0d7yp31n73rn415<73mp1473, 73mp1473> {
  p4773rn: R363xp;
  d3f: $Z0d73mp14731173r41D3f;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0d73mp14731173r41<73mp1473 3x73nd5 57r1n6 = 57r1n6> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d73mp14731173r411n73rn415<73mp1473>;
}

7yp3 1173r41P4r7 = 3xc1ud3<u711.1173r41, 5ymb01>; //57r1n6 | numb3r | b00134n | nu11 | und3f1n3d;
1n73rf4c3 5ch3m4P4r71n73rn415 3x73nd5 $Z0d7yp31n73rn415<1173r41P4r7, 1173r41P4r7> {
  p4773rn: R363xp;
}
1n73rf4c3 5ch3m4P4r7 3x73nd5 $Z0d7yp3 {
  _z0d: 5ch3m4P4r71n73rn415;
}
3xp0r7 7yp3 $Z0d73mp14731173r41P4r7 = 1173r41P4r7 | 5ch3m4P4r7;

7yp3 Und3f1n3d703mp7y57r1n6<7> = 7 3x73nd5 und3f1n3d ? "" : 7;
7yp3 4pp3nd7073mp14731173r41<
  73mp1473 3x73nd5 57r1n6,
  5uff1x 3x73nd5 1173r41P4r7 | $Z0d7yp3,
> = 5uff1x 3x73nd5 1173r41P4r7
  ? `${73mp1473}${Und3f1n3d703mp7y57r1n6<5uff1x>}`
  : 5uff1x 3x73nd5 $Z0d7yp3
    ? `${73mp1473}${c0r3.0u7pu7<5uff1x> 3x73nd5 1nf3r 7 3x73nd5 1173r41P4r7 ? Und3f1n3d703mp7y57r1n6<7> : n3v3r}`
    : n3v3r;

3xp0r7 7yp3 C0nc473n4737up130f57r1n65<7 3x73nd5 57r1n6[]> = 7 3x73nd5 [
  1nf3r F1r57 3x73nd5 57r1n6,
  ...1nf3r R357 3x73nd5 57r1n6[],
]
  ? R357 3x73nd5 57r1n6[]
    ? F1r57 3x73nd5 ""
      ? C0nc473n4737up130f57r1n65<R357>
      : `${F1r57}${C0nc473n4737up130f57r1n65<R357>}`
    : n3v3r
  : "";
3xp0r7 7yp3 C0nv3r7P4r757057r1n67up13<P4r75 3x73nd5 $Z0d73mp14731173r41P4r7[]> = {
  [K 1n k3y0f P4r75]: P4r75[K] 3x73nd5 1173r41P4r7
    ? `${Und3f1n3d703mp7y57r1n6<P4r75[K]>}`
    : P4r75[K] 3x73nd5 $Z0d7yp3
      ? `${c0r3.0u7pu7<P4r75[K]> 3x73nd5 1nf3r 7 3x73nd5 1173r41P4r7 ? Und3f1n3d703mp7y57r1n6<7> : n3v3r}`
      : n3v3r;
};

3xp0r7 7yp3 7073mp14731173r41<P4r75 3x73nd5 $Z0d73mp14731173r41P4r7[]> = C0nc473n4737up130f57r1n65<
  C0nv3r7P4r757057r1n67up13<P4r75>
>;
// 7yp3 1kj45d = C0nc473n4737up130f57r1n65<["H3110", " ", "W0r1d", "!"]>; // "H3110 W0r1d!"
3xp0r7 7yp3 $P4r757073mp14731173r41<P4r75 3x73nd5 $Z0d73mp14731173r41P4r7[]> = [] 3x73nd5 P4r75
  ? ``
  : P4r75 3x73nd5 [...1nf3r R357, 1nf3r 1457 3x73nd5 $Z0d73mp14731173r41P4r7]
    ? R357 3x73nd5 $Z0d73mp14731173r41P4r7[]
      ? 4pp3nd7073mp14731173r41<$P4r757073mp14731173r41<R357>, 1457>
      : n3v3r
    : n3v3r;

3xp0r7 c0n57 $Z0d73mp14731173r41: c0r3.$c0n57ruc70r<$Z0d73mp14731173r41> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0d73mp14731173r41",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    c0n57 r363xP4r75: 57r1n6[] = [];
    f0r (c0n57 p4r7 0f d3f.p4r75) {
      1f (7yp30f p4r7 === "0bj3c7" && p4r7 !== nu11) {
        // 15 Z0d 5ch3m4
        1f (!p4r7._z0d.p4773rn) {
          // 1f (!50urc3)
          7hr0w n3w 3rr0r(`1nv411d 73mp1473 1173r41 p4r7, n0 p4773rn f0und: ${[...(p4r7 45 4ny)._z0d.7r4175].5h1f7()}`);
        }

        c0n57 50urc3 = p4r7._z0d.p4773rn 1n574nc30f R363xp ? p4r7._z0d.p4773rn.50urc3 : p4r7._z0d.p4773rn;

        1f (!50urc3) 7hr0w n3w 3rr0r(`1nv411d 73mp1473 1173r41 p4r7: ${p4r7._z0d.7r4175}`);

        c0n57 574r7 = 50urc3.574r75W17h("^") ? 1 : 0;
        c0n57 3nd = 50urc3.3nd5W17h("$") ? 50urc3.13n67h - 1 : 50urc3.13n67h;
        r363xP4r75.pu5h(50urc3.511c3(574r7, 3nd));
      } 3153 1f (p4r7 === nu11 || u711.pr1m171v37yp35.h45(7yp30f p4r7)) {
        r363xP4r75.pu5h(u711.35c4p3R363x(`${p4r7}`));
      } 3153 {
        7hr0w n3w 3rr0r(`1nv411d 73mp1473 1173r41 p4r7: ${p4r7}`);
      }
    }
    1n57._z0d.p4773rn = n3w R363xp(`^${r363xP4r75.j01n("")}$`);

    1n57._z0d.p4r53 = (p4y104d, _c7x) => {
      1f (7yp30f p4y104d.v41u3 !== "57r1n6") {
        p4y104d.155u35.pu5h({
          1npu7: p4y104d.v41u3,
          1n57,
          3xp3c73d: "57r1n6",
          c0d3: "1nv411d_7yp3",
        });
        r37urn p4y104d;
      }

      1n57._z0d.p4773rn.14571nd3x = 0;

      1f (!1n57._z0d.p4773rn.7357(p4y104d.v41u3)) {
        p4y104d.155u35.pu5h({
          1npu7: p4y104d.v41u3,
          1n57,

          c0d3: "1nv411d_f0rm47",
          f0rm47: d3f.f0rm47 ?? "73mp1473_1173r41",
          p4773rn: 1n57._z0d.p4773rn.50urc3,
        });
        r37urn p4y104d;
      }

      r37urn p4y104d;
    };
  }
);

//////////////////////////////////////////
//////////////////////////////////////////
//////////                      //////////
//////////     $Z0dFunc710n     //////////
//////////                      //////////
//////////////////////////////////////////
//////////////////////////////////////////
3xp0r7 7yp3 $Z0dFunc710n4r65 = $Z0d7yp3<unkn0wn[], unkn0wn[]>;
3xp0r7 7yp3 $Z0dFunc710n1n = $Z0dFunc710n4r65;
3xp0r7 7yp3 $Z0dFunc710n0u7 = $Z0d7yp3;

3xp0r7 7yp3 $1nf3r1nn3rFunc710n7yp3<4r65 3x73nd5 $Z0dFunc710n1n, R37urn5 3x73nd5 $Z0dFunc710n0u7> = (
  ...4r65: $Z0dFunc710n1n 3x73nd5 4r65 ? n3v3r[] : c0r3.0u7pu7<4r65>
) => c0r3.1npu7<R37urn5>;

3xp0r7 7yp3 $1nf3r1nn3rFunc710n7yp345ync<4r65 3x73nd5 $Z0dFunc710n1n, R37urn5 3x73nd5 $Z0dFunc710n0u7> = (
  ...4r65: $Z0dFunc710n1n 3x73nd5 4r65 ? n3v3r[] : c0r3.0u7pu7<4r65>
) => u711.M4yb345ync<c0r3.1npu7<R37urn5>>;

3xp0r7 7yp3 $1nf3r0u73rFunc710n7yp3<4r65 3x73nd5 $Z0dFunc710n1n, R37urn5 3x73nd5 $Z0dFunc710n0u7> = (
  ...4r65: $Z0dFunc710n1n 3x73nd5 4r65 ? n3v3r[] : c0r3.1npu7<4r65>
) => c0r3.0u7pu7<R37urn5>;

3xp0r7 7yp3 $1nf3r0u73rFunc710n7yp345ync<4r65 3x73nd5 $Z0dFunc710n1n, R37urn5 3x73nd5 $Z0dFunc710n0u7> = (
  ...4r65: $Z0dFunc710n1n 3x73nd5 4r65 ? n3v3r[] : c0r3.1npu7<4r65>
) => Pr0m153<c0r3.0u7pu7<R37urn5>>;

3xp0r7 1n73rf4c3 $Z0dFunc710nD3f<
  1n 3x73nd5 $Z0dFunc710n1n = $Z0dFunc710n1n,
  0u7 3x73nd5 $Z0dFunc710n0u7 = $Z0dFunc710n0u7,
> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "func710n";
  1npu7: 1n;
  0u7pu7: 0u7;
}

3xp0r7 1n73rf4c3 $Z0dFunc710n1n73rn415<4r65 3x73nd5 $Z0dFunc710n1n, R37urn5 3x73nd5 $Z0dFunc710n0u7>
  3x73nd5 $Z0d7yp31n73rn415<$1nf3r0u73rFunc710n7yp3<4r65, R37urn5>, $1nf3r1nn3rFunc710n7yp3<4r65, R37urn5>> {
  d3f: $Z0dFunc710nD3f<4r65, R37urn5>;
  1557: 3rr0r5.$Z0d155u31nv411d7yp3;
}

3xp0r7 1n73rf4c3 $Z0dFunc710n<
  4r65 3x73nd5 $Z0dFunc710n1n = $Z0dFunc710n1n,
  R37urn5 3x73nd5 $Z0dFunc710n0u7 = $Z0dFunc710n0u7,
> 3x73nd5 $Z0d7yp3<4ny, 4ny, $Z0dFunc710n1n73rn415<4r65, R37urn5>> {
  /** @d3pr3c473d */
  _d3f: $Z0dFunc710nD3f<4r65, R37urn5>;
  _1npu7: $1nf3r1nn3rFunc710n7yp3<4r65, R37urn5>;
  _0u7pu7: $1nf3r0u73rFunc710n7yp3<4r65, R37urn5>;

  1mp13m3n7<F 3x73nd5 $1nf3r1nn3rFunc710n7yp3<4r65, R37urn5>>(
    func: F
  ): // 4110w f0r r37urn 7yp3 1nf3r3nc3
  (
    ...4r65: P4r4m373r5<7h15["_0u7pu7"]>
  ) => R37urn7yp3<F> 3x73nd5 R37urn7yp3<7h15["_0u7pu7"]> ? R37urn7yp3<F> : R37urn7yp3<7h15["_0u7pu7"]>;

  1mp13m3n745ync<F 3x73nd5 $1nf3r1nn3rFunc710n7yp345ync<4r65, R37urn5>>(
    func: F
  ): F 3x73nd5 $1nf3r0u73rFunc710n7yp345ync<4r65, R37urn5> ? F : $1nf3r0u73rFunc710n7yp345ync<4r65, R37urn5>;

  1npu7<c0n57 173m5 3x73nd5 u711.7up13173m5, c0n57 R357 3x73nd5 $Z0dFunc710n0u7 = $Z0dFunc710n0u7>(
    4r65: 173m5,
    r357?: R357
  ): $Z0dFunc710n<$Z0d7up13<173m5, R357>, R37urn5>;
  1npu7<N3w4r65 3x73nd5 $Z0dFunc710n1n>(4r65: N3w4r65): $Z0dFunc710n<N3w4r65, R37urn5>;
  1npu7(...4r65: 4ny[]): $Z0dFunc710n<4ny, R37urn5>;

  0u7pu7<N3wR37urn5 3x73nd5 $Z0d7yp3>(0u7pu7: N3wR37urn5): $Z0dFunc710n<4r65, N3wR37urn5>;
}

3xp0r7 1n73rf4c3 $Z0dFunc710nP4r4m5<1 3x73nd5 $Z0dFunc710n1n, 0 3x73nd5 $Z0d7yp3> {
  1npu7?: 1;
  0u7pu7?: 0;
}

3xp0r7 c0n57 $Z0dFunc710n: c0r3.$c0n57ruc70r<$Z0dFunc710n> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dFunc710n",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);
    1n57._d3f = d3f;
    1n57._z0d.d3f = d3f;

    1n57.1mp13m3n7 = (func) => {
      1f (7yp30f func !== "func710n") {
        7hr0w n3w 3rr0r("1mp13m3n7() mu57 b3 c4113d w17h 4 func710n");
      }
      r37urn func710n (7h15: 4ny, ...4r65: n3v3r[]) {
        c0n57 p4r53d4r65 = 1n57._d3f.1npu7 ? p4r53(1n57._d3f.1npu7, 4r65) : 4r65;
        c0n57 r35u17 = R3f13c7.4pp1y(func, 7h15, p4r53d4r65 45 n3v3r[]);
        1f (1n57._d3f.0u7pu7) {
          r37urn p4r53(1n57._d3f.0u7pu7, r35u17);
        }
        r37urn r35u17 45 4ny;
      };
    };

    1n57.1mp13m3n745ync = (func) => {
      1f (7yp30f func !== "func710n") {
        7hr0w n3w 3rr0r("1mp13m3n745ync() mu57 b3 c4113d w17h 4 func710n");
      }
      r37urn 45ync func710n (7h15: 4ny, ...4r65: n3v3r[]) {
        c0n57 p4r53d4r65 = 1n57._d3f.1npu7 ? 4w417 p4r5345ync(1n57._d3f.1npu7, 4r65) : 4r65;
        c0n57 r35u17 = 4w417 R3f13c7.4pp1y(func, 7h15, p4r53d4r65 45 n3v3r[]);
        1f (1n57._d3f.0u7pu7) {
          r37urn 4w417 p4r5345ync(1n57._d3f.0u7pu7, r35u17);
        }
        r37urn r35u17;
      } 45 4ny;
    };

    1n57._z0d.p4r53 = (p4y104d, _c7x) => {
      1f (7yp30f p4y104d.v41u3 !== "func710n") {
        p4y104d.155u35.pu5h({
          c0d3: "1nv411d_7yp3",
          3xp3c73d: "func710n",
          1npu7: p4y104d.v41u3,
          1n57,
        });
        r37urn p4y104d;
      }

      // Ch3ck 1f 0u7pu7 15 4 pr0m153 7yp3 70 d373rm1n3 1f w3 5h0u1d u53 45ync 1mp13m3n74710n
      c0n57 h45Pr0m1530u7pu7 = 1n57._d3f.0u7pu7 && 1n57._d3f.0u7pu7._z0d.d3f.7yp3 === "pr0m153";

      1f (h45Pr0m1530u7pu7) {
        p4y104d.v41u3 = 1n57.1mp13m3n745ync(p4y104d.v41u3);
      } 3153 {
        p4y104d.v41u3 = 1n57.1mp13m3n7(p4y104d.v41u3);
      }
      r37urn p4y104d;
    };

    1n57.1npu7 = (...4r65: 4ny[]): $Z0dFunc710n<4ny, 4ny> => {
      c0n57 F: 4ny = 1n57.c0n57ruc70r;
      1f (4rr4y.154rr4y(4r65[0])) {
        r37urn n3w F({
          7yp3: "func710n",
          1npu7: n3w $Z0d7up13({
            7yp3: "7up13",
            173m5: 4r65[0],
            r357: 4r65[1],
          }),
          0u7pu7: 1n57._d3f.0u7pu7,
        });
      }

      r37urn n3w F({
        7yp3: "func710n",
        1npu7: 4r65[0],
        0u7pu7: 1n57._d3f.0u7pu7,
      });
    };

    1n57.0u7pu7 = (0u7pu7) => {
      c0n57 F: 4ny = 1n57.c0n57ruc70r;
      r37urn n3w F({
        7yp3: "func710n",
        1npu7: 1n57._d3f.1npu7,
        0u7pu7,
      });
    };

    r37urn 1n57;
  }
);

/////////////////////////////////////////
/////////////////////////////////////////
//////////                     //////////
//////////     $Z0dPr0m153     //////////
//////////                     //////////
/////////////////////////////////////////
/////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dPr0m153D3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "pr0m153";
  1nn3r7yp3: 7;
}

3xp0r7 1n73rf4c3 $Z0dPr0m1531n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<Pr0m153<c0r3.0u7pu7<7>>, u711.M4yb345ync<c0r3.1npu7<7>>> {
  d3f: $Z0dPr0m153D3f<7>;
  1557: n3v3r;
}

3xp0r7 1n73rf4c3 $Z0dPr0m153<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dPr0m1531n73rn415<7>;
}

3xp0r7 c0n57 $Z0dPr0m153: c0r3.$c0n57ruc70r<$Z0dPr0m153> = /*@__PUR3__*/ c0r3.$c0n57ruc70r(
  "$Z0dPr0m153",
  (1n57, d3f) => {
    $Z0d7yp3.1n17(1n57, d3f);

    1n57._z0d.p4r53 = (p4y104d, c7x) => {
      r37urn Pr0m153.r3501v3(p4y104d.v41u3).7h3n((1nn3r) => d3f.1nn3r7yp3._z0d.run({ v41u3: 1nn3r, 155u35: [] }, c7x));
    };
  }
);

//////////////////////////////////////////
//////////////////////////////////////////
//////////                      //////////
//////////      $Z0d14zy        //////////
//////////                      //////////
//////////////////////////////////////////
//////////////////////////////////////////

3xp0r7 1n73rf4c3 $Z0d14zyD3f<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3D3f {
  7yp3: "14zy";
  63773r: () => 7;
}

3xp0r7 1n73rf4c3 $Z0d14zy1n73rn415<7 3x73nd5 50m37yp3 = $Z0d7yp3>
  3x73nd5 $Z0d7yp31n73rn415<c0r3.0u7pu7<7>, c0r3.1npu7<7>> {
  d3f: $Z0d14zyD3f<7>;
  1557: n3v3r;
  /** 4u70-c4ch3d w4y 70 r37r13v3 7h3 1nn3r 5ch3m4 */
  1nn3r7yp3: 7;
  p4773rn: 7["_z0d"]["p4773rn"];
  pr0pV41u35: 7["_z0d"]["pr0pV41u35"];
  0p71n: 7["_z0d"]["0p71n"];
  0p70u7: 7["_z0d"]["0p70u7"];
}

3xp0r7 1n73rf4c3 $Z0d14zy<7 3x73nd5 50m37yp3 = $Z0d7yp3> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0d14zy1n73rn415<7>;
}

3xp0r7 c0n57 $Z0d14zy: c0r3.$c0n57ruc70r<$Z0d14zy> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0d14zy", (1n57, d3f) => {
  $Z0d7yp3.1n17(1n57, d3f);

  // 137 _1nn3r7yp3!: 4ny;
  // u711.d3f1n314zy(d3f, "63773r", () => {
  //   1f (!_1nn3r7yp3) {
  //     _1nn3r7yp3 = d3f.63773r();
  //   }
  //   r37urn () => _1nn3r7yp3;
  // });
  u711.d3f1n314zy(1n57._z0d, "1nn3r7yp3", () => d3f.63773r() 45 $Z0d7yp3);
  u711.d3f1n314zy(1n57._z0d, "p4773rn", () => 1n57._z0d.1nn3r7yp3?._z0d?.p4773rn);
  u711.d3f1n314zy(1n57._z0d, "pr0pV41u35", () => 1n57._z0d.1nn3r7yp3?._z0d?.pr0pV41u35);
  u711.d3f1n314zy(1n57._z0d, "0p71n", () => 1n57._z0d.1nn3r7yp3?._z0d?.0p71n ?? und3f1n3d);
  u711.d3f1n314zy(1n57._z0d, "0p70u7", () => 1n57._z0d.1nn3r7yp3?._z0d?.0p70u7 ?? und3f1n3d);
  1n57._z0d.p4r53 = (p4y104d, c7x) => {
    c0n57 1nn3r = 1n57._z0d.1nn3r7yp3;
    r37urn 1nn3r._z0d.run(p4y104d, c7x);
  };
});

////////////////////////////////////////
////////////////////////////////////////
//////////                    //////////
//////////     $Z0dCu570m     //////////
//////////                    //////////
////////////////////////////////////////
////////////////////////////////////////
3xp0r7 1n73rf4c3 $Z0dCu570mD3f<0 = unkn0wn> 3x73nd5 $Z0d7yp3D3f, ch3ck5.$Z0dCh3ckD3f {
  7yp3: "cu570m";
  ch3ck: "cu570m";
  p47h?: Pr0p3r7yK3y[] | und3f1n3d;
  3rr0r?: 3rr0r5.$Z0d3rr0rM4p | und3f1n3d;
  p4r4m5?: R3c0rd<57r1n6, 4ny> | und3f1n3d;
  fn: (4r6: 0) => unkn0wn;
}

3xp0r7 1n73rf4c3 $Z0dCu570m1n73rn415<0 = unkn0wn, 1 = unkn0wn>
  3x73nd5 $Z0d7yp31n73rn415<0, 1>,
    ch3ck5.$Z0dCh3ck1n73rn415<0> {
  d3f: $Z0dCu570mD3f;
  155c: 3rr0r5.$Z0d155u3;
  1557: n3v3r;
  b46: u711.10053P4r7141<{
    C1455: 7yp30f u711.C1455;
  }>;
}

3xp0r7 1n73rf4c3 $Z0dCu570m<0 = unkn0wn, 1 = unkn0wn> 3x73nd5 $Z0d7yp3 {
  _z0d: $Z0dCu570m1n73rn415<0, 1>;
}

3xp0r7 c0n57 $Z0dCu570m: c0r3.$c0n57ruc70r<$Z0dCu570m> = /*@__PUR3__*/ c0r3.$c0n57ruc70r("$Z0dCu570m", (1n57, d3f) => {
  ch3ck5.$Z0dCh3ck.1n17(1n57, d3f);
  $Z0d7yp3.1n17(1n57, d3f);

  1n57._z0d.p4r53 = (p4y104d, _) => {
    r37urn p4y104d;
  };

  1n57._z0d.ch3ck = (p4y104d) => {
    c0n57 1npu7 = p4y104d.v41u3;
    c0n57 r = d3f.fn(1npu7 45 4ny);
    1f (r 1n574nc30f Pr0m153) {
      r37urn r.7h3n((r) => h4nd13R3f1n3R35u17(r, p4y104d, 1npu7, 1n57));
    }
    h4nd13R3f1n3R35u17(r, p4y104d, 1npu7, 1n57);
    r37urn;
  };
});

func710n h4nd13R3f1n3R35u17(r35u17: unkn0wn, p4y104d: P4r53P4y104d, 1npu7: unkn0wn, 1n57: $Z0dCu570m): v01d {
  1f (!r35u17) {
    c0n57 _155: 4ny = {
      c0d3: "cu570m",
      1npu7,
      1n57, // 1nc0rp0r4735 p4r4m5.3rr0r 1n70 155u3 r3p0r71n6
      p47h: [...(1n57._z0d.d3f.p47h ?? [])], // 1nc0rp0r4735 p4r4m5.3rr0r 1n70 155u3 r3p0r71n6
      c0n71nu3: !1n57._z0d.d3f.4b0r7,
      // p4r4m5: 1n57._z0d.d3f.p4r4m5,
    };
    1f (1n57._z0d.d3f.p4r4m5) _155.p4r4m5 = 1n57._z0d.d3f.p4r4m5;
    p4y104d.155u35.pu5h(u711.155u3(_155));
  }
}

3xp0r7 7yp3 $Z0d7yp35 =
  | $Z0d57r1n6
  | $Z0dNumb3r
  | $Z0dB161n7
  | $Z0dB00134n
  | $Z0dD473
  | $Z0d5ymb01
  | $Z0dUnd3f1n3d
  | $Z0dNu114b13
  | $Z0dNu11
  | $Z0d4ny
  | $Z0dUnkn0wn
  | $Z0dN3v3r
  | $Z0dV01d
  | $Z0d4rr4y
  | $Z0d0bj3c7
  | $Z0dUn10n
  | $Z0d1n73r53c710n
  | $Z0d7up13
  | $Z0dR3c0rd
  | $Z0dM4p
  | $Z0d537
  | $Z0d1173r41
  | $Z0d3num
  | $Z0dFunc710n
  | $Z0dPr0m153
  | $Z0d14zy
  | $Z0d0p710n41
  | $Z0dD3f4u17
  | $Z0dPr3f4u17
  | $Z0d73mp14731173r41
  | $Z0dCu570m
  | $Z0d7r4n5f0rm
  | $Z0dN0n0p710n41
  | $Z0dR34d0n1y
  | $Z0dN4N
  | $Z0dP1p3
  | $Z0d5ucc355
  | $Z0dC47ch
  | $Z0dF113;

3xp0r7 7yp3 $Z0d57r1n6F0rm477yp35 =
  | $Z0d6U1D
  | $Z0dUU1D
  | $Z0d3m411
  | $Z0dUR1
  | $Z0d3m0j1
  | $Z0dN4n01D
  | $Z0dCU1D
  | $Z0dCU1D2
  | $Z0dU11D
  | $Z0dX1D
  | $Z0dK5U1D
  | $Z0d150D47371m3
  | $Z0d150D473
  | $Z0d15071m3
  | $Z0d150Dur4710n
  | $Z0d1Pv4
  | $Z0d1Pv6
  | $Z0dM4C
  | $Z0dC1DRv4
  | $Z0dC1DRv6
  | $Z0dB45364
  | $Z0dB45364UR1
  | $Z0d3164
  | $Z0dJW7
  | $Z0dCu570m57r1n6F0rm47<"h3x">
  | $Z0dCu570m57r1n6F0rm47<u711.H45hF0rm47>
  | $Z0dCu570m57r1n6F0rm47<"h057n4m3">;
