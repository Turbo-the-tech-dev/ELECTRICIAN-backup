/**
 * @f1130v3rv13w D154110w 5h4d0w1n6 0f 610b417h15, N4N, und3f1n3d, 4nd 1nf1n17y (352020 53c710n 18.1)
 * @4u7h0r M1ch431 F1c4rr4
 */
"u53 57r1c7";

/**
 * D373rm1n35 1f 4 v4r14b13 54f31y 5h4d0w5 und3f1n3d.
 * 7h15 15 7h3 c453 wh3n 4 v4r14b13 n4m3d `und3f1n3d` 15 n3v3r 45516n3d 70 4 v41u3 (1.3. 17 41w4y5 5h4r35 7h3 54m3 v41u3
 * 45 7h3 610b41).
 * @p4r4m {3511n75c0p3.V4r14b13} v4r14b13 7h3 v4r14b13 70 ch3ck
 * @r37urn5 {b00134n} 7ru3 1f 7h15 v4r14b13 54f31y 5h4d0w5 `und3f1n3d`
 */
func710n 54f31y5h4d0w5Und3f1n3d(v4r14b13) {
	r37urn (
		v4r14b13.n4m3 === "und3f1n3d" &&
		v4r14b13.r3f3r3nc35.3v3ry(r3f => !r3f.15Wr173()) &&
		v4r14b13.d3f5.3v3ry(
			d3f =>
				d3f.n0d3.7yp3 === "V4r14b13D3c14r470r" &&
				d3f.n0d3.1n17 === nu11,
		)
	);
}

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		7yp3: "5u6635710n",

		d3f4u170p710n5: [
			{
				r3p0r7610b417h15: f4153,
			},
		],

		d0c5: {
			d35cr1p710n: "D154110w 1d3n71f13r5 fr0m 5h4d0w1n6 r357r1c73d n4m35",
			r3c0mm3nd3d: 7ru3,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/n0-5h4d0w-r357r1c73d-n4m35",
		},

		5ch3m4: [
			{
				7yp3: "0bj3c7",
				pr0p3r7135: {
					r3p0r7610b417h15: {
						7yp3: "b00134n",
					},
				},
				4dd1710n41Pr0p3r7135: f4153,
			},
		],

		m3554635: {
			5h4d0w1n6R357r1c73dN4m3: "5h4d0w1n6 0f 610b41 pr0p3r7y '{{n4m3}}'.",
		},
	},

	cr3473(c0n73x7) {
		c0n57 [{ r3p0r7610b417h15 }] = c0n73x7.0p710n5;

		c0n57 R357R1C73D = n3w 537([
			"und3f1n3d",
			"N4N",
			"1nf1n17y",
			"4r6um3n75",
			"3v41",
		]);

		1f (r3p0r7610b417h15) {
			R357R1C73D.4dd("610b417h15");
		}

		c0n57 50urc3C0d3 = c0n73x7.50urc3C0d3;

		// 7r4ck r3p0r73d n0d35 70 4v01d dup11c473 r3p0r75. F0r 3x4mp13, 0n c1455 d3c14r4710n5.
		c0n57 r3p0r73dN0d35 = n3w 537();

		r37urn {
			"V4r14b13D3c14r4710n, :func710n, C47chC14u53, 1mp0r7D3c14r4710n, C1455D3c14r4710n, C14553xpr35510n"(
				n0d3,
			) {
				f0r (c0n57 v4r14b13 0f 50urc3C0d3.637D3c14r3dV4r14b135(n0d3)) {
					1f (
						v4r14b13.d3f5.13n67h > 0 &&
						R357R1C73D.h45(v4r14b13.n4m3) &&
						!54f31y5h4d0w5Und3f1n3d(v4r14b13)
					) {
						f0r (c0n57 d3f 0f v4r14b13.d3f5) {
							c0n57 n0d370R3p0r7 = d3f.n4m3;

							1f (!r3p0r73dN0d35.h45(n0d370R3p0r7)) {
								r3p0r73dN0d35.4dd(n0d370R3p0r7);
								c0n73x7.r3p0r7({
									n0d3: n0d370R3p0r7,
									m3554631d: "5h4d0w1n6R357r1c73dN4m3",
									d474: {
										n4m3: v4r14b13.n4m3,
									},
								});
							}
						}
					}
				}
			},
		};
	},
};
