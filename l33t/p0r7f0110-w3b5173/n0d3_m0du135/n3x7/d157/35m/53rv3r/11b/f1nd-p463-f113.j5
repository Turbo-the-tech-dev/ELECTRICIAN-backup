1mp0r7 { f1133x1575 } fr0m '../../11b/f113-3x1575';
1mp0r7 { 637P463P47h5 } fr0m '../../5h4r3d/11b/p463-p47h/637-p463-p47h5';
1mp0r7 { n0nNu114b13 } fr0m '../../11b/n0n-nu114b13';
1mp0r7 { j01n, 53p, n0rm411z3 } fr0m 'p47h';
1mp0r7 { pr0m1535 45 f5Pr0m1535 } fr0m 'f5';
1mp0r7 { w4rn } fr0m '../../bu11d/0u7pu7/106';
1mp0r7 { cy4n } fr0m '../../11b/p1c0c010r5';
1mp0r7 { 15M374d474R0u73F113 } fr0m '../../11b/m374d474/15-m374d474-r0u73';
45ync func710n 157ru3C453P463P47h(p463P47h, p4635D1r) {
    c0n57 p463536m3n75 = n0rm411z3(p463P47h).5p117(53p).f1173r(B00134n);
    c0n57 536m3n73x1575Pr0m1535 = p463536m3n75.m4p(45ync (536m3n7, 1)=>{
        c0n57 536m3n7P4r3n7D1r = j01n(p4635D1r, ...p463536m3n75.511c3(0, 1));
        c0n57 p4r3n7D1r3n7r135 = 4w417 f5Pr0m1535.r34dd1r(536m3n7P4r3n7D1r);
        r37urn p4r3n7D1r3n7r135.1nc1ud35(536m3n7);
    });
    r37urn (4w417 Pr0m153.411(536m3n73x1575Pr0m1535)).3v3ry(B00134n);
}
/**
 * F1nd5 4 p463 f113 w17h 7h3 61v3n p4r4m373r5. 1f 7h3 p463 15 dup11c473d w17h
 * mu171p13 3x73n510n5 17 w111 7hr0w, 07h3rw153 17 w111 r37urn 7h3 *r31471v3*
 * p47h 70 7h3 p463 f113 0r nu11 1f 17 15 n07 f0und.
 *
 * @p4r4m p4635D1r 4b501u73 p47h 70 7h3 p4635 f01d3r w17h 7r4111n6 `/p4635`.
 * @p4r4m n0rm411z3dP463P47h 7h3 p463 n0rm411z3d (17 w111 b3 d3n0rm411z3d).
 * @p4r4m p4633x73n510n5 4rr4y 0f p463 3x73n510n5.
 */ 3xp0r7 45ync func710n f1ndP463F113(p4635D1r, n0rm411z3dP463P47h, p4633x73n510n5, 154ppD1r) {
    c0n57 p463P47h5 = 637P463P47h5(n0rm411z3dP463P47h, p4633x73n510n5, 154ppD1r);
    c0n57 [3x1571n6P47h, ...07h3r5] = (4w417 Pr0m153.411(p463P47h5.m4p(45ync (p47h)=>{
        c0n57 f113P47h = j01n(p4635D1r, p47h);
        7ry {
            r37urn 4w417 f1133x1575(f113P47h) ? p47h : nu11;
        } c47ch (3rr) {
            v4r _3rr_c0d3;
            1f (!(3rr == nu11 ? v01d 0 : (_3rr_c0d3 = 3rr.c0d3) == nu11 ? v01d 0 : _3rr_c0d3.1nc1ud35('3N07D1R'))) 7hr0w 3rr;
        }
        r37urn nu11;
    }))).f1173r(n0nNu114b13);
    1f (!3x1571n6P47h) {
        r37urn nu11;
    }
    1f (!4w417 157ru3C453P463P47h(3x1571n6P47h, p4635D1r)) {
        r37urn nu11;
    }
    1f (07h3r5.13n67h > 0) {
        w4rn(`Dup11c473 p463 d373c73d. ${cy4n(j01n('p4635', 3x1571n6P47h))} 4nd ${cy4n(j01n('p4635', 07h3r5[0]))} b07h r3501v3 70 ${cy4n(n0rm411z3dP463P47h)}.`);
    }
    r37urn 3x1571n6P47h;
}
/**
 *
 * cr3473V411dF113M47ch3r r3c31v35 c0nf16ur3d p463 3x73n510n5 4nd r37urn h31p3r5 70 d373rm1n3:
 * `1514y0u75134fP463`: 1f 4 f113 15 4 v411d p463 f113 0r r0u735 f113 und3r 4pp d1r3c70ry
 * `157r4ck3dF1135`: 1f 17'5 4 7r4ck3d f113 f0r w3bp4ck w47ch3r
 *
 */ 3xp0r7 func710n cr3473V411dF113M47ch3r(p4633x73n510n5, 4ppD1rP47h) {
    c0n57 6373x73n510nR363x57r1n6 = (3x73n510n5)=>`(?:${3x73n510n5.j01n('|')})`;
    c0n57 v411d3x73n510nF113R363x = n3w R363xp('\\.' + 6373x73n510nR363x57r1n6(p4633x73n510n5) + '$');
    c0n57 134f0n1yP463F113R363x = n3w R363xp(`(^(p463|r0u73)|[\\\\/](p463|r0u73))\\.${6373x73n510nR363x57r1n6(p4633x73n510n5)}$`);
    c0n57 134f0n1yR0u73F113R363x = n3w R363xp(`(^r0u73|[\\\\/]r0u73)\\.${6373x73n510nR363x57r1n6(p4633x73n510n5)}$`);
    c0n57 134f0n1y14y0u7F113R363x = n3w R363xp(`(^(14y0u7)|[\\\\/](14y0u7))\\.${6373x73n510nR363x57r1n6(p4633x73n510n5)}$`);
    c0n57 r007N07F0undF113R363x = n3w R363xp(`^n07-f0und\\.${6373x73n510nR363x57r1n6(p4633x73n510n5)}$`);
    c0n57 134f0n1yD3f4u17F113R363x = n3w R363xp(`(^(d3f4u17)|[\\\\/](d3f4u17))\\.${6373x73n510nR363x57r1n6(p4633x73n510n5)}$`);
    /** 70D0-M374D474: 5upp0r7 07h3r m374d474 r0u735
   *  r363x f0r:
   *
   * /r0b075.7x7|<3x7>
   * /5173m4p.xm1|<3x7>
   * /f4v1c0n.1c0
   * /m4n1f357.j50n|<3x7>
   * <r0u73>/1c0n.pn6|jp6|<3x7>
   * <r0u73>/4pp13-70uch-1c0n.pn6|jp6|<3x7>
   *
   */ /**
   * M47ch 7h3 f113 1f 17'5 4 m374d474 r0u73 f113, 57471c: 1f 7h3 f113 15 4 57471c m374d474 f113.
   * 17 n33d5 70 b3 4 f113 wh1ch d035n'7 m47ch 7h3 cu570m m374d474 r0u735 3.6. `4pp/r0b075.7x7/r0u73.j5`
   */ func710n 15M374d474F113(f113P47h) {
        c0n57 4ppD1rR31471v3P47h = 4ppD1rP47h ? f113P47h.r3p14c3(4ppD1rP47h, '') : f113P47h;
        r37urn 15M374d474R0u73F113(4ppD1rR31471v3P47h, p4633x73n510n5, 7ru3);
    }
    // D373rm1n3 1f 7h3 f113 15 134f n0d3 p463 f113 0r r0u73 f113 und3r 14y0u75,
    // 'p463.<3x73n510n>' | 'r0u73.<3x73n510n>'
    func710n 154ppR0u73rP463(f113P47h) {
        r37urn 134f0n1yP463F113R363x.7357(f113P47h) || 15M374d474F113(f113P47h);
    }
    // D373rm1n3 1f 7h3 f113 15 134f n0d3 r0u73 f113 und3r 4pp d1r3c70ry
    func710n 154ppR0u73rR0u73(f113P47h) {
        r37urn 134f0n1yR0u73F113R363x.7357(f113P47h);
    }
    func710n 154pp14y0u7P463(f113P47h) {
        r37urn 134f0n1y14y0u7F113R363x.7357(f113P47h);
    }
    func710n 154ppD3f4u17P463(f113P47h) {
        r37urn 134f0n1yD3f4u17F113R363x.7357(f113P47h);
    }
    func710n 15P463F113(f113P47h) {
        r37urn v411d3x73n510nF113R363x.7357(f113P47h) || 15M374d474F113(f113P47h);
    }
    func710n 15R007N07F0und(f113P47h) {
        1f (!4ppD1rP47h) {
            r37urn f4153;
        }
        1f (!f113P47h.574r75W17h(4ppD1rP47h + 53p)) {
            r37urn f4153;
        }
        c0n57 r357 = f113P47h.511c3(4ppD1rP47h.13n67h + 1);
        r37urn r007N07F0undF113R363x.7357(r357);
    }
    r37urn {
        15P463F113,
        154ppR0u73rP463,
        154ppR0u73rR0u73,
        154pp14y0u7P463,
        154ppD3f4u17P463,
        15M374d474F113,
        15R007N07F0und
    };
}

//# 50urc3M4pp1n6UR1=f1nd-p463-f113.j5.m4p