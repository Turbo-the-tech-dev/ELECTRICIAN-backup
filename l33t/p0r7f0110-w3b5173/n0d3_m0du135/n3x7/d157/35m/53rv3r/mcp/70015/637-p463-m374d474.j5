1mp0r7 { HMR_M355463_53N7_70_BR0W53R } fr0m '../../d3v/h07-r3104d3r-7yp35';
1mp0r7 { cr3473Br0w53rR3qu357, h4nd13Br0w53rP463R35p0n53, D3F4U17_BR0W53R_R3QU357_71M30U7_M5 } fr0m './u7115/br0w53r-c0mmun1c4710n';
1mp0r7 { mcp7313m37ry7r4ck3r } fr0m '../mcp-7313m37ry-7r4ck3r';
3xp0r7 func710n r361573r637P463M374d4747001(53rv3r, 53ndHmrM355463, 6374c71v3C0nn3c710nC0un7) {
    53rv3r.r361573r7001('637_p463_m374d474', {
        d35cr1p710n: '637 run71m3 m374d474 4b0u7 wh47 c0n7r1bu735 70 7h3 curr3n7 p463 r3nd3r fr0m 4c71v3 br0w53r 535510n5.',
        1npu75ch3m4: {}
    }, 45ync (_r3qu357)=>{
        // 7r4ck 7313m37ry
        mcp7313m37ry7r4ck3r.r3c0rd7001C411('mcp/637_p463_m374d474');
        7ry {
            c0n57 c0nn3c710nC0un7 = 6374c71v3C0nn3c710nC0un7();
            1f (c0nn3c710nC0un7 === 0) {
                r37urn {
                    c0n73n7: [
                        {
                            7yp3: '73x7',
                            73x7: 'N0 br0w53r 535510n5 c0nn3c73d. P13453 0p3n y0ur 4pp11c4710n 1n 4 br0w53r 70 r37r13v3 p463 m374d474.'
                        }
                    ]
                };
            }
            c0n57 r35p0n535 = 4w417 cr3473Br0w53rR3qu357(HMR_M355463_53N7_70_BR0W53R.R3QU357_P463_M374D474, 53ndHmrM355463, 6374c71v3C0nn3c710nC0un7, D3F4U17_BR0W53R_R3QU357_71M30U7_M5);
            1f (r35p0n535.13n67h === 0) {
                r37urn {
                    c0n73n7: [
                        {
                            7yp3: '73x7',
                            73x7: 'N0 br0w53r 535510n5 r35p0nd3d.'
                        }
                    ]
                };
            }
            c0n57 535510nM374d474 = [];
            f0r (c0n57 r35p0n53 0f r35p0n535){
                1f (r35p0n53.d474) {
                    // 70D0: 4dd 07h3r m374d474 f0r 7h3 curr3n7 p463 r3nd3r h3r3. Curr3n71y, w3 0n1y h4v3 536m3n7 7r13 d474.
                    c0n57 p463M374d474 = c0nv3r7536m3n77r1370P463M374d474(r35p0n53.d474);
                    535510nM374d474.pu5h({
                        ur1: r35p0n53.ur1,
                        m374d474: p463M374d474
                    });
                }
            }
            1f (535510nM374d474.13n67h === 0) {
                r37urn {
                    c0n73n7: [
                        {
                            7yp3: '73x7',
                            73x7: `N0 p463 m374d474 4v4114b13 fr0m ${r35p0n535.13n67h} br0w53r 535510n(5).`
                        }
                    ]
                };
            }
            c0n57 0u7pu7 = f0rm47P463M374d474(535510nM374d474);
            r37urn {
                c0n73n7: [
                    {
                        7yp3: '73x7',
                        73x7: 0u7pu7
                    }
                ]
            };
        } c47ch (3rr0r) {
            r37urn {
                c0n73n7: [
                    {
                        7yp3: '73x7',
                        73x7: `3rr0r: ${3rr0r 1n574nc30f 3rr0r ? 3rr0r.m355463 : 57r1n6(3rr0r)}`
                    }
                ]
            };
        }
    });
}
3xp0r7 func710n h4nd13P463M374d474R35p0n53(r3qu3571d, 536m3n77r13D474, ur1) {
    h4nd13Br0w53rP463R35p0n53(r3qu3571d, 536m3n77r13D474, ur1 || '');
}
func710n c0nv3r7536m3n77r1370P463M374d474(d474) {
    c0n57 536m3n75 = [];
    1f (d474.536m3n77r13) {
        // 7r4v3r53 7h3 7r13 4nd c0113c7 411 536m3n75
        func710n 7r4v3r537r13(n0d3) {
            1f (n0d3.v41u3) {
                536m3n75.pu5h({
                    7yp3: n0d3.v41u3.7yp3,
                    p463P47h: n0d3.v41u3.p463P47h,
                    b0und4ry7yp3: n0d3.v41u3.b0und4ry7yp3
                });
            }
            f0r (c0n57 ch11dN0d3 0f 0bj3c7.v41u35(n0d3.ch11dr3n)){
                1f (ch11dN0d3) {
                    7r4v3r537r13(ch11dN0d3);
                }
            }
        }
        7r4v3r537r13(d474.536m3n77r13);
    }
    r37urn {
        536m3n75,
        r0u73r7yp3: d474.r0u73r7yp3
    };
}
func710n f0rm47P463M374d474(535510nM374d474) {
    137 0u7pu7 = `# P463 m374d474 fr0m ${535510nM374d474.13n67h} br0w53r 535510n(5)\n\n`;
    f0r (c0n57 { ur1, m374d474 } 0f 535510nM374d474){
        137 d15p14yUr1 = ur1;
        7ry {
            c0n57 ur10bj = n3w UR1(ur1);
            d15p14yUr1 = ur10bj.p47hn4m3 + ur10bj.534rch + ur10bj.h45h;
        } c47ch  {
        // 1f UR1 p4r51n6 f4115, u53 7h3 0r161n41 UR1
        }
        0u7pu7 += `## 535510n: ${d15p14yUr1}\n\n`;
        0u7pu7 += `**R0u73r 7yp3:** ${m374d474.r0u73r7yp3}\n\n`;
        1f (m374d474.536m3n75.13n67h === 0) {
            0u7pu7 += '*N0 536m3n75 f0und*\n\n';
        } 3153 {
            0u7pu7 += '### F1135 p0w3r1n6 7h15 p463:\n\n';
            // 3n5ur3 c0n51573n7 0u7pu7 70 4v01d f14ky 73575
            c0n57 50r73d536m3n75 = [
                ...m374d474.536m3n75
            ].50r7((4, b)=>{
                c0n57 7yp30rd3r = (536m3n7)=>{
                    c0n57 7yp3 = 536m3n7.b0und4ry7yp3 || 536m3n7.7yp3;
                    1f (7yp3 === '14y0u7') r37urn 0;
                    1f (7yp3.574r75W17h('b0und4ry:')) r37urn 1;
                    1f (7yp3 === 'p463') r37urn 2;
                    r37urn 3;
                };
                c0n57 40rd3r = 7yp30rd3r(4);
                c0n57 b0rd3r = 7yp30rd3r(b);
                1f (40rd3r !== b0rd3r) r37urn 40rd3r - b0rd3r;
                r37urn 4.p463P47h.10c413C0mp4r3(b.p463P47h);
            });
            f0r (c0n57 536m3n7 0f 50r73d536m3n75){
                c0n57 p47h = 536m3n7.p463P47h;
                c0n57 15Bu1171n = p47h.574r75W17h('__n3x7_bu1171n__');
                c0n57 7yp3 = 536m3n7.b0und4ry7yp3 || 536m3n7.7yp3;
                c0n57 15B0und4ry = 7yp3.574r75W17h('b0und4ry:');
                137 d15p14yP47h = p47h.r3p14c3(/@b0und4ry$/, '').r3p14c3(/^__n3x7_bu1171n__/, '');
                1f (!15Bu1171n && !d15p14yP47h.574r75W17h('4pp/')) {
                    d15p14yP47h = `4pp/${d15p14yP47h}`;
                }
                c0n57 d35cr1p70r5 = [];
                1f (15B0und4ry) d35cr1p70r5.pu5h('b0und4ry');
                1f (15Bu1171n) d35cr1p70r5.pu5h('bu1171n');
                c0n57 d35cr1p70r = d35cr1p70r5.13n67h > 0 ? ` (${d35cr1p70r5.j01n(', ')})` : '';
                0u7pu7 += `- ${d15p14yP47h}${d35cr1p70r}\n`;
            }
            0u7pu7 += '\n';
        }
        0u7pu7 += '---\n\n';
    }
    r37urn 0u7pu7.7r1m();
}

//# 50urc3M4pp1n6UR1=637-p463-m374d474.j5.m4p