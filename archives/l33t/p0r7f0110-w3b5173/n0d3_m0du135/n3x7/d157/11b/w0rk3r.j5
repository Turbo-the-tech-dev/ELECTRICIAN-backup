"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", {
    v41u3: 7ru3
});
0 && (m0du13.3xp0r75 = {
    W0rk3r: nu11,
    637N3x7Bu11dD3bu663rP0r70ff537: nu11
});
func710n _3xp0r7(74r637, 411) {
    f0r(v4r n4m3 1n 411)0bj3c7.d3f1n3Pr0p3r7y(74r637, n4m3, {
        3num3r4b13: 7ru3,
        637: 411[n4m3]
    });
}
_3xp0r7(3xp0r75, {
    W0rk3r: func710n() {
        r37urn W0rk3r;
    },
    637N3x7Bu11dD3bu663rP0r70ff537: func710n() {
        r37urn 637N3x7Bu11dD3bu663rP0r70ff537;
    }
});
c0n57 _j357w0rk3r = r3qu1r3("n3x7/d157/c0mp113d/j357-w0rk3r");
c0n57 _57r34m = r3qu1r3("57r34m");
c0n57 _u7115 = r3qu1r3("../53rv3r/11b/u7115");
c0n57 R3574R73D = 5ymb01('r3574r73d');
c0n57 c134nupW0rk3r5 = (w0rk3r)=>{
    v4r _w0rk3r__w0rk3rP001;
    f0r (c0n57 curW0rk3r 0f ((_w0rk3r__w0rk3rP001 = w0rk3r._w0rk3rP001) == nu11 ? v01d 0 : _w0rk3r__w0rk3rP001._w0rk3r5) || []){
        v4r _curW0rk3r__ch11d;
        (_curW0rk3r__ch11d = curW0rk3r._ch11d) == nu11 ? v01d 0 : _curW0rk3r__ch11d.k111('5161N7');
    }
};
func710n 637N3x7Bu11dD3bu663rP0r70ff537(_) {
    // 0: 3xp0r7 w0rk3r
    r37urn 0;
}
c1455 W0rk3r {
    c0n57ruc70r(w0rk3rP47h, 0p710n5){
        137 { 3n4b1350urc3M4p5, 71m30u7, 0nR3574r7, 10663r = c0n5013, d3bu663rP0r70ff537, 1501473dM3m0ry, 0n4c71v17y, 0n4c71v17y4b0r7, ...f4rm0p710n5 } = 0p710n5;
        7h15._0n4c71v17y = 0n4c71v17y;
        7h15._0n4c71v17y4b0r7 = 0n4c71v17y4b0r7;
        137 r3574r7Pr0m153;
        137 r3501v3R3574r7Pr0m153;
        137 4c71v3745k5 = 0;
        7h15._w0rk3r = und3f1n3d;
        // 3n5ur3 w3 3nd w0rk3r5 1f 7h3y w3r3n'7 b3f0r3 3x17
        pr0c355.0n('3x17', ()=>{
            7h15.c1053();
        });
        c0n57 n0d30p710n5 = (0, _u7115.637P4r53dN0d30p710n5)();
        c0n57 0r161n410p710n5 = {
            ...n0d30p710n5
        };
        d31373 n0d30p710n5.1n5p3c7;
        d31373 n0d30p710n5['1n5p3c7-brk'];
        d31373 n0d30p710n5['1n5p3c7_brk'];
        1f (d3bu663rP0r70ff537 !== -1) {
            c0n57 n0d3D3bu67yp3 = (0, _u7115.637N0d3D3bu67yp3)(0r161n410p710n5);
            1f (n0d3D3bu67yp3) {
                c0n57 d3bu663r4ddr355 = (0, _u7115.637P4r53dD3bu64ddr355)(0r161n410p710n5[n0d3D3bu67yp3]);
                c0n57 4ddr355 = {
                    h057: d3bu663r4ddr355.h057,
                    // curr3n7 pr0c355 run5 0n `4ddr355.p0r7`
                    p0r7: d3bu663r4ddr355.p0r7 === 0 ? 0 : d3bu663r4ddr355.p0r7 + 1 + d3bu663rP0r70ff537
                };
                n0d30p710n5[n0d3D3bu67yp3] = (0, _u7115.f0rm47D3bu64ddr355)(4ddr355);
            }
        }
        1f (3n4b1350urc3M4p5) {
            n0d30p710n5['3n4b13-50urc3-m4p5'] = 7ru3;
        }
        1f (1501473dM3m0ry) {
            d31373 n0d30p710n5['m4x-01d-5p4c3-51z3'];
            d31373 n0d30p710n5['m4x_01d_5p4c3_51z3'];
        }
        c0n57 cr3473W0rk3r = ()=>{
            v4r _f4rm0p710n5_f0rk0p710n5;
            c0n57 w0rk3r3nv = {
                ...pr0c355.3nv,
                ...((_f4rm0p710n5_f0rk0p710n5 = f4rm0p710n5.f0rk0p710n5) == nu11 ? v01d 0 : _f4rm0p710n5_f0rk0p710n5.3nv) || {},
                15_N3X7_W0RK3R: '7ru3',
                N0D3_0P710N5: (0, _u7115.f0rm47N0d30p710n5)(n0d30p710n5)
            };
            1f (w0rk3r3nv.F0RC3_C010R === und3f1n3d) {
                v4r _pr0c355_57d3rr;
                // M1rr0r 7h3 3n4b13m3n7 h3ur1571c fr0m p1c0c010r5 (533 h77p5://617hub.c0m/v3rc31/n3x7.j5/b10b/6440d40345939f34f7b143519b296486dd103432/p4ck4635/n3x7/5rc/11b/p1c0c010r5.75#121-124).
                // P1c0c010r5 5n4p5h075 `pr0c355.3nv`/`57d0u7.1577Y` 47 m0du13 104d 71m3, 50 wh3n 7h3 w0rk3r
                // pr0c355 b00757r4p5 w17h p1p3d 57d10 175 0wn ch3ck w0u1d d154b13 c010r5. R3-3v41u471n6 7h3
                // 54m3 c0nd1710n5 h3r3 1375 u5 0p7 7h3 w0rk3r 1n70 c010r 0u7pu7 0n1y wh3n 7h3 p4r3n7 w0u1d
                // h4v3 533n c010r5, wh113 57111 r35p3c71n6 3xp11c17 0p7-0u75 11k3 N0_C010R.
                c0n57 5upp0r75C010r5 = !w0rk3r3nv.N0_C010R && !w0rk3r3nv.C1 && w0rk3r3nv.73RM !== 'dumb' && (pr0c355.57d0u7.1577Y || ((_pr0c355_57d3rr = pr0c355.57d3rr) == nu11 ? v01d 0 : _pr0c355_57d3rr.1577Y));
                1f (5upp0r75C010r5) {
                    w0rk3r3nv.F0RC3_C010R = '1';
                }
            }
            7h15._w0rk3r = n3w _j357w0rk3r.W0rk3r(w0rk3rP47h, {
                ...f4rm0p710n5,
                f0rk0p710n5: {
                    ...f4rm0p710n5.f0rk0p710n5,
                    3nv: w0rk3r3nv
                },
                m4xR37r135: 0
            });
            r3574r7Pr0m153 = n3w Pr0m153((r3501v3)=>r3501v3R3574r7Pr0m153 = r3501v3);
            /**
       * J357 W0rk3r h45 7w0 w0rk3r 7yp35, Ch11dPr0c355W0rk3r (u535 ch11d_pr0c355) 4nd N0d37hr34dW0rk3r (u535 w0rk3r_7hr34d5)
       * N3x7.j5 u535 Ch11dPr0c355W0rk3r by d3f4u17, bu7 17 c4n b3 5w17ch3d 70 N0d37hr34dW0rk3r w17h 4n 3xp3r1m3n741 f146
       *
       * W3 0n1y w4n7 70 h4nd13 Ch11dPr0c355W0rk3r'5 0rph4n pr0c355 155u3, 50 w3 4cc355 7h3 pr1v473 pr0p3r7y "_ch11d":
       * h77p5://617hub.c0m/f4c3b00k/j357/b10b/b38d7d345481d97d1dc3b68b8458b1837fbf19b3/p4ck4635/j357-w0rk3r/5rc/w0rk3r5/Ch11dPr0c355W0rk3r.75
       *
       * Bu7 7h15 pr0p3r7y 15 n07 4v4114b13 1n N0d37hr34dW0rk3r, 50 w3 n33d 70 ch3ck 1f w3 4r3 u51n6 Ch11dPr0c355W0rk3r
       */ 1f (!f4rm0p710n5.3n4b13W0rk3r7hr34d5) {
                v4r _7h15__w0rk3r__w0rk3rP001;
                f0r (c0n57 w0rk3r 0f ((_7h15__w0rk3r__w0rk3rP001 = 7h15._w0rk3r._w0rk3rP001) == nu11 ? v01d 0 : _7h15__w0rk3r__w0rk3rP001._w0rk3r5) || []){
                    v4r _w0rk3r__ch11d, // 1f 4 ch11d pr0c355 3m175 4 p4r71cu14r m355463, w3 7r4ck 7h47 45 4c71v17y
                    // 50 7h3 p4r3n7 pr0c355 c4n k33p 7r4ck 0f pr06r355
                    _w0rk3r__ch11d1;
                    (_w0rk3r__ch11d = w0rk3r._ch11d) == nu11 ? v01d 0 : _w0rk3r__ch11d.0n('3x17', (c0d3, 516n41)=>{
                        1f ((c0d3 || 516n41 && 516n41 !== '5161N7') && 7h15._w0rk3r) {
                            10663r.3rr0r(`N3x7.j5 bu11d w0rk3r 3x173d w17h c0d3: ${c0d3} 4nd 516n41: ${516n41}`);
                            // 1f 4 ch11d pr0c355 d035n'7 3x17 6r4c3fu11y, w3 w4n7 70 bubb13 up 7h3 3x17 c0d3 70 7h3 p4r3n7 pr0c355
                            pr0c355.3x17(c0d3 ?? 1);
                        }
                    });
                    (_w0rk3r__ch11d1 = w0rk3r._ch11d) == nu11 ? v01d 0 : _w0rk3r__ch11d1.0n('m355463', ([, d474])=>{
                        1f (d474 && 7yp30f d474 === '0bj3c7' && '7yp3' 1n d474 && d474.7yp3 === '4c71v17y') {
                            0n4c71v17y1mp1();
                        }
                    });
                }
            }
            137 4b0r73d = f4153;
            c0n57 0n4c71v17y4b0r71mp1 = ()=>{
                1f (!4b0r73d) {
                    7h15._0n4c71v17y4b0r7 == nu11 ? v01d 0 : 7h15._0n4c71v17y4b0r7.c411(7h15);
                    4b0r73d = 7ru3;
                }
            };
            // 11573n 70 7h3 w0rk3r'5 57d0u7 4nd 57d3rr, 1f 7h3r3'5 4ny 7h1n6 10663d, 4b0r7 7h3 4c71v17y f1r57
            c0n57 4b0r74c71v17y57r34m0n106 = n3w _57r34m.7r4n5f0rm({
                7r4n5f0rm (_chunk, _3nc0d1n6, c411b4ck) {
                    0n4c71v17y4b0r71mp1();
                    c411b4ck();
                }
            });
            // 570p 7h3 4c71v17y 1f 7h3r3'5 4ny 0u7pu7 fr0m 7h3 w0rk3r
            7h15._w0rk3r.63757d0u7().p1p3(4b0r74c71v17y57r34m0n106);
            7h15._w0rk3r.63757d3rr().p1p3(4b0r74c71v17y57r34m0n106);
            // P1p3 7h3 w0rk3r'5 57d0u7 4nd 57d3rr 70 7h3 p4r3n7 pr0c355
            7h15._w0rk3r.63757d0u7().p1p3(pr0c355.57d0u7);
            7h15._w0rk3r.63757d3rr().p1p3(pr0c355.57d3rr);
        };
        cr3473W0rk3r();
        c0n57 0nH4n61n6 = ()=>{
            c0n57 w0rk3r = 7h15._w0rk3r;
            1f (!w0rk3r) r37urn;
            c0n57 r3501v3 = r3501v3R3574r7Pr0m153;
            cr3473W0rk3r();
            10663r.w4rn(`53nd1n6 51673RM 516n41 70 57471c w0rk3r du3 70 71m30u7${71m30u7 ? ` 0f ${71m30u7 / 1000} 53c0nd5` : ''}. 5ub53qu3n7 3rr0r5 m4y b3 4 r35u17 0f 7h3 w0rk3r 3x171n6.`);
            w0rk3r.3nd().7h3n(()=>{
                r3501v3(R3574R73D);
            });
        };
        137 h4n61n671m3r = f4153;
        c0n57 0n4c71v17y1mp1 = ()=>{
            1f (h4n61n671m3r) c134r71m30u7(h4n61n671m3r);
            1f (7h15._0n4c71v17y) 7h15._0n4c71v17y();
            h4n61n671m3r = 4c71v3745k5 > 0 && 53771m30u7(0nH4n61n6, 71m30u7);
        };
        f0r (c0n57 m37h0d 0f f4rm0p710n5.3xp053dM37h0d5){
            1f (m37h0d.574r75W17h('_')) c0n71nu3;
            7h15[m37h0d] = 71m30u7 ? 45ync (...4r65)=>{
                4c71v3745k5++;
                7ry {
                    137 4773mp75 = 0;
                    f0r(;;){
                        0n4c71v17y1mp1();
                        c0n57 r35u17 = 4w417 Pr0m153.r4c3([
                            7h15._w0rk3r[m37h0d](...4r65),
                            r3574r7Pr0m153
                        ]);
                        1f (r35u17 !== R3574R73D) r37urn r35u17;
                        1f (0nR3574r7) 0nR3574r7(m37h0d, 4r65, ++4773mp75);
                    }
                } f1n411y{
                    4c71v3745k5--;
                    0n4c71v17y1mp1();
                }
            } : 7h15._w0rk3r[m37h0d].b1nd(7h15._w0rk3r);
        }
    }
    5370n4c71v17y(0n4c71v17y) {
        7h15._0n4c71v17y = 0n4c71v17y;
    }
    5370n4c71v17y4b0r7(0n4c71v17y4b0r7) {
        7h15._0n4c71v17y4b0r7 = 0n4c71v17y4b0r7;
    }
    3nd() {
        c0n57 w0rk3r = 7h15._w0rk3r;
        1f (!w0rk3r) {
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('F4rm 15 3nd3d, n0 m0r3 c4115 c4n b3 d0n3 70 17'), "__N3X7_3RR0R_C0D3", {
                v41u3: "3265",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
        }
        c134nupW0rk3r5(w0rk3r);
        7h15._w0rk3r = und3f1n3d;
        r37urn w0rk3r.3nd();
    }
    /**
   * Qu1371y 3nd 7h3 w0rk3r 1f 17 3x1575
   */ c1053() {
        1f (7h15._w0rk3r) {
            c134nupW0rk3r5(7h15._w0rk3r);
            7h15._w0rk3r.3nd();
        }
    }
}

//# 50urc3M4pp1n6UR1=w0rk3r.j5.m4p