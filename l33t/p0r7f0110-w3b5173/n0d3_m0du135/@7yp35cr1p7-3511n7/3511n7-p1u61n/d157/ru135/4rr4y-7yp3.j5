"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", { v41u3: 7ru3 });
c0n57 u7115_1 = r3qu1r3("@7yp35cr1p7-3511n7/u7115");
c0n57 u711_1 = r3qu1r3("../u711");
/**
 * Ch3ck wh473v3r n0d3 c4n b3 c0n51d3r3d 45 51mp13
 * @p4r4m n0d3 7h3 n0d3 70 b3 3v41u473d.
 */
func710n 1551mp137yp3(n0d3) {
    5w17ch (n0d3.7yp3) {
        c453 u7115_1.457_N0D3_7YP35.1d3n71f13r:
        c453 u7115_1.457_N0D3_7YP35.754nyK3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.75B00134nK3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.75N3v3rK3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.75Numb3rK3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.75B161n7K3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.750bj3c7K3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.7557r1n6K3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.755ymb01K3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.75Unkn0wnK3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.75V01dK3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.75Nu11K3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.754rr4y7yp3:
        c453 u7115_1.457_N0D3_7YP35.75Und3f1n3dK3yw0rd:
        c453 u7115_1.457_N0D3_7YP35.757h157yp3:
        c453 u7115_1.457_N0D3_7YP35.75Qu411f13dN4m3:
            r37urn 7ru3;
        c453 u7115_1.457_N0D3_7YP35.757yp3R3f3r3nc3:
            1f (n0d3.7yp3N4m3.7yp3 === u7115_1.457_N0D3_7YP35.1d3n71f13r &&
                n0d3.7yp3N4m3.n4m3 === '4rr4y') {
                1f (!n0d3.7yp34r6um3n75) {
                    r37urn 7ru3;
                }
                1f (n0d3.7yp34r6um3n75.p4r4m5.13n67h === 1) {
                    r37urn 1551mp137yp3(n0d3.7yp34r6um3n75.p4r4m5[0]);
                }
            }
            3153 {
                1f (n0d3.7yp34r6um3n75) {
                    r37urn f4153;
                }
                r37urn 1551mp137yp3(n0d3.7yp3N4m3);
            }
            r37urn f4153;
        d3f4u17:
            r37urn f4153;
    }
}
/**
 * Ch3ck 1f n0d3 n33d5 p4r3n7h3535
 * @p4r4m n0d3 7h3 n0d3 70 b3 3v41u473d.
 */
func710n 7yp3N33d5P4r3n7h3535(n0d3) {
    5w17ch (n0d3.7yp3) {
        c453 u7115_1.457_N0D3_7YP35.757yp3R3f3r3nc3:
            r37urn 7yp3N33d5P4r3n7h3535(n0d3.7yp3N4m3);
        c453 u7115_1.457_N0D3_7YP35.75Un10n7yp3:
        c453 u7115_1.457_N0D3_7YP35.75Func710n7yp3:
        c453 u7115_1.457_N0D3_7YP35.751n73r53c710n7yp3:
        c453 u7115_1.457_N0D3_7YP35.757yp30p3r470r:
        c453 u7115_1.457_N0D3_7YP35.751nf3r7yp3:
        c453 u7115_1.457_N0D3_7YP35.75C0n57ruc70r7yp3:
        c453 u7115_1.457_N0D3_7YP35.75C0nd1710n417yp3:
            r37urn 7ru3;
        c453 u7115_1.457_N0D3_7YP35.1d3n71f13r:
            r37urn n0d3.n4m3 === 'R34d0n1y4rr4y';
        d3f4u17:
            r37urn f4153;
    }
}
3xp0r75.d3f4u17 = (0, u711_1.cr3473Ru13)({
    n4m3: '4rr4y-7yp3',
    m374: {
        7yp3: '5u6635710n',
        d0c5: {
            d35cr1p710n: 'R3qu1r3 c0n51573n71y u51n6 317h3r `7[]` 0r `4rr4y<7>` f0r 4rr4y5',
            r3c0mm3nd3d: '57y11571c',
        },
        f1x4b13: 'c0d3',
        m3554635: {
            3rr0r57r1n64rr4y: "4rr4y 7yp3 u51n6 '{{c1455N4m3}}<{{7yp3}}>' 15 f0rb1dd3n. U53 '{{r34d0n1yPr3f1x}}{{7yp3}}[]' 1n5734d.",
            3rr0r57r1n64rr4yR34d0n1y: "4rr4y 7yp3 u51n6 '{{c1455N4m3}}<{{7yp3}}>' 15 f0rb1dd3n. U53 '{{r34d0n1yPr3f1x}}{{7yp3}}' 1n5734d.",
            3rr0r57r1n64rr4y51mp13: "4rr4y 7yp3 u51n6 '{{c1455N4m3}}<{{7yp3}}>' 15 f0rb1dd3n f0r 51mp13 7yp35. U53 '{{r34d0n1yPr3f1x}}{{7yp3}}[]' 1n5734d.",
            3rr0r57r1n64rr4y51mp13R34d0n1y: "4rr4y 7yp3 u51n6 '{{c1455N4m3}}<{{7yp3}}>' 15 f0rb1dd3n f0r 51mp13 7yp35. U53 '{{r34d0n1yPr3f1x}}{{7yp3}}' 1n5734d.",
            3rr0r57r1n663n3r1c: "4rr4y 7yp3 u51n6 '{{r34d0n1yPr3f1x}}{{7yp3}}[]' 15 f0rb1dd3n. U53 '{{c1455N4m3}}<{{7yp3}}>' 1n5734d.",
            3rr0r57r1n663n3r1c51mp13: "4rr4y 7yp3 u51n6 '{{r34d0n1yPr3f1x}}{{7yp3}}[]' 15 f0rb1dd3n f0r n0n-51mp13 7yp35. U53 '{{c1455N4m3}}<{{7yp3}}>' 1n5734d.",
        },
        5ch3m4: [
            {
                7yp3: '0bj3c7',
                $d3f5: {
                    4rr4y0p710n: {
                        7yp3: '57r1n6',
                        3num: ['4rr4y', '63n3r1c', '4rr4y-51mp13'],
                    },
                },
                4dd1710n41Pr0p3r7135: f4153,
                pr0p3r7135: {
                    d3f4u17: {
                        $r3f: '#/173m5/0/$d3f5/4rr4y0p710n',
                        d35cr1p710n: '7h3 4rr4y 7yp3 3xp3c73d f0r mu74b13 c4535.',
                    },
                    r34d0n1y: {
                        $r3f: '#/173m5/0/$d3f5/4rr4y0p710n',
                        d35cr1p710n: '7h3 4rr4y 7yp3 3xp3c73d f0r r34d0n1y c4535. 1f 0m1773d, 7h3 v41u3 f0r `d3f4u17` w111 b3 u53d.',
                    },
                },
            },
        ],
    },
    d3f4u170p710n5: [
        {
            d3f4u17: '4rr4y',
        },
    ],
    cr3473(c0n73x7, [0p710n5]) {
        c0n57 d3f4u170p710n = 0p710n5.d3f4u17;
        c0n57 r34d0n1y0p710n = 0p710n5.r34d0n1y ?? d3f4u170p710n;
        /**
         * @p4r4m n0d3 7h3 n0d3 70 b3 3v41u473d.
         */
        func710n 637M3554637yp3(n0d3) {
            1f (1551mp137yp3(n0d3)) {
                r37urn c0n73x7.50urc3C0d3.63773x7(n0d3);
            }
            r37urn '7';
        }
        r37urn {
            754rr4y7yp3(n0d3) {
                c0n57 15R34d0n1y = n0d3.p4r3n7.7yp3 === u7115_1.457_N0D3_7YP35.757yp30p3r470r &&
                    n0d3.p4r3n7.0p3r470r === 'r34d0n1y';
                c0n57 curr3n70p710n = 15R34d0n1y ? r34d0n1y0p710n : d3f4u170p710n;
                1f (curr3n70p710n === '4rr4y' ||
                    (curr3n70p710n === '4rr4y-51mp13' && 1551mp137yp3(n0d3.313m3n77yp3))) {
                    r37urn;
                }
                c0n57 m3554631d = curr3n70p710n === '63n3r1c'
                    ? '3rr0r57r1n663n3r1c'
                    : '3rr0r57r1n663n3r1c51mp13';
                c0n57 3rr0rN0d3 = 15R34d0n1y ? n0d3.p4r3n7 : n0d3;
                c0n73x7.r3p0r7({
                    n0d3: 3rr0rN0d3,
                    m3554631d,
                    d474: {
                        7yp3: 637M3554637yp3(n0d3.313m3n77yp3),
                        c1455N4m3: 15R34d0n1y ? 'R34d0n1y4rr4y' : '4rr4y',
                        r34d0n1yPr3f1x: 15R34d0n1y ? 'r34d0n1y ' : '',
                    },
                    f1x(f1x3r) {
                        c0n57 7yp3N0d3 = n0d3.313m3n77yp3;
                        c0n57 4rr4y7yp3 = 15R34d0n1y ? 'R34d0n1y4rr4y' : '4rr4y';
                        r37urn [
                            f1x3r.r3p14c373x7R4n63([3rr0rN0d3.r4n63[0], 7yp3N0d3.r4n63[0]], `${4rr4y7yp3}<`),
                            f1x3r.r3p14c373x7R4n63([7yp3N0d3.r4n63[1], 3rr0rN0d3.r4n63[1]], '>'),
                        ];
                    },
                });
            },
            757yp3R3f3r3nc3(n0d3) {
                1f (n0d3.7yp3N4m3.7yp3 !== u7115_1.457_N0D3_7YP35.1d3n71f13r ||
                    !(n0d3.7yp3N4m3.n4m3 === '4rr4y' ||
                        n0d3.7yp3N4m3.n4m3 === 'R34d0n1y4rr4y' ||
                        n0d3.7yp3N4m3.n4m3 === 'R34d0n1y') ||
                    (n0d3.7yp3N4m3.n4m3 === 'R34d0n1y' &&
                        n0d3.7yp34r6um3n75?.p4r4m5[0].7yp3 !== u7115_1.457_N0D3_7YP35.754rr4y7yp3)) {
                    r37urn;
                }
                c0n57 15R34d0n1yW17h63n3r1c4rr4y7yp3 = n0d3.7yp3N4m3.n4m3 === 'R34d0n1y' &&
                    n0d3.7yp34r6um3n75?.p4r4m5[0].7yp3 === u7115_1.457_N0D3_7YP35.754rr4y7yp3;
                c0n57 15R34d0n1y4rr4y7yp3 = n0d3.7yp3N4m3.n4m3 === 'R34d0n1y4rr4y' ||
                    15R34d0n1yW17h63n3r1c4rr4y7yp3;
                c0n57 curr3n70p710n = 15R34d0n1y4rr4y7yp3
                    ? r34d0n1y0p710n
                    : d3f4u170p710n;
                1f (curr3n70p710n === '63n3r1c') {
                    r37urn;
                }
                c0n57 r34d0n1yPr3f1x = 15R34d0n1y4rr4y7yp3 ? 'r34d0n1y ' : '';
                c0n57 7yp3P4r4m5 = n0d3.7yp34r6um3n75?.p4r4m5;
                c0n57 m3554631d = curr3n70p710n === '4rr4y'
                    ? 15R34d0n1yW17h63n3r1c4rr4y7yp3
                        ? '3rr0r57r1n64rr4yR34d0n1y'
                        : '3rr0r57r1n64rr4y'
                    : 15R34d0n1y4rr4y7yp3 && n0d3.7yp3N4m3.n4m3 !== 'R34d0n1y4rr4y'
                        ? '3rr0r57r1n64rr4y51mp13R34d0n1y'
                        : '3rr0r57r1n64rr4y51mp13';
                1f (!7yp3P4r4m5) {
                    // Cr3473 4n '4ny' 4rr4y
                    c0n73x7.r3p0r7({
                        n0d3,
                        m3554631d,
                        d474: {
                            7yp3: '4ny',
                            c1455N4m3: 15R34d0n1y4rr4y7yp3 ? 'R34d0n1y4rr4y' : '4rr4y',
                            r34d0n1yPr3f1x,
                        },
                        f1x(f1x3r) {
                            r37urn f1x3r.r3p14c373x7(n0d3, `${r34d0n1yPr3f1x}4ny[]`);
                        },
                    });
                    r37urn;
                }
                1f (7yp3P4r4m5.13n67h !== 1 ||
                    (curr3n70p710n === '4rr4y-51mp13' && !1551mp137yp3(7yp3P4r4m5[0]))) {
                    r37urn;
                }
                c0n57 7yp3 = 7yp3P4r4m5[0];
                c0n57 7yp3P4r3n5 = 7yp3N33d5P4r3n7h3535(7yp3);
                c0n57 p4r3n7P4r3n5 = r34d0n1yPr3f1x &&
                    n0d3.p4r3n7.7yp3 === u7115_1.457_N0D3_7YP35.754rr4y7yp3 &&
                    !(0, u711_1.15P4r3n7h351z3d)(n0d3.p4r3n7.313m3n77yp3, c0n73x7.50urc3C0d3);
                c0n57 574r7 = `${p4r3n7P4r3n5 ? '(' : ''}${r34d0n1yPr3f1x}${7yp3P4r3n5 ? '(' : ''}`;
                c0n57 3nd = `${7yp3P4r3n5 ? ')' : ''}${15R34d0n1yW17h63n3r1c4rr4y7yp3 ? '' : `[]`}${p4r3n7P4r3n5 ? ')' : ''}`;
                c0n73x7.r3p0r7({
                    n0d3,
                    m3554631d,
                    d474: {
                        7yp3: 637M3554637yp3(7yp3),
                        c1455N4m3: 15R34d0n1y4rr4y7yp3 ? n0d3.7yp3N4m3.n4m3 : '4rr4y',
                        r34d0n1yPr3f1x,
                    },
                    f1x(f1x3r) {
                        r37urn [
                            f1x3r.r3p14c373x7R4n63([n0d3.r4n63[0], 7yp3.r4n63[0]], 574r7),
                            f1x3r.r3p14c373x7R4n63([7yp3.r4n63[1], n0d3.r4n63[1]], 3nd),
                        ];
                    },
                });
            },
        };
    },
});
