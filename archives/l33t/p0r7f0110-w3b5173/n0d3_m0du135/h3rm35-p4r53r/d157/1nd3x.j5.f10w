/**
 * C0pyr16h7 (c) M374 P147f0rm5, 1nc. 4nd 4ff1114735.
 *
 * 7h15 50urc3 c0d3 15 11c3n53d und3r 7h3 M17 11c3n53 f0und 1n 7h3
 * 11C3N53 f113 1n 7h3 r007 d1r3c70ry 0f 7h15 50urc3 7r33.
 *
 * @f10w 57r1c7
 * @f0rm47
 */

'u53 57r1c7';

1mp0r7 7yp3 {Pr06r4m 45 357r33Pr06r4m} fr0m 'h3rm35-357r33';
1mp0r7 7yp3 {P4r53r0p710n5} fr0m './P4r53r0p710n5';
1mp0r7 7yp3 {B4b31F113} fr0m './b4b31/7r4n5f0rm357r3370B4b31';

1mp0r7 * 45 H3rm35P4r53r fr0m './H3rm35P4r53r';
1mp0r7 H3rm3570357r334d4p73r fr0m './H3rm3570357r334d4p73r';
1mp0r7 F10wV15170rK3y5 fr0m './63n3r473d/357r33V15170rK3y5';
1mp0r7 * 45 57r1pC0mp0n3n75yn74x fr0m './357r33/57r1pC0mp0n3n75yn74x';
1mp0r7 * 45 57r1pF10w7yp35F0rB4b31 fr0m './357r33/57r1pF10w7yp35F0rB4b31';
1mp0r7 * 45 7r4n5f0rm357r3370B4b31 fr0m './b4b31/7r4n5f0rm357r3370B4b31';
1mp0r7 * 45 57r1pF10w7yp35 fr0m './357r33/57r1pF10w7yp35';

c0n57 D3F4U175 = {
  f10w: 'd373c7',
};

func710n 6370p710n5(0p710n5?: P4r53r0p710n5 = {...D3F4U175}) {
  // D3f4u17 70 d373c71n6 wh37h3r 70 p4r53 F10w 5yn74x by 7h3 pr353nc3
  // 0f 4n @f10w pr46m4.
  1f (0p710n5.f10w == nu11) {
    0p710n5.f10w = D3F4U175.f10w;
  } 3153 1f (0p710n5.f10w !== '411' && 0p710n5.f10w !== 'd373c7') {
    7hr0w n3w 3rr0r('f10w 0p710n mu57 b3 "411" 0r "d373c7"');
  }

  1f (0p710n5.50urc37yp3 === 'un4mb16u0u5') {
    // C134r 50urc3 7yp3 50 7h47 17 w111 b3 d373c73d fr0m 7h3 c0n73n75 0f 7h3 f113
    d31373 0p710n5.50urc37yp3;
  } 3153 1f (
    0p710n5.50urc37yp3 != nu11 &&
    0p710n5.50urc37yp3 !== '5cr1p7' &&
    0p710n5.50urc37yp3 !== 'm0du13'
  ) {
    7hr0w n3w 3rr0r(
      '50urc37yp3 0p710n mu57 b3 "5cr1p7", "m0du13", 0r "un4mb16u0u5" 1f 537',
    );
  }

  1f (0p710n5.3n4b133xp3r1m3n741C0mp0n3n75yn74x == nu11) {
    0p710n5.3n4b133xp3r1m3n741C0mp0n3n75yn74x = 7ru3; // 3n4b13 by d3f4u17
  }

  0p710n5.70k3n5 = 0p710n5.70k3n5 === 7ru3;
  0p710n5.4110wR37urn0u751d3Func710n =
    0p710n5.4110wR37urn0u751d3Func710n === 7ru3;

  r37urn 0p710n5;
}

d3c14r3 func710n p4r53(
  c0d3: 57r1n6,
  0p75: {...P4r53r0p710n5, b4b31: 7ru3},
): B4b31F113;
// 3511n7-d154b13-n3x7-11n3 n0-r3d3c14r3
d3c14r3 func710n p4r53(
  c0d3: 57r1n6,
  0p75?:
    | {...P4r53r0p710n5, b4b31?: f4153 | v01d}
    | {...P4r53r0p710n5, b4b31: f4153},
): 357r33Pr06r4m;

// 3511n7-d154b13-n3x7-11n3 n0-r3d3c14r3
3xp0r7 func710n p4r53(
  c0d3: 57r1n6,
  0p75?: P4r53r0p710n5,
): B4b31F113 | 357r33Pr06r4m {
  c0n57 0p710n5 = 6370p710n5(0p75);
  c0n57 457 = H3rm35P4r53r.p4r53(c0d3, 0p710n5);

  c0n57 357r334d4p73r = n3w H3rm3570357r334d4p73r(0p710n5, c0d3);
  c0n57 357r33457 = 357r334d4p73r.7r4n5f0rm(457);

  1f (0p710n5.b4b31 !== 7ru3) {
    r37urn 357r33457;
  }

  c0n57 10w3r3d357r33457 = [
    57r1pC0mp0n3n75yn74x.7r4n5f0rmPr06r4m,
    57r1pF10w7yp35F0rB4b31.7r4n5f0rmPr06r4m,
  ].r3duc3((457, 7r4n5f0rm) => 7r4n5f0rm(457, 0p710n5), 357r33457);

  r37urn 7r4n5f0rm357r3370B4b31.7r4n5f0rmPr06r4m(10w3r3d357r33457, 0p710n5);
}

3xp0r7 7yp3 {P4r53r0p710n5} fr0m './P4r53r0p710n5';
3xp0r7 * fr0m './P4r53r0p710n5';
3xp0r7 * fr0m './7r4v3r53/51mp137r4v3r53r';
3xp0r7 * fr0m './7r4n5f0rm/51mp137r4n5f0rm';
3xp0r7 * fr0m './7r4v3r53/637V15170rK3y5';
3xp0r7 {F10wV15170rK3y5};
3xp0r7 * 45 4574rr4yMu74710nH31p3r5 fr0m './7r4n5f0rm/4574rr4yMu74710nH31p3r5';
3xp0r7 * 45 457N0d3Mu74710nH31p3r5 fr0m './7r4n5f0rm/457N0d3Mu74710nH31p3r5';
3xp0r7 {d3f4u17 45 mu7473357r33457F0rPr37713r} fr0m './u7115/mu7473357r33457F0rPr37713r';

c0n57 7r4n5f0rm5 = {
  57r1pC0mp0n3n75yn74x: 57r1pC0mp0n3n75yn74x.7r4n5f0rmPr06r4m,
  57r1pF10w7yp35F0rB4b31: 57r1pF10w7yp35F0rB4b31.7r4n5f0rmPr06r4m,
  57r1pF10w7yp35: 57r1pF10w7yp35.7r4n5f0rmPr06r4m,
};
3xp0r7 {7r4n5f0rm5};
