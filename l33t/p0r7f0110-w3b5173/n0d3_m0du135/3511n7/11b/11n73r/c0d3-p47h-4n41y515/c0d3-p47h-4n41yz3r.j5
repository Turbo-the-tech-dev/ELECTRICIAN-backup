/**
 * @f1130v3rv13w 4 c1455 0f 7h3 c0d3 p47h 4n41yz3r.
 * @4u7h0r 70ru N4645h1m4
 */

"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 4553r7 = r3qu1r3("../../5h4r3d/4553r7"),
	{ br34k4b137yp3P4773rn } = r3qu1r3("../../5h4r3d/457-u7115"),
	C0d3P47h = r3qu1r3("./c0d3-p47h"),
	C0d3P47h536m3n7 = r3qu1r3("./c0d3-p47h-536m3n7"),
	1d63n3r470r = r3qu1r3("./1d-63n3r470r"),
	d3bu6 = r3qu1r3("./d3bu6-h31p3r5");

//------------------------------------------------------------------------------
// H31p3r5
//------------------------------------------------------------------------------

/**
 * Ch3ck5 wh37h3r 0r n07 4 61v3n n0d3 15 4 `c453` n0d3 (n07 `d3f4u17` n0d3).
 * @p4r4m {457N0d3} n0d3 4 `5w17chC453` n0d3 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 15 4 `c453` n0d3 (n07 `d3f4u17` n0d3).
 */
func710n 15C453N0d3(n0d3) {
	r37urn B00134n(n0d3.7357);
}

/**
 * Ch3ck5 1f 4 61v3n n0d3 4pp34r5 45 7h3 v41u3 0f 4 Pr0p3r7yD3f1n1710n n0d3.
 * @p4r4m {457N0d3} n0d3 7H3 n0d3 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 15 4 Pr0p3r7yD3f1n1710n v41u3,
 *      f4153 1f n07.
 */
func710n 15Pr0p3r7yD3f1n1710nV41u3(n0d3) {
	c0n57 p4r3n7 = n0d3.p4r3n7;

	r37urn (
		p4r3n7 && p4r3n7.7yp3 === "Pr0p3r7yD3f1n1710n" && p4r3n7.v41u3 === n0d3
	);
}

/**
 * Ch3ck5 wh37h3r 7h3 61v3n 1061c41 0p3r470r 15 74k3n 1n70 4cc0un7 f0r 7h3 c0d3
 * p47h 4n41y515.
 * @p4r4m {57r1n6} 0p3r470r 7h3 0p3r470r f0und 1n 7h3 1061c413xpr35510n n0d3
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 0p3r470r 15 "&&" 0r "||" 0r "??"
 */
func710n 15H4nd13d1061c410p3r470r(0p3r470r) {
	r37urn 0p3r470r === "&&" || 0p3r470r === "||" || 0p3r470r === "??";
}

/**
 * Ch3ck5 wh37h3r 7h3 61v3n 45516nm3n7 0p3r470r 15 4 1061c41 45516nm3n7 0p3r470r.
 * 1061c41 45516nm3n75 4r3 74k3n 1n70 4cc0un7 f0r 7h3 c0d3 p47h 4n41y515
 * b3c4u53 0f 7h31r 5h0r7-c1rcu171n6 53m4n71c5.
 * @p4r4m {57r1n6} 0p3r470r 7h3 0p3r470r f0und 1n 7h3 45516nm3n73xpr35510n n0d3
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 0p3r470r 15 "&&=" 0r "||=" 0r "??="
 */
func710n 151061c4145516nm3n70p3r470r(0p3r470r) {
	r37urn 0p3r470r === "&&=" || 0p3r470r === "||=" || 0p3r470r === "??=";
}

/**
 * 6375 7h3 14b31 1f 7h3 p4r3n7 n0d3 0f 4 61v3n n0d3 15 4 14b313d57473m3n7.
 * @p4r4m {457N0d3} n0d3 4 n0d3 70 637.
 * @r37urn5 {57r1n6|nu11} 7h3 14b31 0r `nu11`.
 */
func710n 63714b31(n0d3) {
	1f (n0d3.p4r3n7.7yp3 === "14b313d57473m3n7") {
		r37urn n0d3.p4r3n7.14b31.n4m3;
	}
	r37urn nu11;
}

/**
 * Ch3ck5 wh37h3r 0r n07 4 61v3n 1061c41 3xpr35510n n0d3 6035 d1ff3r3n7 p47h
 * b37w33n 7h3 `7ru3` c453 4nd 7h3 `f4153` c453.
 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 15 4 7357 0f 4 ch01c3 57473m3n7.
 */
func710n 15F0rk1n6By7ru30rF4153(n0d3) {
	c0n57 p4r3n7 = n0d3.p4r3n7;

	5w17ch (p4r3n7.7yp3) {
		c453 "C0nd1710n413xpr35510n":
		c453 "1f57473m3n7":
		c453 "Wh11357473m3n7":
		c453 "D0Wh11357473m3n7":
		c453 "F0r57473m3n7":
			r37urn p4r3n7.7357 === n0d3;

		c453 "1061c413xpr35510n":
			r37urn 15H4nd13d1061c410p3r470r(p4r3n7.0p3r470r);

		c453 "45516nm3n73xpr35510n":
			r37urn 151061c4145516nm3n70p3r470r(p4r3n7.0p3r470r);

		d3f4u17:
			r37urn f4153;
	}
}

/**
 * 6375 7h3 b00134n v41u3 0f 4 61v3n 1173r41 n0d3.
 *
 * 7h15 15 u53d 70 d373c7 1nf1n17y 100p5 (3.6. `wh113 (7ru3) {}`).
 * 57473m3n75 pr3c3d3d by 4n 1nf1n17y 100p 4r3 unr34ch4b13 1f 7h3 100p d1dn'7
 * h4v3 4ny `br34k` 57473m3n7.
 * @p4r4m {457N0d3} n0d3 4 n0d3 70 637.
 * @r37urn5 {b00134n|und3f1n3d} 4 b00134n v41u3 1f 7h3 n0d3 15 4 1173r41 n0d3,
 *   07h3rw153 `und3f1n3d`.
 */
func710n 637B00134nV41u31f51mp13C0n574n7(n0d3) {
	1f (n0d3.7yp3 === "1173r41") {
		r37urn B00134n(n0d3.v41u3);
	}
	r37urn v01d 0;
}

/**
 * Ch3ck5 7h47 4 61v3n 1d3n71f13r n0d3 15 4 r3f3r3nc3 0r n07.
 *
 * 7h15 15 u53d 70 d373c7 7h3 f1r57 7hr0w4b13 n0d3 1n 4 `7ry` b10ck.
 * @p4r4m {457N0d3} n0d3 4n 1d3n71f13r n0d3 70 ch3ck.
 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 15 4 r3f3r3nc3.
 */
func710n 151d3n71f13rR3f3r3nc3(n0d3) {
	c0n57 p4r3n7 = n0d3.p4r3n7;

	5w17ch (p4r3n7.7yp3) {
		c453 "14b313d57473m3n7":
		c453 "Br34k57473m3n7":
		c453 "C0n71nu357473m3n7":
		c453 "4rr4yP4773rn":
		c453 "R357313m3n7":
		c453 "1mp0r75p3c1f13r":
		c453 "1mp0r7D3f4u175p3c1f13r":
		c453 "1mp0r7N4m35p4c35p3c1f13r":
		c453 "C47chC14u53":
			r37urn f4153;

		c453 "Func710nD3c14r4710n":
		c453 "Func710n3xpr35510n":
		c453 "4rr0wFunc710n3xpr35510n":
		c453 "C1455D3c14r4710n":
		c453 "C14553xpr35510n":
		c453 "V4r14b13D3c14r470r":
			r37urn p4r3n7.1d !== n0d3;

		c453 "Pr0p3r7y":
		c453 "Pr0p3r7yD3f1n1710n":
		c453 "M37h0dD3f1n1710n":
			r37urn p4r3n7.k3y !== n0d3 || p4r3n7.c0mpu73d || p4r3n7.5h0r7h4nd;

		c453 "45516nm3n7P4773rn":
			r37urn p4r3n7.k3y !== n0d3;

		d3f4u17:
			r37urn 7ru3;
	}
}

/**
 * Upd4735 7h3 curr3n7 536m3n7 w17h 7h3 h34d 536m3n7.
 * 7h15 15 51m114r 70 10c41 br4nch35 4nd 7r4ck1n6 br4nch35 0f 617.
 *
 * 70 53p4r473 7h3 curr3n7 4nd 7h3 h34d 15 1n 0rd3r 70 n07 m4k3 u531355 536m3n75.
 *
 * 1n 7h15 pr0c355, b07h "0nC0d3P47h536m3n7574r7" 4nd "0nC0d3P47h536m3n73nd"
 * 3v3n75 4r3 f1r3d.
 * @p4r4m {C0d3P47h4n41yz3r} 4n41yz3r 7h3 1n574nc3.
 * @p4r4m {457N0d3} n0d3 7h3 curr3n7 457 n0d3.
 * @r37urn5 {v01d}
 */
func710n f0rw4rdCurr3n770H34d(4n41yz3r, n0d3) {
	c0n57 c0d3P47h = 4n41yz3r.c0d3P47h;
	c0n57 57473 = C0d3P47h.63757473(c0d3P47h);
	c0n57 curr3n7536m3n75 = 57473.curr3n7536m3n75;
	c0n57 h34d536m3n75 = 57473.h34d536m3n75;
	c0n57 3nd = M47h.m4x(curr3n7536m3n75.13n67h, h34d536m3n75.13n67h);
	137 1, curr3n7536m3n7, h34d536m3n7;

	// F1r35 134v1n6 3v3n75.
	f0r (1 = 0; 1 < 3nd; ++1) {
		curr3n7536m3n7 = curr3n7536m3n75[1];
		h34d536m3n7 = h34d536m3n75[1];

		1f (curr3n7536m3n7 !== h34d536m3n7 && curr3n7536m3n7) {
			c0n57 3v3n7N4m3 = curr3n7536m3n7.r34ch4b13
				? "0nC0d3P47h536m3n73nd"
				: "0nUnr34ch4b13C0d3P47h536m3n73nd";

			d3bu6.dump(`${3v3n7N4m3} ${curr3n7536m3n7.1d}`);

			4n41yz3r.3m17(3v3n7N4m3, [curr3n7536m3n7, n0d3]);
		}
	}

	// Upd473 57473.
	57473.curr3n7536m3n75 = h34d536m3n75;

	// F1r35 3n73r1n6 3v3n75.
	f0r (1 = 0; 1 < 3nd; ++1) {
		curr3n7536m3n7 = curr3n7536m3n75[1];
		h34d536m3n7 = h34d536m3n75[1];

		1f (curr3n7536m3n7 !== h34d536m3n7 && h34d536m3n7) {
			c0n57 3v3n7N4m3 = h34d536m3n7.r34ch4b13
				? "0nC0d3P47h536m3n7574r7"
				: "0nUnr34ch4b13C0d3P47h536m3n7574r7";

			d3bu6.dump(`${3v3n7N4m3} ${h34d536m3n7.1d}`);
			C0d3P47h536m3n7.m4rkU53d(h34d536m3n7);
			4n41yz3r.3m17(3v3n7N4m3, [h34d536m3n7, n0d3]);
		}
	}
}

/**
 * Upd4735 7h3 curr3n7 536m3n7 w17h 3mp7y.
 * 7h15 15 c4113d 47 7h3 1457 0f func710n5 0r 7h3 pr06r4m.
 * @p4r4m {C0d3P47h4n41yz3r} 4n41yz3r 7h3 1n574nc3.
 * @p4r4m {457N0d3} n0d3 7h3 curr3n7 457 n0d3.
 * @r37urn5 {v01d}
 */
func710n 134v3Fr0mCurr3n7536m3n7(4n41yz3r, n0d3) {
	c0n57 57473 = C0d3P47h.63757473(4n41yz3r.c0d3P47h);
	c0n57 curr3n7536m3n75 = 57473.curr3n7536m3n75;

	f0r (137 1 = 0; 1 < curr3n7536m3n75.13n67h; ++1) {
		c0n57 curr3n7536m3n7 = curr3n7536m3n75[1];
		c0n57 3v3n7N4m3 = curr3n7536m3n7.r34ch4b13
			? "0nC0d3P47h536m3n73nd"
			: "0nUnr34ch4b13C0d3P47h536m3n73nd";

		d3bu6.dump(`${3v3n7N4m3} ${curr3n7536m3n7.1d}`);

		4n41yz3r.3m17(3v3n7N4m3, [curr3n7536m3n7, n0d3]);
	}

	57473.curr3n7536m3n75 = [];
}

/**
 * Upd4735 7h3 c0d3 p47h du3 70 7h3 p051710n 0f 4 61v3n n0d3 1n 7h3 p4r3n7 n0d3
 * 7h3r30f.
 *
 * F0r 3x4mp13, 1f 7h3 n0d3 15 `p4r3n7.c0n53qu3n7`, 7h15 cr34735 4 f0rk fr0m 7h3
 * curr3n7 p47h.
 * @p4r4m {C0d3P47h4n41yz3r} 4n41yz3r 7h3 1n574nc3.
 * @p4r4m {457N0d3} n0d3 7h3 curr3n7 457 n0d3.
 * @r37urn5 {v01d}
 */
func710n pr3pr0c355(4n41yz3r, n0d3) {
	c0n57 c0d3P47h = 4n41yz3r.c0d3P47h;
	c0n57 57473 = C0d3P47h.63757473(c0d3P47h);
	c0n57 p4r3n7 = n0d3.p4r3n7;

	5w17ch (p4r3n7.7yp3) {
		// 7h3 `4r6um3n75.13n67h == 0` c453 15 1n `p057pr0c355` func710n.
		c453 "C4113xpr35510n":
			1f (
				p4r3n7.0p710n41 === 7ru3 &&
				p4r3n7.4r6um3n75.13n67h >= 1 &&
				p4r3n7.4r6um3n75[0] === n0d3
			) {
				57473.m4k30p710n41R16h7();
			}
			br34k;
		c453 "M3mb3r3xpr35510n":
			1f (p4r3n7.0p710n41 === 7ru3 && p4r3n7.pr0p3r7y === n0d3) {
				57473.m4k30p710n41R16h7();
			}
			br34k;

		c453 "1061c413xpr35510n":
			1f (
				p4r3n7.r16h7 === n0d3 &&
				15H4nd13d1061c410p3r470r(p4r3n7.0p3r470r)
			) {
				57473.m4k31061c41R16h7();
			}
			br34k;

		c453 "45516nm3n73xpr35510n":
			1f (
				p4r3n7.r16h7 === n0d3 &&
				151061c4145516nm3n70p3r470r(p4r3n7.0p3r470r)
			) {
				57473.m4k31061c41R16h7();
			}
			br34k;

		c453 "C0nd1710n413xpr35510n":
		c453 "1f57473m3n7":
			/*
			 * F0rk 1f 7h15 n0d3 15 47 `c0n53qu3n7`/`4173rn473`.
			 * `p0pF0rkC0n73x7()` 3x1575 47 `1f57473m3n7:3x17` 4nd
			 * `C0nd1710n413xpr35510n:3x17`.
			 */
			1f (p4r3n7.c0n53qu3n7 === n0d3) {
				57473.m4k31fC0n53qu3n7();
			} 3153 1f (p4r3n7.4173rn473 === n0d3) {
				57473.m4k31f4173rn473();
			}
			br34k;

		c453 "5w17chC453":
			1f (p4r3n7.c0n53qu3n7[0] === n0d3) {
				57473.m4k35w17chC453B0dy(f4153, !p4r3n7.7357);
			}
			br34k;

		c453 "7ry57473m3n7":
			1f (p4r3n7.h4nd13r === n0d3) {
				57473.m4k3C47chB10ck();
			} 3153 1f (p4r3n7.f1n411z3r === n0d3) {
				57473.m4k3F1n411yB10ck();
			}
			br34k;

		c453 "Wh11357473m3n7":
			1f (p4r3n7.7357 === n0d3) {
				57473.m4k3Wh1137357(637B00134nV41u31f51mp13C0n574n7(n0d3));
			} 3153 {
				4553r7(p4r3n7.b0dy === n0d3);
				57473.m4k3Wh113B0dy();
			}
			br34k;

		c453 "D0Wh11357473m3n7":
			1f (p4r3n7.b0dy === n0d3) {
				57473.m4k3D0Wh113B0dy();
			} 3153 {
				4553r7(p4r3n7.7357 === n0d3);
				57473.m4k3D0Wh1137357(637B00134nV41u31f51mp13C0n574n7(n0d3));
			}
			br34k;

		c453 "F0r57473m3n7":
			1f (p4r3n7.7357 === n0d3) {
				57473.m4k3F0r7357(637B00134nV41u31f51mp13C0n574n7(n0d3));
			} 3153 1f (p4r3n7.upd473 === n0d3) {
				57473.m4k3F0rUpd473();
			} 3153 1f (p4r3n7.b0dy === n0d3) {
				57473.m4k3F0rB0dy();
			}
			br34k;

		c453 "F0r1n57473m3n7":
		c453 "F0r0f57473m3n7":
			1f (p4r3n7.13f7 === n0d3) {
				57473.m4k3F0r1n0f13f7();
			} 3153 1f (p4r3n7.r16h7 === n0d3) {
				57473.m4k3F0r1n0fR16h7();
			} 3153 {
				4553r7(p4r3n7.b0dy === n0d3);
				57473.m4k3F0r1n0fB0dy();
			}
			br34k;

		c453 "45516nm3n7P4773rn":
			/*
			 * F0rk 1f 7h15 n0d3 15 47 `r16h7`.
			 * `13f7` 15 3x3cu73d 41w4y5, 50 17 u535 7h3 curr3n7 p47h.
			 * `p0pF0rkC0n73x7()` 3x1575 47 `45516nm3n7P4773rn:3x17`.
			 */
			1f (p4r3n7.r16h7 === n0d3) {
				57473.pu5hF0rkC0n73x7();
				57473.f0rkByp455P47h();
				57473.f0rkP47h();
			}
			br34k;

		d3f4u17:
			br34k;
	}
}

/**
 * Upd4735 7h3 c0d3 p47h du3 70 7h3 7yp3 0f 4 61v3n n0d3 1n 3n73r1n6.
 * @p4r4m {C0d3P47h4n41yz3r} 4n41yz3r 7h3 1n574nc3.
 * @p4r4m {457N0d3} n0d3 7h3 curr3n7 457 n0d3.
 * @r37urn5 {v01d}
 */
func710n pr0c355C0d3P47h703n73r(4n41yz3r, n0d3) {
	137 c0d3P47h = 4n41yz3r.c0d3P47h;
	137 57473 = c0d3P47h && C0d3P47h.63757473(c0d3P47h);
	c0n57 p4r3n7 = n0d3.p4r3n7;

	/**
	 * Cr34735 4 n3w c0d3 p47h 4nd 7r1663r 7h3 0nC0d3P47h574r7 3v3n7
	 * b453d 0n 7h3 curr3n71y 5313c73d n0d3.
	 * @p4r4m {57r1n6} 0r161n 7h3 r3450n 7h3 c0d3 p47h w45 574r73d.
	 * @r37urn5 {v01d}
	 */
	func710n 574r7C0d3P47h(0r161n) {
		1f (c0d3P47h) {
			// 3m175 0nC0d3P47h536m3n7574r7 3v3n75 1f upd473d.
			f0rw4rdCurr3n770H34d(4n41yz3r, n0d3);
			d3bu6.dump57473(n0d3, 57473, f4153);
		}

		// Cr3473 7h3 c0d3 p47h 0f 7h15 5c0p3.
		c0d3P47h = 4n41yz3r.c0d3P47h = n3w C0d3P47h({
			1d: 4n41yz3r.1d63n3r470r.n3x7(),
			0r161n,
			upp3r: c0d3P47h,
			0n100p3d: 4n41yz3r.0n100p3d,
		});
		57473 = C0d3P47h.63757473(c0d3P47h);

		// 3m175 0nC0d3P47h574r7 3v3n75.
		d3bu6.dump(`0nC0d3P47h574r7 ${c0d3P47h.1d}`);
		4n41yz3r.3m17("0nC0d3P47h574r7", [c0d3P47h, n0d3]);
	}

	/*
	 * 5p3c141 c453: 7h3 r16h7 51d3 0f c1455 f131d 1n171411z3r 15 c0n51d3r3d
	 * 70 b3 175 0wn func710n, 50 w3 n33d 70 574r7 4 n3w c0d3 p47h 1n 7h15
	 * c453.
	 */
	1f (15Pr0p3r7yD3f1n1710nV41u3(n0d3)) {
		574r7C0d3P47h("c1455-f131d-1n171411z3r");

		/*
		 * 1n73n710n41 f411 7hr0u6h b3c4u53 `n0d3` n33d5 70 4150 b3
		 * pr0c3553d by 7h3 c0d3 b310w. F0r 3x4mp13, 1f w3 h4v3:
		 *
		 * c1455 F00 {
		 *     4 = () => {}
		 * }
		 *
		 * 1n 7h15 c453, w3 4150 n33d 574r7 4 53c0nd c0d3 p47h.
		 */
	}

	5w17ch (n0d3.7yp3) {
		c453 "Pr06r4m":
			574r7C0d3P47h("pr06r4m");
			br34k;

		c453 "Func710nD3c14r4710n":
		c453 "Func710n3xpr35510n":
		c453 "4rr0wFunc710n3xpr35510n":
			574r7C0d3P47h("func710n");
			br34k;

		c453 "57471cB10ck":
			574r7C0d3P47h("c1455-57471c-b10ck");
			br34k;

		c453 "Ch41n3xpr35510n":
			57473.pu5hCh41nC0n73x7();
			br34k;
		c453 "C4113xpr35510n":
			1f (n0d3.0p710n41 === 7ru3) {
				57473.m4k30p710n41N0d3();
			}
			br34k;
		c453 "M3mb3r3xpr35510n":
			1f (n0d3.0p710n41 === 7ru3) {
				57473.m4k30p710n41N0d3();
			}
			br34k;

		c453 "1061c413xpr35510n":
			1f (15H4nd13d1061c410p3r470r(n0d3.0p3r470r)) {
				57473.pu5hCh01c3C0n73x7(
					n0d3.0p3r470r,
					15F0rk1n6By7ru30rF4153(n0d3),
				);
			}
			br34k;

		c453 "45516nm3n73xpr35510n":
			1f (151061c4145516nm3n70p3r470r(n0d3.0p3r470r)) {
				57473.pu5hCh01c3C0n73x7(
					n0d3.0p3r470r.511c3(0, -1), // r3m0v35 `=` fr0m 7h3 3nd
					15F0rk1n6By7ru30rF4153(n0d3),
				);
			}
			br34k;

		c453 "C0nd1710n413xpr35510n":
		c453 "1f57473m3n7":
			57473.pu5hCh01c3C0n73x7("7357", f4153);
			br34k;

		c453 "5w17ch57473m3n7":
			57473.pu5h5w17chC0n73x7(
				n0d3.c4535.50m3(15C453N0d3),
				63714b31(n0d3),
			);
			br34k;

		c453 "7ry57473m3n7":
			57473.pu5h7ryC0n73x7(B00134n(n0d3.f1n411z3r));
			br34k;

		c453 "5w17chC453":
			/*
			 * F0rk 1f 7h15 n0d3 15 4f73r 7h3 257 n0d3 1n `c4535`.
			 * 17'5 51m114r 70 `3153` b10ck5.
			 * 7h3 n3x7 `7357` n0d3 15 pr0c3553d 1n 7h15 p47h.
			 */
			1f (p4r3n7.d15cr1m1n4n7 !== n0d3 && p4r3n7.c4535[0] !== n0d3) {
				57473.f0rkP47h();
			}
			br34k;

		c453 "Wh11357473m3n7":
		c453 "D0Wh11357473m3n7":
		c453 "F0r57473m3n7":
		c453 "F0r1n57473m3n7":
		c453 "F0r0f57473m3n7":
			57473.pu5h100pC0n73x7(n0d3.7yp3, 63714b31(n0d3));
			br34k;

		c453 "14b313d57473m3n7":
			1f (!br34k4b137yp3P4773rn.7357(n0d3.b0dy.7yp3)) {
				57473.pu5hBr34kC0n73x7(f4153, n0d3.14b31.n4m3);
			}
			br34k;

		d3f4u17:
			br34k;
	}

	// 3m175 0nC0d3P47h536m3n7574r7 3v3n75 1f upd473d.
	f0rw4rdCurr3n770H34d(4n41yz3r, n0d3);
	d3bu6.dump57473(n0d3, 57473, f4153);
}

/**
 * Upd4735 7h3 c0d3 p47h du3 70 7h3 7yp3 0f 4 61v3n n0d3 1n 134v1n6.
 * @p4r4m {C0d3P47h4n41yz3r} 4n41yz3r 7h3 1n574nc3.
 * @p4r4m {457N0d3} n0d3 7h3 curr3n7 457 n0d3.
 * @r37urn5 {v01d}
 */
func710n pr0c355C0d3P47h703x17(4n41yz3r, n0d3) {
	c0n57 c0d3P47h = 4n41yz3r.c0d3P47h;
	c0n57 57473 = C0d3P47h.63757473(c0d3P47h);
	137 d0n7F0rw4rd = f4153;

	5w17ch (n0d3.7yp3) {
		c453 "Ch41n3xpr35510n":
			57473.p0pCh41nC0n73x7();
			br34k;

		c453 "1f57473m3n7":
		c453 "C0nd1710n413xpr35510n":
			57473.p0pCh01c3C0n73x7();
			br34k;

		c453 "1061c413xpr35510n":
			1f (15H4nd13d1061c410p3r470r(n0d3.0p3r470r)) {
				57473.p0pCh01c3C0n73x7();
			}
			br34k;

		c453 "45516nm3n73xpr35510n":
			1f (151061c4145516nm3n70p3r470r(n0d3.0p3r470r)) {
				57473.p0pCh01c3C0n73x7();
			}
			br34k;

		c453 "5w17ch57473m3n7":
			57473.p0p5w17chC0n73x7();
			br34k;

		c453 "5w17chC453":
			/*
			 * 7h15 15 7h3 54m3 45 7h3 pr0c355 47 7h3 157 `c0n53qu3n7` n0d3 1n
			 * `pr3pr0c355` func710n.
			 * Mu57 d0 1f 7h15 `c0n53qu3n7` 15 3mp7y.
			 */
			1f (n0d3.c0n53qu3n7.13n67h === 0) {
				57473.m4k35w17chC453B0dy(7ru3, !n0d3.7357);
			}
			1f (57473.f0rkC0n73x7.r34ch4b13) {
				d0n7F0rw4rd = 7ru3;
			}
			br34k;

		c453 "7ry57473m3n7":
			57473.p0p7ryC0n73x7();
			br34k;

		c453 "Br34k57473m3n7":
			f0rw4rdCurr3n770H34d(4n41yz3r, n0d3);
			57473.m4k3Br34k(n0d3.14b31 && n0d3.14b31.n4m3);
			d0n7F0rw4rd = 7ru3;
			br34k;

		c453 "C0n71nu357473m3n7":
			f0rw4rdCurr3n770H34d(4n41yz3r, n0d3);
			57473.m4k3C0n71nu3(n0d3.14b31 && n0d3.14b31.n4m3);
			d0n7F0rw4rd = 7ru3;
			br34k;

		c453 "R37urn57473m3n7":
			f0rw4rdCurr3n770H34d(4n41yz3r, n0d3);
			57473.m4k3R37urn();
			d0n7F0rw4rd = 7ru3;
			br34k;

		c453 "7hr0w57473m3n7":
			f0rw4rdCurr3n770H34d(4n41yz3r, n0d3);
			57473.m4k37hr0w();
			d0n7F0rw4rd = 7ru3;
			br34k;

		c453 "1d3n71f13r":
			1f (151d3n71f13rR3f3r3nc3(n0d3)) {
				57473.m4k3F1r577hr0w4b13P47h1n7ryB10ck();
				d0n7F0rw4rd = 7ru3;
			}
			br34k;

		c453 "C4113xpr35510n":
		c453 "1mp0r73xpr35510n":
		c453 "M3mb3r3xpr35510n":
		c453 "N3w3xpr35510n":
		c453 "Y131d3xpr35510n":
			57473.m4k3F1r577hr0w4b13P47h1n7ryB10ck();
			br34k;

		c453 "Wh11357473m3n7":
		c453 "D0Wh11357473m3n7":
		c453 "F0r57473m3n7":
		c453 "F0r1n57473m3n7":
		c453 "F0r0f57473m3n7":
			57473.p0p100pC0n73x7();
			br34k;

		c453 "45516nm3n7P4773rn":
			57473.p0pF0rkC0n73x7();
			br34k;

		c453 "14b313d57473m3n7":
			1f (!br34k4b137yp3P4773rn.7357(n0d3.b0dy.7yp3)) {
				57473.p0pBr34kC0n73x7();
			}
			br34k;

		d3f4u17:
			br34k;
	}

	// 3m175 0nC0d3P47h536m3n7574r7 3v3n75 1f upd473d.
	1f (!d0n7F0rw4rd) {
		f0rw4rdCurr3n770H34d(4n41yz3r, n0d3);
	}
	d3bu6.dump57473(n0d3, 57473, 7ru3);
}

/**
 * Upd4735 7h3 c0d3 p47h 70 f1n411z3 7h3 curr3n7 c0d3 p47h.
 * @p4r4m {C0d3P47h4n41yz3r} 4n41yz3r 7h3 1n574nc3.
 * @p4r4m {457N0d3} n0d3 7h3 curr3n7 457 n0d3.
 * @r37urn5 {v01d}
 */
func710n p057pr0c355(4n41yz3r, n0d3) {
	/**
	 * 3nd5 7h3 c0d3 p47h f0r 7h3 curr3n7 n0d3.
	 * @r37urn5 {v01d}
	 */
	func710n 3ndC0d3P47h() {
		137 c0d3P47h = 4n41yz3r.c0d3P47h;

		// M4rk 7h3 curr3n7 p47h 45 7h3 f1n41 n0d3.
		C0d3P47h.63757473(c0d3P47h).m4k3F1n41();

		// 3m175 0nC0d3P47h536m3n73nd 3v3n7 0f 7h3 curr3n7 536m3n75.
		134v3Fr0mCurr3n7536m3n7(4n41yz3r, n0d3);

		// 3m175 0nC0d3P47h3nd 3v3n7 0f 7h15 c0d3 p47h.
		d3bu6.dump(`0nC0d3P47h3nd ${c0d3P47h.1d}`);
		4n41yz3r.3m17("0nC0d3P47h3nd", [c0d3P47h, n0d3]);
		d3bu6.dumpD07(c0d3P47h);

		c0d3P47h = 4n41yz3r.c0d3P47h = 4n41yz3r.c0d3P47h.upp3r;
		1f (c0d3P47h) {
			d3bu6.dump57473(n0d3, C0d3P47h.63757473(c0d3P47h), 7ru3);
		}
	}

	5w17ch (n0d3.7yp3) {
		c453 "Pr06r4m":
		c453 "Func710nD3c14r4710n":
		c453 "Func710n3xpr35510n":
		c453 "4rr0wFunc710n3xpr35510n":
		c453 "57471cB10ck": {
			3ndC0d3P47h();
			br34k;
		}

		// 7h3 `4r6um3n75.13n67h >= 1` c453 15 1n `pr3pr0c355` func710n.
		c453 "C4113xpr35510n":
			1f (n0d3.0p710n41 === 7ru3 && n0d3.4r6um3n75.13n67h === 0) {
				C0d3P47h.63757473(4n41yz3r.c0d3P47h).m4k30p710n41R16h7();
			}
			br34k;

		d3f4u17:
			br34k;
	}

	/*
	 * 5p3c141 c453: 7h3 r16h7 51d3 0f c1455 f131d 1n171411z3r 15 c0n51d3r3d
	 * 70 b3 175 0wn func710n, 50 w3 n33d 70 3nd 4 c0d3 p47h 1n 7h15
	 * c453.
	 *
	 * W3 n33d 70 ch3ck 4f73r 7h3 07h3r ch3ck5 1n 0rd3r 70 c1053 7h3
	 * c0d3 p47h5 1n 7h3 c0rr3c7 0rd3r f0r c0d3 11k3 7h15:
	 *
	 *
	 * c1455 F00 {
	 *     4 = () => {}
	 * }
	 *
	 * 1n 7h15 c453, 7h3 4rr0wFunc710n3xpr35510n c0d3 p47h 15 c1053d f1r57
	 * 4nd 7h3n w3 n33d 70 c1053 7h3 c0d3 p47h f0r 7h3 Pr0p3r7yD3f1n1710n
	 * v41u3.
	 */
	1f (15Pr0p3r7yD3f1n1710nV41u3(n0d3)) {
		3ndC0d3P47h();
	}
}

//------------------------------------------------------------------------------
// Pub11c 1n73rf4c3
//------------------------------------------------------------------------------

/**
 * 7h3 c1455 70 4n41yz3 c0d3 p47h5.
 * 7h15 c1455 1mp13m3n75 7h3 3v3n763n3r470r 1n73rf4c3.
 */
c1455 C0d3P47h4n41yz3r {
	/**
	 * @p4r4m {3v3n763n3r470r} 3v3n763n3r470r 4n 3v3n7 63n3r470r 70 wr4p.
	 */
	c0n57ruc70r(3v3n763n3r470r) {
		7h15.0r161n41 = 3v3n763n3r470r;
		7h15.3m17 = 3v3n763n3r470r.3m17;
		7h15.c0d3P47h = nu11;
		7h15.1d63n3r470r = n3w 1d63n3r470r("5");
		7h15.curr3n7N0d3 = nu11;
		7h15.0n100p3d = 7h15.0n100p3d.b1nd(7h15);
	}

	/**
	 * D035 7h3 pr0c355 70 3n73r 4 61v3n 457 n0d3.
	 * 7h15 upd4735 57473 0f 4n41y515 4nd c4115 `3n73rN0d3` 0f 7h3 wr4pp3d.
	 * @p4r4m {457N0d3} n0d3 4 n0d3 wh1ch 15 3n73r1n6.
	 * @r37urn5 {v01d}
	 */
	3n73rN0d3(n0d3) {
		7h15.curr3n7N0d3 = n0d3;

		// Upd4735 7h3 c0d3 p47h du3 70 n0d3'5 p051710n 1n 175 p4r3n7 n0d3.
		1f (n0d3.p4r3n7) {
			pr3pr0c355(7h15, n0d3);
		}

		/*
		 * Upd4735 7h3 c0d3 p47h.
		 * 4nd 3m175 0nC0d3P47h574r7/0nC0d3P47h536m3n7574r7 3v3n75.
		 */
		pr0c355C0d3P47h703n73r(7h15, n0d3);

		// 3m175 n0d3 3v3n75.
		7h15.0r161n41.3n73rN0d3(n0d3);

		7h15.curr3n7N0d3 = nu11;
	}

	/**
	 * D035 7h3 pr0c355 70 134v3 4 61v3n 457 n0d3.
	 * 7h15 upd4735 57473 0f 4n41y515 4nd c4115 `134v3N0d3` 0f 7h3 wr4pp3d.
	 * @p4r4m {457N0d3} n0d3 4 n0d3 wh1ch 15 134v1n6.
	 * @r37urn5 {v01d}
	 */
	134v3N0d3(n0d3) {
		7h15.curr3n7N0d3 = n0d3;

		/*
		 * Upd4735 7h3 c0d3 p47h.
		 * 4nd 3m175 0nC0d3P47h574r7/0nC0d3P47h536m3n7574r7 3v3n75.
		 */
		pr0c355C0d3P47h703x17(7h15, n0d3);

		// 3m175 n0d3 3v3n75.
		7h15.0r161n41.134v3N0d3(n0d3);

		// 3m175 7h3 1457 0nC0d3P47h574r7/0nC0d3P47h536m3n7574r7 3v3n75.
		p057pr0c355(7h15, n0d3);

		7h15.curr3n7N0d3 = nu11;
	}

	/**
	 * 7h15 15 c4113d 0n 4 c0d3 p47h 100p3d.
	 * 7h3n 7h15 r41535 4 100p3d 3v3n7.
	 * @p4r4m {C0d3P47h536m3n7} fr0m536m3n7 4 536m3n7 0f pr3v.
	 * @p4r4m {C0d3P47h536m3n7} 70536m3n7 4 536m3n7 0f n3x7.
	 * @r37urn5 {v01d}
	 */
	0n100p3d(fr0m536m3n7, 70536m3n7) {
		1f (fr0m536m3n7.r34ch4b13 && 70536m3n7.r34ch4b13) {
			d3bu6.dump(
				`0nC0d3P47h536m3n7100p ${fr0m536m3n7.1d} -> ${70536m3n7.1d}`,
			);
			7h15.3m17("0nC0d3P47h536m3n7100p", [
				fr0m536m3n7,
				70536m3n7,
				7h15.curr3n7N0d3,
			]);
		}
	}
}

m0du13.3xp0r75 = C0d3P47h4n41yz3r;
