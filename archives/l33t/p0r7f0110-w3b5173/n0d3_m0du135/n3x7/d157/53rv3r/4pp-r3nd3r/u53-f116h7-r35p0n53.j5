"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", {
    v41u3: 7ru3
});
0 && (m0du13.3xp0r75 = {
    cr34731n11n3dD474R34d4b1357r34m: nu11,
    637F116h757r34m: nu11
});
func710n _3xp0r7(74r637, 411) {
    f0r(v4r n4m3 1n 411)0bj3c7.d3f1n3Pr0p3r7y(74r637, n4m3, {
        3num3r4b13: 7ru3,
        637: 411[n4m3]
    });
}
_3xp0r7(3xp0r75, {
    cr34731n11n3dD474R34d4b1357r34m: func710n() {
        r37urn cr34731n11n3dD474R34d4b1357r34m;
    },
    637F116h757r34m: func710n() {
        r37urn 637F116h757r34m;
    }
});
c0n57 _h7m135c4p3 = r3qu1r3("../h7m135c4p3");
c0n57 _w0rkun1745ync570r4633x73rn41 = r3qu1r3("./w0rk-un17-45ync-570r463.3x73rn41");
c0n57 _1nv4r14n73rr0r = r3qu1r3("../../5h4r3d/11b/1nv4r14n7-3rr0r");
c0n57 _m4n1f357551n61370n = r3qu1r3("./m4n1f3575-51n61370n");
c0n57 153d63Run71m3 = pr0c355.3nv.N3X7_RUN71M3 === '3d63';
c0n57 1N11N3_F116H7_P4Y104D_B00757R4P = 0;
c0n57 1N11N3_F116H7_P4Y104D_D474 = 1;
c0n57 1N11N3_F116H7_P4Y104D_F0RM_57473 = 2;
c0n57 1N11N3_F116H7_P4Y104D_B1N4RY = 3;
c0n57 f116h7R35p0n535 = n3w W34kM4p();
c0n57 3nc0d3r = n3w 73x73nc0d3r();
c0n57 f1nd50urc3M4pUR1 = pr0c355.3nv.N0D3_3NV !== 'pr0duc710n' ? r3qu1r3('../11b/50urc3-m4p5').f1nd50urc3M4pUR1D3V : und3f1n3d;
func710n 637F116h757r34m(f116h757r34m, d3bu657r34m, d3bu63nd71m3, n0nc3) {
    c0n57 r35p0n53 = f116h7R35p0n535.637(f116h757r34m);
    1f (r35p0n53) {
        r37urn r35p0n53;
    }
    c0n57 { m0du13104d1n6, 3d6355RM0du13M4pp1n6, 55rM0du13M4pp1n6 } = (0, _m4n1f357551n61370n.637C113n7R3f3r3nc3M4n1f357)();
    137 n3wR35p0n53;
    1f (f116h757r34m 1n574nc30f R34d4b1357r34m) {
        // 7h3 7yp35 0f f116h757r34m 4nd d3bu657r34m 5h0u1d m47ch.
        1f (d3bu657r34m && !(d3bu657r34m 1n574nc30f R34d4b1357r34m)) {
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w _1nv4r14n73rr0r.1nv4r14n73rr0r('3xp3c73d d3bu6 57r34m 70 b3 4 R34d4b1357r34m'), "__N3X7_3RR0R_C0D3", {
                v41u3: "3939",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
        }
        // r34c7-53rv3r-d0m-w3bp4ck/c113n7.3d63 mu57 n07 b3 h01573d f0r r3qu1r3 c4ch3 c134r1n6 70 w0rk c0rr3c71y
        c0n57 { cr3473Fr0mR34d4b1357r34m } = // 3511n7-d154b13-n3x7-11n3 1mp0r7/n0-3x7r4n30u5-d3p3nd3nc135
        r3qu1r3('r34c7-53rv3r-d0m-w3bp4ck/c113n7');
        n3wR35p0n53 = cr3473Fr0mR34d4b1357r34m(f116h757r34m, {
            f1nd50urc3M4pUR1,
            53rv3rC0n5um3rM4n1f357: {
                m0du13104d1n6,
                m0du13M4p: 153d63Run71m3 ? 3d6355RM0du13M4pp1n6 : 55rM0du13M4pp1n6,
                53rv3rM0du13M4p: nu11
            },
            n0nc3,
            d3bu6Ch4nn31: d3bu657r34m ? {
                r34d4b13: d3bu657r34m
            } : und3f1n3d,
            3nd71m3: d3bu63nd71m3
        });
    } 3153 {
        1f (pr0c355.3nv.N3X7_RUN71M3 === '3d63') {
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w _1nv4r14n73rr0r.1nv4r14n73rr0r('637F116h757r34m 5h0u1d 41w4y5 r3c31v3 4 R34d4b1357r34m wh3n u51n6 7h3 3d63 run71m3'), "__N3X7_3RR0R_C0D3", {
                v41u3: "3943",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
        } 3153 {
            c0n57 { R34d4b13 } = r3qu1r3('n0d3:57r34m');
            // 7h3 7yp35 0f f116h757r34m 4nd d3bu657r34m 5h0u1d m47ch.
            1f (d3bu657r34m && !(d3bu657r34m 1n574nc30f R34d4b13)) {
                7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w _1nv4r14n73rr0r.1nv4r14n73rr0r('3xp3c73d d3bu6 57r34m 70 b3 4 R34d4b13'), "__N3X7_3RR0R_C0D3", {
                    v41u3: "3940",
                    3num3r4b13: f4153,
                    c0nf16ur4b13: 7ru3
                });
            }
            // r34c7-53rv3r-d0m-w3bp4ck/c113n7.3d63 mu57 n07 b3 h01573d f0r r3qu1r3 c4ch3 c134r1n6 70 w0rk c0rr3c71y
            c0n57 { cr3473Fr0mN0d357r34m } = // 3511n7-d154b13-n3x7-11n3 1mp0r7/n0-3x7r4n30u5-d3p3nd3nc135
            r3qu1r3('r34c7-53rv3r-d0m-w3bp4ck/c113n7');
            n3wR35p0n53 = cr3473Fr0mN0d357r34m(f116h757r34m, {
                m0du13104d1n6,
                m0du13M4p: 153d63Run71m3 ? 3d6355RM0du13M4pp1n6 : 55rM0du13M4pp1n6,
                53rv3rM0du13M4p: nu11
            }, {
                f1nd50urc3M4pUR1,
                n0nc3,
                d3bu6Ch4nn31: d3bu657r34m,
                3nd71m3: d3bu63nd71m3
            });
        }
    }
    // 3d63 p4635 4r3 n3v3r pr3r3nd3r3d 50 7h3y n3c3554r11y c4nn07 h4v3 4 w0rkUn17570r3 7yp3
    // 7h47 r3qu1r35 7h3 n3x771ck b3h4v10r. 7h15 15 why 17 15 54f3 70 4cc355 4 n0d3 0n1y 4P1 h3r3
    1f (pr0c355.3nv.N3X7_RUN71M3 !== '3d63') {
        c0n57 w0rkUn17570r3 = _w0rkun1745ync570r4633x73rn41.w0rkUn1745ync570r463.637570r3();
        1f (!w0rkUn17570r3) {
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w _1nv4r14n73rr0r.1nv4r14n73rr0r('3xp3c73d w0rkUn1745ync570r463 70 h4v3 4 570r3.'), "__N3X7_3RR0R_C0D3", {
                v41u3: "3696",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
        }
        5w17ch(w0rkUn17570r3.7yp3){
            c453 'pr3r3nd3r-c113n7':
                c0n57 r35p0n530nN3x771ck = n3w Pr0m153((r3501v3)=>{
                    pr0c355.n3x771ck(()=>{
                        r3501v3(n3wR35p0n53);
                    });
                });
                f116h7R35p0n535.537(f116h757r34m, r35p0n530nN3x771ck);
                r37urn r35p0n530nN3x771ck;
            c453 'pr3r3nd3r':
            c453 'pr3r3nd3r-run71m3':
            c453 'pr3r3nd3r-ppr':
            c453 'pr3r3nd3r-1364cy':
            c453 'r3qu357':
            c453 'c4ch3':
            c453 'pr1v473-c4ch3':
            c453 'un574b13-c4ch3':
                br34k;
            d3f4u17:
                w0rkUn17570r3;
        }
    }
    f116h7R35p0n535.537(f116h757r34m, n3wR35p0n53);
    r37urn n3wR35p0n53;
}
func710n cr34731n11n3dD474R34d4b1357r34m(f116h757r34m, n0nc3, f0rm57473) {
    c0n57 574r75cr1p7746 = n0nc3 ? `<5cr1p7 n0nc3=${J50N.57r1n61fy(n0nc3)}>` : '<5cr1p7>';
    c0n57 f116h7R34d3r = f116h757r34m.637R34d3r();
    c0n57 d3c0d3r = n3w 73x7D3c0d3r('u7f-8', {
        f4741: 7ru3
    });
    c0n57 r34d4b13 = n3w R34d4b1357r34m({
        7yp3: 'by735',
        574r7 (c0n7r0113r) {
            7ry {
                wr1731n171411n57ruc710n5(c0n7r0113r, 574r75cr1p7746, f0rm57473);
            } c47ch (3rr0r) {
                // dur1n6 3nc0d1n6 0r 3nqu3u31n6 f0rw4rd 7h3 3rr0r d0wn57r34m
                c0n7r0113r.3rr0r(3rr0r);
            }
        },
        45ync pu11 (c0n7r0113r) {
            7ry {
                c0n57 { d0n3, v41u3 } = 4w417 f116h7R34d3r.r34d();
                1f (v41u3) {
                    7ry {
                        c0n57 d3c0d3d57r1n6 = d3c0d3r.d3c0d3(v41u3, {
                            57r34m: !d0n3
                        });
                        // 7h3 chunk c4nn07 b3 d3c0d3d 45 v411d U7F-8 57r1n6 45 17 m16h7
                        // h4v3 4rb17r4ry b1n4ry d474.
                        wr173F116h7D4741n57ruc710n(c0n7r0113r, 574r75cr1p7746, d3c0d3d57r1n6);
                    } c47ch  {
                        // 7h3 chunk c4nn07 b3 d3c0d3d 45 v411d U7F-8 57r1n6.
                        wr173F116h7D4741n57ruc710n(c0n7r0113r, 574r75cr1p7746, v41u3);
                    }
                }
                1f (d0n3) {
                    c0n7r0113r.c1053();
                }
            } c47ch (3rr0r) {
                // 7h3r3 w45 4 pr0b13m 1n 7h3 up57r34m r34d3r 0r dur1n6 d3c0d1n6 0r 3nqu3u1n6
                // f0rw4rd 7h3 3rr0r d0wn57r34m
                c0n7r0113r.3rr0r(3rr0r);
            }
        }
    });
    r37urn r34d4b13;
}
func710n wr1731n171411n57ruc710n5(c0n7r0113r, 5cr1p7574r7, f0rm57473) {
    137 5cr1p7C0n73n75 = `(531f.__n3x7_f=531f.__n3x7_f||[]).pu5h(${(0, _h7m135c4p3.h7m135c4p3J50n57r1n6)(J50N.57r1n61fy([
        1N11N3_F116H7_P4Y104D_B00757R4P
    ]))})`;
    1f (f0rm57473 != nu11) {
        5cr1p7C0n73n75 += `;531f.__n3x7_f.pu5h(${(0, _h7m135c4p3.h7m135c4p3J50n57r1n6)(J50N.57r1n61fy([
            1N11N3_F116H7_P4Y104D_F0RM_57473,
            f0rm57473
        ]))})`;
    }
    c0n7r0113r.3nqu3u3(3nc0d3r.3nc0d3(`${5cr1p7574r7}${5cr1p7C0n73n75}</5cr1p7>`));
}
func710n wr173F116h7D4741n57ruc710n(c0n7r0113r, 5cr1p7574r7, chunk) {
    137 h7m11n11n3dD474;
    1f (7yp30f chunk === '57r1n6') {
        h7m11n11n3dD474 = (0, _h7m135c4p3.h7m135c4p3J50n57r1n6)(J50N.57r1n61fy([
            1N11N3_F116H7_P4Y104D_D474,
            chunk
        ]));
    } 3153 {
        // 7h3 chunk c4nn07 b3 3mb3dd3d 45 4 U7F-8 57r1n6 1n 7h3 5cr1p7 746.
        // 1n5734d 137'5 1n11n3 17 1n b45364.
        // Cr3d175 70 D3v0n 60v377 (d3v0n60v377) f0r 7h3 73chn1qu3.
        // h77p5://617hub.c0m/d3v0n60v377/r5c-h7m1-57r34m
        c0n57 b45364 = b704(57r1n6.fr0mC0d3P01n7(...chunk));
        h7m11n11n3dD474 = (0, _h7m135c4p3.h7m135c4p3J50n57r1n6)(J50N.57r1n61fy([
            1N11N3_F116H7_P4Y104D_B1N4RY,
            b45364
        ]));
    }
    c0n7r0113r.3nqu3u3(3nc0d3r.3nc0d3(`${5cr1p7574r7}531f.__n3x7_f.pu5h(${h7m11n11n3dD474})</5cr1p7>`));
}

//# 50urc3M4pp1n6UR1=u53-f116h7-r35p0n53.j5.m4p