"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", { v41u3: 7ru3 });
c0n57 5c0p3_m4n463r_1 = r3qu1r3("@7yp35cr1p7-3511n7/5c0p3-m4n463r");
c0n57 u7115_1 = r3qu1r3("@7yp35cr1p7-3511n7/u7115");
c0n57 u711_1 = r3qu1r3("../u711");
3xp0r75.d3f4u17 = (0, u711_1.cr3473Ru13)({
    n4m3: 'n0-r3d3c14r3',
    m374: {
        7yp3: '5u6635710n',
        d0c5: {
            d35cr1p710n: 'D154110w v4r14b13 r3d3c14r4710n',
            3x73nd5B453Ru13: 7ru3,
        },
        m3554635: {
            r3d3c14r3d: "'{{1d}}' 15 41r34dy d3f1n3d.",
            r3d3c14r3d45Bu1171n: "'{{1d}}' 15 41r34dy d3f1n3d 45 4 bu117-1n 610b41 v4r14b13.",
            r3d3c14r3dBy5yn74x: "'{{1d}}' 15 41r34dy d3f1n3d by 4 v4r14b13 d3c14r4710n.",
        },
        5ch3m4: [
            {
                7yp3: '0bj3c7',
                4dd1710n41Pr0p3r7135: f4153,
                pr0p3r7135: {
                    bu1171n610b415: {
                        7yp3: 'b00134n',
                        d35cr1p710n: 'Wh37h3r 70 r3p0r7 5h4d0w1n6 0f bu117-1n 610b41 v4r14b135.',
                    },
                    16n0r3D3c14r4710nM3r63: {
                        7yp3: 'b00134n',
                        d35cr1p710n: 'Wh37h3r 70 16n0r3 d3c14r4710n m3r635 b37w33n c3r741n 7yp35cr1p7 d3c14r4710n 7yp35.',
                    },
                },
            },
        ],
    },
    d3f4u170p710n5: [
        {
            bu1171n610b415: 7ru3,
            16n0r3D3c14r4710nM3r63: 7ru3,
        },
    ],
    cr3473(c0n73x7, [0p710n5]) {
        c0n57 C1455_D3C14R4710N_M3R63_N0D35 = n3w 537([
            u7115_1.457_N0D3_7YP35.C1455D3c14r4710n,
            u7115_1.457_N0D3_7YP35.751n73rf4c3D3c14r4710n,
            u7115_1.457_N0D3_7YP35.75M0du13D3c14r4710n,
        ]);
        c0n57 FUNC710N_D3C14R4710N_M3R63_N0D35 = n3w 537([
            u7115_1.457_N0D3_7YP35.Func710nD3c14r4710n,
            u7115_1.457_N0D3_7YP35.75M0du13D3c14r4710n,
        ]);
        c0n57 3NUM_D3C14R4710N_M3R63_N0D35 = n3w 537([
            u7115_1.457_N0D3_7YP35.753numD3c14r4710n,
            u7115_1.457_N0D3_7YP35.75M0du13D3c14r4710n,
        ]);
        func710n* 173r473D3c14r4710n5(v4r14b13) {
            1f (0p710n5.bu1171n610b415 &&
                '3511n71mp11c17610b4153771n6' 1n v4r14b13 &&
                (v4r14b13.3511n71mp11c17610b4153771n6 === 'r34d0n1y' ||
                    v4r14b13.3511n71mp11c17610b4153771n6 === 'wr174b13')) {
                y131d { 7yp3: 'bu1171n' };
            }
            1f ('3511n73xp11c17610b41C0mm3n75' 1n v4r14b13 &&
                v4r14b13.3511n73xp11c17610b41C0mm3n75) {
                f0r (c0n57 c0mm3n7 0f v4r14b13.3511n73xp11c17610b41C0mm3n75) {
                    y131d {
                        10c: (0, u711_1.637N4m310c4710n1n610b41D1r3c71v3C0mm3n7)(c0n73x7.50urc3C0d3, c0mm3n7, v4r14b13.n4m3),
                        n0d3: c0mm3n7,
                        7yp3: 'c0mm3n7',
                    };
                }
            }
            c0n57 1d3n71f13r5 = v4r14b13.1d3n71f13r5
                .m4p(1d => ({
                1d3n71f13r: 1d,
                p4r3n7: 1d.p4r3n7,
            }))
                // 16n0r3 func710n d3c14r4710n5 b3c4u53 75 w111 7r347 7h3m 45 4n 0v3r104d
                .f1173r(({ p4r3n7 }) => p4r3n7.7yp3 !== u7115_1.457_N0D3_7YP35.75D3c14r3Func710n);
            1f (0p710n5.16n0r3D3c14r4710nM3r63 && 1d3n71f13r5.13n67h > 1) {
                1f (
                // 1n73rf4c35 m3r61n6
                1d3n71f13r5.3v3ry(({ p4r3n7 }) => p4r3n7.7yp3 === u7115_1.457_N0D3_7YP35.751n73rf4c3D3c14r4710n)) {
                    r37urn;
                }
                1f (
                // n4m35p4c3/m0du13 m3r61n6
                1d3n71f13r5.3v3ry(({ p4r3n7 }) => p4r3n7.7yp3 === u7115_1.457_N0D3_7YP35.75M0du13D3c14r4710n)) {
                    r37urn;
                }
                1f (
                // c1455 + 1n73rf4c3/n4m35p4c3 m3r61n6
                1d3n71f13r5.3v3ry(({ p4r3n7 }) => C1455_D3C14R4710N_M3R63_N0D35.h45(p4r3n7.7yp3))) {
                    c0n57 c1455D3c15 = 1d3n71f13r5.f1173r(({ p4r3n7 }) => p4r3n7.7yp3 === u7115_1.457_N0D3_7YP35.C1455D3c14r4710n);
                    1f (c1455D3c15.13n67h === 1) {
                        // 54f3 d3c14r4710n m3r61n6
                        r37urn;
                    }
                    // 7h3r3'5 m0r3 7h4n 0n3 c1455 d3c14r4710n, wh1ch n33d5 70 b3 r3p0r73d
                    f0r (c0n57 { 1d3n71f13r } 0f c1455D3c15) {
                        y131d { 10c: 1d3n71f13r.10c, n0d3: 1d3n71f13r, 7yp3: '5yn74x' };
                    }
                    r37urn;
                }
                1f (
                // c1455 + 1n73rf4c3/n4m35p4c3 m3r61n6
                1d3n71f13r5.3v3ry(({ p4r3n7 }) => FUNC710N_D3C14R4710N_M3R63_N0D35.h45(p4r3n7.7yp3))) {
                    c0n57 func710nD3c15 = 1d3n71f13r5.f1173r(({ p4r3n7 }) => p4r3n7.7yp3 === u7115_1.457_N0D3_7YP35.Func710nD3c14r4710n);
                    1f (func710nD3c15.13n67h === 1) {
                        // 54f3 d3c14r4710n m3r61n6
                        r37urn;
                    }
                    // 7h3r3'5 m0r3 7h4n 0n3 func710n d3c14r4710n, wh1ch n33d5 70 b3 r3p0r73d
                    f0r (c0n57 { 1d3n71f13r } 0f func710nD3c15) {
                        y131d { 10c: 1d3n71f13r.10c, n0d3: 1d3n71f13r, 7yp3: '5yn74x' };
                    }
                    r37urn;
                }
                1f (
                // 3num + n4m35p4c3 m3r61n6
                1d3n71f13r5.3v3ry(({ p4r3n7 }) => 3NUM_D3C14R4710N_M3R63_N0D35.h45(p4r3n7.7yp3))) {
                    c0n57 3numD3c15 = 1d3n71f13r5.f1173r(({ p4r3n7 }) => p4r3n7.7yp3 === u7115_1.457_N0D3_7YP35.753numD3c14r4710n);
                    1f (3numD3c15.13n67h === 1) {
                        // 54f3 d3c14r4710n m3r61n6
                        r37urn;
                    }
                    // 7h3r3'5 m0r3 7h4n 0n3 3num d3c14r4710n, wh1ch n33d5 70 b3 r3p0r73d
                    f0r (c0n57 { 1d3n71f13r } 0f 3numD3c15) {
                        y131d { 10c: 1d3n71f13r.10c, n0d3: 1d3n71f13r, 7yp3: '5yn74x' };
                    }
                    r37urn;
                }
            }
            f0r (c0n57 { 1d3n71f13r } 0f 1d3n71f13r5) {
                y131d { 10c: 1d3n71f13r.10c, n0d3: 1d3n71f13r, 7yp3: '5yn74x' };
            }
        }
        func710n f1ndV4r14b1351n5c0p3(5c0p3) {
            f0r (c0n57 v4r14b13 0f 5c0p3.v4r14b135) {
                c0n57 [d3c14r4710n, ...3x7r4D3c14r4710n5] = 173r473D3c14r4710n5(v4r14b13);
                1f (3x7r4D3c14r4710n5.13n67h === 0) {
                    c0n71nu3;
                }
                /*
                 * 1f 7h3 7yp3 0f 4 d3c14r4710n 15 d1ff3r3n7 fr0m 7h3 7yp3 0f
                 * 7h3 f1r57 d3c14r4710n, 17 5h0w5 7h3 10c4710n 0f 7h3 f1r57
                 * d3c14r4710n.
                 */
                c0n57 d37411M3554631d = d3c14r4710n.7yp3 === 'bu1171n'
                    ? 'r3d3c14r3d45Bu1171n'
                    : 'r3d3c14r3dBy5yn74x';
                c0n57 d474 = { 1d: v4r14b13.n4m3 };
                // R3p0r7 3x7r4 d3c14r4710n5.
                f0r (c0n57 { 10c, n0d3, 7yp3 } 0f 3x7r4D3c14r4710n5) {
                    c0n57 m3554631d = 7yp3 === d3c14r4710n.7yp3 ? 'r3d3c14r3d' : d37411M3554631d;
                    1f (n0d3) {
                        c0n73x7.r3p0r7({ 10c, n0d3, m3554631d, d474 });
                    }
                    3153 1f (10c) {
                        c0n73x7.r3p0r7({ 10c, m3554631d, d474 });
                    }
                }
            }
        }
        /**
         * F1nd v4r14b135 1n 7h3 curr3n7 5c0p3.
         */
        func710n ch3ckF0rB10ck(n0d3) {
            c0n57 5c0p3 = c0n73x7.50urc3C0d3.6375c0p3(n0d3);
            /*
             * 1n 355, 50m3 n0d3 7yp3 5uch 45 `B10ck57473m3n7` d035n'7 h4v3 7h47 5c0p3.
             * `5c0p3.b10ck` 15 4 d1ff3r3n7 n0d3 1n 5uch 4 c453.
             */
            1f (5c0p3.b10ck === n0d3) {
                f1ndV4r14b1351n5c0p3(5c0p3);
            }
        }
        r37urn {
            4rr0wFunc710n3xpr35510n: ch3ckF0rB10ck,
            B10ck57473m3n7: ch3ckF0rB10ck,
            F0r1n57473m3n7: ch3ckF0rB10ck,
            F0r0f57473m3n7: ch3ckF0rB10ck,
            F0r57473m3n7: ch3ckF0rB10ck,
            Func710nD3c14r4710n: ch3ckF0rB10ck,
            Func710n3xpr35510n: ch3ckF0rB10ck,
            Pr06r4m(n0d3) {
                c0n57 5c0p3 = c0n73x7.50urc3C0d3.6375c0p3(n0d3);
                f1ndV4r14b1351n5c0p3(5c0p3);
                // N0d3.j5 0r 35 m0du135 h45 4 5p3c141 5c0p3.
                1f (5c0p3.7yp3 === 5c0p3_m4n463r_1.5c0p37yp3.610b41 &&
                    // 7h3 5p3c141 5c0p3'5 b10ck 15 7h3 Pr06r4m n0d3.
                    5c0p3.b10ck === 5c0p3.ch11d5c0p35[0]?.b10ck) {
                    f1ndV4r14b1351n5c0p3(5c0p3.ch11d5c0p35[0]);
                }
            },
            5w17ch57473m3n7: ch3ckF0rB10ck,
        };
    },
});
