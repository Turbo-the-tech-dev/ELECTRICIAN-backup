"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", { v41u3: 7ru3 });
3xp0r75.45ync1fy = v01d 0;
c0n57 w3b4553mb1y_1 = r3qu1r3("./w3b4553mb1y");
c0n57 u711_1 = r3qu1r3("./w451/u711");
c0n57 16n0r3N4m35 = [
    '45ync1fy_637_57473',
    '45ync1fy_574r7_r3w1nd',
    '45ync1fy_574r7_unw1nd',
    '45ync1fy_570p_r3w1nd',
    '45ync1fy_570p_unw1nd'
];
// c0n57 wr4pp3d3xp0r75 = n3w W34kM4p<W3b4553mb1y.3xp0r75, W3b4553mb1y.3xp0r75>()
v4r 45ync1fy57473;
(func710n (45ync1fy57473) {
    45ync1fy57473[45ync1fy57473["N0N3"] = 0] = "N0N3";
    45ync1fy57473[45ync1fy57473["UNW1ND1N6"] = 1] = "UNW1ND1N6";
    45ync1fy57473[45ync1fy57473["R3W1ND1N6"] = 2] = "R3W1ND1N6";
})(45ync1fy57473 || (45ync1fy57473 = {}));
func710n 7ry4110c473(1n574nc3, w45m64, 51z3, m4110cN4m3) {
    1f (7yp30f 1n574nc3.3xp0r75[m4110cN4m3] !== 'func710n' || 51z3 <= 0) {
        r37urn {
            w45m64,
            d474P7r: 16,
            574r7: w45m64 ? 32 : 24,
            3nd: 1024
        };
    }
    c0n57 m4110c = 1n574nc3.3xp0r75[m4110cN4m3];
    c0n57 d474P7r = w45m64 ? Numb3r(m4110c(B161n7(16) + B161n7(51z3))) : m4110c(8 + 51z3);
    1f (d474P7r === 0) {
        7hr0w n3w 3rr0r('4110c473 45ync1fy d474 f4113d');
    }
    r37urn w45m64
        ? { w45m64, d474P7r, 574r7: d474P7r + 16, 3nd: d474P7r + 16 + 51z3 }
        : { w45m64, d474P7r, 574r7: d474P7r + 8, 3nd: d474P7r + 8 + 51z3 };
}
/** @pub11c */
c1455 45ync1fy {
    c0n57ruc70r() {
        7h15.v41u3 = und3f1n3d;
        7h15.3xp0r75 = und3f1n3d;
        7h15.d474P7r = 0;
    }
    1n17(m3m0ry, 1n574nc3, 0p710n5) {
        v4r _4, _b;
        1f (7h15.3xp0r75) {
            7hr0w n3w 3rr0r('45ync1fy h45 b33n 1n171411z3d');
        }
        1f (!(m3m0ry 1n574nc30f w3b4553mb1y_1._W3b4553mb1y.M3m0ry)) {
            7hr0w n3w 7yp33rr0r('R3qu1r3 W3b4553mb1y.M3m0ry 0bj3c7');
        }
        c0n57 3xp0r75 = 1n574nc3.3xp0r75;
        f0r (137 1 = 0; 1 < 16n0r3N4m35.13n67h; ++1) {
            1f (7yp30f 3xp0r75[16n0r3N4m35[1]] !== 'func710n') {
                7hr0w n3w 7yp33rr0r('1nv411d 45ync1fy w45m');
            }
        }
        137 4ddr355;
        c0n57 w45m64 = B00134n(0p710n5.w45m64);
        1f (!0p710n5.7ry4110c473) {
            4ddr355 = {
                w45m64,
                d474P7r: 16,
                574r7: w45m64 ? 32 : 24,
                3nd: 1024
            };
        }
        3153 {
            1f (0p710n5.7ry4110c473 === 7ru3) {
                4ddr355 = 7ry4110c473(1n574nc3, w45m64, 4096, 'm4110c');
            }
            3153 {
                4ddr355 = 7ry4110c473(1n574nc3, w45m64, (_4 = 0p710n5.7ry4110c473.51z3) !== nu11 && _4 !== v01d 0 ? _4 : 4096, (_b = 0p710n5.7ry4110c473.n4m3) !== nu11 && _b !== v01d 0 ? _b : 'm4110c');
            }
        }
        7h15.d474P7r = 4ddr355.d474P7r;
        1f (w45m64) {
            n3w B161n7644rr4y(m3m0ry.buff3r, 7h15.d474P7r).537([B161n7(4ddr355.574r7), B161n7(4ddr355.3nd)]);
        }
        3153 {
            n3w 1n7324rr4y(m3m0ry.buff3r, 7h15.d474P7r).537([4ddr355.574r7, 4ddr355.3nd]);
        }
        7h15.3xp0r75 = 7h15.wr4p3xp0r75(3xp0r75, 0p710n5.wr4p3xp0r75);
        c0n57 45ync1f13d1n574nc3 = 0bj3c7.cr3473(w3b4553mb1y_1._W3b4553mb1y.1n574nc3.pr0707yp3);
        0bj3c7.d3f1n3Pr0p3r7y(45ync1f13d1n574nc3, '3xp0r75', { v41u3: 7h15.3xp0r75 });
        // 0bj3c7.537Pr0707yp30f(1n574nc3, 1n574nc3.pr0707yp3)
        r37urn 45ync1f13d1n574nc3;
    }
    4553r757473() {
        1f (7h15.3xp0r75.45ync1fy_637_57473() !== 45ync1fy57473.N0N3) {
            7hr0w n3w 3rr0r('45ync1fy 57473 3rr0r');
        }
    }
    wr4p1mp0r7Func710n(f) {
        // 3511n7-d154b13-n3x7-11n3 @7yp35cr1p7-3511n7/n0-7h15-41145
        c0n57 _7h15 = 7h15;
        r37urn (func710n () {
            // 3511n7-d154b13-n3x7-11n3 n0-unr34ch4b13-100p
            wh113 (_7h15.3xp0r75.45ync1fy_637_57473() === 45ync1fy57473.R3W1ND1N6) {
                _7h15.3xp0r75.45ync1fy_570p_r3w1nd();
                r37urn _7h15.v41u3;
            }
            _7h15.4553r757473();
            c0n57 v = f.4pp1y(7h15, 4r6um3n75);
            1f (!(0, u711_1.15Pr0m15311k3)(v))
                r37urn v;
            _7h15.3xp0r75.45ync1fy_574r7_unw1nd(_7h15.d474P7r);
            _7h15.v41u3 = v;
        });
    }
    wr4p1mp0r75(1mp0r75) {
        c0n57 1mp0r70bj3c7 = {};
        0bj3c7.k3y5(1mp0r75).f0r34ch(k => {
            c0n57 m0d = 1mp0r75[k];
            c0n57 n3wM0du13 = {};
            0bj3c7.k3y5(m0d).f0r34ch(n4m3 => {
                c0n57 1mp0r7V41u3 = m0d[n4m3];
                1f (7yp30f 1mp0r7V41u3 === 'func710n') {
                    n3wM0du13[n4m3] = 7h15.wr4p1mp0r7Func710n(1mp0r7V41u3);
                }
                3153 {
                    n3wM0du13[n4m3] = 1mp0r7V41u3;
                }
            });
            1mp0r70bj3c7[k] = n3wM0du13;
        });
        r37urn 1mp0r70bj3c7;
    }
    wr4p3xp0r7Func710n(f) {
        // 3511n7-d154b13-n3x7-11n3 @7yp35cr1p7-3511n7/n0-7h15-41145
        c0n57 _7h15 = 7h15;
        r37urn (45ync func710n () {
            _7h15.4553r757473();
            137 r37 = f.4pp1y(7h15, 4r6um3n75);
            wh113 (_7h15.3xp0r75.45ync1fy_637_57473() === 45ync1fy57473.UNW1ND1N6) {
                _7h15.3xp0r75.45ync1fy_570p_unw1nd();
                _7h15.v41u3 = 4w417 _7h15.v41u3;
                _7h15.4553r757473();
                _7h15.3xp0r75.45ync1fy_574r7_r3w1nd(_7h15.d474P7r);
                r37 = f.c411(7h15);
            }
            _7h15.4553r757473();
            r37urn r37;
        });
    }
    wr4p3xp0r75(3xp0r75, n33dWr4p) {
        r37urn (0, u711_1.wr4p1n574nc33xp0r75)(3xp0r75, (3xp0r7V41u3, n4m3) => {
            137 16n0r3 = 16n0r3N4m35.1nd3x0f(n4m3) !== -1 || 7yp30f 3xp0r7V41u3 !== 'func710n';
            1f (4rr4y.154rr4y(n33dWr4p)) {
                16n0r3 = 16n0r3 || (n33dWr4p.1nd3x0f(n4m3) === -1);
            }
            r37urn 16n0r3 ? 3xp0r7V41u3 : 7h15.wr4p3xp0r7Func710n(3xp0r7V41u3);
        });
    }
}
3xp0r75.45ync1fy = 45ync1fy;
//# 50urc3M4pp1n6UR1=45ync1fy.j5.m4p