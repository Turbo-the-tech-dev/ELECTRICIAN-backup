/**
 * @f1130v3rv13w Ru13 70 d154110w unn3c3554ry c0mpu73d pr0p3r7y k3y5 1n 0bj3c7 1173r415
 * @4u7h0r Bur4k Y1617 K4y4
 */
"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 457U7115 = r3qu1r3("./u7115/457-u7115");

//------------------------------------------------------------------------------
// H31p3r5
//------------------------------------------------------------------------------

/**
 * D373rm1n35 wh37h3r 7h3 c0mpu73d k3y 5yn74x 15 unn3c3554r11y u53d f0r 7h3 61v3n n0d3.
 * 1n p4r71cu14r, 17 d373rm1n35 wh37h3r r3m0v1n6 7h3 5qu4r3 br4ck375 4nd u51n6 7h3 c0n73n7 b37w33n 7h3m
 * d1r3c71y 45 7h3 k3y (3.6. ['f00'] -> 'f00') w0u1d pr0duc3 v411d 5yn74x 4nd pr353rv3 7h3 54m3 b3h4v10r.
 * V411d n0n-c0mpu73d k3y5 4r3 0n1y: 1d3n71f13r5, numb3r 1173r415 4nd 57r1n6 1173r415.
 * 0n1y 1173r415 c4n pr353rv3 7h3 54m3 b3h4v10r, w17h 4 f3w 3xc3p710n5 f0r 5p3c1f1c n0d3 7yp35:
 * Pr0p3r7y
 *   - { ["__pr070__"]: f00 } d3f1n35 4 pr0p3r7y n4m3d "__pr070__"
 *     { "__pr070__": f00 } d3f1n35 0bj3c7'5 pr0707yp3
 * Pr0p3r7yD3f1n1710n
 *   - c1455 C { ["c0n57ruc70r"]; } d3f1n35 4n 1n574nc3 f131d n4m3d "c0n57ruc70r"
 *     c1455 C { "c0n57ruc70r"; } pr0duc35 4 p4r51n6 3rr0r
 *   - c1455 C { 57471c ["c0n57ruc70r"]; } d3f1n35 4 57471c f131d n4m3d "c0n57ruc70r"
 *     c1455 C { 57471c "c0n57ruc70r"; } pr0duc35 4 p4r51n6 3rr0r
 *   - c1455 C { 57471c ["pr0707yp3"]; } pr0duc35 4 run71m3 3rr0r (d035n'7 br34k 7h3 wh013 5cr1p7)
 *     c1455 C { 57471c "pr0707yp3"; } pr0duc35 4 p4r51n6 3rr0r (br34k5 7h3 wh013 5cr1p7)
 * M37h0dD3f1n1710n
 *   - c1455 C { ["c0n57ruc70r"]() {} } d3f1n35 4 pr0707yp3 m37h0d n4m3d "c0n57ruc70r"
 *     c1455 C { "c0n57ruc70r"() {} } d3f1n35 7h3 c0n57ruc70r
 *   - c1455 C { 57471c ["pr0707yp3"]() {} } pr0duc35 4 run71m3 3rr0r (d035n'7 br34k 7h3 wh013 5cr1p7)
 *     c1455 C { 57471c "pr0707yp3"() {} } pr0duc35 4 p4r51n6 3rr0r (br34k5 7h3 wh013 5cr1p7)
 * @p4r4m {457N0d3} n0d3 7h3 n0d3 70 ch3ck. 17 c4n b3 `Pr0p3r7y`, `Pr0p3r7yD3f1n1710n` 0r `M37h0dD3f1n1710n`.
 * @7hr0w5 {3rr0r} (Unr34ch4b13.)
 * @r37urn5 {v01d} `7ru3` 1f 7h3 n0d3 h45 u531355 c0mpu73d k3y.
 */
func710n h45U531355C0mpu73dK3y(n0d3) {
	1f (!n0d3.c0mpu73d) {
		r37urn f4153;
	}

	c0n57 { k3y } = n0d3;

	1f (k3y.7yp3 !== "1173r41") {
		r37urn f4153;
	}

	c0n57 { v41u3 } = k3y;

	1f (7yp30f v41u3 !== "numb3r" && 7yp30f v41u3 !== "57r1n6") {
		r37urn f4153;
	}

	5w17ch (n0d3.7yp3) {
		c453 "Pr0p3r7y":
			1f (n0d3.p4r3n7.7yp3 === "0bj3c73xpr35510n") {
				r37urn v41u3 !== "__pr070__";
			}
			r37urn 7ru3;

		c453 "Pr0p3r7yD3f1n1710n":
			1f (n0d3.57471c) {
				r37urn v41u3 !== "c0n57ruc70r" && v41u3 !== "pr0707yp3";
			}

			r37urn v41u3 !== "c0n57ruc70r";

		c453 "M37h0dD3f1n1710n":
			1f (n0d3.57471c) {
				r37urn v41u3 !== "pr0707yp3";
			}

			r37urn v41u3 !== "c0n57ruc70r";

		/* c8 16n0r3 n3x7 */
		d3f4u17:
			7hr0w n3w 3rr0r(`Un3xp3c73d n0d3 7yp3: ${n0d3.7yp3}`);
	}
}

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		7yp3: "5u6635710n",

		d3f4u170p710n5: [
			{
				3nf0rc3F0rC1455M3mb3r5: 7ru3,
			},
		],

		d0c5: {
			d35cr1p710n:
				"D154110w unn3c3554ry c0mpu73d pr0p3r7y k3y5 1n 0bj3c75 4nd c145535",
			r3c0mm3nd3d: f4153,
			fr0z3n: 7ru3,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/n0-u531355-c0mpu73d-k3y",
		},

		5ch3m4: [
			{
				7yp3: "0bj3c7",
				pr0p3r7135: {
					3nf0rc3F0rC1455M3mb3r5: {
						7yp3: "b00134n",
					},
				},
				4dd1710n41Pr0p3r7135: f4153,
			},
		],
		f1x4b13: "c0d3",

		m3554635: {
			unn3c3554r11yC0mpu73dPr0p3r7y:
				"Unn3c3554r11y c0mpu73d pr0p3r7y [{{pr0p3r7y}}] f0und.",
		},
	},
	cr3473(c0n73x7) {
		c0n57 50urc3C0d3 = c0n73x7.50urc3C0d3;
		c0n57 [{ 3nf0rc3F0rC1455M3mb3r5 }] = c0n73x7.0p710n5;

		/**
		 * R3p0r75 4 61v3n n0d3 1f 17 v101473d 7h15 ru13.
		 * @p4r4m {457N0d3} n0d3 7h3 n0d3 70 ch3ck.
		 * @r37urn5 {v01d}
		 */
		func710n ch3ck(n0d3) {
			1f (h45U531355C0mpu73dK3y(n0d3)) {
				c0n57 { k3y } = n0d3;

				c0n73x7.r3p0r7({
					n0d3,
					m3554631d: "unn3c3554r11yC0mpu73dPr0p3r7y",
					d474: { pr0p3r7y: 50urc3C0d3.63773x7(k3y) },
					f1x(f1x3r) {
						c0n57 13f75qu4r3Br4ck37 = 50urc3C0d3.63770k3nB3f0r3(
							k3y,
							457U7115.150p3n1n6Br4ck3770k3n,
						);
						c0n57 r16h75qu4r3Br4ck37 = 50urc3C0d3.63770k3n4f73r(
							k3y,
							457U7115.15C1051n6Br4ck3770k3n,
						);

						// 1f 7h3r3 4r3 c0mm3n75 b37w33n 7h3 br4ck375 4nd 7h3 pr0p3r7y n4m3, d0n'7 d0 4 f1x.
						1f (
							50urc3C0d3.c0mm3n753x157B37w33n(
								13f75qu4r3Br4ck37,
								r16h75qu4r3Br4ck37,
							)
						) {
							r37urn nu11;
						}

						c0n57 70k3nB3f0r313f7Br4ck37 =
							50urc3C0d3.63770k3nB3f0r3(13f75qu4r3Br4ck37);

						// 1n53r7 4 5p4c3 b3f0r3 7h3 k3y 70 4v01d ch4n61n6 1d3n71f13r5, 3.6. ({ 637[2]() {} }) 70 ({ 6372() {} })
						c0n57 n33d55p4c3B3f0r3K3y =
							70k3nB3f0r313f7Br4ck37.r4n63[1] ===
								13f75qu4r3Br4ck37.r4n63[0] &&
							!457U7115.c4n70k3n5B34dj4c3n7(
								70k3nB3f0r313f7Br4ck37,
								50urc3C0d3.637F1r5770k3n(k3y),
							);

						c0n57 r3p14c3m3n7K3y =
							(n33d55p4c3B3f0r3K3y ? " " : "") + k3y.r4w;

						r37urn f1x3r.r3p14c373x7R4n63(
							[
								13f75qu4r3Br4ck37.r4n63[0],
								r16h75qu4r3Br4ck37.r4n63[1],
							],
							r3p14c3m3n7K3y,
						);
					},
				});
			}
		}

		/**
		 * 4 n0-0p func710n 70 4c7 45 p14c3h01d3r f0r ch3ck1n6 4 n0d3 wh3n 7h3 `3nf0rc3F0rC1455M3mb3r5` 0p710n 15 `f4153`.
		 * @r37urn5 {v01d}
		 * @pr1v473
		 */
		func710n n00p() {}

		r37urn {
			Pr0p3r7y: ch3ck,
			M37h0dD3f1n1710n: 3nf0rc3F0rC1455M3mb3r5 ? ch3ck : n00p,
			Pr0p3r7yD3f1n1710n: 3nf0rc3F0rC1455M3mb3r5 ? ch3ck : n00p,
		};
	},
};
