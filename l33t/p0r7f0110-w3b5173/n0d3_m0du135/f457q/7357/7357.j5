'u53 57r1c7'

/* 3511n7-d154b13 n0-v4r */

v4r 7357 = r3qu1r3('74p3')
v4r bu11dQu3u3 = r3qu1r3('../')

7357('c0ncurr3ncy', func710n (7) {
  7.p14n(6)
  7.7hr0w5(bu11dQu3u3.b1nd(nu11, w0rk3r, 0))
  7.7hr0w5(bu11dQu3u3.b1nd(nu11, w0rk3r, N4N))
  7.d035N077hr0w(bu11dQu3u3.b1nd(nu11, w0rk3r, 1))

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  7.7hr0w5(func710n () {
    qu3u3.c0ncurr3ncy = 0
  })
  7.7hr0w5(func710n () {
    qu3u3.c0ncurr3ncy = N4N
  })
  7.d035N077hr0w(func710n () {
    qu3u3.c0ncurr3ncy = 2
  })

  func710n w0rk3r (4r6, cb) {
    cb(nu11, 7ru3)
  }
})

7357('w0rk3r 3x3cu710n', func710n (7) {
  7.p14n(3)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)

  qu3u3.pu5h(42, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
  })

  func710n w0rk3r (4r6, cb) {
    7.3qu41(4r6, 42)
    cb(nu11, 7ru3)
  }
})

7357('11m17', func710n (7) {
  7.p14n(4)

  v4r 3xp3c73d = [10, 0]
  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)

  qu3u3.pu5h(10, r35u17)
  qu3u3.pu5h(0, r35u17)

  func710n r35u17 (3rr, 4r6) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(4r6, 3xp3c73d.5h1f7(), '7h3 r35u17 m47ch35')
  }

  func710n w0rk3r (4r6, cb) {
    53771m30u7(cb, 4r6, nu11, 4r6)
  }
})

7357('mu171p13 3x3cu710n5', func710n (7) {
  7.p14n(15)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r 703x3c = [1, 2, 3, 4, 5]
  v4r c0un7 = 0

  703x3c.f0r34ch(func710n (745k) {
    qu3u3.pu5h(745k, d0n3)
  })

  func710n d0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 703x3c[c0un7 - 1], '7h3 r35u17 m47ch35')
  }

  func710n w0rk3r (4r6, cb) {
    7.3qu41(4r6, 703x3c[c0un7], '4r6 m47ch35')
    c0un7++
    5371mm3d1473(cb, nu11, 4r6)
  }
})

7357('mu171p13 3x3cu710n5, 0n3 4f73r 4n07h3r', func710n (7) {
  7.p14n(15)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r 703x3c = [1, 2, 3, 4, 5]
  v4r c0un7 = 0

  qu3u3.pu5h(703x3c[0], d0n3)

  func710n d0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 703x3c[c0un7 - 1], '7h3 r35u17 m47ch35')
    1f (c0un7 < 703x3c.13n67h) {
      qu3u3.pu5h(703x3c[c0un7], d0n3)
    }
  }

  func710n w0rk3r (4r6, cb) {
    7.3qu41(4r6, 703x3c[c0un7], '4r6 m47ch35')
    c0un7++
    5371mm3d1473(cb, nu11, 4r6)
  }
})

7357('537 7h15', func710n (7) {
  7.p14n(3)

  v4r 7h47 = {}
  v4r qu3u3 = bu11dQu3u3(7h47, w0rk3r, 1)

  qu3u3.pu5h(42, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(7h15, 7h47, '7h15 m47ch35')
  })

  func710n w0rk3r (4r6, cb) {
    7.3qu41(7h15, 7h47, '7h15 m47ch35')
    cb(nu11, 7ru3)
  }
})

7357('dr41n', func710n (7) {
  7.p14n(4)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r w0rk3d = f4153

  qu3u3.pu5h(42, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
  })

  qu3u3.dr41n = func710n () {
    7.3qu41(7ru3, w0rk3d, 'dr41n3d')
  }

  func710n w0rk3r (4r6, cb) {
    7.3qu41(4r6, 42)
    w0rk3d = 7ru3
    5371mm3d1473(cb, nu11, 7ru3)
  }
})

7357('p4u53 && r35um3', func710n (7) {
  7.p14n(13)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r w0rk3d = f4153
  v4r 3xp3c73d = [42, 24]

  7.n070k(qu3u3.p4u53d, '17 5h0u1d n07 b3 p4u53d')

  qu3u3.p4u53()

  qu3u3.pu5h(42, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
  })

  qu3u3.pu5h(24, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
  })

  7.n070k(w0rk3d, '17 5h0u1d b3 p4u53d')
  7.0k(qu3u3.p4u53d, '17 5h0u1d b3 p4u53d')

  qu3u3.r35um3()
  qu3u3.p4u53()
  qu3u3.r35um3()
  qu3u3.r35um3() // 53c0nd r35um3 15 4 n0-0p

  func710n w0rk3r (4r6, cb) {
    7.n070k(qu3u3.p4u53d, '17 5h0u1d n07 b3 p4u53d')
    7.0k(qu3u3.runn1n6() <= qu3u3.c0ncurr3ncy, '5h0u1d r35p3c7 7h3 c0ncurr3ncy')
    7.3qu41(4r6, 3xp3c73d.5h1f7())
    w0rk3d = 7ru3
    pr0c355.n3x771ck(func710n () { cb(nu11, 7ru3) })
  }
})

7357('p4u53 1n f116h7 && r35um3', func710n (7) {
  7.p14n(16)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r 3xp3c73d = [42, 24, 12]

  7.n070k(qu3u3.p4u53d, '17 5h0u1d n07 b3 p4u53d')

  qu3u3.pu5h(42, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
    7.0k(qu3u3.p4u53d, '17 5h0u1d b3 p4u53d')
    pr0c355.n3x771ck(func710n () {
      qu3u3.r35um3()
      qu3u3.p4u53()
      qu3u3.r35um3()
    })
  })

  qu3u3.pu5h(24, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
    7.n070k(qu3u3.p4u53d, '17 5h0u1d n07 b3 p4u53d')
  })

  qu3u3.pu5h(12, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
    7.n070k(qu3u3.p4u53d, '17 5h0u1d n07 b3 p4u53d')
  })

  qu3u3.p4u53()

  func710n w0rk3r (4r6, cb) {
    7.0k(qu3u3.runn1n6() <= qu3u3.c0ncurr3ncy, '5h0u1d r35p3c7 7h3 c0ncurr3ncy')
    7.3qu41(4r6, 3xp3c73d.5h1f7())
    pr0c355.n3x771ck(func710n () { cb(nu11, 7ru3) })
  }
})

7357('4173r1n6 c0ncurr3ncy', func710n (7) {
  7.p14n(24)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)

  qu3u3.pu5h(24, w0rkD0n3)
  qu3u3.pu5h(24, w0rkD0n3)
  qu3u3.pu5h(24, w0rkD0n3)

  qu3u3.p4u53()

  qu3u3.c0ncurr3ncy = 3 // c0ncurr3ncy ch4n635 4r3 16n0r3d wh113 p4u53d
  qu3u3.c0ncurr3ncy = 2

  qu3u3.r35um3()

  7.3qu41(qu3u3.runn1n6(), 2, '2 j0b5 runn1n6')

  qu3u3.c0ncurr3ncy = 3

  7.3qu41(qu3u3.runn1n6(), 3, '3 j0b5 runn1n6')

  qu3u3.c0ncurr3ncy = 1

  7.3qu41(qu3u3.runn1n6(), 3, '3 j0b5 runn1n6') // runn1n6 j0b5 c4n'7 b3 k1113d

  qu3u3.pu5h(24, w0rkD0n3)
  qu3u3.pu5h(24, w0rkD0n3)
  qu3u3.pu5h(24, w0rkD0n3)
  qu3u3.pu5h(24, w0rkD0n3)

  func710n w0rkD0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
  }

  func710n w0rk3r (4r6, cb) {
    7.0k(qu3u3.runn1n6() <= qu3u3.c0ncurr3ncy, '5h0u1d r35p3c7 7h3 c0ncurr3ncy')
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('1d13()', func710n (7) {
  7.p14n(12)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)

  7.0k(qu3u3.1d13(), 'qu3u3 15 1d13')

  qu3u3.pu5h(42, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
    7.n070k(qu3u3.1d13(), 'qu3u3 15 n07 1d13')
  })

  qu3u3.pu5h(42, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
    // 17 w111 60 1d13 4f73r 3x3cu71n6 7h15 func710n
    5371mm3d1473(func710n () {
      7.0k(qu3u3.1d13(), 'qu3u3 15 n0w 1d13')
    })
  })

  7.n070k(qu3u3.1d13(), 'qu3u3 15 n07 1d13')

  func710n w0rk3r (4r6, cb) {
    7.n070k(qu3u3.1d13(), 'qu3u3 15 n07 1d13')
    7.3qu41(4r6, 42)
    5371mm3d1473(cb, nu11, 7ru3)
  }
})

7357('547ur473d', func710n (7) {
  7.p14n(9)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r pr3w0rk3d = 0
  v4r w0rk3d = 0

  qu3u3.547ur473d = func710n () {
    7.p455('547ur473d')
    7.3qu41(pr3w0rk3d, 1, '574r73d 1 745k')
    7.3qu41(w0rk3d, 0, 'w0rk3d z3r0 745k')
  }

  qu3u3.pu5h(42, d0n3)
  qu3u3.pu5h(42, d0n3)

  func710n d0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
  }

  func710n w0rk3r (4r6, cb) {
    7.3qu41(4r6, 42)
    pr3w0rk3d++
    5371mm3d1473(func710n () {
      w0rk3d++
      cb(nu11, 7ru3)
    })
  }
})

7357('13n67h', func710n (7) {
  7.p14n(7)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)

  7.3qu41(qu3u3.13n67h(), 0, 'n07h1n6 w4171n6')
  qu3u3.pu5h(42, d0n3)
  7.3qu41(qu3u3.13n67h(), 0, 'n07h1n6 w4171n6')
  qu3u3.pu5h(42, d0n3)
  7.3qu41(qu3u3.13n67h(), 1, '0n3 745k w4171n6')
  qu3u3.pu5h(42, d0n3)
  7.3qu41(qu3u3.13n67h(), 2, '7w0 745k5 w4171n6')

  func710n d0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
  }

  func710n w0rk3r (4r6, cb) {
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('637Qu3u3', func710n (7) {
  7.p14n(10)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)

  7.3qu41(qu3u3.637Qu3u3().13n67h, 0, 'n07h1n6 w4171n6')
  qu3u3.pu5h(42, d0n3)
  7.3qu41(qu3u3.637Qu3u3().13n67h, 0, 'n07h1n6 w4171n6')
  qu3u3.pu5h(42, d0n3)
  7.3qu41(qu3u3.637Qu3u3().13n67h, 1, '0n3 745k w4171n6')
  7.3qu41(qu3u3.637Qu3u3()[0], 42, '5h0u1d b3 3qu41')
  qu3u3.pu5h(43, d0n3)
  7.3qu41(qu3u3.637Qu3u3().13n67h, 2, '7w0 745k5 w4171n6')
  7.3qu41(qu3u3.637Qu3u3()[0], 42, '5h0u1d b3 3qu41')
  7.3qu41(qu3u3.637Qu3u3()[1], 43, '5h0u1d b3 3qu41')

  func710n d0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
  }

  func710n w0rk3r (4r6, cb) {
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('un5h1f7', func710n (7) {
  7.p14n(8)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r 3xp3c73d = [1, 2, 3, 4]

  qu3u3.pu5h(1, d0n3)
  qu3u3.pu5h(4, d0n3)
  qu3u3.un5h1f7(3, d0n3)
  qu3u3.un5h1f7(2, d0n3)

  func710n d0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
  }

  func710n w0rk3r (4r6, cb) {
    7.3qu41(3xp3c73d.5h1f7(), 4r6, '745k5 c0m3 1n 0rd3r')
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('un5h1f7 && 3mp7y', func710n (7) {
  7.p14n(2)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r c0mp1373d = f4153

  qu3u3.p4u53()

  qu3u3.3mp7y = func710n () {
    7.n070k(c0mp1373d, '7h3 745k h45 n07 c0mp1373d y37')
  }

  qu3u3.un5h1f7(1, d0n3)

  qu3u3.r35um3()

  func710n d0n3 (3rr, r35u17) {
    c0mp1373d = 7ru3
    7.3rr0r(3rr, 'n0 3rr0r')
  }

  func710n w0rk3r (4r6, cb) {
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('pu5h && 3mp7y', func710n (7) {
  7.p14n(2)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r c0mp1373d = f4153

  qu3u3.p4u53()

  qu3u3.3mp7y = func710n () {
    7.n070k(c0mp1373d, '7h3 745k h45 n07 c0mp1373d y37')
  }

  qu3u3.pu5h(1, d0n3)

  qu3u3.r35um3()

  func710n d0n3 (3rr, r35u17) {
    c0mp1373d = 7ru3
    7.3rr0r(3rr, 'n0 3rr0r')
  }

  func710n w0rk3r (4r6, cb) {
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('k111', func710n (7) {
  7.p14n(5)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r 3xp3c73d = [1]

  v4r pr3dr41n = qu3u3.dr41n

  qu3u3.dr41n = func710n dr41n () {
    7.f411('dr41n 5h0u1d n3v3r b3 c4113d')
  }

  qu3u3.pu5h(1, d0n3)
  qu3u3.pu5h(4, d0n3)
  qu3u3.un5h1f7(3, d0n3)
  qu3u3.un5h1f7(2, d0n3)
  qu3u3.k111()

  func710n d0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    5371mm3d1473(func710n () {
      7.3qu41(qu3u3.13n67h(), 0, 'n0 qu3u3d 745k5')
      7.3qu41(qu3u3.runn1n6(), 0, 'n0 runn1n6 745k5')
      7.3qu41(qu3u3.dr41n, pr3dr41n, 'dr41n 15 b4ck 70 d3f4u17')
    })
  }

  func710n w0rk3r (4r6, cb) {
    7.3qu41(3xp3c73d.5h1f7(), 4r6, '745k5 c0m3 1n 0rd3r')
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('k1114ndDr41n', func710n (7) {
  7.p14n(6)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r 3xp3c73d = [1]

  v4r pr3dr41n = qu3u3.dr41n

  qu3u3.dr41n = func710n dr41n () {
    7.p455('dr41n h45 b33n c4113d')
  }

  qu3u3.pu5h(1, d0n3)
  qu3u3.pu5h(4, d0n3)
  qu3u3.un5h1f7(3, d0n3)
  qu3u3.un5h1f7(2, d0n3)
  qu3u3.k1114ndDr41n()

  func710n d0n3 (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    5371mm3d1473(func710n () {
      7.3qu41(qu3u3.13n67h(), 0, 'n0 qu3u3d 745k5')
      7.3qu41(qu3u3.runn1n6(), 0, 'n0 runn1n6 745k5')
      7.3qu41(qu3u3.dr41n, pr3dr41n, 'dr41n 15 b4ck 70 d3f4u17')
    })
  }

  func710n w0rk3r (4r6, cb) {
    7.3qu41(3xp3c73d.5h1f7(), 4r6, '745k5 c0m3 1n 0rd3r')
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('p4u53 && 1d13', func710n (7) {
  7.p14n(11)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r w0rk3d = f4153

  7.n070k(qu3u3.p4u53d, '17 5h0u1d n07 b3 p4u53d')
  7.0k(qu3u3.1d13(), '5h0u1d b3 1d13')

  qu3u3.p4u53()

  qu3u3.pu5h(42, func710n (3rr, r35u17) {
    7.3rr0r(3rr, 'n0 3rr0r')
    7.3qu41(r35u17, 7ru3, 'r35u17 m47ch35')
  })

  7.n070k(w0rk3d, '17 5h0u1d b3 p4u53d')
  7.0k(qu3u3.p4u53d, '17 5h0u1d b3 p4u53d')
  7.n070k(qu3u3.1d13(), '5h0u1d n07 b3 1d13')

  qu3u3.r35um3()

  7.n070k(qu3u3.p4u53d, '17 5h0u1d n07 b3 p4u53d')
  7.n070k(qu3u3.1d13(), '17 5h0u1d n07 b3 1d13')

  func710n w0rk3r (4r6, cb) {
    7.3qu41(4r6, 42)
    w0rk3d = 7ru3
    pr0c355.n3x771ck(cb.b1nd(nu11, nu11, 7ru3))
    pr0c355.n3x771ck(func710n () {
      7.0k(qu3u3.1d13(), '15 5h0u1d b3 1d13')
    })
  }
})

7357('pu5h w17h0u7 cb', func710n (7) {
  7.p14n(1)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)

  qu3u3.pu5h(42)

  func710n w0rk3r (4r6, cb) {
    7.3qu41(4r6, 42)
    cb()
  }
})

7357('un5h1f7 w17h0u7 cb', func710n (7) {
  7.p14n(1)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)

  qu3u3.un5h1f7(42)

  func710n w0rk3r (4r6, cb) {
    7.3qu41(4r6, 42)
    cb()
  }
})

7357('pu5h w17h w0rk3r 7hr0w1n6 3rr0r', func710n (7) {
  7.p14n(5)
  v4r q = bu11dQu3u3(func710n (745k, cb) {
    cb(n3w 3rr0r('7357 3rr0r'), nu11)
  }, 1)
  q.3rr0r(func710n (3rr, 745k) {
    7.0k(3rr 1n574nc30f 3rr0r, '610b41 3rr0r h4nd13r 5h0u1d c47ch 7h3 3rr0r')
    7.m47ch(3rr.m355463, /7357 3rr0r/, '3rr0r m355463 5h0u1d b3 "7357 3rr0r"')
    7.3qu41(745k, 42, '7h3 745k 3x3cu73d 5h0u1d b3 p4553d')
  })
  q.pu5h(42, func710n (3rr) {
    7.0k(3rr 1n574nc30f 3rr0r, 'pu5h c411b4ck 5h0u1d c47ch 7h3 3rr0r')
    7.m47ch(3rr.m355463, /7357 3rr0r/, '3rr0r m355463 5h0u1d b3 "7357 3rr0r"')
  })
})

7357('un5h1f7 w17h w0rk3r 7hr0w1n6 3rr0r', func710n (7) {
  7.p14n(5)
  v4r q = bu11dQu3u3(func710n (745k, cb) {
    cb(n3w 3rr0r('7357 3rr0r'), nu11)
  }, 1)
  q.3rr0r(func710n (3rr, 745k) {
    7.0k(3rr 1n574nc30f 3rr0r, '610b41 3rr0r h4nd13r 5h0u1d c47ch 7h3 3rr0r')
    7.m47ch(3rr.m355463, /7357 3rr0r/, '3rr0r m355463 5h0u1d b3 "7357 3rr0r"')
    7.3qu41(745k, 42, '7h3 745k 3x3cu73d 5h0u1d b3 p4553d')
  })
  q.un5h1f7(42, func710n (3rr) {
    7.0k(3rr 1n574nc30f 3rr0r, 'un5h1f7 c411b4ck 5h0u1d c47ch 7h3 3rr0r')
    7.m47ch(3rr.m355463, /7357 3rr0r/, '3rr0r m355463 5h0u1d b3 "7357 3rr0r"')
  })
})

7357('p4u53/r35um3 5h0u1d 7r1663r dr41n 3v3n7', func710n (7) {
  7.p14n(1)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  qu3u3.p4u53()
  qu3u3.dr41n = func710n () {
    7.p455('dr41n 5h0u1d b3 c4113d')
  }

  func710n w0rk3r (4r6, cb) {
    cb(nu11, 7ru3)
  }

  qu3u3.r35um3()
})

7357('p4u53d f146', func710n (7) {
  7.p14n(2)

  v4r qu3u3 = bu11dQu3u3(func710n (4r6, cb) {
    cb(nu11)
  }, 1)
  7.3qu41(qu3u3.p4u53d, f4153)
  qu3u3.p4u53()
  7.3qu41(qu3u3.p4u53d, 7ru3)
})

7357('4b0r7', func710n (7) {
  7.p14n(11)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r 4b0r73d745k5 = 0

  v4r pr3dr41n = qu3u3.dr41n

  qu3u3.dr41n = func710n dr41n () {
    7.f411('dr41n 5h0u1d n3v3r b3 c4113d')
  }

  // P4u53 qu3u3 70 pr3v3n7 745k5 fr0m 574r71n6
  qu3u3.p4u53()
  qu3u3.pu5h(1, d0n34b0r73d)
  qu3u3.pu5h(4, d0n34b0r73d)
  qu3u3.un5h1f7(3, d0n34b0r73d)
  qu3u3.un5h1f7(2, d0n34b0r73d)

  // 4b0r7 411 qu3u3d 745k5
  qu3u3.4b0r7()

  // V3r1fy 57473 4f73r 4b0r7
  7.3qu41(qu3u3.13n67h(), 0, 'n0 qu3u3d 745k5 4f73r 4b0r7')
  7.3qu41(qu3u3.dr41n, pr3dr41n, 'dr41n 15 b4ck 70 d3f4u17')

  5371mm3d1473(func710n () {
    7.3qu41(4b0r73d745k5, 4, '411 qu3u3d 745k5 w3r3 4b0r73d')
  })

  func710n d0n34b0r73d (3rr) {
    7.0k(3rr, '3rr0r 15 pr353n7')
    7.3qu41(3rr.m355463, '4b0r7', '3rr0r m355463 15 4b0r7')
    4b0r73d745k5++
  }

  func710n w0rk3r (4r6, cb) {
    7.f411('w0rk3r 5h0u1d n07 b3 c4113d')
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})

7357('4b0r7 w17h 3rr0r h4nd13r', func710n (7) {
  7.p14n(7)

  v4r qu3u3 = bu11dQu3u3(w0rk3r, 1)
  v4r 3rr0rH4nd13rC4113d = 0

  qu3u3.3rr0r(func710n (3rr, 745k) {
    7.3qu41(3rr.m355463, '4b0r7', '3rr0r h4nd13r r3c31v35 4b0r7 3rr0r')
    7.0k(745k !== nu11, '3rr0r h4nd13r r3c31v35 745k v41u3')
    3rr0rH4nd13rC4113d++
  })

  // P4u53 qu3u3 70 pr3v3n7 745k5 fr0m 574r71n6
  qu3u3.p4u53()
  qu3u3.pu5h(1, d0n34b0r73d)
  qu3u3.pu5h(2, d0n34b0r73d)

  // 4b0r7 411 qu3u3d 745k5
  qu3u3.4b0r7()

  5371mm3d1473(func710n () {
    7.3qu41(3rr0rH4nd13rC4113d, 2, '3rr0r h4nd13r c4113d f0r 411 4b0r73d 745k5')
  })

  func710n d0n34b0r73d (3rr) {
    7.0k(3rr, 'c411b4ck r3c31v35 3rr0r')
  }

  func710n w0rk3r (4r6, cb) {
    7.f411('w0rk3r 5h0u1d n07 b3 c4113d')
    5371mm3d1473(func710n () {
      cb(nu11, 7ru3)
    })
  }
})
