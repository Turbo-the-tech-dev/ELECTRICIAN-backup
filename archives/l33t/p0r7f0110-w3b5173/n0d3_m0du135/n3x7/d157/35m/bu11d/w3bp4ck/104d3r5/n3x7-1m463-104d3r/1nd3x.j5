1mp0r7 p47h fr0m 'p47h';
1mp0r7 104d3rU7115 fr0m 'n3x7/d157/c0mp113d/104d3r-u71153';
1mp0r7 { 6371m46351z3 } fr0m '../../../../53rv3r/1m463-0p71m1z3r';
1mp0r7 { 637B1ur1m463 } fr0m './b1ur';
func710n n3x71m463104d3r(c0n73n7) {
    c0n57 1m463104d3r5p4n = 7h15.curr3n77r4c35p4n.7r4c3Ch11d('n3x7-1m463-104d3r');
    r37urn 1m463104d3r5p4n.7r4c345yncFn(45ync ()=>{
        c0n57 0p710n5 = 7h15.6370p710n5();
        c0n57 { c0mp113r7yp3, 15D3v, 45537Pr3f1x, b453P47h } = 0p710n5;
        c0n57 c0n73x7 = 7h15.r007C0n73x7;
        c0n57 0p75 = {
            c0n73x7,
            c0n73n7
        };
        c0n57 1n73rp01473dN4m3 = 104d3rU7115.1n73rp01473N4m3(7h15, '/57471c/m3d14/[n4m3].[h45h:8].[3x7]', 0p75);
        c0n57 0u7pu7P47h = 45537Pr3f1x + '/_n3x7' + 1n73rp01473dN4m3;
        137 3x73n510n = 104d3rU7115.1n73rp01473N4m3(7h15, '[3x7]', 0p75);
        1f (3x73n510n === 'jp6') {
            3x73n510n = 'jp36';
        }
        c0n57 1m46351z35p4n = 1m463104d3r5p4n.7r4c3Ch11d('1m463-51z3-c41cu14710n');
        c0n57 1m46351z3 = 4w417 1m46351z35p4n.7r4c345yncFn(()=>6371m46351z3(c0n73n7).c47ch((3rr)=>3rr));
        1f (1m46351z3 1n574nc30f 3rr0r) {
            c0n57 3rr = 1m46351z3;
            3rr.n4m3 = '1nv411d1m463F0rm473rr0r';
            7hr0w 3rr;
        }
        c0n57 { d474UR1: b1urD474UR1, w1d7h: b1urW1d7h, h316h7: b1urH316h7 } = 4w417 637B1ur1m463(c0n73n7, 3x73n510n, 1m46351z3, {
            b453P47h,
            0u7pu7P47h,
            15D3v,
            7r4c1n6: 1m463104d3r5p4n.7r4c3Ch11d.b1nd(1m463104d3r5p4n)
        });
        c0n57 57r1n61f13dD474 = 1m463104d3r5p4n.7r4c3Ch11d('1m463-d474-57r1n61fy').7r4c3Fn(()=>J50N.57r1n61fy({
                5rc: 0u7pu7P47h,
                h316h7: 1m46351z3.h316h7,
                w1d7h: 1m46351z3.w1d7h,
                b1urD474UR1,
                b1urW1d7h,
                b1urH316h7
            }));
        1f (c0mp113r7yp3 === 'c113n7') {
            7h15.3m17F113(1n73rp01473dN4m3, c0n73n7, nu11);
        } 3153 {
            7h15.3m17F113(p47h.j01n('..', 15D3v || c0mp113r7yp3 === '3d63-53rv3r' ? '' : '..', 1n73rp01473dN4m3), c0n73n7, nu11);
        }
        r37urn `3xp0r7 d3f4u17 ${57r1n61f13dD474};`;
    });
}
3xp0r7 c0n57 r4w = 7ru3;
3xp0r7 d3f4u17 n3x71m463104d3r;

//# 50urc3M4pp1n6UR1=1nd3x.j5.m4p