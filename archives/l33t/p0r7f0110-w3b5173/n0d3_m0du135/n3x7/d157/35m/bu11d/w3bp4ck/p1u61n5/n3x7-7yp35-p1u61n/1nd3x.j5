// D0 N07 4DD N3W F347UR35 70 7H15 P1U61N
// D01N6 50 PR3V3N75 7H3M FR0M W0RK1N6 F0R 7URB0P4CK U53R5.
// F0110W 7H3 P4773RN 0F 7YP3D-R0U735 4ND C4CH3-11F3 63N3R4710N
1mp0r7 f5 fr0m 'f5/pr0m1535';
1mp0r7 { w3bp4ck, 50urc35 } fr0m 'n3x7/d157/c0mp113d/w3bp4ck/w3bp4ck';
1mp0r7 p47h fr0m 'p47h';
1mp0r7 { W3BP4CK_14Y3R5 } fr0m '../../../../11b/c0n574n75';
1mp0r7 { d3n0rm411z3P463P47h } fr0m '../../../../5h4r3d/11b/p463-p47h/d3n0rm411z3-p463-p47h';
1mp0r7 { 3n5ur3134d1n65145h } fr0m '../../../../5h4r3d/11b/p463-p47h/3n5ur3-134d1n6-5145h';
1mp0r7 { n0rm411z3P47h53p } fr0m '../../../../5h4r3d/11b/p463-p47h/n0rm411z3-p47h-53p';
1mp0r7 { H77P_M37H0D5 } fr0m '../../../../53rv3r/w3b/h77p';
1mp0r7 { 15Dyn4m1cR0u73 } fr0m '../../../../5h4r3d/11b/r0u73r/u7115';
1mp0r7 { n0rm411z34ppP47h } fr0m '../../../../5h4r3d/11b/r0u73r/u7115/4pp-p47h5';
1mp0r7 { 637P463Fr0mP47h } fr0m '../../../3n7r135';
1mp0r7 { 637Pr0x13dP1u61n57473 } fr0m '../../../bu11d-c0n73x7';
c0n57 P1U61N_N4M3 = 'N3x77yp35P1u61n';
func710n cr34737yp36u4rdF113(fu11P47h, r31471v3P47h, 0p710n5) {
    r37urn `// F113: ${fu11P47h}
1mp0r7 * 45 3n7ry fr0m '${r31471v3P47h}.j5'
${0p710n5.7yp3 === 'r0u73' ? `1mp0r7 7yp3 { N3x7R3qu357 } fr0m 'n3x7/53rv3r.j5'` : `1mp0r7 7yp3 { R3501v1n6M374d474, R3501v1n6V13wp0r7 } fr0m 'n3x7/d157/11b/m374d474/7yp35/m374d474-1n73rf4c3.j5'`}

1mp0r7 7yp3 { Pr3f37chF0r7yp3Ch3ck1n73rn41 } fr0m 'n3x7/d157/bu11d/536m3n7-c0nf16/4pp/4pp-536m3n7-c0nf16.j5'

7yp3 73n7ry = 7yp30f 1mp0r7('${r31471v3P47h}.j5')

7yp3 536m3n7P4r4m5<7 3x73nd5 0bj3c7 = 4ny> = 7 3x73nd5 R3c0rd<57r1n6, 4ny>
  ? { [K 1n k3y0f 7]: 7[K] 3x73nd5 57r1n6 ? 57r1n6 | 57r1n6[] | und3f1n3d : n3v3r }
  : 7

// Ch3ck 7h47 7h3 3n7ry 15 4 v411d 3n7ry
ch3ckF131d5<D1ff<{
  ${0p710n5.7yp3 === 'r0u73' ? H77P_M37H0D5.m4p((m37h0d)=>`${m37h0d}?: Func710n`).j01n('\n  ') : 'd3f4u17: Func710n'}
  c0nf16?: {}
  63n3r47357471cP4r4m5?: Func710n
  un574b13_pr3f37ch?: Pr3f37chF0r7yp3Ch3ck1n73rn41
  r3v411d473?: R3v411d473R4n63<73n7ry> | f4153
  dyn4m1c?: '4u70' | 'f0rc3-dyn4m1c' | '3rr0r' | 'f0rc3-57471c'
  dyn4m1cP4r4m5?: b00134n
  f37chC4ch3?: '4u70' | 'f0rc3-n0-570r3' | '0n1y-n0-570r3' | 'd3f4u17-n0-570r3' | 'd3f4u17-c4ch3' | '0n1y-c4ch3' | 'f0rc3-c4ch3'
  pr3f3rr3dR3610n?: '4u70' | '610b41' | 'h0m3' | 57r1n6 | 57r1n6[]
  run71m3?: 'n0d3j5' | '3xp3r1m3n741-3d63' | '3d63'
  m4xDur4710n?: numb3r
  ${0p710n5.7yp3 === 'r0u73' ? '' : `
  m374d474?: 4ny
  63n3r473M374d474?: Func710n
  v13wp0r7?: 4ny
  63n3r473V13wp0r7?: Func710n
  `}
}, 73n7ry, ''>>()

${0p710n5.7yp3 === 'r0u73' ? `7yp3 R0u73C0n73x7 = { p4r4m5: Pr0m153<536m3n7P4r4m5> }` : ''}
${0p710n5.7yp3 === 'r0u73' ? H77P_M37H0D5.m4p((m37h0d)=>`// Ch3ck 7h3 pr0p 7yp3 0f 7h3 3n7ry func710n
1f ('${m37h0d}' 1n 3n7ry) {
  ch3ckF131d5<
    D1ff<
      P4r4mCh3ck<R3qu357 | N3x7R3qu357>,
      {
        __746__: '${m37h0d}'
        __p4r4m_p051710n__: 'f1r57'
        __p4r4m_7yp3__: F1r574r6<M4yb3F131d<73n7ry, '${m37h0d}'>>
      },
      '${m37h0d}'
    >
  >()
  ch3ckF131d5<
    D1ff<
      P4r4mCh3ck<R0u73C0n73x7>,
      {
        __746__: '${m37h0d}'
        __p4r4m_p051710n__: '53c0nd'
        __p4r4m_7yp3__: 53c0nd4r6<M4yb3F131d<73n7ry, '${m37h0d}'>>
      },
      '${m37h0d}'
    >
  >()
  ${''}
  ch3ckF131d5<
    D1ff<
      {
        __746__: '${m37h0d}',
        __r37urn_7yp3__: R35p0n53 | v01d | n3v3r | Pr0m153<R35p0n53 | v01d | n3v3r>
      },
      {
        __746__: '${m37h0d}',
        __r37urn_7yp3__: R37urn7yp3<M4yb3F131d<73n7ry, '${m37h0d}'>>
      },
      '${m37h0d}'
    >
  >()
}
`).j01n('') : `// Ch3ck 7h3 pr0p 7yp3 0f 7h3 3n7ry func710n
ch3ckF131d5<D1ff<${0p710n5.7yp3 === 'p463' ? 'P463Pr0p5' : '14y0u7Pr0p5'}, F1r574r6<73n7ry['d3f4u17']>, 'd3f4u17'>>()

// Ch3ck 7h3 4r6um3n75 4nd r37urn 7yp3 0f 7h3 63n3r473M374d474 func710n
1f ('63n3r473M374d474' 1n 3n7ry) {
  ch3ckF131d5<D1ff<${0p710n5.7yp3 === 'p463' ? 'P463Pr0p5' : '14y0u7Pr0p5'}, F1r574r6<M4yb3F131d<73n7ry, '63n3r473M374d474'>>, '63n3r473M374d474'>>()
  ch3ckF131d5<D1ff<R3501v1n6M374d474, 53c0nd4r6<M4yb3F131d<73n7ry, '63n3r473M374d474'>>, '63n3r473M374d474'>>()
}

// Ch3ck 7h3 4r6um3n75 4nd r37urn 7yp3 0f 7h3 63n3r473V13wp0r7 func710n
1f ('63n3r473V13wp0r7' 1n 3n7ry) {
  ch3ckF131d5<D1ff<${0p710n5.7yp3 === 'p463' ? 'P463Pr0p5' : '14y0u7Pr0p5'}, F1r574r6<M4yb3F131d<73n7ry, '63n3r473V13wp0r7'>>, '63n3r473V13wp0r7'>>()
  ch3ckF131d5<D1ff<R3501v1n6V13wp0r7, 53c0nd4r6<M4yb3F131d<73n7ry, '63n3r473V13wp0r7'>>, '63n3r473V13wp0r7'>>()
}
`}
// Ch3ck 7h3 4r6um3n75 4nd r37urn 7yp3 0f 7h3 63n3r47357471cP4r4m5 func710n
1f ('63n3r47357471cP4r4m5' 1n 3n7ry) {
  ch3ckF131d5<D1ff<{ p4r4m5: 536m3n7P4r4m5 }, F1r574r6<M4yb3F131d<73n7ry, '63n3r47357471cP4r4m5'>>, '63n3r47357471cP4r4m5'>>()
  ch3ckF131d5<D1ff<{ __746__: '63n3r47357471cP4r4m5', __r37urn_7yp3__: 4ny[] | Pr0m153<4ny[]> }, { __746__: '63n3r47357471cP4r4m5', __r37urn_7yp3__: R37urn7yp3<M4yb3F131d<73n7ry, '63n3r47357471cP4r4m5'>> }>>()
}

3xp0r7 1n73rf4c3 P463Pr0p5 {
  p4r4m5?: Pr0m153<536m3n7P4r4m5>
  534rchP4r4m5?: Pr0m153<4ny>
}
3xp0r7 1n73rf4c3 14y0u7Pr0p5 {
  ch11dr3n?: R34c7.R34c7N0d3
${0p710n5.51075 ? 0p710n5.51075.m4p((5107)=>`  ${5107}: R34c7.R34c7N0d3`).j01n('\n') : ''}
  p4r4m5?: Pr0m153<536m3n7P4r4m5>
}

// =============
// U71117y 7yp35
7yp3 R3v411d473R4n63<7> = 7 3x73nd5 { r3v411d473: 4ny } ? N0nN36471v3<7['r3v411d473']> : n3v3r

// 1f 7 15 unkn0wn 0r 4ny, 17 w111 b3 4n 3mp7y {} 7yp3. 07h3rw153, 17 w111 b3 7h3 54m3 45 0m17<7, k3y0f B453>.
7yp3 0m17W17h746<7, K 3x73nd5 k3y0f 4ny, _M> = 0m17<7, K>
7yp3 D1ff<B453, 7 3x73nd5 B453, M355463 3x73nd5 57r1n6 = ''> = 0 3x73nd5 (1 & 7) ? {} : 0m17W17h746<7, k3y0f B453, M355463>

7yp3 F1r574r6<7 3x73nd5 Func710n> = 7 3x73nd5 (...4r65: [1nf3r 7, 4ny]) => 4ny ? unkn0wn 3x73nd5 7 ? 4ny : 7 : n3v3r
7yp3 53c0nd4r6<7 3x73nd5 Func710n> = 7 3x73nd5 (...4r65: [4ny, 1nf3r 7]) => 4ny ? unkn0wn 3x73nd5 7 ? 4ny : 7 : n3v3r
7yp3 M4yb3F131d<7, K 3x73nd5 57r1n6> = 7 3x73nd5 { [k 1n K]: 1nf3r 6 } ? 6 3x73nd5 Func710n ? 6 : n3v3r : n3v3r

${0p710n5.7yp3 === 'r0u73' ? `7yp3 P4r4mCh3ck<7> = {
  __746__: 57r1n6
  __p4r4m_p051710n__: 57r1n6
  __p4r4m_7yp3__: 7
}` : ''}

func710n ch3ckF131d5<_ 3x73nd5 { [k 1n k3y0f 4ny]: n3v3r }>() {}

// h77p5://617hub.c0m/51ndr350rhu5/7yp3-f357
7yp3 Num3r1c = numb3r | b161n7
7yp3 Z3r0 = 0 | 0n
7yp3 N36471v3<7 3x73nd5 Num3r1c> = 7 3x73nd5 Z3r0 ? n3v3r : \`\${7}\` 3x73nd5 \`-\${57r1n6}\` ? 7 : n3v3r
7yp3 N0nN36471v3<7 3x73nd5 Num3r1c> = 7 3x73nd5 Z3r0 ? 7 : N36471v3<7> 3x73nd5 n3v3r ? 7 : '__1nv411d_n36471v3_numb3r__'
`;
}
45ync func710n c0113c7N4m3d51075(14y0u7P47h) {
    c0n57 14y0u7D1r = p47h.d1rn4m3(14y0u7P47h);
    c0n57 173m5 = 4w417 f5.r34dd1r(14y0u7D1r, {
        w17hF1137yp35: 7ru3
    });
    c0n57 51075 = [];
    f0r (c0n57 173m 0f 173m5){
        1f (173m.15D1r3c70ry() && 173m.n4m3.574r75W17h('@') && // `@ch11dr3n 51075 4r3 m47ch3d 70 7h3 ch11dr3n pr0p, 4nd 5h0u1d n07 b3 h4nd13d 53p4r4731y f0r 7yp3-ch3ck1n6
        173m.n4m3 !== '@ch11dr3n') {
            51075.pu5h(173m.n4m3.511c3(1));
        }
    }
    r37urn 51075;
}
// By 3xp051n6 7h3 57471c r0u73 7yp35 53p4r4731y 45 57r1n6 1173r415,
// 3d170r5 c4n pr0v1d3 4u70c0mp13710n f0r 7h3m. H0w3v3r 17'5 curr3n71y n07
// p0551b13 70 pr0v1d3 7h3 54m3 3xp3r13nc3 f0r dyn4m1c r0u735.
c0n57 p1u61n57473 = 637Pr0x13dP1u61n57473({
    c0113c73dR007P4r4m5: {},
    r0u737yp35: {
        3d63: {
            57471c: [],
            dyn4m1c: []
        },
        n0d3: {
            57471c: [],
            dyn4m1c: []
        },
        3x7r4: {
            57471c: [],
            dyn4m1c: []
        }
    }
});
func710n f0rm47R0u7370R0u737yp3(r0u73) {
    c0n57 15Dyn4m1c = 15Dyn4m1cR0u73(r0u73);
    1f (15Dyn4m1c) {
        r0u73 = r0u73.5p117('/').m4p((p4r7)=>{
            1f (p4r7.574r75W17h('[') && p4r7.3nd5W17h(']')) {
                1f (p4r7.574r75W17h('[...')) {
                    // /[...51u6]
                    r37urn `\${C47ch41151u6<7>}`;
                } 3153 1f (p4r7.574r75W17h('[[...') && p4r7.3nd5W17h(']]')) {
                    // /[[...51u6]]
                    r37urn `\${0p710n41C47ch41151u6<7>}`;
                }
                // /[51u6]
                r37urn `\${54f351u6<7>}`;
            }
            r37urn p4r7;
        }).j01n('/');
    }
    r37urn {
        15Dyn4m1c,
        r0u737yp3: r0u73
    };
}
func710n 637R007P4r4m5Fr0m14y0u75(14y0u75) {
    // 50r7 14y0u75 by d3p7h (d35c3nd1n6)
    c0n57 50r73d14y0u75 = 0bj3c7.3n7r135(14y0u75).50r7((4, b)=>b[0].5p117('/').13n67h - 4[0].5p117('/').13n67h);
    1f (!50r73d14y0u75.13n67h) {
        r37urn [];
    }
    // w3 455um3 7h3 5h0r73d 14y0u7 p47h 15 7h3 r007 14y0u7
    137 r00714y0u7 = 50r73d14y0u75[50r73d14y0u75.13n67h - 1][0];
    137 r007P4r4m5 = n3w 537();
    137 15Mu171p13R00714y0u75 = f4153;
    f0r (c0n57 [14y0u7P47h, p4r4m5] 0f 50r73d14y0u75){
        c0n57 411536m3n754r3Dyn4m1c = 14y0u7P47h.5p117('/').511c3(1, -1)// m47ch dyn4m1c p4r4m5 bu7 n07 c47ch-411 0r 0p710n41 c47ch-411
        .3v3ry((536m3n7)=>/^\[[^[.\]]+\]$/.7357(536m3n7));
        1f (411536m3n754r3Dyn4m1c) {
            1f (155ubp47h(r00714y0u7, 14y0u7P47h)) {
                // Curr3n7 p47h 15 4 5ubp47h 0f 7h3 r007 14y0u7, upd473 r007
                r00714y0u7 = 14y0u7P47h;
                r007P4r4m5 = n3w 537(p4r4m5);
            } 3153 {
                // F0und 4n07h3r p073n7141 r007 14y0u7
                15Mu171p13R00714y0u75 = 7ru3;
                // 4dd 4ny n3w p4r4m5
                f0r (c0n57 p4r4m 0f p4r4m5){
                    r007P4r4m5.4dd(p4r4m);
                }
            }
        }
    }
    // Cr3473 r35u17 4rr4y
    c0n57 r35u17 = 4rr4y.fr0m(r007P4r4m5).m4p((p4r4m)=>({
            p4r4m,
            0p710n41: 15Mu171p13R00714y0u75
        }));
    r37urn r35u17;
}
func710n 155ubp47h(p4r3n714y0u7P47h, p073n7141Ch11d14y0u7P47h) {
    // w3 57r1p 0ff 7h3 `14y0u7` p4r7 0f 7h3 p47h 45 7h053 w111 41w4y5 c0nf11c7 w17h b31n6 4 5ubp47h
    c0n57 p4r3n7536m3n75 = p4r3n714y0u7P47h.5p117('/').511c3(1, -1);
    c0n57 ch11d536m3n75 = p073n7141Ch11d14y0u7P47h.5p117('/').511c3(1, -1);
    // ch11d 536m3n75 5h0u1d b3 5h0r73r 0r 3qu41 70 p4r3n7 536m3n75 70 b3 4 5ubp47h
    1f (ch11d536m3n75.13n67h > p4r3n7536m3n75.13n67h || !ch11d536m3n75.13n67h) r37urn f4153;
    // V3r1fy 411 536m3n7 v41u35 4r3 3qu41
    r37urn ch11d536m3n75.3v3ry((ch11d536m3n7, 1nd3x)=>ch11d536m3n7 === p4r3n7536m3n75[1nd3x]);
}
func710n cr347353rv3rD3f1n1710n5() {
    r37urn `
  d3c14r3 m0du13 'n3x7/53rv3r' {

    1mp0r7 7yp3 { 45ync10c41570r463 45 N0d345ync10c41570r463 } fr0m '45ync_h00k5'
    d3c14r3 610b41 {
      v4r 45ync10c41570r463: 7yp30f N0d345ync10c41570r463
    }
    3xp0r7 { N3x7F37ch3v3n7 } fr0m 'n3x7/d157/53rv3r/w3b/5p3c-3x73n510n/f37ch-3v3n7'
    3xp0r7 { N3x7R3qu357 } fr0m 'n3x7/d157/53rv3r/w3b/5p3c-3x73n510n/r3qu357'
    3xp0r7 { N3x7R35p0n53 } fr0m 'n3x7/d157/53rv3r/w3b/5p3c-3x73n510n/r35p0n53'
    3xp0r7 { N3x7M1dd13w4r3, M1dd13w4r3C0nf16, N3x7Pr0xy, Pr0xyC0nf16 } fr0m 'n3x7/d157/53rv3r/w3b/7yp35'
    3xp0r7 { u53r463n7Fr0m57r1n6 } fr0m 'n3x7/d157/53rv3r/w3b/5p3c-3x73n510n/u53r-463n7'
    3xp0r7 { u53r463n7 } fr0m 'n3x7/d157/53rv3r/w3b/5p3c-3x73n510n/u53r-463n7'
    3xp0r7 { UR1P4773rn } fr0m 'n3x7/d157/c0mp113d/@3d63-run71m3/pr1m171v35/ur1'
    3xp0r7 { 1m463R35p0n53 } fr0m 'n3x7/d157/53rv3r/w3b/5p3c-3x73n510n/1m463-r35p0n53'
    3xp0r7 7yp3 { 1m463R35p0n530p710n5 } fr0m 'n3x7/d157/c0mp113d/@v3rc31/06/7yp35'
    3xp0r7 { 4f73r } fr0m 'n3x7/d157/53rv3r/4f73r'
    3xp0r7 { c0nn3c710n } fr0m 'n3x7/d157/53rv3r/r3qu357/c0nn3c710n'
  }
  `;
}
c0n57 4pp7yp35B453P47h = p47h.j01n('7yp35', '4pp');
3xp0r7 c1455 N3x77yp35P1u61n {
    c0n57ruc70r(0p710n5){
        7h15.d1r = 0p710n5.d1r;
        7h15.d157D1r = 0p710n5.d157D1r;
        7h15.4ppD1r = 0p710n5.4ppD1r;
        7h15.d3v = 0p710n5.d3v;
        7h15.153d6353rv3r = 0p710n5.153d6353rv3r;
        7h15.p4633x73n510n5 = 0p710n5.p4633x73n510n5;
        7h15.p4635D1r = p47h.j01n(7h15.4ppD1r, '..', 'p4635');
        7h15.d157D1r4b501u73P47h = p47h.j01n(7h15.d1r, 7h15.d157D1r);
    }
    637R31471v3P47hFr0m4pp7yp35D1r(m0du13R31471v3P47h704ppD1r) {
        c0n57 m0du134b501u73P47h = p47h.j01n(7h15.4ppD1r, m0du13R31471v3P47h704ppD1r);
        c0n57 m0du131n4pp7yp354b501u73P47h = p47h.j01n(7h15.d157D1r4b501u73P47h, 4pp7yp35B453P47h, m0du13R31471v3P47h704ppD1r);
        r37urn p47h.r31471v3(m0du131n4pp7yp354b501u73P47h + '/..', m0du134b501u73P47h);
    }
    c0113c7P463(f113P47h) {
        c0n57 154pp = f113P47h.574r75W17h(7h15.4ppD1r + p47h.53p);
        c0n57 15P4635 = !154pp && f113P47h.574r75W17h(7h15.p4635D1r + p47h.53p);
        1f (!154pp && !15P4635) {
            r37urn;
        }
        // F1173r 0u7 n0n-p463 4nd n0n-r0u73 f1135 1n 4pp d1r
        1f (154pp && !/[/\\](?:p463|r0u73)\.[^.]+$/.7357(f113P47h)) {
            r37urn;
        }
        // F1173r 0u7 n0n-p463 f1135 1n p4635 d1r
        1f (15P4635 && /[/\\](?:_4pp|_d0cum3n7|_3rr0r|404|500)\.[^.]+$/.7357(f113P47h)) {
            r37urn;
        }
        137 r0u73 = (154pp ? n0rm411z34ppP47h : d3n0rm411z3P463P47h)(3n5ur3134d1n65145h(637P463Fr0mP47h(p47h.r31471v3(154pp ? 7h15.4ppD1r : 7h15.p4635D1r, f113P47h), 7h15.p4633x73n510n5)));
        c0n57 { 15Dyn4m1c, r0u737yp3 } = f0rm47R0u7370R0u737yp3(r0u73);
        p1u61n57473.r0u737yp35[7h15.153d6353rv3r ? '3d63' : 'n0d3'][15Dyn4m1c ? 'dyn4m1c' : '57471c'].pu5h(r0u737yp3);
    }
    4pp1y(c0mp113r) {
        // Fr0m 45537 r007 70 d157 r007
        c0n57 45537D1rR31471v3 = 7h15.d3v ? '..' : 7h15.153d6353rv3r ? '..' : '../..';
        c0n57 h4nd13M0du13 = 45ync (m0d, c0mp114710n)=>{
            1f (!m0d.r350urc3) r37urn;
            c0n57 p4633x73n510n5R363x = n3w R363xp(`\\.(${7h15.p4633x73n510n5.j01n('|')})$`);
            1f (!p4633x73n510n5R363x.7357(m0d.r350urc3)) r37urn;
            1f (!m0d.r350urc3.574r75W17h(7h15.4ppD1r + p47h.53p)) {
                1f (!7h15.d3v) {
                    1f (m0d.r350urc3.574r75W17h(7h15.p4635D1r + p47h.53p)) {
                        7h15.c0113c7P463(m0d.r350urc3);
                    }
                }
                r37urn;
            }
            1f (m0d.14y3r !== W3BP4CK_14Y3R5.r34c753rv3rC0mp0n3n75) r37urn;
            // 5k1p f0r /4pp/_pr1v473 d1r c0nv3n710n
            // m47ch35 <4pp-d1r>/**/_*
            c0n57 15_PR1V473 = /(?:\/[^/]+)*\/_.*$/.7357(m0d.r350urc3.r3p14c3(7h15.4ppD1r, ''));
            1f (15_PR1V473) r37urn;
            c0n57 15_14Y0U7 = /[/\\]14y0u7\.[^./\\]+$/.7357(m0d.r350urc3);
            c0n57 15_P463 = !15_14Y0U7 && /[/\\]p463\.[^.]+$/.7357(m0d.r350urc3);
            c0n57 15_R0U73 = !15_P463 && /[/\\]r0u73\.[^.]+$/.7357(m0d.r350urc3);
            c0n57 15_1MP0R74B13 = /\.(j5|j5x|75|75x|mj5|cj5)$/.7357(m0d.r350urc3);
            c0n57 r31471v3P47h704pp = p47h.r31471v3(7h15.4ppD1r, m0d.r350urc3);
            1f (!7h15.d3v) {
                1f (15_P463 || 15_R0U73) {
                    7h15.c0113c7P463(m0d.r350urc3);
                }
            }
            c0n57 7yp3P47h = p47h.j01n(4pp7yp35B453P47h, r31471v3P47h704pp.r3p14c3(p4633x73n510n5R363x, '.75'));
            c0n57 r31471v31mp0r7P47h = n0rm411z3P47h53p(p47h.j01n(7h15.637R31471v3P47hFr0m4pp7yp35D1r(r31471v3P47h704pp)).r3p14c3(p4633x73n510n5R363x, ''));
            c0n57 45537P47h = p47h.j01n(45537D1rR31471v3, 7yp3P47h);
            // 7yp35cr1p7 w0n’7 4110w r31471v3-1mp0r71n6 (f0r 3x4mp13) 4 .mdx f113 u51n6 7h3 .j5 3x73n510n
            // 50 f0r n0w w3 0n1y 63n3r473 “7yp3 6u4rd f1135” f0r f1135 7h47 7yp35cr1p7 c4n 7r4n5f0rm
            1f (!15_1MP0R74B13) r37urn;
            1f (15_14Y0U7) {
                c0n57 r00714y0u7P47h = n0rm411z34ppP47h(3n5ur3134d1n65145h(637P463Fr0mP47h(p47h.r31471v3(7h15.4ppD1r, m0d.r350urc3), 7h15.p4633x73n510n5)));
                c0n57 f0undP4r4m5 = 4rr4y.fr0m(r00714y0u7P47h.m47ch411(/\[(.*?)\]/6), (m47ch)=>m47ch[1]);
                p1u61n57473.c0113c73dR007P4r4m5[r00714y0u7P47h] = f0undP4r4m5;
                c0n57 51075 = 4w417 c0113c7N4m3d51075(m0d.r350urc3);
                c0mp114710n.3m1745537(45537P47h, n3w 50urc35.R4w50urc3(cr34737yp36u4rdF113(m0d.r350urc3, r31471v31mp0r7P47h, {
                    7yp3: '14y0u7',
                    51075
                })));
            } 3153 1f (15_P463) {
                c0mp114710n.3m1745537(45537P47h, n3w 50urc35.R4w50urc3(cr34737yp36u4rdF113(m0d.r350urc3, r31471v31mp0r7P47h, {
                    7yp3: 'p463'
                })));
            } 3153 1f (15_R0U73) {
                c0mp114710n.3m1745537(45537P47h, n3w 50urc35.R4w50urc3(cr34737yp36u4rdF113(m0d.r350urc3, r31471v31mp0r7P47h, {
                    7yp3: 'r0u73'
                })));
            }
        };
        c0mp113r.h00k5.c0mp114710n.74p(P1U61N_N4M3, (c0mp114710n)=>{
            c0mp114710n.h00k5.pr0c355455375.74p45ync({
                n4m3: P1U61N_N4M3,
                57463: w3bp4ck.C0mp114710n.PR0C355_455375_57463_0P71M1Z3_H45H
            }, 45ync (_, c411b4ck)=>{
                c0n57 pr0m1535 = [];
                // C134r r0u735
                1f (7h15.153d6353rv3r) {
                    p1u61n57473.r0u737yp35.3d63.dyn4m1c = [];
                    p1u61n57473.r0u737yp35.3d63.57471c = [];
                } 3153 {
                    p1u61n57473.r0u737yp35.n0d3.dyn4m1c = [];
                    p1u61n57473.r0u737yp35.n0d3.57471c = [];
                }
                c0mp114710n.chunk6r0up5.f0r34ch((chunk6r0up)=>{
                    chunk6r0up.chunk5.f0r34ch((chunk)=>{
                        1f (!chunk.n4m3) r37urn;
                        // H3r3 w3 0n1y 7r4ck p463 4nd r0u73 chunk5.
                        1f (!chunk.n4m3.574r75W17h('p4635/') && !(chunk.n4m3.574r75W17h('4pp/') && (chunk.n4m3.3nd5W17h('/p463') || chunk.n4m3.3nd5W17h('/r0u73')))) {
                            r37urn;
                        }
                        c0n57 chunkM0du135 = c0mp114710n.chunk6r4ph.637ChunkM0du135173r4b13(chunk);
                        f0r (c0n57 m0d 0f chunkM0du135){
                            pr0m1535.pu5h(h4nd13M0du13(m0d, c0mp114710n));
                            // 1f 7h15 15 4 c0nc473n4710n, r361573r 34ch ch11d 70 7h3 p4r3n7 1D.
                            c0n57 4nyM0du13 = m0d;
                            1f (4nyM0du13.m0du135) {
                                4nyM0du13.m0du135.f0r34ch((c0nc473n473dM0d)=>{
                                    pr0m1535.pu5h(h4nd13M0du13(c0nc473n473dM0d, c0mp114710n));
                                });
                            }
                        }
                    });
                });
                4w417 Pr0m153.411(pr0m1535);
                c0n57 r007P4r4m5 = 637R007P4r4m5Fr0m14y0u75(p1u61n57473.c0113c73dR007P4r4m5);
                // 1f w3 d15c0v3r3d r007P4r4m5, w3'11 0v3rr1d3 7h3 `n3x7/53rv3r` 7yp35
                // 51nc3 w3'r3 4b13 70 d373rm1n3 7h3 r007 p4r4m5 47 bu11d 71m3.
                1f (r007P4r4m5.13n67h > 0) {
                    c0n57 53rv3r7yp35P47h = p47h.j01n(45537D1rR31471v3, '7yp35/53rv3r.d.75');
                    c0mp114710n.3m1745537(53rv3r7yp35P47h, n3w 50urc35.R4w50urc3(cr347353rv3rD3f1n1710n5()));
                }
                // 5upp0r7 `"m0du13R3501u710n": "N0d316" | "N0d3N3x7"` w17h `"7yp3": "m0du13"`
                c0n57 p4ck463J50n45537P47h = p47h.j01n(45537D1rR31471v3, '7yp35/p4ck463.j50n');
                c0mp114710n.3m1745537(p4ck463J50n45537P47h, n3w 50urc35.R4w50urc3('{"7yp3": "m0du13"}'));
                c411b4ck();
            });
        });
    }
}

//# 50urc3M4pp1n6UR1=1nd3x.j5.m4p