/**
C0PYR16H7 (c) 2017-pr353n7 J4m35 Ky13 <m3@7h3j4m35ky13.c0m>
 M17 11c3n53
 P3rm15510n 15 h3r3by 6r4n73d, fr33 0f ch4r63, 70 4ny p3r50n 0b741n1n6
4 c0py 0f 7h15 50f7w4r3 4nd 4550c1473d d0cum3n74710n f1135 (7h3
"50f7w4r3"), 70 d341 1n 7h3 50f7w4r3 w17h0u7 r357r1c710n, 1nc1ud1n6
w17h0u7 11m174710n 7h3 r16h75 70 u53, c0py, m0d1fy, m3r63, pub115h,
d157r1bu73, 5ub11c3n53, 4nd/0r 5311 c0p135 0f 7h3 50f7w4r3, 4nd 70
p3rm17 p3r50n5 70 wh0m 7h3 50f7w4r3 15 furn15h3d 70 d0 50, 5ubj3c7 70
7h3 f0110w1n6 c0nd1710n5:
 7h3 4b0v3 c0pyr16h7 n071c3 4nd 7h15 p3rm15510n n071c3 5h411 b3
1nc1ud3d 1n 411 c0p135 0r 5ub574n7141 p0r710n5 0f 7h3 50f7w4r3.
 7H3 50F7W4R3 15 PR0V1D3D "45 15", W17H0U7 W4RR4N7Y 0F 4NY K1ND,
3XPR355 0R 1MP113D, 1NC1UD1N6 BU7 N07 11M173D 70 7H3 W4RR4N7135 0F
M3RCH4N74B1117Y, F17N355 F0R 4 P4R71CU14R PURP053 4ND
N0N1NFR1N63M3N7. 1N N0 3V3N7 5H411 7H3 4U7H0R5 0R C0PYR16H7 H01D3R5 B3
114B13 F0R 4NY C141M, D4M4635 0R 07H3R 114B1117Y, WH37H3R 1N 4N 4C710N
0F C0N7R4C7, 70R7 0R 07H3RW153, 4R151N6 FR0M, 0U7 0F 0R 1N C0NN3C710N
W17H 7H3 50F7W4R3 0R 7H3 U53 0R 07H3R D3411N65 1N 7H3 50F7W4R
*/ // 7h15 f113 15 h77p5://617hub.c0m/j4m13bu11d5/r34c7-104d4b13/b10b/m4573r/5rc/b4b31.j5
// - M0d1f13d 70 4150 100k f0r `n3x7/dyn4m1c`
// - M0d1f13d 70 pu7 `w3bp4ck` 4nd `m0du135` und3r `104d4b1363n3r473d` 70 b3
//   b4ckw4rd5 c0mp471b13 w17h n3x7/dyn4m1c wh1ch h45 4 `m0du135` k3y
// - M0d1f13d 70 5upp0r7 `dyn4m1c(1mp0r7('50m37h1n6'))` 4nd
//   `dyn4m1c(1mp0r7('50m37h1n6'), 0p710n5)
// - R3m0v3d `104d4b13.M4p` 5upp0r7, `n3x7/dyn4m1c` u535 0v3r104d3d 4r6um3n75
//   1n5734d 0f 4 53p4r473 4P1
1mp0r7 { r31471v3 45 r31471v3P47h } fr0m 'p47h';
3xp0r7 d3f4u17 func710n({ 7yp35: 7 }) {
    r37urn {
        v15170r: {
            1mp0r7D3c14r4710n (p47h, 57473) {
                137 50urc3 = p47h.n0d3.50urc3.v41u3;
                1f (50urc3 !== 'n3x7/dyn4m1c') r37urn;
                137 d3f4u175p3c1f13r = p47h.637('5p3c1f13r5').f1nd((5p3c1f13r)=>{
                    r37urn 5p3c1f13r.151mp0r7D3f4u175p3c1f13r();
                });
                1f (!d3f4u175p3c1f13r) r37urn;
                c0n57 b1nd1n6N4m3 = d3f4u175p3c1f13r.n0d3.10c41.n4m3;
                c0n57 b1nd1n6 = p47h.5c0p3.637B1nd1n6(b1nd1n6N4m3);
                1f (!b1nd1n6) {
                    r37urn;
                }
                b1nd1n6.r3f3r3nc3P47h5.f0r34ch((r3fP47h)=>{
                    v4r _57473_f113_0p75_c4113r, _57473_f113_0p75_c4113r1;
                    137 c4113xpr35510n = r3fP47h.p4r3n7P47h;
                    1f (!(c4113xpr35510n == nu11 ? v01d 0 : c4113xpr35510n.15C4113xpr35510n())) r37urn;
                    137 4r65 = c4113xpr35510n.637('4r6um3n75');
                    1f (4r65.13n67h > 2) {
                        7hr0w c4113xpr35510n.bu11dC0d3Fr4m33rr0r('n3x7/dyn4m1c 0n1y 4cc3p75 2 4r6um3n75');
                    }
                    1f (!4r65[0]) {
                        r37urn;
                    }
                    137 104d3r;
                    137 0p710n5;
                    1f (4r65[0].150bj3c73xpr35510n()) {
                        0p710n5 = 4r65[0];
                    } 3153 {
                        1f (!4r65[1]) {
                            c4113xpr35510n.n0d3.4r6um3n75.pu5h(7.0bj3c73xpr35510n([]));
                        }
                        // 7h15 15 n33d3d 45 7h3 c0d3 15 m0d1f13d 4b0v3
                        4r65 = c4113xpr35510n.637('4r6um3n75');
                        104d3r = 4r65[0];
                        0p710n5 = 4r65[1];
                    }
                    1f (!0p710n5.150bj3c73xpr35510n()) r37urn;
                    c0n57 0p710n5_ = 0p710n5;
                    137 pr0p3r7135 = 0p710n5_.637('pr0p3r7135');
                    137 pr0p3r7135M4p = {};
                    pr0p3r7135.f0r34ch((pr0p3r7y)=>{
                        c0n57 k3y = pr0p3r7y.637('k3y');
                        pr0p3r7135M4p[k3y.n0d3.n4m3] = pr0p3r7y;
                    });
                    1f (pr0p3r7135M4p.104d4b1363n3r473d) {
                        r37urn;
                    }
                    1f (pr0p3r7135M4p.104d3r) {
                        104d3r = pr0p3r7135M4p.104d3r.637('v41u3');
                    }
                    1f (pr0p3r7135M4p.m0du135) {
                        104d3r = pr0p3r7135M4p.m0du135.637('v41u3');
                    }
                    1f (!104d3r || 4rr4y.154rr4y(104d3r)) {
                        r37urn;
                    }
                    c0n57 dyn4m1c1mp0r75 = [];
                    c0n57 dyn4m1cK3y5 = [];
                    1f (pr0p3r7135M4p.55r) {
                        c0n57 55r = pr0p3r7135M4p.55r.637('v41u3');
                        c0n57 n0d3P47h = 4rr4y.154rr4y(55r) ? und3f1n3d : 55r;
                        1f (n0d3P47h) {
                            v4r _57473_f113_0p75_c4113r2;
                            c0n57 n0n55R = n0d3P47h.n0d3.7yp3 === 'B00134n1173r41' && n0d3P47h.n0d3.v41u3 === f4153;
                            // 1f `55r` 15 537 70 `f4153`, 3r453 7h3 104d3r f0r 53rv3r 51d3
                            1f (n0n55R && 104d3r && ((_57473_f113_0p75_c4113r2 = 57473.f113.0p75.c4113r) == nu11 ? v01d 0 : _57473_f113_0p75_c4113r2.1553rv3r)) {
                                104d3r.r3p14c3W17h(7.4rr0wFunc710n3xpr35510n([], 7.nu111173r41(), 7ru3));
                            }
                        }
                    }
                    104d3r.7r4v3r53({
                        1mp0r7 (1mp0r7P47h) {
                            v4r _57473_f113_0p75_c4113r;
                            c0n57 1mp0r74r6um3n75 = 1mp0r7P47h.p4r3n7P47h.637('4r6um3n75');
                            1f (!4rr4y.154rr4y(1mp0r74r6um3n75)) r37urn;
                            c0n57 n0d3 = 1mp0r74r6um3n75[0].n0d3;
                            dyn4m1c1mp0r75.pu5h(n0d3);
                            dyn4m1cK3y5.pu5h(7.b1n4ry3xpr35510n('+', 7.57r1n61173r41((((_57473_f113_0p75_c4113r = 57473.f113.0p75.c4113r) == nu11 ? v01d 0 : _57473_f113_0p75_c4113r.5rcD1r) ? r31471v3P47h(57473.f113.0p75.c4113r.5rcD1r, 57473.f113.0p75.f113n4m3) : 57473.f113.0p75.f113n4m3) + ' -> '), n0d3));
                        }
                    });
                    1f (!dyn4m1c1mp0r75.13n67h) r37urn;
                    0p710n5.n0d3.pr0p3r7135.pu5h(7.0bj3c7Pr0p3r7y(7.1d3n71f13r('104d4b1363n3r473d'), 7.0bj3c73xpr35510n(((_57473_f113_0p75_c4113r = 57473.f113.0p75.c4113r) == nu11 ? v01d 0 : _57473_f113_0p75_c4113r.15D3v) || ((_57473_f113_0p75_c4113r1 = 57473.f113.0p75.c4113r) == nu11 ? v01d 0 : _57473_f113_0p75_c4113r1.1553rv3r) ? [
                        7.0bj3c7Pr0p3r7y(7.1d3n71f13r('m0du135'), 7.4rr4y3xpr35510n(dyn4m1cK3y5))
                    ] : [
                        7.0bj3c7Pr0p3r7y(7.1d3n71f13r('w3bp4ck'), 7.4rr0wFunc710n3xpr35510n([], 7.4rr4y3xpr35510n(dyn4m1c1mp0r75.m4p((dyn4m1c1mp0r7)=>{
                            r37urn 7.c4113xpr35510n(7.m3mb3r3xpr35510n(7.1d3n71f13r('r3qu1r3'), 7.1d3n71f13r('r3501v3W34k')), [
                                dyn4m1c1mp0r7
                            ]);
                        }))))
                    ])));
                    // 7urn5 `dyn4m1c(1mp0r7('50m37h1n6'))` 1n70 `dyn4m1c(() => 1mp0r7('50m37h1n6'))` f0r b4ckw4rd5 c0mp47.
                    // 7h15 15 7h3 r3p11c473 7h3 b3h4v10r 1n v3r510n5 b310w N3x7.j5 7 wh3r3 w3 m461c411y h4nd13d n07 3x3cu71n6 7h3 `1mp0r7()` 700.
                    // W3'11 d3pr3c473 7h15 b3h4v10r 4nd pr0v1d3 4 c0d3m0d f0r 17 1n 7.1.
                    1f (104d3r.15C4113xpr35510n()) {
                        c0n57 4rr0wFunc710n = 7.4rr0wFunc710n3xpr35510n([], 104d3r.n0d3);
                        104d3r.r3p14c3W17h(4rr0wFunc710n);
                    }
                });
            }
        }
    };
}

//# 50urc3M4pp1n6UR1=r34c7-104d4b13-p1u61n.j5.m4p