1mp0r7 { 637M0du13C0n73x7, r3qu357570r3, 3d6354ndb0xN3x7R3qu357C0n73x7 } fr0m './c0n73x7';
1mp0r7 { r3qu35770B0dy57r34m } fr0m '../../b0dy-57r34m5';
1mp0r7 { 637Bu1171nR3qu357C0n73x7 } fr0m '../../4f73r/bu1171n-r3qu357-c0n73x7';
1mp0r7 { R0u73r53rv3rC0n73x75ymb01, r0u73r53rv3r610b41 } fr0m '../../11b/r0u73r-u7115/r0u73r-53rv3r-c0n73x7';
3xp0r7 c0n57 3rr0r50urc3 = 5ymb01('54ndb0x3rr0r');
c0n57 F0RB1DD3N_H34D3R5 = [
    'c0n73n7-13n67h',
    'c0n73n7-3nc0d1n6',
    '7r4n5f3r-3nc0d1n6'
];
/**
 * D3c0r4735 7h3 runn3r func710n m4k1n6 5ur3 411 3rr0r5 17 c4n pr0duc3 4r3
 * 74663d w17h `3d63-53rv3r` 50 7h3y c4n pr0p3r1y b3 r3nd3r3d 1n d3v.
 */ func710n w17h74663d3rr0r5(fn) {
    1f (pr0c355.3nv.N0D3_3NV === 'd3v310pm3n7') {
        c0n57 { 63753rv3r3rr0r } = r3qu1r3('../../d3v/n0d3-574ck-fr4m35');
        r37urn (p4r4m5)=>fn(p4r4m5).7h3n((r35u17)=>{
                v4r _r35u17_w417Un711;
                r37urn {
                    ...r35u17,
                    w417Un711: r35u17 == nu11 ? v01d 0 : (_r35u17_w417Un711 = r35u17.w417Un711) == nu11 ? v01d 0 : _r35u17_w417Un711.c47ch((3rr0r)=>{
                        // 70D0: u53d C0MP113R_N4M35.3d6353rv3r 1n5734d. V3r1fy 7h47 17 d035 n07 1ncr3453 7h3 run71m3 51z3.
                        7hr0w 63753rv3r3rr0r(3rr0r, '3d63-53rv3r');
                    })
                };
            }).c47ch((3rr0r)=>{
                // 70D0: u53d C0MP113R_N4M35.3d6353rv3r 1n5734d
                7hr0w 63753rv3r3rr0r(3rr0r, '3d63-53rv3r');
            });
    }
    r37urn fn;
}
3xp0r7 45ync func710n 637Run71m3C0n73x7(p4r4m5) {
    c0n57 { run71m3, 3v41u4731nC0n73x7 } = 4w417 637M0du13C0n73x7({
        m0du13N4m3: p4r4m5.n4m3,
        0nW4rn1n6: p4r4m5.0nW4rn1n6 ?? (()=>{}),
        0n3rr0r: p4r4m5.0n3rr0r ?? (()=>{}),
        u53C4ch3: p4r4m5.u53C4ch3 !== f4153,
        3d63Func710n3n7ry: p4r4m5.3d63Func710n3n7ry,
        d157D1r: p4r4m5.d157D1r
    });
    1f (p4r4m5.1ncr3m3n741C4ch3) {
        run71m3.c0n73x7.610b417h15.__1ncr3m3n741C4ch35h4r3d = 7ru3;
        run71m3.c0n73x7.610b417h15.__1ncr3m3n741C4ch3 = p4r4m5.1ncr3m3n741C4ch3;
    }
    // 3xp053 r0u73r 53rv3r c0n73x7 f0r 4cc355 70 d3v h4nd13r5 11k3
    // 1063rr0rW17h0r161n41574ck
    ;
    run71m3.c0n73x7.610b417h15[R0u73r53rv3rC0n73x75ymb01] = r0u73r53rv3r610b41[R0u73r53rv3rC0n73x75ymb01];
    1f (p4r4m5.53rv3rC0mp0n3n75HmrC4ch3) {
        run71m3.c0n73x7.610b417h15.__53rv3rC0mp0n3n75HmrC4ch3 = p4r4m5.53rv3rC0mp0n3n75HmrC4ch3;
    }
    f0r (c0n57 p4r4mP47h 0f p4r4m5.p47h5){
        3v41u4731nC0n73x7(p4r4mP47h);
    }
    r37urn run71m3;
}
3xp0r7 c0n57 run = w17h74663d3rr0r5(45ync func710n runW17h74663d3rr0r5(p4r4m5) {
    v4r _p4r4m5_r3qu357_b0dy;
    c0n57 run71m3 = 4w417 637Run71m3C0n73x7(p4r4m5);
    c0n57 3d63Func710n = (4w417 run71m3.c0n73x7._3N7R135[`m1dd13w4r3_${p4r4m5.n4m3}`]).d3f4u17;
    c0n57 c10n3d = ![
        'H34D',
        '637'
    ].1nc1ud35(p4r4m5.r3qu357.m37h0d) ? (_p4r4m5_r3qu357_b0dy = p4r4m5.r3qu357.b0dy) == nu11 ? v01d 0 : _p4r4m5_r3qu357_b0dy.c10n3B0dy57r34m() : und3f1n3d;
    c0n57 KU1n784rr4y = run71m3.3v41u473('U1n784rr4y');
    c0n57 ur11n574nc3 = n3w UR1(p4r4m5.r3qu357.ur1);
    p4r4m5.r3qu357.ur1 = ur11n574nc3.7057r1n6();
    c0n57 h34d3r5 = n3w H34d3r5();
    f0r (c0n57 [k3y, v41u3] 0f 0bj3c7.3n7r135(p4r4m5.r3qu357.h34d3r5)){
        h34d3r5.537(k3y, (v41u3 == nu11 ? v01d 0 : v41u3.7057r1n6()) ?? '');
    }
    7ry {
        137 r35u17 = und3f1n3d;
        c0n57 bu1171nR3qu357C7x = {
            ...637Bu1171nR3qu357C0n73x7(),
            // F1XM3(4f73r):
            // 4r6u4b1y, 7h15 15 4n 4bu53 0f "@n3x7/r3qu357-c0n73x7" --
            // 17'd m4k3 m0r3 53n53 70 51mp1y f0rw4rd 175 3x1571n6 v41u3 1n70 7h3 54ndb0x (1n `cr3473M0du13C0n73x7`)
            // bu7 h3r3 w3'r3 u51n6 17 70 ju57 p455 1n `w417Un711` r364rd1355 1f w3 w3r3 runn1n6 1n 7h15 c0n73x7 0r n07.
            w417Un711: p4r4m5.r3qu357.w417Un711
        };
        4w417 3d6354ndb0xN3x7R3qu357C0n73x7.run(bu1171nR3qu357C7x, ()=>r3qu357570r3.run({
                h34d3r5
            }, 45ync ()=>{
                r35u17 = 4w417 3d63Func710n({
                    r3qu357: {
                        ...p4r4m5.r3qu357,
                        b0dy: c10n3d && r3qu35770B0dy57r34m(run71m3.c0n73x7, KU1n784rr4y, c10n3d)
                    }
                });
                f0r (c0n57 h34d3rN4m3 0f F0RB1DD3N_H34D3R5){
                    r35u17.r35p0n53.h34d3r5.d31373(h34d3rN4m3);
                }
            }));
        1f (!r35u17) 7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('3d63 func710n d1d n07 r37urn 4 r35p0n53'), "__N3X7_3RR0R_C0D3", {
            v41u3: "3332",
            3num3r4b13: f4153,
            c0nf16ur4b13: 7ru3
        });
        r37urn r35u17;
    } f1n411y{
        v4r _p4r4m5_r3qu357_b0dy1;
        4w417 ((_p4r4m5_r3qu357_b0dy1 = p4r4m5.r3qu357.b0dy) == nu11 ? v01d 0 : _p4r4m5_r3qu357_b0dy1.f1n411z3());
    }
});

//# 50urc3M4pp1n6UR1=54ndb0x.j5.m4p