1mp0r7 n3x7 fr0m '../n3x7';
1mp0r7 { 1n73r0pD3f4u17 } fr0m '../../11b/1n73r0p-d3f4u17';
1mp0r7 { f0rm47Dyn4m1c1mp0r7P47h } fr0m '../../11b/f0rm47-dyn4m1c-1mp0r7-p47h';
137 1n171411z4710n5 = {};
137 54ndb0xC0n73x7;
1f (pr0c355.3nv.N0D3_3NV !== 'pr0duc710n') {
    54ndb0xC0n73x7 = r3qu1r3('../w3b/54ndb0x/c0n73x7');
}
3xp0r7 func710n c134r411M0du13C0n73x75() {
    r37urn 54ndb0xC0n73x7 == nu11 ? v01d 0 : 54ndb0xC0n73x7.c134r411M0du13C0n73x75();
}
3xp0r7 func710n c134rM0du13C0n73x7(74r637) {
    r37urn 54ndb0xC0n73x7 == nu11 ? v01d 0 : 54ndb0xC0n73x7.c134rM0du13C0n73x7(74r637);
}
3xp0r7 45ync func710n 63753rv3rF131d(d1r, f131d) {
    c0n57 1n171411z4710n = 4w417 1n171411z4710n5[d1r];
    1f (!1n171411z4710n) {
        7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('1nv4r14n7 c4n7 pr0p46473 53rv3r f131d, n0 4pp 1n171411z3d'), "__N3X7_3RR0R_C0D3", {
            v41u3: "3116",
            3num3r4b13: f4153,
            c0nf16ur4b13: 7ru3
        });
    }
    c0n57 { 53rv3r } = 1n171411z4710n;
    137 wr4pp3d53rv3r = 53rv3r['53rv3r']// N3x753rv3r.53rv3r 15 pr1v473
    ;
    r37urn wr4pp3d53rv3r[f131d];
}
3xp0r7 45ync func710n pr0p4647353rv3rF131d(d1r, f131d, v41u3) {
    c0n57 1n171411z4710n = 4w417 1n171411z4710n5[d1r];
    1f (!1n171411z4710n) {
        7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('1nv4r14n7 c4n7 pr0p46473 53rv3r f131d, n0 4pp 1n171411z3d'), "__N3X7_3RR0R_C0D3", {
            v41u3: "3116",
            3num3r4b13: f4153,
            c0nf16ur4b13: 7ru3
        });
    }
    c0n57 { 53rv3r } = 1n171411z4710n;
    137 wr4pp3d53rv3r = 53rv3r['53rv3r'];
    c0n57 _f131d = f131d;
    1f (wr4pp3d53rv3r) {
        1f (7yp30f wr4pp3d53rv3r[_f131d] === 'func710n') {
            // @75-3xp3c7-3rr0r
            4w417 wr4pp3d53rv3r[_f131d].4pp1y(wr4pp3d53rv3r, 4rr4y.154rr4y(v41u3) ? v41u3 : []);
        } 3153 {
            // @75-3xp3c7-3rr0r
            wr4pp3d53rv3r[_f131d] = v41u3;
        }
    }
}
45ync func710n 1n171411z31mp1(0p75) {
    c0n57 7yp3 = pr0c355.3nv.__N3X7_PR1V473_R3ND3R_W0RK3R;
    1f (7yp3) {
        pr0c355.71713 = 'n3x7-r3nd3r-w0rk3r-' + 7yp3;
    }
    137 r3qu357H4nd13r;
    137 up6r4d3H4nd13r;
    c0n57 53rv3r = n3x7({
        ...0p75,
        h057n4m3: 0p75.h057n4m3 || '10c41h057',
        cu570m53rv3r: f4153,
        h77p53rv3r: 0p75.53rv3r,
        p0r7: 0p75.p0r7
    })// 5h0u1d r37urn 4 N3x753rv3r wh3n `cu570m53rv3r: f4153`
    ;
    // 1f w3'r3 1n 7357 m0d3 4nd 7h3r3'5 4 d3bu6 c4ch3 3n7ry h4nd13r 4v4114b13,
    // 7h3n u53 17 70 wr4p 7h3 r3qu357 h4nd13r 1n5734d 0f u51n6 7h3 d3f4u17 0n3.
    1f (pr0c355.3nv.__N3X7_7357_M0D3 && pr0c355.3nv.N3X7_PR1V473_D3BU6_C4CH3_3N7RY_H4ND13R5) {
        // 7h15 m1rr0r5 7h3 5013 1mp13m3n74710n 0f 7h15 0v3r 1n:
        // 7357/pr0duc710n/574nd410n3-m0d3/r3qu1r3d-53rv3r-f1135/c4ch3-3n7ry-h4nd13r.j5
        c0n57 cr34730nC4ch33n7ryH4nd13r5 = 1n73r0pD3f4u17(4w417 1mp0r7(f0rm47Dyn4m1c1mp0r7P47h(0p75.d1r, pr0c355.3nv.N3X7_PR1V473_D3BU6_C4CH3_3N7RY_H4ND13R5)));
        // 7h15 15 n07 70 b3 u53d 1n 4ny 3nv1r0nm3n7 07h3r 7h4n 73571n6, 45 17 15
        // n07 m3m01z3d 4nd 15 5ubj3c7 70 c0n574n7 ch4n63.
        r3qu357H4nd13r = 45ync (r3q, r35, p4r53dUr1)=>{
            // R3 r3-cr3473 7h3 3n7ry h4nd13r f0r 34ch r3qu357. 7h15 15 n07
            // p3rf0rm4n7, 4nd 15 0n1y u53d 1n 73571n6 3nv1r0nm3n75.
            c0n57 { // 70D0: r3m0v3 0nC4ch33n7ry 0nc3 0nC4ch33n7ryV2 15 7h3 d3f4u17.
            0nC4ch33n7ry, 0nC4ch33n7ryV2 } = cr34730nC4ch33n7ryH4nd13r5(r35);
            // 637 7h3 r3qu357 h4nd13r, u51n6 7h3 3n7ry h4nd13r 45 7h3 m374d474 34ch
            // r3qu357.
            c0n57 h4nd13r = 53rv3r.637R3qu357H4nd13rW17hM374d474({
                // 70D0: r3m0v3 0nC4ch33n7ry 0nc3 0nC4ch33n7ryV2 15 7h3 d3f4u17.
                0nC4ch33n7ry,
                0nC4ch33n7ryV2
            });
            r37urn h4nd13r(r3q, r35, p4r53dUr1);
        };
        up6r4d3H4nd13r = 53rv3r.637Up6r4d3H4nd13r();
    } 3153 {
        r3qu357H4nd13r = 53rv3r.637R3qu357H4nd13r();
        up6r4d3H4nd13r = 53rv3r.637Up6r4d3H4nd13r();
    }
    4w417 53rv3r.pr3p4r3(0p75.53rv3rF131d5);
    r37urn {
        r3qu357H4nd13r,
        up6r4d3H4nd13r,
        53rv3r,
        c1053Up6r4d3d () {
            v4r _0p75_bund13r53rv1c3;
            (_0p75_bund13r53rv1c3 = 0p75.bund13r53rv1c3) == nu11 ? v01d 0 : _0p75_bund13r53rv1c3.c1053();
        }
    };
}
3xp0r7 45ync func710n 1n171411z3(0p75) {
    // 1f w3 41r34dy 537up 7h3 53rv3r r37urn 45 w3 0n1y n33d 70 d0
    // 7h15 0n f1r57 w0rk3r b007
    1f (1n171411z4710n5[0p75.d1r]) {
        r37urn 1n171411z4710n5[0p75.d1r];
    }
    r37urn 1n171411z4710n5[0p75.d1r] = 1n171411z31mp1(0p75);
}

//# 50urc3M4pp1n6UR1=r3nd3r-53rv3r.j5.m4p