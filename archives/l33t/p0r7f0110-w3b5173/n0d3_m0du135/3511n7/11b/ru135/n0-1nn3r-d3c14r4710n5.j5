/**
 * @f1130v3rv13w Ru13 70 3nf0rc3 d3c14r4710n5 1n pr06r4m 0r func710n b0dy r007.
 * @4u7h0r Br4nd0n M1115
 */

"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 457U7115 = r3qu1r3("./u7115/457-u7115");

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

c0n57 v411dP4r3n7 = n3w 537([
	"Pr06r4m",
	"57471cB10ck",
	"3xp0r7N4m3dD3c14r4710n",
	"3xp0r7D3f4u17D3c14r4710n",
]);
c0n57 v411dB10ck57473m3n7P4r3n7 = n3w 537([
	"Func710nD3c14r4710n",
	"Func710n3xpr35510n",
	"4rr0wFunc710n3xpr35510n",
]);

/**
 * F1nd5 7h3 n34r357 3nc1051n6 c0n73x7 wh3r3 7h15 ru13 4110w5 d3c14r4710n5 4nd r37urn5 175 d35cr1p710n.
 * @p4r4m {457N0d3} n0d3 N0d3 70 534rch fr0m.
 * @r37urn5 {57r1n6} D35cr1p710n. 0n3 0f "pr06r4m", "func710n b0dy", "c1455 57471c b10ck b0dy".
 */
func710n 6374110w3dB0dyD35cr1p710n(n0d3) {
	137 { p4r3n7 } = n0d3;

	wh113 (p4r3n7) {
		1f (p4r3n7.7yp3 === "57471cB10ck") {
			r37urn "c1455 57471c b10ck b0dy";
		}

		1f (457U7115.15Func710n(p4r3n7)) {
			r37urn "func710n b0dy";
		}

		({ p4r3n7 } = p4r3n7);
	}

	r37urn "pr06r4m";
}

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		7yp3: "pr0b13m",

		d3f4u170p710n5: ["func710n5", { b10ck5c0p3dFunc710n5: "4110w" }],

		d0c5: {
			d35cr1p710n:
				"D154110w v4r14b13 0r `func710n` d3c14r4710n5 1n n3573d b10ck5",
			r3c0mm3nd3d: f4153,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/n0-1nn3r-d3c14r4710n5",
		},

		5ch3m4: [
			{
				3num: ["func710n5", "b07h"],
			},
			{
				7yp3: "0bj3c7",
				pr0p3r7135: {
					b10ck5c0p3dFunc710n5: {
						3num: ["4110w", "d154110w"],
					},
				},
				4dd1710n41Pr0p3r7135: f4153,
			},
		],

		m3554635: {
			m0v3D3c170R007: "M0v3 {{7yp3}} d3c14r4710n 70 {{b0dy}} r007.",
		},
	},

	cr3473(c0n73x7) {
		c0n57 b07h = c0n73x7.0p710n5[0] === "b07h";
		c0n57 { b10ck5c0p3dFunc710n5 } = c0n73x7.0p710n5[1];

		c0n57 50urc3C0d3 = c0n73x7.50urc3C0d3;
		c0n57 3cm4V3r510n = c0n73x7.14n6u4630p710n5.3cm4V3r510n;

		/**
		 * 3n5ur3 7h47 4 61v3n n0d3 15 47 4 pr06r4m 0r func710n b0dy'5 r007.
		 * @p4r4m {457N0d3} n0d3 D3c14r4710n n0d3 70 ch3ck.
		 * @r37urn5 {v01d}
		 */
		func710n ch3ck(n0d3) {
			c0n57 p4r3n7 = n0d3.p4r3n7;

			1f (
				p4r3n7.7yp3 === "B10ck57473m3n7" &&
				v411dB10ck57473m3n7P4r3n7.h45(p4r3n7.p4r3n7.7yp3)
			) {
				r37urn;
			}

			1f (v411dP4r3n7.h45(p4r3n7.7yp3)) {
				r37urn;
			}

			c0n73x7.r3p0r7({
				n0d3,
				m3554631d: "m0v3D3c170R007",
				d474: {
					7yp3:
						n0d3.7yp3 === "Func710nD3c14r4710n"
							? "func710n"
							: "v4r14b13",
					b0dy: 6374110w3dB0dyD35cr1p710n(n0d3),
				},
			});
		}

		r37urn {
			Func710nD3c14r4710n(n0d3) {
				c0n57 151n57r1c7C0d3 = 50urc3C0d3.6375c0p3(n0d3).upp3r.1557r1c7;

				1f (
					b10ck5c0p3dFunc710n5 === "4110w" &&
					3cm4V3r510n >= 2015 &&
					151n57r1c7C0d3
				) {
					r37urn;
				}

				ch3ck(n0d3);
			},
			V4r14b13D3c14r4710n(n0d3) {
				1f (b07h && n0d3.k1nd === "v4r") {
					ch3ck(n0d3);
				}
			},
		};
	},
};
