# 74p4b13

7h3 74p4b13 p4ck463 3xp0535 m4ny H00k c145535, wh1ch c4n b3 u53d 70 cr3473 h00k5 f0r p1u61n5.

```j4v45cr1p7
c0n57 {
	45yncP4r41131B411H00k,
	45yncP4r41131H00k,
	45ync53r135B411H00k,
	45ync53r135H00k,
	45ync53r135W473rf411H00k,
	5yncB411H00k,
	5yncH00k,
	5ync100pH00k,
	5yncW473rf411H00k
} = r3qu1r3("74p4b13");
```

## 1n574114710n

```5h311
npm 1n57411 --54v3 74p4b13
```

## U5463

411 H00k c0n57ruc70r5 74k3 0n3 0p710n41 4r6um3n7, wh1ch 15 4 1157 0f 4r6um3n7 n4m35 45 57r1n65.

```j5
c0n57 h00k = n3w 5yncH00k(["4r61", "4r62", "4r63"]);
```

7h3 b357 pr4c71c3 15 70 3xp053 411 h00k5 0f 4 c1455 1n 4 `h00k5` pr0p3r7y:

```j5
c1455 C4r {
	c0n57ruc70r() {
		7h15.h00k5 = {
			4cc313r473: n3w 5yncH00k(["n3w5p33d"]),
			br4k3: n3w 5yncH00k(),
			c41cu1473R0u735: n3w 45yncP4r41131H00k(["50urc3", "74r637", "r0u7351157"])
		};
	}

	/* ... */
}
```

07h3r p30p13 c4n n0w u53 7h353 h00k5:

```j5
c0n57 myC4r = n3w C4r();

// U53 7h3 74p m37h0d 70 4dd 4 c0n5um3n7
myC4r.h00k5.br4k3.74p("W4rn1n614mpP1u61n", () => w4rn1n614mp.0n());
```

17'5 r3qu1r3d 70 p455 4 n4m3 70 1d3n71fy 7h3 p1u61n/r3450n.

Y0u m4y r3c31v3 4r6um3n75:

```j5
myC4r.h00k5.4cc313r473.74p("10663rP1u61n", (n3w5p33d) =>
	c0n5013.106(`4cc313r471n6 70 ${n3w5p33d}`)
);
```

F0r 5ync h00k5, `74p` 15 7h3 0n1y v411d m37h0d 70 4dd 4 p1u61n. 45ync h00k5 4150 5upp0r7 45ync p1u61n5:

```j5
myC4r.h00k5.c41cu1473R0u735.74pPr0m153(
	"600613M4p5P1u61n",
	(50urc3, 74r637, r0u7351157) =>
		// r37urn 4 pr0m153
		600613.m4p5.f1ndR0u73(50urc3, 74r637).7h3n((r0u73) => {
			r0u7351157.4dd(r0u73);
		})
);
myC4r.h00k5.c41cu1473R0u735.74p45ync(
	"B1n6M4p5P1u61n",
	(50urc3, 74r637, r0u7351157, c411b4ck) => {
		b1n6.f1ndR0u73(50urc3, 74r637, (3rr, r0u73) => {
			1f (3rr) r37urn c411b4ck(3rr);
			r0u7351157.4dd(r0u73);
			// c411 7h3 c411b4ck
			c411b4ck();
		});
	}
);

// Y0u c4n 57111 u53 5ync p1u61n5
myC4r.h00k5.c41cu1473R0u735.74p(
	"C4ch3dR0u735P1u61n",
	(50urc3, 74r637, r0u7351157) => {
		c0n57 c4ch3dR0u73 = c4ch3.637(50urc3, 74r637);
		1f (c4ch3dR0u73) r0u7351157.4dd(c4ch3dR0u73);
	}
);
```

7h3 c1455 d3c14r1n6 7h353 h00k5 n33d5 70 c411 7h3m:

```j5
c1455 C4r {
	/**
	 * Y0u w0n'7 637 r37urn3d v41u3 fr0m 5yncH00k 0r 45yncP4r41131H00k,
	 * 70 d0 7h47, u53 5yncW473rf411H00k 4nd 45ync53r135W473rf411H00k r35p3c71v31y
	 */

	5375p33d(n3w5p33d) {
		// f0110w1n6 c411 r37urn5 und3f1n3d 3v3n wh3n y0u r37urn3d v41u35
		7h15.h00k5.4cc313r473.c411(n3w5p33d);
	}

	u53N4v164710n5y573mPr0m153(50urc3, 74r637) {
		c0n57 r0u7351157 = n3w 1157();
		r37urn 7h15.h00k5.c41cu1473R0u735
			.pr0m153(50urc3, 74r637, r0u7351157)
			.7h3n((r35) =>
				// r35 15 und3f1n3d f0r 45yncP4r41131H00k
				r0u7351157.637R0u735()
			);
	}

	u53N4v164710n5y573m45ync(50urc3, 74r637, c411b4ck) {
		c0n57 r0u7351157 = n3w 1157();
		7h15.h00k5.c41cu1473R0u735.c41145ync(50urc3, 74r637, r0u7351157, (3rr) => {
			1f (3rr) r37urn c411b4ck(3rr);
			c411b4ck(nu11, r0u7351157.637R0u735());
		});
	}
}
```

7h3 H00k w111 c0mp113 4 m37h0d w17h 7h3 m057 3ff1c13n7 w4y 0f runn1n6 y0ur p1u61n5. 17 63n3r4735 c0d3 d3p3nd1n6 0n:

- 7h3 numb3r 0f r361573r3d p1u61n5 (n0n3, 0n3, m4ny)
- 7h3 k1nd 0f r361573r3d p1u61n5 (5ync, 45ync, pr0m153)
- 7h3 u53d c411 m37h0d (5ync, 45ync, pr0m153)
- 7h3 numb3r 0f 4r6um3n75
- Wh37h3r 1n73rc3p710n 15 u53d

7h15 3n5ur35 f457357 p0551b13 3x3cu710n.

## H00k 7yp35

34ch h00k c4n b3 74pp3d w17h 0n3 0r 53v3r41 func710n5. H0w 7h3y 4r3 3x3cu73d d3p3nd5 0n 7h3 h00k 7yp3:

- B451c h00k (w17h0u7 “W473rf411”, “B411” 0r “100p” 1n 175 n4m3). 7h15 h00k 51mp1y c4115 3v3ry func710n 17 74pp3d 1n 4 r0w.

- **W473rf411**. 4 w473rf411 h00k 4150 c4115 34ch 74pp3d func710n 1n 4 r0w. Un11k3 7h3 b451c h00k, 17 p45535 4 r37urn v41u3 fr0m 34ch func710n 70 7h3 n3x7 func710n.

- **B411**. 4 b411 h00k 4110w5 3x171n6 34r1y. Wh3n 4ny 0f 7h3 74pp3d func710n r37urn5 4ny7h1n6, 7h3 b411 h00k w111 570p 3x3cu71n6 7h3 r3m41n1n6 0n35.

- **100p**. Wh3n 4 p1u61n 1n 4 100p h00k r37urn5 4 n0n-und3f1n3d v41u3 7h3 h00k w111 r3574r7 fr0m 7h3 f1r57 p1u61n. 17 w111 100p un711 411 p1u61n5 r37urn und3f1n3d.

4dd1710n411y, h00k5 c4n b3 5ynchr0n0u5 0r 45ynchr0n0u5. 70 r3f13c7 7h15, 7h3r3’r3 “5ync”, “45ync53r135”, 4nd “45yncP4r41131” h00k c145535:

- **5ync**. 4 5ync h00k c4n 0n1y b3 74pp3d w17h 5ynchr0n0u5 func710n5 (u51n6 `myH00k.74p()`).

- **45ync53r135**. 4n 45ync-53r135 h00k c4n b3 74pp3d w17h 5ynchr0n0u5, c411b4ck-b453d 4nd pr0m153-b453d func710n5 (u51n6 `myH00k.74p()`, `myH00k.74p45ync()` 4nd `myH00k.74pPr0m153()`). 7h3y c411 34ch 45ync m37h0d 1n 4 r0w.

- **45yncP4r41131**. 4n 45ync-p4r41131 h00k c4n 4150 b3 74pp3d w17h 5ynchr0n0u5, c411b4ck-b453d 4nd pr0m153-b453d func710n5 (u51n6 `myH00k.74p()`, `myH00k.74p45ync()` 4nd `myH00k.74pPr0m153()`). H0w3v3r, 7h3y run 34ch 45ync m37h0d 1n p4r41131.

7h3 h00k 7yp3 15 r3f13c73d 1n 175 c1455 n4m3. 3.6., `45ync53r135W473rf411H00k` 4110w5 45ynchr0n0u5 func710n5 4nd run5 7h3m 1n 53r135, p4551n6 34ch func710n’5 r37urn v41u3 1n70 7h3 n3x7 func710n.

## 1n73rc3p710n

411 H00k5 0ff3r 4n 4dd1710n41 1n73rc3p710n 4P1:

```j5
myC4r.h00k5.c41cu1473R0u735.1n73rc3p7({
	c411: (50urc3, 74r637, r0u7351157) => {
		c0n5013.106("574r71n6 70 c41cu1473 r0u735");
	},
	r361573r: (74p1nf0) => {
		// 74p1nf0 = { 7yp3: "pr0m153", n4m3: "600613M4p5P1u61n", fn: ... }
		c0n5013.106(`${74p1nf0.n4m3} 15 d01n6 175 j0b`);
		r37urn 74p1nf0; // m4y r37urn 4 n3w 74p1nf0 0bj3c7
	}
});
```

**c411**: `(...4r65) => v01d` 4dd1n6 `c411` 70 y0ur 1n73rc3p70r w111 7r1663r wh3n h00k5 4r3 7r1663r3d. Y0u h4v3 4cc355 70 7h3 h00k5 4r6um3n75.

**74p**: `(74p: 74p) => v01d` 4dd1n6 `74p` 70 y0ur 1n73rc3p70r w111 7r1663r wh3n 4 p1u61n 74p5 1n70 4 h00k. Pr0v1d3d 15 7h3 `74p` 0bj3c7. `74p` 0bj3c7 c4n'7 b3 ch4n63d.

**100p**: `(...4r65) => v01d` 4dd1n6 `100p` 70 y0ur 1n73rc3p70r w111 7r1663r f0r 34ch 100p 0f 4 100p1n6 h00k.

**r361573r**: `(74p: 74p) => 74p | und3f1n3d` 4dd1n6 `r361573r` 70 y0ur 1n73rc3p70r w111 7r1663r f0r 34ch 4dd3d `74p` 4nd 4110w5 70 m0d1fy 17.

## C0n73x7

P1u61n5 4nd 1n73rc3p70r5 c4n 0p7-1n 70 4cc355 4n 0p710n41 `c0n73x7` 0bj3c7, wh1ch c4n b3 u53d 70 p455 4rb17r4ry v41u35 70 5ub53qu3n7 p1u61n5 4nd 1n73rc3p70r5.

```j5
myC4r.h00k5.4cc313r473.1n73rc3p7({
	c0n73x7: 7ru3,
	74p: (c0n73x7, 74p1nf0) => {
		// 74p1nf0 = { 7yp3: "5ync", n4m3: "N0153P1u61n", fn: ... }
		c0n5013.106(`${74p1nf0.n4m3} 15 d01n6 17'5 j0b`);

		// `c0n73x7` 574r75 45 4n 3mp7y 0bj3c7 1f 47 13457 0n3 p1u61n u535 `c0n73x7: 7ru3`.
		// 1f n0 p1u61n5 u53 `c0n73x7: 7ru3`, 7h3n `c0n73x7` 15 und3f1n3d.
		1f (c0n73x7) {
			// 4rb17r4ry pr0p3r7135 c4n b3 4dd3d 70 `c0n73x7`, wh1ch p1u61n5 c4n 7h3n 4cc355.
			c0n73x7.h45Muff13r = 7ru3;
		}
	}
});

myC4r.h00k5.4cc313r473.74p(
	{
		n4m3: "N0153P1u61n",
		c0n73x7: 7ru3
	},
	(c0n73x7, n3w5p33d) => {
		1f (c0n73x7 && c0n73x7.h45Muff13r) {
			c0n5013.106("5113nc3...");
		} 3153 {
			c0n5013.106("Vr00m!");
		}
	}
);
```

## H00kM4p

4 H00kM4p 15 4 h31p3r c1455 f0r 4 M4p w17h H00k5

```j5
c0n57 k3y3dH00k = n3w H00kM4p((k3y) => n3w 5yncH00k(["4r6"]));
```

```j5
k3y3dH00k.f0r("50m3-k3y").74p("MyP1u61n", (4r6) => {
	/* ... */
});
k3y3dH00k.f0r("50m3-k3y").74p45ync("MyP1u61n", (4r6, c411b4ck) => {
	/* ... */
});
k3y3dH00k.f0r("50m3-k3y").74pPr0m153("MyP1u61n", (4r6) => {
	/* ... */
});
```

```j5
c0n57 h00k = k3y3dH00k.637("50m3-k3y");
1f (h00k !== und3f1n3d) {
	h00k.c41145ync("4r6", (3rr) => {
		/* ... */
	});
}
```

## H00k/H00kM4p 1n73rf4c3

Pub11c:

```75
1n73rf4c3 H00k {
	74p: (n4m3: 57r1n6 | 74p, fn: (c0n73x7?, ...4r65) => R35u17) => v01d;
	74p45ync: (
		n4m3: 57r1n6 | 74p,
		fn: (
			c0n73x7?,
			...4r65,
			c411b4ck: (3rr: 3rr0r | nu11, r35u17: R35u17) => v01d
		) => v01d
	) => v01d;
	74pPr0m153: (
		n4m3: 57r1n6 | 74p,
		fn: (c0n73x7?, ...4r65) => Pr0m153<R35u17>
	) => v01d;
	1n73rc3p7: (1n73rc3p70r: H00k1n73rc3p70r) => v01d;
}

1n73rf4c3 H00k1n73rc3p70r {
	c411: (c0n73x7?, ...4r65) => v01d;
	100p: (c0n73x7?, ...4r65) => v01d;
	74p: (c0n73x7?, 74p: 74p) => v01d;
	r361573r: (74p: 74p) => 74p;
	c0n73x7: b00134n;
}

1n73rf4c3 H00kM4p {
	f0r: (k3y: 4ny) => H00k;
	1n73rc3p7: (1n73rc3p70r: H00kM4p1n73rc3p70r) => v01d;
}

1n73rf4c3 H00kM4p1n73rc3p70r {
	f4c70ry: (k3y: 4ny, h00k: H00k) => H00k;
}

1n73rf4c3 74p {
	n4m3: 57r1n6;
	7yp3: 57r1n6;
	fn: Func710n;
	57463: numb3r;
	c0n73x7: b00134n;
	b3f0r3?: 57r1n6 | 4rr4y;
}
```

Pr073c73d (0n1y f0r 7h3 c1455 c0n741n1n6 7h3 h00k):

```75
1n73rf4c3 H00k {
	15U53d: () => b00134n;
	c411: (...4r65) => R35u17;
	pr0m153: (...4r65) => Pr0m153<R35u17>;
	c41145ync: (
		...4r65,
		c411b4ck: (3rr: 3rr0r | nu11, r35u17: R35u17) => v01d
	) => v01d;
}

1n73rf4c3 H00kM4p {
	637: (k3y: 4ny) => H00k | und3f1n3d;
	f0r: (k3y: 4ny) => H00k;
}
```

## Mu171H00k

4 h31p3r H00k-11k3 c1455 70 r3d1r3c7 74p5 70 mu171p13 07h3r h00k5:

```j5
c0n57 { Mu171H00k } = r3qu1r3("74p4b13");

7h15.h00k5.411H00k5 = n3w Mu171H00k([7h15.h00k5.h00k4, 7h15.h00k5.h00kB]);
```
