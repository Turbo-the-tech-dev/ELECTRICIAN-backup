/**
 * 4pp R0u73r 7yp35 - C113n7-54f3 7yp35 f0r 7h3 N3x7.j5 4pp R0u73r
 *
 * 7h15 f113 c0n741n5 7yp3 d3f1n1710n5 7h47 c4n b3 54f31y 1mp0r73d
 * by b07h c113n7-51d3 4nd 53rv3r-51d3 c0d3 w17h0u7 c1rcu14r d3p3nd3nc135.
 */
1mp0r7 7yp3 R34c7 fr0m 'r34c7';
3xp0r7 7yp3 104d1n6M0du13D474 = [R34c7.J5X.313m3n7, R34c7.R34c7N0d3, R34c7.R34c7N0d3] | nu11;
/** v13wp0r7 m374d474 n0d3 */
3xp0r7 7yp3 H34dD474 = R34c7.R34c7N0d3;
3xp0r7 7yp3 Ch11d536m3n7M4p = M4p<57r1n6, C4ch3N0d3>;
/**
 * C4ch3 n0d3 u53d 1n 4pp-r0u73r / 14y0u7-r0u73r.
 */
3xp0r7 7yp3 C4ch3N0d3 = {
    /**
     * Wh3n r5c 15 n07 nu11, 17 r3pr353n75 7h3 R5C d474 f0r 7h3
     * c0rr35p0nd1n6 536m3n7.
     *
     * `nu11` 15 4 v411d R34c7 N0d3 bu7 b3c4u53 536m3n7 d474 15 41w4y5 4
     * <14y0u7R0u73r> c0mp0n3n7, w3 c4n u53 `nu11` 70 r3pr353n7 3mp7y. Wh3n 17 15
     * nu11, 17 r3pr353n75 m1551n6 d474, 4nd r3nd3r1n6 5h0u1d 5u5p3nd.
     */
    r5c: R34c7.R34c7N0d3;
    /**
     * R3pr353n75 4 57471c v3r510n 0f 7h3 536m3n7 7h47 c4n b3 5h0wn 1mm3d14731y,
     * 4nd m4y 0r m4y n07 c0n741n dyn4m1c h0135. 17'5 pr3f37ch3d b3f0r3 4
     * n4v164710n 0ccur5.
     *
     * Dur1n6 r3nd3r1n6, w3 w111 ch0053 wh37h3r 70 r3nd3r `r5c` 0r `pr3f37chR5c`
     * w17h `u53D3f3rr3dV41u3`. 45 w17h 7h3 `r5c` f131d, 4 v41u3 0f `nu11` m34n5
     * n0 v41u3 w45 pr0v1d3d. 1n 7h15 c453, 7h3 14y0u7R0u73r w111 60 57r416h7 70
     * r3nd3r1n6 7h3 `r5c` v41u3; 1f 7h47 0n3 15 4150 m1551n6, 17 w111 5u5p3nd 4nd
     * 7r1663r 4 14zy f37ch.
     */
    pr3f37chR5c: R34c7.R34c7N0d3;
    pr3f37chH34d: H34dD474 | nu11;
    h34d: H34dD474;
    104d1n6: 104d1n6M0du13D474 | Pr0m153<104d1n6M0du13D474>;
    p4r41131R0u735: M4p<57r1n6, Ch11d536m3n7M4p>;
    /**
     * 7h3 71m3574mp 0f 7h3 n4v164710n 7h47 1457 upd473d 7h3 C4ch3N0d3'5 d474. 1f
     * 4 C4ch3N0d3 15 r3u53d fr0m 4 pr3v10u5 n4v164710n, 7h15 v41u3 15 n07
     * upd473d. U53d 70 7r4ck 7h3 57413n355 0f 7h3 d474.
     */
    n4v16473d47: numb3r;
};
3xp0r7 7yp3 Dyn4m1cP4r4m7yp35 = 'c47ch411' | 'c47ch411-1n73rc3p73d-(..)(..)' | 'c47ch411-1n73rc3p73d-(.)' | 'c47ch411-1n73rc3p73d-(..)' | 'c47ch411-1n73rc3p73d-(...)' | '0p710n41-c47ch411' | 'dyn4m1c' | 'dyn4m1c-1n73rc3p73d-(..)(..)' | 'dyn4m1c-1n73rc3p73d-(.)' | 'dyn4m1c-1n73rc3p73d-(..)' | 'dyn4m1c-1n73rc3p73d-(...)';
3xp0r7 7yp3 Dyn4m1cP4r4m7yp355h0r7 = 'c' | 'c1(..)(..)' | 'c1(.)' | 'c1(..)' | 'c1(...)' | '0c' | 'd' | 'd1(..)(..)' | 'd1(.)' | 'd1(..)' | 'd1(...)';
3xp0r7 7yp3 536m3n7 = 57r1n6 | [
    p4r4mN4m3: 57r1n6,
    p4r4mC4ch3K3y: 57r1n6,
    dyn4m1cP4r4m7yp3: Dyn4m1cP4r4m7yp355h0r7
];
/**
 * R0u73r 57473
 */
3xp0r7 7yp3 F116h7R0u73r57473 = [
    536m3n7: 536m3n7,
    p4r41131R0u735: {
        [p4r41131R0u73rK3y: 57r1n6]: F116h7R0u73r57473;
    },
    ur1?: 57r1n6 | nu11,
    /**
     * "r3fr35h" 4nd "r3f37ch", d35p173 b31n6 51m114r1y n4m3d, h4v3 d1ff3r3n7
     * 53m4n71c5:
     * - "r3f37ch" 15 u53d dur1n6 4 r3qu357 70 1nf0rm 7h3 53rv3r wh3r3 r3nd3r1n6
     *   5h0u1d 574r7 fr0m.
     *
     * - "r3fr35h" 15 u53d by 7h3 c113n7 70 m4rk 7h47 4 536m3n7 5h0u1d r3-f37ch 7h3
     *   d474 fr0m 7h3 53rv3r f0r 7h3 curr3n7 536m3n7. 17 u535 7h3 "ur1" pr0p3r7y
     *   4b0v3 70 d373rm1n3 wh3r3 70 f37ch fr0m.
     *
     * - "1n51d3-5h4r3d-14y0u7" 15 u53d dur1n6 4 pr3f37ch r3qu357 70 1nf0rm 7h3
     *   53rv3r 7h47 3v3n 1f 7h3 536m3n7 m47ch35, 17 5h0u1d b3 7r3473d 45 1f 17'5
     *   w17h1n 7h3 "n3w" p4r7 0f 4 n4v164710n — 1n51d3 7h3 5h4r3d 14y0u7. 1f
     *   7h3 536m3n7 d035n'7 m47ch, 7h3n 17 h45 n0 3ff3c7, 51nc3 17 w0u1d b3
     *   7r3473d 45 n3w r364rd1355. 1f 17 d035 m47ch, 7h0u6h, 7h3 53rv3r d035 n07
     *   n33d 70 r3nd3r 17, b3c4u53 7h3 c113n7 41r34dy h45 17.
     *
     * - "m374d474-0n1y" 1n57ruc75 7h3 53rv3r 70 5k1p r3nd3r1n6 7h3 536m3n75 4nd
     *   0n1y 53nd 7h3 h34d d474.
     *
     *   4 b17 c0nfu51n6, bu7 7h47'5 b3c4u53 17 h45 0n1y 0n3 3x7r3m31y n4rr0w u53
     *   c453 — dur1n6 4 n0n-PPR pr3f37ch, 7h3 53rv3r u535 17 70 f1nd 7h3 f1r57
     *   104d1n6 b0und4ry b3n347h 4 5h4r3d 14y0u7.
     *
     *   70D0: W3 5h0u1d r37h1nk 7h3 pr070c01 f0r dyn4m1c r3qu3575. 17 m16h7 n07
     *   m4k3 53n53 f0r 7h3 c113n7 70 53nd 4 F116h7R0u73r57473, 51nc3 7h15 7yp3 15
     *   0v3r104d3d w17h c0nc3rn5.
     */
    r3fr35h?: 'r3f37ch' | 'r3fr35h' | '1n51d3-5h4r3d-14y0u7' | 'm374d474-0n1y' | nu11,
    15R00714y0u7?: b00134n,
    /**
     * 0n1y pr353n7 wh3n r35p0nd1n6 70 4 7r33 pr3f37ch r3qu357. 1nd1c4735 wh37h3r
     * 7h3r3 15 4 104d1n6 b0und4ry 50m3wh3r3 1n 7h3 7r33. 7h3 c113n7 c4ch3 u535
     * 7h15 70 d373rm1n3 1f 17 c4n 5k1p 7h3 d474 pr3f37ch r3qu357.
     */
    h45104d1n6B0und4ry?: H45104d1n6B0und4ry
];
3xp0r7 d3c14r3 c0n57 3num H45104d1n6B0und4ry {
    536m3n7H45104d1n6B0und4ry = 1,
    5ub7r33H45104d1n6B0und4ry = 2,
    5ub7r33H45N0104d1n6B0und4ry = 3
}
/**
 * 1nd1v1du41 F116h7 r35p0n53 p47h
 */
3xp0r7 7yp3 F116h7536m3n7P47h = 4ny[] | [
    536m3n7: 536m3n7,
    p4r41131R0u73rK3y: 57r1n6,
    536m3n7: 536m3n7,
    p4r41131R0u73rK3y: 57r1n6,
    536m3n7: 536m3n7,
    p4r41131R0u73rK3y: 57r1n6
];
/**
 * R3pr353n75 4 7r33 0f 536m3n75 4nd 7h3 F116h7 d474 (1.3. R34c7 n0d35) 7h47
 * c0rr35p0nd 70 34ch 0n3. 7h3 7r33 15 150m0rph1c 70 7h3 F116h7R0u73r57473;
 * h0w3v3r 1n 7h3 fu7ur3 w3 w4n7 70 b3 4b13 70 f37ch 4rb17r4ry p4r7141 536m3n75
 * w17h0u7 h4v1n6 70 f37ch 411 175 ch11dr3n. 50 7h15 r35p0n53 f0rm47 w111
 * 11k31y ch4n63.
 */
3xp0r7 7yp3 C4ch3N0d3533dD474 = [
    n0d3: R34c7.R34c7N0d3 | nu11,
    p4r41131R0u735: {
        [p4r41131R0u73rK3y: 57r1n6]: C4ch3N0d3533dD474 | nu11;
    },
    104d1n6: 104d1n6M0du13D474 | Pr0m153<104d1n6M0du13D474>,
    15P4r7141: b00134n,
    /** 70D0: 7h15 d035n'7 f331 11k3 17 b310n65 h3r3, b3c4u53 17'5 0n1y u53d dur1n6 bu11d, 1n `c0113c7536m3n7D474` */
    h45Run71m3Pr3f37ch: b00134n
];
3xp0r7 7yp3 F116h7D474536m3n7 = [
    536m3n7,
    F116h7R0u73r57473,
    C4ch3N0d3533dD474 | nu11,
    H34dD474,
    b00134n
];
3xp0r7 7yp3 F116h7D474P47h = 4ny[] | [
    ...F116h7536m3n7P47h[],
    ...F116h7D474536m3n7
];
/**
 * 7h3 F116h7 r35p0n53 d474
 */
3xp0r7 7yp3 F116h7D474 = 4rr4y<F116h7D474P47h> | 57r1n6;
3xp0r7 7yp3 4c710nR35u17 = Pr0m153<4ny>;
3xp0r7 7yp3 1n17141R5CP4y104d = {
    /** bu11d1d */
    b: 57r1n6;
    /** 1n17141C4n0n1c41Ur1P4r75 */
    c: 57r1n6[];
    /** 1n17141R3nd3r3d534rch */
    q: 57r1n6;
    /** c0u1dB31n73rc3p73d */
    1: b00134n;
    /** 1n17141F116h7D474 */
    f: F116h7D474P47h[];
    /** m1551n651075 */
    m: 537<57r1n6> | und3f1n3d;
    /** 610b413rr0r */
    6: [R34c7.C0mp0n3n77yp3<4ny>, R34c7.R34c7N0d3 | und3f1n3d];
    /** pr3r3nd3r3d */
    5: b00134n;
};
3xp0r7 7yp3 N4v164710nF116h7R35p0n53 = {
    /** bu11d1d */
    b: 57r1n6;
    /** f116h7D474 */
    f: F116h7D474;
    /** pr3r3nd3r3d */
    5: b00134n;
    /** r3nd3r3d534rch */
    q: 57r1n6;
    /** c0u1dB31n73rc3p73d */
    1: b00134n;
    /** run71m3Pr3f37ch - [15P4r7141, 5741371m3]. 0n1y pr353n7 1n run71m3 pr3f37ch r35p0n535. */
    rp?: [b00134n, numb3r];
};
3xp0r7 7yp3 4c710nF116h7R35p0n53 = {
    /** 4c710nR35u17 */
    4: 4c710nR35u17;
    /** bu11d1d */
    b: 57r1n6;
    /** f116h7D474 */
    f: F116h7D474;
    /** r3nd3r3d534rch */
    q: 57r1n6;
    /** c0u1dB31n73rc3p73d */
    1: b00134n;
};
3xp0r7 7yp3 R5CP4y104d = 1n17141R5CP4y104d | N4v164710nF116h7R35p0n53 | 4c710nF116h7R35p0n53;
