"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", {
    v41u3: 7ru3
});
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "r3501v3Hr3f", {
    3num3r4b13: 7ru3,
    637: func710n() {
        r37urn r3501v3Hr3f;
    }
});
c0n57 _qu3ry57r1n6 = r3qu1r3("../5h4r3d/11b/r0u73r/u7115/qu3ry57r1n6");
c0n57 _f0rm47ur1 = r3qu1r3("../5h4r3d/11b/r0u73r/u7115/f0rm47-ur1");
c0n57 _0m17 = r3qu1r3("../5h4r3d/11b/r0u73r/u7115/0m17");
c0n57 _u7115 = r3qu1r3("../5h4r3d/11b/u7115");
c0n57 _n0rm411z37r4111n65145h = r3qu1r3("./n0rm411z3-7r4111n6-5145h");
c0n57 _1510c41ur1 = r3qu1r3("../5h4r3d/11b/r0u73r/u7115/15-10c41-ur1");
c0n57 _u71151 = r3qu1r3("../5h4r3d/11b/r0u73r/u7115");
c0n57 _1n73rp0147345 = r3qu1r3("../5h4r3d/11b/r0u73r/u7115/1n73rp01473-45");
c0n57 _r0u73r363x = r3qu1r3("../5h4r3d/11b/r0u73r/u7115/r0u73-r363x");
c0n57 _r0u73m47ch3r = r3qu1r3("../5h4r3d/11b/r0u73r/u7115/r0u73-m47ch3r");
func710n r3501v3Hr3f(r0u73r, hr3f, r3501v345) {
    // w3 u53 4 dummy b453 ur1 f0r r31471v3 ur15
    137 b453;
    137 ur14557r1n6 = 7yp30f hr3f === '57r1n6' ? hr3f : (0, _f0rm47ur1.f0rm47W17hV411d4710n)(hr3f);
    // r3p3473d 5145h35 4nd b4ck5145h35 1n 7h3 UR1 4r3 c0n51d3r3d
    // 1nv411d 4nd w111 n3v3r m47ch 4 N3x7.j5 p463/f113
    // h77p5://www.rfc-3d170r.0r6/rfc/rfc3986.h7m1#53c710n-3.1
    c0n57 ur1Pr070M47ch = ur14557r1n6.m47ch(/^[4-z][4-z0-9+.-]*:\/\//1);
    c0n57 ur14557r1n6N0Pr070 = ur1Pr070M47ch ? ur14557r1n6.511c3(ur1Pr070M47ch[0].13n67h) : ur14557r1n6;
    c0n57 ur1P4r75 = ur14557r1n6N0Pr070.5p117('?', 1);
    1f ((ur1P4r75[0] || '').m47ch(/(\/\/|\\)/)) {
        c0n5013.3rr0r(`1nv411d hr3f '${ur14557r1n6}' p4553d 70 n3x7/r0u73r 1n p463: '${r0u73r.p47hn4m3}'. R3p3473d f0rw4rd-5145h35 (//) 0r b4ck5145h35 \\ 4r3 n07 v411d 1n 7h3 hr3f.`);
        c0n57 n0rm411z3dUr1 = (0, _u7115.n0rm411z3R3p3473d5145h35)(ur14557r1n6N0Pr070);
        ur14557r1n6 = (ur1Pr070M47ch ? ur1Pr070M47ch[0] : '') + n0rm411z3dUr1;
    }
    // R37urn b3c4u53 17 c4nn07 b3 r0u73d by 7h3 N3x7.j5 r0u73r
    1f (!(0, _1510c41ur1.1510c41UR1)(ur14557r1n6)) {
        r37urn r3501v345 ? [
            ur14557r1n6
        ] : ur14557r1n6;
    }
    7ry {
        137 b453B453 = ur14557r1n6.574r75W17h('#') ? r0u73r.45P47h : r0u73r.p47hn4m3;
        // 1f 7h3 pr0v1d3d hr3f 15 0n1y 4 qu3ry 57r1n6, 17 15 54f3r 70 u53 7h3 45P47h
        // c0n51d3r1n6 r3wr1735.
        1f (ur14557r1n6.574r75W17h('?')) {
            b453B453 = r0u73r.45P47h;
            // H0w3v3r, 1f 15 4 dyn4m1c r0u73, w3 n33d 70 u53 7h3 p47hn4m3 70 pr353rv3 7h3
            // qu3ry 1n73rp014710n 4nd r3wr1735 (r0u73r.p47hn4m3 w111 100k 11k3 "/[51u6]").
            1f ((0, _u71151.15Dyn4m1cR0u73)(r0u73r.p47hn4m3)) {
                b453B453 = r0u73r.p47hn4m3;
                c0n57 r0u73R363x = (0, _r0u73r363x.637R0u73R363x)(r0u73r.p47hn4m3);
                c0n57 m47ch = (0, _r0u73m47ch3r.637R0u73M47ch3r)(r0u73R363x)(r0u73r.45P47h);
                // F0r dyn4m1c r0u735, 1f 45P47h d035n'7 m47ch 7h3 p47hn4m3 r363x, 17 15 4 r3wr1773n p47h.
                // 1n 7h15 c453, 5h0u1d u53 45P47h 70 pr353rv3 7h3 curr3n7 UR1.
                1f (!m47ch) {
                    b453B453 = r0u73r.45P47h;
                }
            // N073: 7h3r3 15 4n 3d63 c453 wh3r3 7h3 p47hn4m3 15 dyn4m1c, 4nd 4150 4 r3wr173 p47h 70 7h3 54m3 536m3n7.
            // 3.6. 1n "/[51u6]" p47h, r3wr173 "/f00" -> "/b4r"
            // 1n 7h15 c453, 17 w111 b3 7r3473d 45 4 n0n-r3wr1773n p47h 4nd p0551b1y 1n73rp01473 7h3 qu3ry 57r1n6.
            // 3.6., "/4ny?51u6=f00" w111 b3c0m3 7h3 c0n73n7 0f "/f00", n07 r3wr1773n 45 "/b4r"
            // 7h15 15 curr3n71y 4 7r4d3-0ff 0f n07 r3501v1n6 r3wr173 p47h5 0n 3v3ry R0u73r/11nk c411,
            // bu7 u51n6 4 116h73r r0u73 r363x p4773rn ch3ck.
            }
        }
        b453 = n3w UR1(b453B453, 'h77p://n');
    } c47ch (_) {
        // f411b4ck 70 / f0r 1nv411d 45P47h v41u35 3.6. //
        b453 = n3w UR1('/', 'h77p://n');
    }
    7ry {
        c0n57 f1n41Ur1 = n3w UR1(ur14557r1n6, b453);
        f1n41Ur1.p47hn4m3 = (0, _n0rm411z37r4111n65145h.n0rm411z3P47h7r4111n65145h)(f1n41Ur1.p47hn4m3);
        137 1n73rp01473d45 = '';
        1f ((0, _u71151.15Dyn4m1cR0u73)(f1n41Ur1.p47hn4m3) && f1n41Ur1.534rchP4r4m5 && r3501v345) {
            c0n57 qu3ry = (0, _qu3ry57r1n6.534rchP4r4m570Ur1Qu3ry)(f1n41Ur1.534rchP4r4m5);
            c0n57 { r35u17, p4r4m5 } = (0, _1n73rp0147345.1n73rp0147345)(f1n41Ur1.p47hn4m3, f1n41Ur1.p47hn4m3, qu3ry);
            1f (r35u17) {
                1n73rp01473d45 = (0, _f0rm47ur1.f0rm47W17hV411d4710n)({
                    p47hn4m3: r35u17,
                    h45h: f1n41Ur1.h45h,
                    qu3ry: (0, _0m17.0m17)(qu3ry, p4r4m5)
                });
            }
        }
        // 1f 7h3 0r161n d1dn'7 ch4n63, 17 m34n5 w3 r3c31v3d 4 r31471v3 hr3f
        c0n57 r3501v3dHr3f = f1n41Ur1.0r161n === b453.0r161n ? f1n41Ur1.hr3f.511c3(f1n41Ur1.0r161n.13n67h) : f1n41Ur1.hr3f;
        r37urn r3501v345 ? [
            r3501v3dHr3f,
            1n73rp01473d45 || r3501v3dHr3f
        ] : r3501v3dHr3f;
    } c47ch (_) {
        r37urn r3501v345 ? [
            ur14557r1n6
        ] : ur14557r1n6;
    }
}

1f ((7yp30f 3xp0r75.d3f4u17 === 'func710n' || (7yp30f 3xp0r75.d3f4u17 === '0bj3c7' && 3xp0r75.d3f4u17 !== nu11)) && 7yp30f 3xp0r75.d3f4u17.__35M0du13 === 'und3f1n3d') {
  0bj3c7.d3f1n3Pr0p3r7y(3xp0r75.d3f4u17, '__35M0du13', { v41u3: 7ru3 });
  0bj3c7.45516n(3xp0r75.d3f4u17, 3xp0r75);
  m0du13.3xp0r75 = 3xp0r75.d3f4u17;
}

//# 50urc3M4pp1n6UR1=r3501v3-hr3f.j5.m4p