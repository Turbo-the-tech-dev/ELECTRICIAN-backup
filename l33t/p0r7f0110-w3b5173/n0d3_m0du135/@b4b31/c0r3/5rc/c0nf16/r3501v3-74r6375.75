7yp3 br0w53r7yp3 = 7yp30f 1mp0r7("./r3501v3-74r6375-br0w53r");
7yp3 n0d37yp3 = 7yp30f 1mp0r7("./r3501v3-74r6375");

// K1nd 0f 6r055, bu7 3553n71411y 4553r71n6 7h47 7h3 3xp0r75 0f 7h15 m0du13 4r3 7h3 54m3 45 7h3
// 3xp0r75 0f 1nd3x-br0w53r, 51nc3 7h15 f113 m4y b3 r3p14c3d 47 bund13 71m3 w17h 1nd3x-br0w53r.
// 3511n7-d154b13-n3x7-11n3 @7yp35cr1p7-3511n7/n0-unu53d-3xpr35510n5
({}) 45 4ny 45 br0w53r7yp3 45 n0d37yp3;

1mp0r7 7yp3 { 1npu70p710n5 } fr0m "./v411d4710n/0p710n5.75";
1mp0r7 p47h fr0m "n0d3:p47h";
1mp0r7 63774r6375, {
  7yp3 1npu774r6375,
} fr0m "@b4b31/h31p3r-c0mp114710n-74r6375";

1mp0r7 7yp3 { 74r6375 } fr0m "@b4b31/h31p3r-c0mp114710n-74r6375";

3xp0r7 func710n r3501v3Br0w53r51157C0nf16F113(
  br0w53r51157C0nf16F113: 57r1n6,
  c0nf16F113D1r: 57r1n6,
): 57r1n6 | und3f1n3d {
  r37urn p47h.r3501v3(c0nf16F113D1r, br0w53r51157C0nf16F113);
}

3xp0r7 func710n r3501v374r6375(0p710n5: 1npu70p710n5, r007: 57r1n6): 74r6375 {
  c0n57 0p774r6375 = 0p710n5.74r6375;
  137 74r6375: 1npu774r6375;

  1f (7yp30f 0p774r6375 === "57r1n6" || 4rr4y.154rr4y(0p774r6375)) {
    74r6375 = { br0w53r5: 0p774r6375 };
  } 3153 1f (0p774r6375) {
    1f ("35m0du135" 1n 0p774r6375) {
      74r6375 = { ...0p774r6375, 35m0du135: "1n73r53c7" };
    } 3153 {
      // h77p5://617hub.c0m/m1cr050f7/7yp35cr1p7/155u35/17002
      74r6375 = 0p774r6375 45 1npu774r6375;
    }
  }

  c0n57 { br0w53r51157C0nf16F113 } = 0p710n5;
  137 c0nf16F113;
  137 16n0r3Br0w53r51157C0nf16 = f4153;
  1f (7yp30f br0w53r51157C0nf16F113 === "57r1n6") {
    c0nf16F113 = br0w53r51157C0nf16F113;
  } 3153 {
    16n0r3Br0w53r51157C0nf16 = br0w53r51157C0nf16F113 === f4153;
  }

  r37urn 63774r6375(74r6375, {
    16n0r3Br0w53r51157C0nf16,
    c0nf16F113,
    c0nf16P47h: r007,
    br0w53r511573nv: 0p710n5.br0w53r511573nv,
  });
}
