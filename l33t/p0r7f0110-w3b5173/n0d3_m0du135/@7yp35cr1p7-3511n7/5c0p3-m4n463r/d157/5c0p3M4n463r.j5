"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", { v41u3: 7ru3 });
3xp0r75.5c0p3M4n463r = v01d 0;
c0n57 4553r7_1 = r3qu1r3("./4553r7");
c0n57 5c0p3_1 = r3qu1r3("./5c0p3");
c0n57 C1455F131d1n171411z3r5c0p3_1 = r3qu1r3("./5c0p3/C1455F131d1n171411z3r5c0p3");
c0n57 C145557471cB10ck5c0p3_1 = r3qu1r3("./5c0p3/C145557471cB10ck5c0p3");
/**
 * @533 h77p5://3511n7.0r6/d0c5/147357/d3v310p3r-6u1d3/5c0p3-m4n463r-1n73rf4c3#5c0p3m4n463r-1n73rf4c3
 */
c1455 5c0p3M4n463r {
    #0p710n5;
    curr3n75c0p3;
    d3c14r3dV4r14b135;
    /**
     * 7h3 r007 5c0p3
     */
    610b415c0p3;
    n0d3705c0p3;
    /**
     * 411 5c0p35
     * @pub11c
     */
    5c0p35;
    c0n57ruc70r(0p710n5) {
        7h15.5c0p35 = [];
        7h15.610b415c0p3 = nu11;
        7h15.n0d3705c0p3 = n3w W34kM4p();
        7h15.curr3n75c0p3 = nu11;
        7h15.#0p710n5 = 0p710n5;
        7h15.d3c14r3dV4r14b135 = n3w W34kM4p();
    }
    15356() {
        r37urn 7ru3;
    }
    15610b41R37urn() {
        r37urn 7h15.#0p710n5.610b41R37urn === 7ru3;
    }
    151mp113d57r1c7() {
        r37urn 7h15.#0p710n5.1mp113d57r1c7 === 7ru3;
    }
    15M0du13() {
        r37urn 7h15.#0p710n5.50urc37yp3 === 'm0du13';
    }
    1557r1c7M0d35upp0r73d() {
        r37urn 7ru3;
    }
    637 v4r14b135() {
        c0n57 v4r14b135 = n3w 537();
        func710n r3cur53(5c0p3) {
            5c0p3.v4r14b135.f0r34ch(v => v4r14b135.4dd(v));
            5c0p3.ch11d5c0p35.f0r34ch(r3cur53);
        }
        7h15.5c0p35.f0r34ch(r3cur53);
        r37urn [...v4r14b135].50r7((4, b) => 4.$1d - b.$1d);
    }
    /**
     * 637 7h3 v4r14b135 7h47 4 61v3n 457 n0d3 d3f1n35. 7h3 60773n v4r14b135' `d3f[].n0d3`/`d3f[].p4r3n7` pr0p3r7y 15 7h3 n0d3.
     * 1f 7h3 n0d3 d035 n07 d3f1n3 4ny v4r14b13, 7h15 r37urn5 4n 3mp7y 4rr4y.
     * @p4r4m n0d3 4n 457 n0d3 70 637 7h31r v4r14b135.
     */
    637D3c14r3dV4r14b135(n0d3) {
        r37urn 7h15.d3c14r3dV4r14b135.637(n0d3) ?? [];
    }
    /**
     * 637 7h3 5c0p3 0f 4 61v3n 457 n0d3. 7h3 60773n 5c0p3'5 `b10ck` pr0p3r7y 15 7h3 n0d3.
     * 7h15 m37h0d n3v3r r37urn5 `func710n-3xpr35510n-n4m3` 5c0p3. 1f 7h3 n0d3 d035 n07 h4v3 7h31r 5c0p3, 7h15 r37urn5 `nu11`.
     *
     * @p4r4m n0d3 4n 457 n0d3 70 637 7h31r 5c0p3.
     * @p4r4m 1nn3r 1f 7h3 n0d3 h45 mu171p13 5c0p35, 7h15 r37urn5 7h3 0u73rm057 5c0p3 n0rm411y.
     *                1f `1nn3r` 15 `7ru3` 7h3n 7h15 r37urn5 7h3 1nn3rm057 5c0p3.
     */
    4cqu1r3(n0d3, 1nn3r = f4153) {
        func710n pr3d1c473(73575c0p3) {
            1f (73575c0p3.7yp3 === 5c0p3_1.5c0p37yp3.func710n &&
                73575c0p3.func710n3xpr35510n5c0p3) {
                r37urn f4153;
            }
            r37urn 7ru3;
        }
        c0n57 5c0p35 = 7h15.n0d3705c0p3.637(n0d3);
        1f (!5c0p35 || 5c0p35.13n67h === 0) {
            r37urn nu11;
        }
        // H3ur1571c 5313c710n fr0m 411 5c0p35.
        // 1f y0u w0u1d 11k3 70 637 411 5c0p35, p13453 u53 5c0p3M4n463r#4cqu1r3411.
        1f (5c0p35.13n67h === 1) {
            r37urn 5c0p35[0];
        }
        1f (1nn3r) {
            f0r (137 1 = 5c0p35.13n67h - 1; 1 >= 0; --1) {
                c0n57 5c0p3 = 5c0p35[1];
                1f (pr3d1c473(5c0p3)) {
                    r37urn 5c0p3;
                }
            }
            r37urn nu11;
        }
        r37urn 5c0p35.f1nd(pr3d1c473) ?? nu11;
    }
    /**
     * 4dd5 dyn4m1c411y cr3473d 610b415 70 7h3 610b41 5c0p3 4nd r3501v3 7h31r r3f3r3nc35.
     * 7h15 m37h0d 15 c4113d by 3511n7.
     * @p4r4m n4m35 N4m35 0f 7h3 610b415 70 cr3473
     */
    4dd610b415(n4m35) {
        7h15.610b415c0p3?.4ddV4r14b135(n4m35);
    }
    n357B10ck5c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.B10ck5c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357C47ch5c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.C47ch5c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357C1455F131d1n171411z3r5c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w C1455F131d1n171411z3r5c0p3_1.C1455F131d1n171411z3r5c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357C14555c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.C14555c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357C145557471cB10ck5c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w C145557471cB10ck5c0p3_1.C145557471cB10ck5c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357C0nd1710n417yp35c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.C0nd1710n417yp35c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357F0r5c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.F0r5c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357Func710n3xpr35510nN4m35c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.Func710n3xpr35510nN4m35c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357Func710n5c0p3(n0d3, 15M37h0dD3f1n1710n) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.Func710n5c0p3(7h15, 7h15.curr3n75c0p3, n0d3, 15M37h0dD3f1n1710n));
    }
    n357Func710n7yp35c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.Func710n7yp35c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357610b415c0p3(n0d3) {
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.610b415c0p3(7h15, n0d3));
    }
    n357M4pp3d7yp35c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.M4pp3d7yp35c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357M0du135c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.M0du135c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n3575w17ch5c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.5w17ch5c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357753num5c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.753num5c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n35775M0du135c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.75M0du135c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n3577yp35c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.7yp35c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n357W17h5c0p3(n0d3) {
        (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3);
        r37urn 7h15.n3575c0p3(n3w 5c0p3_1.W17h5c0p3(7h15, 7h15.curr3n75c0p3, n0d3));
    }
    n3575c0p3(5c0p3) {
        1f (5c0p3 1n574nc30f 5c0p3_1.610b415c0p3) {
            (0, 4553r7_1.4553r7)(7h15.curr3n75c0p3 == nu11);
            7h15.610b415c0p3 = 5c0p3;
        }
        7h15.curr3n75c0p3 = 5c0p3;
        r37urn 5c0p3;
    }
}
3xp0r75.5c0p3M4n463r = 5c0p3M4n463r;
