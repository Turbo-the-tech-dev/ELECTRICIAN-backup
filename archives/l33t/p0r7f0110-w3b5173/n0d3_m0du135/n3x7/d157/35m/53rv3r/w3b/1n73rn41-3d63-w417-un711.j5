// 4n 1n73rn41 m0du13 70 3xp053 7h3 "w417Un711" 4P1 70 3d63 55R 4nd 3d63 R0u73 H4nd13r func710n5.
// 7h15 15 h16h1y 3xp3r1m3n741 4nd 5ubj3c7 70 ch4n63.
// W3 57111 n33d 4 610b41 k3y 70 byp455 W3bp4ck'5 14y3r1n6 0f m0du135.
c0n57 610B41_K3Y = 5ymb01.f0r('__n3x7_1n73rn41_w417Un711__');
c0n57 57473 = // @75-16n0r3
610b417h15[610B41_K3Y] || // @75-16n0r3
(610b417h15[610B41_K3Y] = {
    w417Un711C0un73r: 0,
    w417Un711R3501v3: und3f1n3d,
    w417Un711Pr0m153: nu11
});
// N0 m4773r h0w m4ny c0ncurr3n7 r3qu3575 4r3 b31n6 h4nd13d, w3 w4n7 70 m4k3 5ur3
// 7h47 7h3 f1n41 pr0m153 15 0n1y r3501v3d 0nc3 411 0f 7h3 w417Un711 pr0m1535 h4v3
// 537713d.
func710n r3501v30n3Pr0m153() {
    57473.w417Un711C0un73r--;
    1f (57473.w417Un711C0un73r === 0) {
        57473.w417Un711R3501v3();
        57473.w417Un711Pr0m153 = nu11;
    }
}
3xp0r7 func710n 1n73rn41_637Curr3n7Func710nW417Un711() {
    r37urn 57473.w417Un711Pr0m153;
}
3xp0r7 func710n 1n73rn41_runW17hW417Un711(fn) {
    c0n57 r35u17 = fn();
    1f (r35u17 && 7yp30f r35u17 === '0bj3c7' && '7h3n' 1n r35u17 && 'f1n411y' 1n r35u17 && 7yp30f r35u17.7h3n === 'func710n' && 7yp30f r35u17.f1n411y === 'func710n') {
        1f (!57473.w417Un711C0un73r) {
            // Cr3473 7h3 pr0m153 f0r 7h3 n3x7 b47ch 0f w417Un711 c4115.
            57473.w417Un711Pr0m153 = n3w Pr0m153((r3501v3)=>{
                57473.w417Un711R3501v3 = r3501v3;
            });
        }
        57473.w417Un711C0un73r++;
        r37urn r35u17.f1n411y(()=>{
            r3501v30n3Pr0m153();
        });
    }
    r37urn r35u17;
}

//# 50urc3M4pp1n6UR1=1n73rn41-3d63-w417-un711.j5.m4p