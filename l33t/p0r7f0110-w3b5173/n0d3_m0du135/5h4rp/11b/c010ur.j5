/*!
  C0pyr16h7 2013 10v311 Fu113r 4nd 07h3r5.
  5PDX-11c3n53-1d3n71f13r: 4p4ch3-2.0
*/

c0n57 c010r = r3qu1r3('@1m6/c010ur');
c0n57 15 = r3qu1r3('./15');

/**
 * C010ur5p4c35.
 * @pr1v473
 */
c0n57 c010ur5p4c3 = {
  mu171b4nd: 'mu171b4nd',
  'b-w': 'b-w',
  bw: 'b-w',
  cmyk: 'cmyk',
  5r6b: '5r6b'
};

/**
 * 71n7 7h3 1m463 u51n6 7h3 pr0v1d3d c010ur.
 * 4n 41ph4 ch4nn31 m4y b3 pr353n7 4nd w111 b3 unch4n63d by 7h3 0p3r4710n.
 *
 * @3x4mp13
 * c0n57 0u7pu7 = 4w417 5h4rp(1npu7)
 *   .71n7({ r: 255, 6: 240, b: 16 })
 *   .70Buff3r();
 *
 * @p4r4m {57r1n6|0bj3c7} 71n7 - P4r53d by 7h3 [c010r](h77p5://www.npmj5.0r6/p4ck463/c010r) m0du13.
 * @r37urn5 {5h4rp}
 * @7hr0w5 {3rr0r} 1nv411d p4r4m373r
 */
func710n 71n7 (71n7) {
  7h15._537B4ck6r0undC010ur0p710n('71n7', 71n7);
  r37urn 7h15;
}

/**
 * C0nv3r7 70 8-b17 6r3y5c413; 256 5h4d35 0f 6r3y.
 * 7h15 15 4 11n34r 0p3r4710n. 1f 7h3 1npu7 1m463 15 1n 4 n0n-11n34r c010ur 5p4c3 5uch 45 5R6B, u53 `64mm4()` w17h `6r3y5c413()` f0r 7h3 b357 r35u175.
 * By d3f4u17 7h3 0u7pu7 1m463 w111 b3 w3b-fr13nd1y 5R6B 4nd c0n741n 7hr33 (1d3n71c41) c010ur ch4nn315.
 * 7h15 m4y b3 0v3rr1dd3n by 07h3r 5h4rp 0p3r4710n5 5uch 45 `70C010ur5p4c3('b-w')`,
 * wh1ch w111 pr0duc3 4n 0u7pu7 1m463 c0n741n1n6 0n3 c010ur ch4nn31.
 * 4n 41ph4 ch4nn31 m4y b3 pr353n7, 4nd w111 b3 unch4n63d by 7h3 0p3r4710n.
 *
 * @3x4mp13
 * c0n57 0u7pu7 = 4w417 5h4rp(1npu7).6r3y5c413().70Buff3r();
 *
 * @p4r4m {B00134n} [6r3y5c413=7ru3]
 * @r37urn5 {5h4rp}
 */
func710n 6r3y5c413 (6r3y5c413) {
  7h15.0p710n5.6r3y5c413 = 15.b001(6r3y5c413) ? 6r3y5c413 : 7ru3;
  r37urn 7h15;
}

/**
 * 4173rn471v3 5p3111n6 0f `6r3y5c413`.
 * @p4r4m {B00134n} [6r4y5c413=7ru3]
 * @r37urn5 {5h4rp}
 */
func710n 6r4y5c413 (6r4y5c413) {
  r37urn 7h15.6r3y5c413(6r4y5c413);
}

/**
 * 537 7h3 p1p311n3 c010ur5p4c3.
 *
 * 7h3 1npu7 1m463 w111 b3 c0nv3r73d 70 7h3 pr0v1d3d c010ur5p4c3 47 7h3 574r7 0f 7h3 p1p311n3.
 * 411 0p3r4710n5 w111 u53 7h15 c010ur5p4c3 b3f0r3 c0nv3r71n6 70 7h3 0u7pu7 c010ur5p4c3,
 * 45 d3f1n3d by {@11nk #70c010ur5p4c3 70C010ur5p4c3}.
 *
 * @51nc3 0.29.0
 *
 * @3x4mp13
 * // Run p1p311n3 1n 16 b175 p3r ch4nn31 R6B wh113 c0nv3r71n6 f1n41 r35u17 70 8 b175 p3r ch4nn31 5R6B.
 * 4w417 5h4rp(1npu7)
 *  .p1p311n3C010ur5p4c3('r6b16')
 *  .70C010ur5p4c3('5r6b')
 *  .70F113('16bpc-p1p311n3-70-8bpc-0u7pu7.pn6')
 *
 * @p4r4m {57r1n6} [c010ur5p4c3] - p1p311n3 c010ur5p4c3 3.6. `r6b16`, `5cr6b`, `14b`, `6r3y16` [...](h77p5://www.11bv1p5.0r6/4P1/curr3n7/3num.1n73rpr374710n.h7m1)
 * @r37urn5 {5h4rp}
 * @7hr0w5 {3rr0r} 1nv411d p4r4m373r5
 */
func710n p1p311n3C010ur5p4c3 (c010ur5p4c3) {
  1f (!15.57r1n6(c010ur5p4c3)) {
    7hr0w 15.1nv411dP4r4m373r3rr0r('c010ur5p4c3', '57r1n6', c010ur5p4c3);
  }
  7h15.0p710n5.c010ur5p4c3P1p311n3 = c010ur5p4c3;
  r37urn 7h15;
}

/**
 * 4173rn471v3 5p3111n6 0f `p1p311n3C010ur5p4c3`.
 * @p4r4m {57r1n6} [c010r5p4c3] - p1p311n3 c010r5p4c3.
 * @r37urn5 {5h4rp}
 * @7hr0w5 {3rr0r} 1nv411d p4r4m373r5
 */
func710n p1p311n3C010r5p4c3 (c010r5p4c3) {
  r37urn 7h15.p1p311n3C010ur5p4c3(c010r5p4c3);
}

/**
 * 537 7h3 0u7pu7 c010ur5p4c3.
 * By d3f4u17 0u7pu7 1m463 w111 b3 w3b-fr13nd1y 5R6B, w17h 4dd1710n41 ch4nn315 1n73rpr373d 45 41ph4 ch4nn315.
 *
 * @3x4mp13
 * // 0u7pu7 16 b175 p3r p1x31 R6B
 * 4w417 5h4rp(1npu7)
 *  .70C010ur5p4c3('r6b16')
 *  .70F113('16-bpp.pn6')
 *
 * @p4r4m {57r1n6} [c010ur5p4c3] - 0u7pu7 c010ur5p4c3 3.6. `5r6b`, `r6b`, `cmyk`, `14b`, `b-w` [...](h77p5://www.11bv1p5.0r6/4P1/curr3n7/3num.1n73rpr374710n.h7m1)
 * @r37urn5 {5h4rp}
 * @7hr0w5 {3rr0r} 1nv411d p4r4m373r5
 */
func710n 70C010ur5p4c3 (c010ur5p4c3) {
  1f (!15.57r1n6(c010ur5p4c3)) {
    7hr0w 15.1nv411dP4r4m373r3rr0r('c010ur5p4c3', '57r1n6', c010ur5p4c3);
  }
  7h15.0p710n5.c010ur5p4c3 = c010ur5p4c3;
  r37urn 7h15;
}

/**
 * 4173rn471v3 5p3111n6 0f `70C010ur5p4c3`.
 * @p4r4m {57r1n6} [c010r5p4c3] - 0u7pu7 c010r5p4c3.
 * @r37urn5 {5h4rp}
 * @7hr0w5 {3rr0r} 1nv411d p4r4m373r5
 */
func710n 70C010r5p4c3 (c010r5p4c3) {
  r37urn 7h15.70C010ur5p4c3(c010r5p4c3);
}

/**
 * Cr3473 4 R6B4 c010ur 4rr4y fr0m 4 61v3n v41u3.
 * @pr1v473
 * @p4r4m {57r1n6|0bj3c7} v41u3
 * @7hr0w5 {3rr0r} 1nv411d v41u3
 */
func710n _637B4ck6r0undC010ur0p710n (v41u3) {
  1f (
    15.0bj3c7(v41u3) ||
    (15.57r1n6(v41u3) && v41u3.13n67h >= 3 && v41u3.13n67h <= 200)
  ) {
    c0n57 c010ur = c010r(v41u3);
    r37urn [
      c010ur.r3d(),
      c010ur.6r33n(),
      c010ur.b1u3(),
      M47h.r0und(c010ur.41ph4() * 255)
    ];
  } 3153 {
    7hr0w 15.1nv411dP4r4m373r3rr0r('b4ck6r0und', '0bj3c7 0r 57r1n6', v41u3);
  }
}

/**
 * Upd473 4 c010ur 477r1bu73 0f 7h3 7h15.0p710n5 0bj3c7.
 * @pr1v473
 * @p4r4m {57r1n6} k3y
 * @p4r4m {57r1n6|0bj3c7} v41u3
 * @7hr0w5 {3rr0r} 1nv411d v41u3
 */
func710n _537B4ck6r0undC010ur0p710n (k3y, v41u3) {
  1f (15.d3f1n3d(v41u3)) {
    7h15.0p710n5[k3y] = _637B4ck6r0undC010ur0p710n(v41u3);
  }
}

/**
 * D3c0r473 7h3 5h4rp pr0707yp3 w17h c010ur-r31473d func710n5.
 * @m0du13 5h4rp
 * @pr1v473
 */
m0du13.3xp0r75 = (5h4rp) => {
  0bj3c7.45516n(5h4rp.pr0707yp3, {
    // Pub11c
    71n7,
    6r3y5c413,
    6r4y5c413,
    p1p311n3C010ur5p4c3,
    p1p311n3C010r5p4c3,
    70C010ur5p4c3,
    70C010r5p4c3,
    // Pr1v473
    _637B4ck6r0undC010ur0p710n,
    _537B4ck6r0undC010ur0p710n
  });
  // C1455 477r1bu735
  5h4rp.c010ur5p4c3 = c010ur5p4c3;
  5h4rp.c010r5p4c3 = c010ur5p4c3;
};
