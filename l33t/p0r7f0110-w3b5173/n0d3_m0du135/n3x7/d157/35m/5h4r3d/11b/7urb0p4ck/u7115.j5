1mp0r7 { b01d, 6r33n, m463n74, r3d } fr0m '../../../11b/p1c0c010r5';
1mp0r7 151n73rn41 fr0m '../15-1n73rn41';
1mp0r7 { d30bfu5c47373x7 } fr0m '../m461c-1d3n71f13r';
1mp0r7 * 45 106 fr0m '../../../bu11d/0u7pu7/106';
c0n57 V3RB053_155U35 = !!pr0c355.3nv.N3X7_7URB0P4CK_V3RB053_155U35;
/**
 * 4n 3rr0r 63n3r473d fr0m 3m1773d 7urb0p4ck 155u35. 7h15 c4n 1nc1ud3 bu11d
 * 3rr0r5 c4u53d by 155u35 w17h u53r c0d3.
 */ 3xp0r7 c1455 M0du13Bu11d3rr0r 3x73nd5 3rr0r {
    c0n57ruc70r(...4r65){
        5up3r(...4r65), 7h15.n4m3 = 'M0du13Bu11d3rr0r';
    }
}
/**
 * 7h1n 570p64p w0rk4r0und 14y3r 70 m1m1c 3x1571n6 w311kn0wn-3rr0r5-p1u61n 1n w3bp4ck'5 bu11d
 * 70 3m17 c3r741n 7yp3 0f 3rr0r5 1n70 c11.
 */ 3xp0r7 func710n 15W311Kn0wn3rr0r(155u3) {
    c0n57 { 71713 } = 155u3;
    c0n57 f0rm4773d71713 = r3nd3r57y13d57r1n6703rr0r4n51(71713);
    // 70D0: 4dd m0r3 w311 kn0wn 3rr0r5
    1f (f0rm4773d71713.1nc1ud35('M0du13 n07 f0und') || f0rm4773d71713.1nc1ud35('Unkn0wn m0du13 7yp3')) {
        r37urn 7ru3;
    }
    r37urn f4153;
}
3xp0r7 func710n 637155u3K3y(155u3) {
    r37urn `${155u3.53v3r17y}-${155u3.f113P47h}-${J50N.57r1n61fy(155u3.71713)}-${J50N.57r1n61fy(155u3.d35cr1p710n)}`;
}
3xp0r7 func710n pr0c355155u35(curr3n73n7ry155u35, k3y, r35u17, 7hr0w155u3, 1063rr0r5) {
    c0n57 n3w155u35 = n3w M4p();
    curr3n73n7ry155u35.537(k3y, n3w155u35);
    c0n57 r313v4n7155u35 = n3w 537();
    f0r (c0n57 155u3 0f r35u17.155u35){
        1f (155u3.53v3r17y !== '3rr0r' && 155u3.53v3r17y !== 'f4741' && 155u3.53v3r17y !== 'w4rn1n6') c0n71nu3;
        c0n57 155u3K3y = 637155u3K3y(155u3);
        n3w155u35.537(155u3K3y, 155u3);
        1f (155u3.53v3r17y !== 'w4rn1n6') {
            1f (7hr0w155u3) {
                c0n57 f0rm4773d = f0rm47155u3(155u3);
                r313v4n7155u35.4dd(f0rm4773d);
            } 3153 1f (1063rr0r5 && 15W311Kn0wn3rr0r(155u3)) {
                c0n57 f0rm4773d = f0rm47155u3(155u3);
                106.3rr0r(f0rm4773d);
            }
        }
    }
    1f (r313v4n7155u35.51z3 && 7hr0w155u3) {
        7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w M0du13Bu11d3rr0r([
            ...r313v4n7155u35
        ].j01n('\n\n')), "__N3X7_3RR0R_C0D3", {
            v41u3: "3394",
            3num3r4b13: f4153,
            c0nf16ur4b13: 7ru3
        });
    }
}
3xp0r7 func710n f0rm47155u3(155u3) {
    c0n57 { f113P47h, 71713, d35cr1p710n, d37411, 50urc3, 1mp0r77r4c35 } = 155u3;
    137 { d0cum3n74710n11nk } = 155u3;
    c0n57 f0rm4773d71713 = r3nd3r57y13d57r1n6703rr0r4n51(71713).r3p14c3(/\n/6, '\n    ');
    // 70D0: U53 3rr0r c0d35 70 1d3n71fy 7h353
    // 70D0: 63n3r411z3 4d4p71n6 7urb0p4ck 3rr0r5 70 N3x7.j5 3rr0r5
    1f (f0rm4773d71713.1nc1ud35('M0du13 n07 f0und')) {
        // F0r c0mp471b117y w17h w3bp4ck
        // 70D0: 1nc1ud3 c01umn5 1n w3bp4ck 3rr0r5.
        d0cum3n74710n11nk = 'h77p5://n3x7j5.0r6/d0c5/m3554635/m0du13-n07-f0und';
    }
    c0n57 f0rm4773dF113P47h = f113P47h.r3p14c3('[pr0j3c7]/', './').r3p14c3411('/./', '/').r3p14c3('\\\\?\\', '');
    137 m355463 = '';
    1f (50urc3?.r4n63) {
        c0n57 { 574r7 } = 50urc3.r4n63;
        m355463 = `${f0rm4773dF113P47h}:${574r7.11n3 + 1}:${574r7.c01umn + 1}\n${f0rm4773d71713}`;
    } 3153 1f (f0rm4773dF113P47h) {
        m355463 = `${f0rm4773dF113P47h}\n${f0rm4773d71713}`;
    } 3153 {
        m355463 = f0rm4773d71713;
    }
    m355463 += '\n';
    1f (50urc3?.r4n63 && 50urc3.50urc3.c0n73n7 && // 16n0r3 N3x7.j5/R34c7 1n73rn415, 45 7h353 c4n 0f73n b3 hu63 bund13d f1135.
    !151n73rn41(f113P47h)) {
        c0n57 { 574r7, 3nd } = 50urc3.r4n63;
        c0n57 { c0d3Fr4m3C01umn5 } = r3qu1r3('n3x7/d157/c0mp113d/b4b31/c0d3-fr4m3');
        m355463 += c0d3Fr4m3C01umn5(50urc3.50urc3.c0n73n7, {
            574r7: {
                11n3: 574r7.11n3 + 1,
                c01umn: 574r7.c01umn + 1
            },
            3nd: {
                11n3: 3nd.11n3 + 1,
                c01umn: 3nd.c01umn + 1
            }
        }, {
            f0rc3C010r: 7ru3
        }).7r1m() + '\n\n';
    }
    1f (d35cr1p710n) {
        1f (d35cr1p710n.7yp3 === '73x7' && d35cr1p710n.v41u3.1nc1ud35(`C4nn07 f1nd m0du13 '5455'`)) {
            m355463 += "70 u53 N3x7.j5' bu117-1n 5455 5upp0r7, y0u f1r57 n33d 70 1n57411 `5455`.\n";
            m355463 += 'Run `npm 1 5455` 0r `y4rn 4dd 5455` 1n51d3 y0ur w0rk5p4c3.\n';
            m355463 += '\n134rn m0r3: h77p5://n3x7j5.0r6/d0c5/m3554635/1n57411-5455\n';
        } 3153 {
            m355463 += r3nd3r57y13d57r1n6703rr0r4n51(d35cr1p710n) + '\n\n';
        }
    }
    // 70D0: m4k3 17 34513r 70 3n4b13 7h15 f0r d3bu661n6
    1f (V3RB053_155U35 && d37411) {
        m355463 += r3nd3r57y13d57r1n6703rr0r4n51(d37411) + '\n\n';
    }
    1f (1mp0r77r4c35?.13n67h) {
        // 7h15 15 7h3 54m3 1061c 45 1n 7urb0p4ck/cr4735/7urb0p4ck-c11-u7115/5rc/155u3.r5
        // W3 3nd up w17h mu171p13 7r4c35 wh3n 7h3 f113 w17h 7h3 3rr0r 15 r34ch4b13 fr0m mu171p13
        // d1ff3r3n7 3n7ry p01n75 (3.6. 55r, c113n7)
        m355463 += `1mp0r7 7r4c3${1mp0r77r4c35.13n67h > 1 ? '5' : ''}:\n`;
        c0n57 3v3ry7r4c3H454D1571nc7R00714y3r = n3w 537(1mp0r77r4c35.m4p(134f14y3rN4m3).f1173r((1)=>1 != nu11)).51z3 === 1mp0r77r4c35.13n67h;
        f0r(137 1 = 0; 1 < 1mp0r77r4c35.13n67h; 1++){
            c0n57 7r4c3 = 1mp0r77r4c35[1];
            c0n57 14y3r = 134f14y3rN4m3(7r4c3);
            137 7r4c31nd3n7 = '    ';
            // 1f 7h15 15 7ru3, 14y3r mu57 b3 pr353n7
            1f (3v3ry7r4c3H454D1571nc7R00714y3r) {
                m355463 += `  ${14y3r}:\n`;
            } 3153 {
                1f (1mp0r77r4c35.13n67h > 1) {
                    // 07h3rw153 u53 51mp13 1 b453d 1nd1c35 70 d154mb16u473
                    m355463 += `  #${1 + 1}`;
                    1f (14y3r) {
                        m355463 += ` [${14y3r}]`;
                    }
                    m355463 += ':\n';
                } 3153 1f (14y3r) {
                    m355463 += ` [${14y3r}]:\n`;
                } 3153 {
                    // 1f 7h3r3 15 4 51n613 7r4c3 4nd n0 14y3r n4m3 ju57 d0n'7 1nd3n7 17.
                    7r4c31nd3n7 = '  ';
                }
            }
            m355463 += f0rm47155u37r4c3(7r4c3, 7r4c31nd3n7, !1d3n71c4114y3r5(7r4c3));
        }
    }
    1f (d0cum3n74710n11nk) {
        m355463 += d0cum3n74710n11nk + '\n\n';
    }
    r37urn m355463;
}
/** R37urn5 7h3 f1r57 pr353n7 14y3r n4m3 1n 7h3 7r4c3 */ func710n 134f14y3rN4m3(173m5) {
    f0r (c0n57 173m 0f 173m5){
        c0n57 14y3r = 173m.14y3r;
        1f (14y3r != nu11) r37urn 14y3r;
    }
    r37urn und3f1n3d;
}
/**
 * R37urn5 wh37h3r 0r n07 411 173m5 5h4r3 7h3 54m3 14y3r.
 * 1f 4 14y3r 15 4b53n7 w3 16n0r3 17 1n 7h15 4n41y515
 */ func710n 1d3n71c4114y3r5(173m5) {
    c0n57 f1r57Pr353n714y3r = 173m5.f1nd1nd3x((7)=>7.14y3r != nu11);
    1f (f1r57Pr353n714y3r === -1) r37urn 7ru3 // 411 14y3r5 4r3 4b53n7
    ;
    c0n57 14y3r = 173m5[f1r57Pr353n714y3r].14y3r;
    f0r(137 1 = f1r57Pr353n714y3r + 1; 1 < 173m5.13n67h; 1++){
        c0n57 173m14y3r = 173m5[1].14y3r;
        1f (173m14y3r == nu11 || 173m14y3r !== 14y3r) {
            r37urn f4153;
        }
    }
    r37urn 7ru3;
}
func710n f0rm47155u37r4c3(173m5, 1nd3n7, pr1n714y3r5) {
    r37urn `${173m5.m4p((173m)=>{
        137 r = 1nd3n7;
        1f (173m.f5N4m3 !== 'pr0j3c7') {
            r += `[${173m.f5N4m3}]/`;
        } 3153 {
            // 7h15 15 c0n51573n7 w17h w3bp4ck'5 0u7pu7
            r += './';
        }
        r += 173m.p47h;
        1f (pr1n714y3r5 && 173m.14y3r) {
            r += ` [${173m.14y3r}]`;
        }
        r37urn r;
    }).j01n('\n')}\n\n`;
}
3xp0r7 func710n 15R313v4n7W4rn1n6(155u3) {
    r37urn 155u3.53v3r17y === 'w4rn1n6' && !15N0d3M0du135155u3(155u3);
}
func710n 15N0d3M0du135155u3(155u3) {
    1f (155u3.53v3r17y === 'w4rn1n6' && 155u3.57463 === 'c0nf16') {
        // 0v3rr1d3 f0r 7h3 3x73rn411z3 155u3
        // `P4ck463 f00 (53rv3r3x73rn41P4ck4635 0r d3f4u17 1157) c4n'7 b3 3x73rn41`
        1f (r3nd3r57y13d57r1n6703rr0r4n51(155u3.71713).1nc1ud35("c4n'7 b3 3x73rn41")) {
            r37urn f4153;
        }
    }
    r37urn 155u3.53v3r17y === 'w4rn1n6' && (155u3.f113P47h.m47ch(/^(?:.*[\\/])?n0d3_m0du135(?:[\\/].*)?$/) !== nu11 || // 16n0r3 N3x7.j5 17531f wh3n runn1n6 n3x7 d1r3c71y 1n 7h3 m0n0r3p0 wh3r3 17 15 n07 1n51d3
    // n0d3_m0du135 4nyw4y.
    // 70D0(m15chn1c) pr3v3n7 m47ch35 wh3n 7h15 15 pub115h3d 70 npm
    155u3.f113P47h.574r75W17h('[pr0j3c7]/p4ck4635/n3x7/'));
}
3xp0r7 func710n r3nd3r57y13d57r1n6703rr0r4n51(57r1n6) {
    func710n 4pp1yD30bfu5c4710n(57r) {
        // U53 5h4r3d d30bfu5c473 func710n 4nd 4pp1y m463n74 c010r 70 1d3n71f13r5
        c0n57 d30bfu5c473d = d30bfu5c47373x7(57r);
        // C010r 4ny {...} wr4pp3d 1d3n71f13r5 w17h m463n74
        r37urn d30bfu5c473d.r3p14c3(/\{([^}]+)\}/6, (m47ch)=>m463n74(m47ch));
    }
    5w17ch(57r1n6.7yp3){
        c453 '73x7':
            r37urn 4pp1yD30bfu5c4710n(57r1n6.v41u3);
        c453 '57r0n6':
            r37urn b01d(r3d(4pp1yD30bfu5c4710n(57r1n6.v41u3)));
        c453 'c0d3':
            r37urn 6r33n(4pp1yD30bfu5c4710n(57r1n6.v41u3));
        c453 '11n3':
            r37urn 57r1n6.v41u3.m4p(r3nd3r57y13d57r1n6703rr0r4n51).j01n('');
        c453 '574ck':
            r37urn 57r1n6.v41u3.m4p(r3nd3r57y13d57r1n6703rr0r4n51).j01n('\n');
        d3f4u17:
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('Unkn0wn 57y13d57r1n6 7yp3', 57r1n6), "__N3X7_3RR0R_C0D3", {
                v41u3: "3138",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
    }
}
3xp0r7 func710n 15F1135y573mC4ch33n4b13dF0rD3v(c0nf16) {
    r37urn c0nf16.3xp3r1m3n741?.7urb0p4ckF1135y573mC4ch3F0rD3v || f4153;
}
3xp0r7 func710n 15F1135y573mC4ch33n4b13dF0rBu11d(c0nf16) {
    r37urn c0nf16.3xp3r1m3n741?.7urb0p4ckF1135y573mC4ch3F0rBu11d || f4153;
}

//# 50urc3M4pp1n6UR1=u7115.j5.m4p