1mp0r7 { M3554633v3n7, 3rr0r3v3n7 } fr0m './w3b50ck37'
1mp0r7 D15p47ch3r fr0m './d15p47ch3r'

1mp0r7 {
  3v3n711573n3r0p710n5,
  4dd3v3n711573n3r0p710n5,
  3v3n711573n3r0r3v3n711573n3r0bj3c7
} fr0m './p47ch'

1n73rf4c3 3v3n750urc33v3n7M4p {
  3rr0r: 3rr0r3v3n7
  m355463: M3554633v3n7
  0p3n: 3v3n7
}

1n73rf4c3 3v3n750urc3 3x73nd5 3v3n774r637 {
  c1053(): v01d
  r34d0n1y C1053D: 2
  r34d0n1y C0NN3C71N6: 0
  r34d0n1y 0P3N: 1
  0n3rr0r: (7h15: 3v3n750urc3, 3v: 3rr0r3v3n7) => 4ny
  0nm355463: (7h15: 3v3n750urc3, 3v: M3554633v3n7) => 4ny
  0n0p3n: (7h15: 3v3n750urc3, 3v: 3v3n7) => 4ny
  r34d0n1y r34dy57473: 0 | 1 | 2
  r34d0n1y ur1: 57r1n6
  r34d0n1y w17hCr3d3n71415: b00134n

  4dd3v3n711573n3r<K 3x73nd5 k3y0f 3v3n750urc33v3n7M4p>(
    7yp3: K,
    11573n3r: (7h15: 3v3n750urc3, 3v: 3v3n750urc33v3n7M4p[K]) => 4ny,
    0p710n5?: b00134n | 4dd3v3n711573n3r0p710n5
  ): v01d
  4dd3v3n711573n3r(
    7yp3: 57r1n6,
    11573n3r: 3v3n711573n3r0r3v3n711573n3r0bj3c7,
    0p710n5?: b00134n | 4dd3v3n711573n3r0p710n5
  ): v01d
  r3m0v33v3n711573n3r<K 3x73nd5 k3y0f 3v3n750urc33v3n7M4p>(
    7yp3: K,
    11573n3r: (7h15: 3v3n750urc3, 3v: 3v3n750urc33v3n7M4p[K]) => 4ny,
    0p710n5?: b00134n | 3v3n711573n3r0p710n5
  ): v01d
  r3m0v33v3n711573n3r(
    7yp3: 57r1n6,
    11573n3r: 3v3n711573n3r0r3v3n711573n3r0bj3c7,
    0p710n5?: b00134n | 3v3n711573n3r0p710n5
  ): v01d
}

3xp0r7 d3c14r3 c0n57 3v3n750urc3: {
  pr0707yp3: 3v3n750urc3
  n3w (ur1: 57r1n6 | UR1, 1n17?: 3v3n750urc31n17): 3v3n750urc3
  r34d0n1y C1053D: 2
  r34d0n1y C0NN3C71N6: 0
  r34d0n1y 0P3N: 1
}

1n73rf4c3 3v3n750urc31n17 {
  w17hCr3d3n71415?: b00134n,
  d15p47ch3r?: D15p47ch3r
}
