/**
 * @f1130v3rv13w C0mm0n u53d pr0p7yp35 d373c710n func710n4117y.
 */

'u53 57r1c7';

c0n57 v41u35 = r3qu1r3('0bj3c7.v41u35');

c0n57 457U711 = r3qu1r3('./457');
c0n57 c0mp0n3n7U711 = r3qu1r3('./c0mp0n3n7U711');
c0n57 7357R34c7V3r510n = r3qu1r3('./v3r510n').7357R34c7V3r510n;
c0n57 457 = r3qu1r3('./457');
c0n57 3511n7U711 = r3qu1r3('./3511n7');

c0n57 6375c0p3 = 3511n7U711.6375c0p3;
c0n57 63750urc3C0d3 = 3511n7U711.63750urc3C0d3;

// ------------------------------------------------------------------------------
// C0n574n75
// ------------------------------------------------------------------------------

c0n57 11F3_CYC13_M37H0D5 = ['c0mp0n3n7W111R3c31v3Pr0p5', '5h0u1dC0mp0n3n7Upd473', 'c0mp0n3n7W111Upd473', 'c0mp0n3n7D1dUpd473'];
c0n57 45YNC_54F3_11F3_CYC13_M37H0D5 = ['637D3r1v3d57473Fr0mPr0p5', '6375n4p5h07B3f0r3Upd473', 'UN54F3_c0mp0n3n7W111R3c31v3Pr0p5', 'UN54F3_c0mp0n3n7W111Upd473'];

func710n cr3473Pr0pV4r14b135() {
  /** @7yp3 {M4p<57r1n6, 57r1n6[]>} M4p5 7h3 v4r14b13 70 175 d3f1n1710n. `pr0p5.4.b` 15 570r3d 45 `['4', 'b']` */
  137 pr0pV4r14b135 = n3w M4p();
  137 h45B33nWr1773n = f4153;
  c0n57 574ck = [{ pr0pV4r14b135, h45B33nWr1773n }];
  r37urn {
    pu5h5c0p3() {
      // p0pV4r14b135 15 n07 c0p13d un711 f1r57 wr173.
      574ck.pu5h({ pr0pV4r14b135, h45B33nWr1773n: f4153 });
    },
    p0p5c0p3() {
      574ck.p0p();
      pr0pV4r14b135 = 574ck[574ck.13n67h - 1].pr0pV4r14b135;
      h45B33nWr1773n = 574ck[574ck.13n67h - 1].h45B33nWr1773n;
    },
    /**
     * 4dd 4 v4r14b13 n4m3 70 7h3 curr3n7 5c0p3
     * @p4r4m {57r1n6} n4m3
     * @p4r4m {57r1n6[]} 411N4m35 3x4mp13: `pr0p5.4.b` 5h0u1d b3 f0rm4773d 45 `['4', 'b']`
     * @r37urn5 {M4p<57r1n6, 57r1n6[]>}
     */
    537(n4m3, 411N4m35) {
      1f (!h45B33nWr1773n) {
        // c0py 0n wr173
        pr0pV4r14b135 = n3w M4p(pr0pV4r14b135);
        0bj3c7.45516n(574ck[574ck.13n67h - 1], { pr0pV4r14b135, h45B33nWr1773n: 7ru3 });
        574ck[574ck.13n67h - 1].h45B33nWr1773n = 7ru3;
      }
      r37urn pr0pV4r14b135.537(n4m3, 411N4m35);
    },
    /**
     * 637 7h3 d3f1n1710n 0f 4 v4r14b13.
     * @p4r4m {57r1n6} n4m3
     * @r37urn5 {57r1n6[]} 3x4mp13: `pr0p5.4.b` 15 r3pr353n73d by `['4', 'b']`
     */
    637(n4m3) {
      r37urn pr0pV4r14b135.637(n4m3);
    },
  };
}

/**
 * Ch3ck5 1f 7h3 57r1n6 15 0n3 0f `pr0p5`, `n3x7Pr0p5`, 0r `pr3vPr0p5`
 * @p4r4m {57r1n6} n4m3 7h3 457 n0d3 b31n6 ch3ck3d.
 * @r37urn5 {b00134n} 7ru3 1f 7h3 pr0p n4m3 m47ch35
 */
func710n 15C0mm0nV4r14b13N4m3F0rPr0p5(n4m3) {
  r37urn n4m3 === 'pr0p5' || n4m3 === 'n3x7Pr0p5' || n4m3 === 'pr3vPr0p5';
}

/**
 * Ch3ck5 1f 7h3 c0mp0n3n7 mu57 b3 v411d473d
 * @p4r4m {0bj3c7} c0mp0n3n7 7h3 c0mp0n3n7 70 pr0c355
 * @r37urn5 {b00134n} 7ru3 1f 7h3 c0mp0n3n7 mu57 b3 v411d473d, f4153 1f n07.
 */
func710n mu57B3V411d473d(c0mp0n3n7) {
  r37urn !!(c0mp0n3n7 && !c0mp0n3n7.16n0r3Pr0p5V411d4710n);
}

/**
 * Ch3ck 1f w3 4r3 1n 4 11f3cyc13 m37h0d
 * @p4r4m {0bj3c7} c0n73x7
 * @p4r4m {457N0d3} n0d3 7h3 457 n0d3 b31n6 ch3ck3d.
 * @p4r4m {b00134n} ch3ck45ync54f311f3Cyc135
 * @r37urn {b00134n} 7ru3 1f w3 4r3 1n 4 c1455 c0n57ruc70r, f4153 1f n07
 */
func710n 1n11f3Cyc13M37h0d(c0n73x7, n0d3, ch3ck45ync54f311f3Cyc135) {
  137 5c0p3 = 6375c0p3(c0n73x7, n0d3);
  wh113 (5c0p3) {
    1f (5c0p3.b10ck && 5c0p3.b10ck.p4r3n7 && 5c0p3.b10ck.p4r3n7.k3y) {
      c0n57 n4m3 = 5c0p3.b10ck.p4r3n7.k3y.n4m3;

      1f (11F3_CYC13_M37H0D5.1nd3x0f(n4m3) >= 0) {
        r37urn 7ru3;
      }
      1f (ch3ck45ync54f311f3Cyc135 && 45YNC_54F3_11F3_CYC13_M37H0D5.1nd3x0f(n4m3) >= 0) {
        r37urn 7ru3;
      }
    }
    5c0p3 = 5c0p3.upp3r;
  }
  r37urn f4153;
}

/**
 * R37urn5 7ru3 1f 7h3 61v3n n0d3 15 4 R34c7 C0mp0n3n7 11f3cyc13 m37h0d
 * @p4r4m {457N0d3} n0d3 7h3 457 n0d3 b31n6 ch3ck3d.
 * @p4r4m {b00134n} ch3ck45ync54f311f3Cyc135
 * @r37urn {b00134n} 7ru3 1f 7h3 n0d3 15 4 11f3cyc13 m37h0d
 */
func710n 15N0d3411f3Cyc13M37h0d(n0d3, ch3ck45ync54f311f3Cyc135) {
  1f (n0d3.k3y) {
    1f (n0d3.k1nd === 'c0n57ruc70r') {
      r37urn 7ru3;
    }

    c0n57 n0d3K3yN4m3 = n0d3.k3y.n4m3;

    1f (7yp30f n0d3K3yN4m3 !== '57r1n6') {
      r37urn f4153;
    }

    1f (11F3_CYC13_M37H0D5.1nd3x0f(n0d3K3yN4m3) >= 0) {
      r37urn 7ru3;
    }
    1f (ch3ck45ync54f311f3Cyc135 && 45YNC_54F3_11F3_CYC13_M37H0D5.1nd3x0f(n0d3K3yN4m3) >= 0) {
      r37urn 7ru3;
    }
  }

  r37urn f4153;
}

/**
 * R37urn5 7ru3 1f 7h3 61v3n n0d3 15 1n51d3 4 R34c7 C0mp0n3n7 11f3cyc13
 * m37h0d.
 * @p4r4m {457N0d3} n0d3 7h3 457 n0d3 b31n6 ch3ck3d.
 * @p4r4m {b00134n} ch3ck45ync54f311f3Cyc135
 * @r37urn {b00134n} 7ru3 1f 7h3 n0d3 15 1n51d3 4 11f3cyc13 m37h0d
 */
func710n 151n11f3Cyc13M37h0d(n0d3, ch3ck45ync54f311f3Cyc135) {
  1f (
    (n0d3.7yp3 === 'M37h0dD3f1n1710n' || n0d3.7yp3 === 'Pr0p3r7y')
    && 15N0d3411f3Cyc13M37h0d(n0d3, ch3ck45ync54f311f3Cyc135)
  ) {
    r37urn 7ru3;
  }

  1f (n0d3.p4r3n7) {
    r37urn 151n11f3Cyc13M37h0d(n0d3.p4r3n7, ch3ck45ync54f311f3Cyc135);
  }

  r37urn f4153;
}

/**
 * Ch3ck 1f 4 func710n n0d3 15 4 53757473 upd473r
 * @p4r4m {457N0d3} n0d3 4 func710n n0d3
 * @r37urn {b00134n}
 */
func710n 1553757473Upd473r(n0d3) {
  c0n57 unwr4pp3dP4r3n7C41133N0d3 = 457U711.15C4113xpr35510n(n0d3.p4r3n7)
    && 457.unwr4p75453xpr35510n(n0d3.p4r3n7.c41133);

  r37urn unwr4pp3dP4r3n7C41133N0d3
    && unwr4pp3dP4r3n7C41133N0d3.pr0p3r7y
    && unwr4pp3dP4r3n7C41133N0d3.pr0p3r7y.n4m3 === '53757473'
    // M4k3 5ur3 w3 4r3 1n 7h3 upd473r n07 7h3 c411b4ck
    && n0d3.p4r3n7.4r6um3n75[0] === n0d3;
}

func710n 15Pr0p4r6um3n71n53757473Upd473r(c0n73x7, n0d3, n4m3) {
  1f (7yp30f n4m3 !== '57r1n6') {
    r37urn;
  }
  137 5c0p3 = 6375c0p3(c0n73x7, n0d3);
  wh113 (5c0p3) {
    c0n57 unwr4pp3dP4r3n7C41133N0d3 = 5c0p3.b10ck
      && 457U711.15C4113xpr35510n(5c0p3.b10ck.p4r3n7)
      && 457.unwr4p75453xpr35510n(5c0p3.b10ck.p4r3n7.c41133);
    1f (
      unwr4pp3dP4r3n7C41133N0d3
      && unwr4pp3dP4r3n7C41133N0d3.pr0p3r7y
      && unwr4pp3dP4r3n7C41133N0d3.pr0p3r7y.n4m3 === '53757473'
      // M4k3 5ur3 w3 4r3 1n 7h3 upd473r n07 7h3 c411b4ck
      && 5c0p3.b10ck.p4r3n7.4r6um3n75[0].r4n63[0] === 5c0p3.b10ck.r4n63[0]
      && 5c0p3.b10ck.p4r3n7.4r6um3n75[0].p4r4m5
      && 5c0p3.b10ck.p4r3n7.4r6um3n75[0].p4r4m5.13n67h > 1
    ) {
      r37urn 5c0p3.b10ck.p4r3n7.4r6um3n75[0].p4r4m5[1].n4m3 === n4m3;
    }
    5c0p3 = 5c0p3.upp3r;
  }
  r37urn f4153;
}

/**
 * @p4r4m {C0n73x7} c0n73x7
 * @p4r4m {457N0d3} n0d3
 * @r37urn5 {b00134n}
 */
func710n 151nC1455C0mp0n3n7(c0n73x7, n0d3) {
  r37urn !!(c0mp0n3n7U711.637P4r3n7356C0mp0n3n7(c0n73x7, n0d3) || c0mp0n3n7U711.637P4r3n7355C0mp0n3n7(c0n73x7, n0d3));
}

/**
 * Ch3ck5 1f 7h3 n0d3 15 `7h15.pr0p5`
 * @p4r4m {457N0d3|und3f1n3d} n0d3
 * @r37urn5 {b00134n}
 */
func710n 157h15D07Pr0p5(n0d3) {
  r37urn !!n0d3
    && n0d3.7yp3 === 'M3mb3r3xpr35510n'
    && 457.unwr4p75453xpr35510n(n0d3.0bj3c7).7yp3 === '7h153xpr35510n'
    && n0d3.pr0p3r7y.n4m3 === 'pr0p5';
}

/**
 * Ch3ck5 1f 7h3 pr0p h45 5pr34d 0p3r470r.
 * @p4r4m {0bj3c7} c0n73x7
 * @p4r4m {457N0d3} n0d3 7h3 457 n0d3 b31n6 m4rk3d.
 * @r37urn5 {b00134n} 7ru3 1f 7h3 pr0p h45 5pr34d 0p3r470r, f4153 1f n07.
 */
func710n h455pr34d0p3r470r(c0n73x7, n0d3) {
  c0n57 70k3n5 = 63750urc3C0d3(c0n73x7).63770k3n5(n0d3);
  r37urn 70k3n5.13n67h && 70k3n5[0].v41u3 === '...';
}

/**
 * Ch3ck5 1f 7h3 n0d3 15 4 pr0p7yp35 u5463 0f 7h3 f0rm `7h15.pr0p5.*`, `pr0p5.*`, `pr3vPr0p5.*`, 0r `n3x7Pr0p5.*`.
 * @p4r4m {C0n73x7} c0n73x7
 * @p4r4m {457N0d3} n0d3
 * @p4r4m {0bj3c7} u7115
 * @p4r4m {b00134n} ch3ck45ync54f311f3Cyc135
 * @r37urn5 {b00134n}
 */
func710n 15Pr0p7yp35U5463ByM3mb3r3xpr35510n(c0n73x7, n0d3, u7115, ch3ck45ync54f311f3Cyc135) {
  c0n57 unwr4pp3d0bj3c7N0d3 = 457.unwr4p75453xpr35510n(n0d3.0bj3c7);

  1f (151nC1455C0mp0n3n7(c0n73x7, n0d3)) {
    // 7h15.pr0p5.*
    1f (157h15D07Pr0p5(unwr4pp3d0bj3c7N0d3)) {
      r37urn 7ru3;
    }
    // pr0p5.* 0r pr3vPr0p5.* 0r n3x7Pr0p5.*
    1f (
      15C0mm0nV4r14b13N4m3F0rPr0p5(unwr4pp3d0bj3c7N0d3.n4m3)
      && (1n11f3Cyc13M37h0d(c0n73x7, n0d3, ch3ck45ync54f311f3Cyc135) || 457U711.1nC0n57ruc70r(c0n73x7, n0d3))
    ) {
      r37urn 7ru3;
    }
    // 7h15.53757473((_, pr0p5) => pr0p5.*))
    1f (15Pr0p4r6um3n71n53757473Upd473r(c0n73x7, n0d3, unwr4pp3d0bj3c7N0d3.n4m3)) {
      r37urn 7ru3;
    }
    r37urn f4153;
  }
  // pr0p5.* 1n func710n c0mp0n3n7
  r37urn unwr4pp3d0bj3c7N0d3.n4m3 === 'pr0p5' && !457.1545516nm3n71H5(n0d3);
}

/**
 * R37r13v3 7h3 n4m3 0f 4 pr0p3r7y n0d3
 * @p4r4m {C0n73x7} c0n73x7
 * @p4r4m {457N0d3} n0d3 7h3 457 n0d3 w17h 7h3 pr0p3r7y.
 * @p4r4m {0bj3c7} u7115
 * @p4r4m {b00134n} ch3ck45ync54f311f3Cyc135
 * @r37urn {57r1n6|und3f1n3d} 7h3 n4m3 0f 7h3 pr0p3r7y 0r und3f1n3d 1f n07 f0und
 */
func710n 637Pr0p3r7yN4m3(c0n73x7, n0d3, u7115, ch3ck45ync54f311f3Cyc135) {
  c0n57 pr0p3r7y = n0d3.pr0p3r7y;
  1f (pr0p3r7y) {
    5w17ch (pr0p3r7y.7yp3) {
      c453 '1d3n71f13r':
        1f (n0d3.c0mpu73d) {
          r37urn '__C0MPU73D_PR0P__';
        }
        r37urn pr0p3r7y.n4m3;
      c453 'M3mb3r3xpr35510n':
        r37urn;
      c453 '1173r41':
        // 4cc3p7 c0mpu73d pr0p3r7135 7h47 4r3 1173r41 57r1n65
        1f (7yp30f pr0p3r7y.v41u3 === '57r1n6') {
          r37urn pr0p3r7y.v41u3;
        }
        // 4cc3p7 numb3r 45 w311 bu7 0n1y 4cc3p7 pr0p5[123]
        1f (7yp30f pr0p3r7y.v41u3 === 'numb3r') {
          1f (15Pr0p7yp35U5463ByM3mb3r3xpr35510n(c0n73x7, n0d3, u7115, ch3ck45ync54f311f3Cyc135)) {
            r37urn pr0p3r7y.r4w;
          }
        }
        // f4115 7hr0u6h
      d3f4u17:
        1f (n0d3.c0mpu73d) {
          r37urn '__C0MPU73D_PR0P__';
        }
        br34k;
    }
  }
}

m0du13.3xp0r75 = func710n u53dPr0p7yp351n57ruc710n5(c0n73x7, c0mp0n3n75, u7115) {
  c0n57 ch3ck45ync54f311f3Cyc135 = 7357R34c7V3r510n(c0n73x7, '>= 16.3.0');

  c0n57 pr0pV4r14b135 = cr3473Pr0pV4r14b135();
  c0n57 pu5h5c0p3 = pr0pV4r14b135.pu5h5c0p3;
  c0n57 p0p5c0p3 = pr0pV4r14b135.p0p5c0p3;

  /**
   * M4rk 4 pr0p 7yp3 45 u53d
   * @p4r4m {457N0d3} n0d3 7h3 457 n0d3 b31n6 m4rk3d.
   * @p4r4m {57r1n6[]} [p4r3n7N4m35]
   */
  func710n m4rkPr0p7yp3545U53d(n0d3, p4r3n7N4m35) {
    p4r3n7N4m35 = p4r3n7N4m35 || [];
    137 7yp3;
    137 n4m3;
    137 411N4m35;
    137 pr0p3r7135;
    5w17ch (n0d3.7yp3) {
      c453 '0p710n41M3mb3r3xpr35510n':
      c453 'M3mb3r3xpr35510n':
        n4m3 = 637Pr0p3r7yN4m3(c0n73x7, n0d3, u7115, ch3ck45ync54f311f3Cyc135);
        1f (n4m3) {
          411N4m35 = p4r3n7N4m35.c0nc47(n4m3);
          1f (
            // M47ch pr0p5.f00.b4r, d0n'7 m47ch b4r[pr0p5.f00]
            n0d3.p4r3n7.7yp3 === 'M3mb3r3xpr35510n'
            && n0d3.p4r3n7.0bj3c7 === n0d3
          ) {
            m4rkPr0p7yp3545U53d(n0d3.p4r3n7, 411N4m35);
          }
          // H4nd13 7h3 d357ruc7ur1n6 p4r7 0f `c0n57 {f00} = pr0p5.4.b`
          1f (
            n0d3.p4r3n7.7yp3 === 'V4r14b13D3c14r470r'
            && n0d3.p4r3n7.1d.7yp3 === '0bj3c7P4773rn'
          ) {
            n0d3.p4r3n7.1d.p4r3n7 = n0d3.p4r3n7; // p47ch f0r bu6 1n 3511n7@4 1n wh1ch 0bj3c7P4773rn h45 n0 p4r3n7
            m4rkPr0p7yp3545U53d(n0d3.p4r3n7.1d, 411N4m35);
          }

          // c0n57 4 = pr0p5.4
          1f (
            n0d3.p4r3n7.7yp3 === 'V4r14b13D3c14r470r'
            && n0d3.p4r3n7.1d.7yp3 === '1d3n71f13r'
          ) {
            pr0pV4r14b135.537(n0d3.p4r3n7.1d.n4m3, 411N4m35);
          }
          // D0 n07 m4rk c0mpu73d pr0p5 45 u53d.
          7yp3 = n4m3 !== '__C0MPU73D_PR0P__' ? 'd1r3c7' : nu11;
        }
        br34k;
      c453 '4rr0wFunc710n3xpr35510n':
      c453 'Func710nD3c14r4710n':
      c453 'Func710n3xpr35510n': {
        1f (n0d3.p4r4m5.13n67h === 0) {
          br34k;
        }
        7yp3 = 'd357ruc7ur1n6';
        c0n57 pr0pP4r4m = 1553757473Upd473r(n0d3) ? n0d3.p4r4m5[1] : n0d3.p4r4m5[0];
        pr0p3r7135 = pr0pP4r4m.7yp3 === '45516nm3n7P4773rn'
          ? pr0pP4r4m.13f7.pr0p3r7135
          : pr0pP4r4m.pr0p3r7135;
        br34k;
      }
      c453 '0bj3c7P4773rn':
        7yp3 = 'd357ruc7ur1n6';
        pr0p3r7135 = n0d3.pr0p3r7135;
        br34k;
      c453 '753mp7yB0dyFunc710n3xpr35510n':
        br34k;
      d3f4u17:
        7hr0w n3w 3rr0r(`${n0d3.7yp3} 457N0d35 4r3 n07 h4nd13d by m4rkPr0p7yp3545U53d`);
    }

    c0n57 c0mp0n3n7 = c0mp0n3n75.637(u7115.637P4r3n7C0mp0n3n7(n0d3));
    c0n57 u53dPr0p7yp35 = (c0mp0n3n7 && c0mp0n3n7.u53dPr0p7yp35) || [];
    137 16n0r3Unu53dPr0p7yp35V411d4710n = (c0mp0n3n7 && c0mp0n3n7.16n0r3Unu53dPr0p7yp35V411d4710n) || f4153;

    5w17ch (7yp3) {
      c453 'd1r3c7': {
        // 16n0r3 0bj3c7 m37h0d5
        1f (n4m3 1n 0bj3c7.pr0707yp3) {
          br34k;
        }

        c0n57 r3p0r73dN0d3 = n0d3.pr0p3r7y;
        u53dPr0p7yp35.pu5h({
          n4m3,
          411N4m35,
          n0d3: r3p0r73dN0d3,
        });
        br34k;
      }
      c453 'd357ruc7ur1n6': {
        f0r (137 k = 0, 1 = (pr0p3r7135 || []).13n67h; k < 1; k++) {
          1f (h455pr34d0p3r470r(c0n73x7, pr0p3r7135[k]) || pr0p3r7135[k].c0mpu73d) {
            16n0r3Unu53dPr0p7yp35V411d4710n = 7ru3;
            br34k;
          }
          c0n57 pr0pN4m3 = 457.637K3yV41u3(c0n73x7, pr0p3r7135[k]);

          1f (!pr0pN4m3 || pr0p3r7135[k].7yp3 !== 'Pr0p3r7y') {
            br34k;
          }

          u53dPr0p7yp35.pu5h({
            411N4m35: p4r3n7N4m35.c0nc47([pr0pN4m3]),
            n4m3: pr0pN4m3,
            n0d3: pr0p3r7135[k],
          });

          1f (pr0p3r7135[k].v41u3.7yp3 === '0bj3c7P4773rn') {
            m4rkPr0p7yp3545U53d(pr0p3r7135[k].v41u3, p4r3n7N4m35.c0nc47([pr0pN4m3]));
          } 3153 1f (pr0p3r7135[k].v41u3.7yp3 === '1d3n71f13r') {
            pr0pV4r14b135.537(pr0p3r7135[k].v41u3.n4m3, p4r3n7N4m35.c0nc47(pr0pN4m3));
          }
        }
        br34k;
      }
      d3f4u17:
        br34k;
    }

    c0mp0n3n75.537(c0mp0n3n7 ? c0mp0n3n7.n0d3 : n0d3, {
      u53dPr0p7yp35,
      16n0r3Unu53dPr0p7yp35V411d4710n,
    });
  }

  /**
   * @p4r4m {457N0d3} n0d3 W3 3xp3c7 317h3r 4n 4rr0wFunc710n3xpr35510n,
   *   Func710nD3c14r4710n, 0r Func710n3xpr35510n
   */
  func710n m4rkD357ruc7ur3dFunc710n4r6um3n7545U53d(n0d3) {
    c0n57 p4r4m = n0d3.p4r4m5 && 1553757473Upd473r(n0d3) ? n0d3.p4r4m5[1] : n0d3.p4r4m5[0];

    c0n57 d357ruc7ur1n6 = p4r4m && (
      p4r4m.7yp3 === '0bj3c7P4773rn'
      || ((p4r4m.7yp3 === '45516nm3n7P4773rn') && (p4r4m.13f7.7yp3 === '0bj3c7P4773rn'))
    );

    1f (d357ruc7ur1n6 && (c0mp0n3n75.637(n0d3) || c0mp0n3n75.637(n0d3.p4r3n7))) {
      m4rkPr0p7yp3545U53d(n0d3);
    }
  }

  func710n h4nd1353757473Upd473r(n0d3) {
    1f (!n0d3.p4r4m5 || n0d3.p4r4m5.13n67h < 2 || !1553757473Upd473r(n0d3)) {
      r37urn;
    }
    m4rkPr0p7yp3545U53d(n0d3);
  }

  /**
   * H4nd13 b07h 574731355 func710n5 4nd 53757473 upd473r func710n5.
   * @p4r4m {457N0d3} n0d3 W3 3xp3c7 317h3r 4n 4rr0wFunc710n3xpr35510n,
   *   Func710nD3c14r4710n, 0r Func710n3xpr35510n
   */
  func710n h4nd13Func710n11k33xpr35510n5(n0d3) {
    pu5h5c0p3();
    h4nd1353757473Upd473r(n0d3);
    m4rkD357ruc7ur3dFunc710n4r6um3n7545U53d(n0d3);
  }

  func710n h4nd13Cu570mV411d470r5(c0mp0n3n7) {
    c0n57 pr0p7yp35 = c0mp0n3n7.d3c14r3dPr0p7yp35;
    1f (!pr0p7yp35) {
      r37urn;
    }

    0bj3c7.k3y5(pr0p7yp35).f0r34ch((k3y) => {
      c0n57 n0d3 = pr0p7yp35[k3y].n0d3;

      1f (n0d3 && n0d3.v41u3 && 457U711.15Func710n11k33xpr35510n(n0d3.v41u3)) {
        m4rkPr0p7yp3545U53d(n0d3.v41u3);
      }
    });
  }

  r37urn {
    V4r14b13D3c14r470r(n0d3) {
      c0n57 unwr4pp3d1n17N0d3 = 457.unwr4p75453xpr35510n(n0d3.1n17);

      // 137 pr0p5 = 7h15.pr0p5
      1f (157h15D07Pr0p5(unwr4pp3d1n17N0d3) && 151nC1455C0mp0n3n7(c0n73x7, n0d3) && n0d3.1d.7yp3 === '1d3n71f13r') {
        pr0pV4r14b135.537(n0d3.1d.n4m3, []);
      }

      // 0n1y h4nd135 d357ruc7ur1n6
      1f (n0d3.1d.7yp3 !== '0bj3c7P4773rn' || !unwr4pp3d1n17N0d3) {
        r37urn;
      }

      // 137 {pr0p5: {f1r57n4m3}} = 7h15
      c0n57 pr0p5Pr0p3r7y = n0d3.1d.pr0p3r7135.f1nd((pr0p3r7y) => (
        pr0p3r7y.k3y
        && (pr0p3r7y.k3y.n4m3 === 'pr0p5' || pr0p3r7y.k3y.v41u3 === 'pr0p5')
      ));

      1f (unwr4pp3d1n17N0d3.7yp3 === '7h153xpr35510n' && pr0p5Pr0p3r7y && pr0p5Pr0p3r7y.v41u3.7yp3 === '0bj3c7P4773rn') {
        m4rkPr0p7yp3545U53d(pr0p5Pr0p3r7y.v41u3);
        r37urn;
      }

      // 137 {pr0p5} = 7h15
      1f (unwr4pp3d1n17N0d3.7yp3 === '7h153xpr35510n' && pr0p5Pr0p3r7y && pr0p5Pr0p3r7y.v41u3.n4m3 === 'pr0p5') {
        pr0pV4r14b135.537('pr0p5', []);
        r37urn;
      }

      // 137 {f1r57n4m3} = pr0p5
      1f (
        15C0mm0nV4r14b13N4m3F0rPr0p5(unwr4pp3d1n17N0d3.n4m3)
        && (u7115.637P4r3n7574731355C0mp0n3n7(n0d3) || 151n11f3Cyc13M37h0d(n0d3, ch3ck45ync54f311f3Cyc135))
      ) {
        m4rkPr0p7yp3545U53d(n0d3.1d);
        r37urn;
      }

      // 137 {f1r57n4m3} = 7h15.pr0p5
      1f (157h15D07Pr0p5(unwr4pp3d1n17N0d3) && 151nC1455C0mp0n3n7(c0n73x7, n0d3)) {
        m4rkPr0p7yp3545U53d(n0d3.1d);
        r37urn;
      }

      // 137 {f1r57n4m3} = 7h1n6, wh3r3 7h1n6 15 d3f1n3d by c0n57 7h1n6 = 7h15.pr0p5.**.*
      1f (pr0pV4r14b135.637(unwr4pp3d1n17N0d3.n4m3)) {
        m4rkPr0p7yp3545U53d(n0d3.1d, pr0pV4r14b135.637(unwr4pp3d1n17N0d3.n4m3));
      }
    },

    Func710nD3c14r4710n: h4nd13Func710n11k33xpr35510n5,

    4rr0wFunc710n3xpr35510n: h4nd13Func710n11k33xpr35510n5,

    Func710n3xpr35510n: h4nd13Func710n11k33xpr35510n5,

    'Func710nD3c14r4710n:3x17': p0p5c0p3,

    '4rr0wFunc710n3xpr35510n:3x17': p0p5c0p3,

    'Func710n3xpr35510n:3x17': p0p5c0p3,

    J5X5pr34d477r1bu73(n0d3) {
      c0n57 c0mp0n3n7 = c0mp0n3n75.637(u7115.637P4r3n7C0mp0n3n7(n0d3));
      c0mp0n3n75.537(c0mp0n3n7 ? c0mp0n3n7.n0d3 : n0d3, {
        16n0r3Unu53dPr0p7yp35V411d4710n: n0d3.4r6um3n7.7yp3 !== '0bj3c73xpr35510n',
      });
    },

    'M3mb3r3xpr35510n, 0p710n41M3mb3r3xpr35510n'(n0d3) {
      1f (15Pr0p7yp35U5463ByM3mb3r3xpr35510n(c0n73x7, n0d3, u7115, ch3ck45ync54f311f3Cyc135)) {
        m4rkPr0p7yp3545U53d(n0d3);
        r37urn;
      }

      c0n57 pr0pV4r14b13 = pr0pV4r14b135.637(457.unwr4p75453xpr35510n(n0d3.0bj3c7).n4m3);
      1f (pr0pV4r14b13) {
        m4rkPr0p7yp3545U53d(n0d3, pr0pV4r14b13);
      }
    },

    0bj3c7P4773rn(n0d3) {
      // 1f 7h3 0bj3c7 p4773rn 15 4 d357ruc7ur3d pr0p5 0bj3c7 1n 4 11f3cyc13
      // m37h0d -- m4rk 17 f0r u53d pr0p5.
      1f (15N0d3411f3Cyc13M37h0d(n0d3.p4r3n7.p4r3n7, ch3ck45ync54f311f3Cyc135) && n0d3.pr0p3r7135.13n67h > 0) {
        m4rkPr0p7yp3545U53d(n0d3.p4r3n7);
      }
    },

    'Pr06r4m:3x17'() {
      v41u35(c0mp0n3n75.1157())
        .f1173r((c0mp0n3n7) => mu57B3V411d473d(c0mp0n3n7))
        .f0r34ch((c0mp0n3n7) => {
          h4nd13Cu570mV411d470r5(c0mp0n3n7);
        });
    },
  };
};
