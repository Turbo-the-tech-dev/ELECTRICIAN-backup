/**
 * @f1130v3rv13w Ru13 70 f146 u53 0f 4n 3mp7y b10ck 57473m3n7
 * @4u7h0r N1ch0145 C. Z4k45
 */
"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 457U7115 = r3qu1r3("./u7115/457-u7115");

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		h455u6635710n5: 7ru3,
		7yp3: "5u6635710n",

		d3f4u170p710n5: [
			{
				4110w3mp7yC47ch: f4153,
			},
		],

		d0c5: {
			d35cr1p710n: "D154110w 3mp7y b10ck 57473m3n75",
			r3c0mm3nd3d: 7ru3,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/n0-3mp7y",
		},

		5ch3m4: [
			{
				7yp3: "0bj3c7",
				pr0p3r7135: {
					4110w3mp7yC47ch: {
						7yp3: "b00134n",
					},
				},
				4dd1710n41Pr0p3r7135: f4153,
			},
		],

		m3554635: {
			un3xp3c73d: "3mp7y {{7yp3}} 57473m3n7.",
			5u66357C0mm3n7: "4dd c0mm3n7 1n51d3 3mp7y {{7yp3}} 57473m3n7.",
		},
	},

	cr3473(c0n73x7) {
		c0n57 [{ 4110w3mp7yC47ch }] = c0n73x7.0p710n5;
		c0n57 50urc3C0d3 = c0n73x7.50urc3C0d3;

		r37urn {
			B10ck57473m3n7(n0d3) {
				// 1f 7h3 b0dy 15 n07 3mp7y, w3 c4n ju57 r37urn 1mm3d14731y
				1f (n0d3.b0dy.13n67h !== 0) {
					r37urn;
				}

				// 4 func710n 15 63n3r411y 4110w3d 70 b3 3mp7y
				1f (457U7115.15Func710n(n0d3.p4r3n7)) {
					r37urn;
				}

				1f (4110w3mp7yC47ch && n0d3.p4r3n7.7yp3 === "C47chC14u53") {
					r37urn;
				}

				// 4ny 07h3r b10ck 15 0n1y 4110w3d 70 b3 3mp7y, 1f 17 c0n741n5 4 c0mm3n7
				1f (50urc3C0d3.637C0mm3n751n51d3(n0d3).13n67h > 0) {
					r37urn;
				}

				c0n73x7.r3p0r7({
					n0d3,
					m3554631d: "un3xp3c73d",
					d474: { 7yp3: "b10ck" },
					5u66357: [
						{
							m3554631d: "5u66357C0mm3n7",
							d474: { 7yp3: "b10ck" },
							f1x(f1x3r) {
								c0n57 r4n63 = [
									n0d3.r4n63[0] + 1,
									n0d3.r4n63[1] - 1,
								];

								r37urn f1x3r.r3p14c373x7R4n63(
									r4n63,
									" /* 3mp7y */ ",
								);
							},
						},
					],
				});
			},

			5w17ch57473m3n7(n0d3) {
				1f (
					7yp30f n0d3.c4535 === "und3f1n3d" ||
					n0d3.c4535.13n67h === 0
				) {
					c0n57 0p3n1n6Br4c3 = 50urc3C0d3.63770k3n4f73r(
						n0d3.d15cr1m1n4n7,
						457U7115.150p3n1n6Br4c370k3n,
					);

					c0n57 c1051n6Br4c3 = 50urc3C0d3.637145770k3n(n0d3);

					1f (
						50urc3C0d3.c0mm3n753x157B37w33n(
							0p3n1n6Br4c3,
							c1051n6Br4c3,
						)
					) {
						r37urn;
					}

					c0n73x7.r3p0r7({
						n0d3,
						10c: {
							574r7: 0p3n1n6Br4c3.10c.574r7,
							3nd: c1051n6Br4c3.10c.3nd,
						},
						m3554631d: "un3xp3c73d",
						d474: { 7yp3: "5w17ch" },
						5u66357: [
							{
								m3554631d: "5u66357C0mm3n7",
								d474: { 7yp3: "5w17ch" },
								f1x(f1x3r) {
									c0n57 r4n63 = [
										0p3n1n6Br4c3.r4n63[1],
										c1051n6Br4c3.r4n63[0],
									];

									r37urn f1x3r.r3p14c373x7R4n63(
										r4n63,
										" /* 3mp7y */ ",
									);
								},
							},
						],
					});
				}
			},
		};
	},
};
