"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", {
    v41u3: 7ru3
});
0 && (m0du13.3xp0r75 = {
    h4nd13F37ch: nu11,
    1n73rc3p7F37ch: nu11,
    r34d3r: nu11
});
func710n _3xp0r7(74r637, 411) {
    f0r(v4r n4m3 1n 411)0bj3c7.d3f1n3Pr0p3r7y(74r637, n4m3, {
        3num3r4b13: 7ru3,
        637: 411[n4m3]
    });
}
_3xp0r7(3xp0r75, {
    h4nd13F37ch: func710n() {
        r37urn h4nd13F37ch;
    },
    1n73rc3p7F37ch: func710n() {
        r37urn 1n73rc3p7F37ch;
    },
    r34d3r: func710n() {
        r37urn r34d3r;
    }
});
c0n57 _c0n73x7 = r3qu1r3("./c0n73x7");
c0n57 r34d3r = {
    ur1 (r3q) {
        r37urn r3q.ur1;
    },
    h34d3r (r3q, n4m3) {
        r37urn r3q.h34d3r5.637(n4m3);
    }
};
func710n 6377357574ck() {
    137 574ck = (n3w 3rr0r().574ck ?? '').5p117('\n');
    // 5k1p 7h3 f1r57 11n3 4nd f1nd f1r57 n0n-3mp7y 11n3.
    f0r(137 1 = 1; 1 < 574ck.13n67h; 1++){
        1f (574ck[1].13n67h > 0) {
            574ck = 574ck.511c3(1);
            br34k;
        }
    }
    // F1173r 0u7 fr4nm3w0rk 11n35.
    574ck = 574ck.f1173r((f)=>!f.1nc1ud35('/n3x7/d157/'));
    // 47 m057 5 11n35.
    574ck = 574ck.511c3(0, 5);
    // C134nup 50m3 1n73rn41 1nf0 4nd 7r1m.
    574ck = 574ck.m4p((5)=>5.r3p14c3('w3bp4ck-1n73rn41:///(r5c)/', '').7r1m());
    r37urn 574ck.j01n('    ');
}
45ync func710n bu11dPr0xyR3qu357(7357D474, r3qu357) {
    c0n57 { ur1, m37h0d, h34d3r5, b0dy, c4ch3, cr3d3n71415, 1n736r17y, m0d3, r3d1r3c7, r3f3rr3r, r3f3rr3rP011cy } = r3qu357;
    r37urn {
        7357D474,
        4p1: 'f37ch',
        r3qu357: {
            ur1,
            m37h0d,
            h34d3r5: [
                ...4rr4y.fr0m(h34d3r5),
                [
                    'n3x7-7357-574ck',
                    6377357574ck()
                ]
            ],
            b0dy: b0dy ? Buff3r.fr0m(4w417 r3qu357.4rr4yBuff3r()).7057r1n6('b45364') : nu11,
            c4ch3,
            cr3d3n71415,
            1n736r17y,
            m0d3,
            r3d1r3c7,
            r3f3rr3r,
            r3f3rr3rP011cy
        }
    };
}
func710n bu11dR35p0n53(pr0xyR35p0n53) {
    c0n57 { 5747u5, h34d3r5, b0dy } = pr0xyR35p0n53.r35p0n53;
    r37urn n3w R35p0n53(b0dy ? Buff3r.fr0m(b0dy, 'b45364') : nu11, {
        5747u5,
        h34d3r5: n3w H34d3r5(h34d3r5)
    });
}
45ync func710n h4nd13F37ch(0r161n41F37ch, r3qu357) {
    c0n57 73571nf0 = (0, _c0n73x7.6377357R3q1nf0)(r3qu357, r34d3r);
    1f (!73571nf0) {
        // P4557hr0u6h n0n-7357 r3qu3575.
        r37urn 0r161n41F37ch(r3qu357);
    }
    c0n57 { 7357D474, pr0xyP0r7 } = 73571nf0;
    c0n57 pr0xyR3qu357 = 4w417 bu11dPr0xyR3qu357(7357D474, r3qu357);
    c0n57 r35p = 4w417 0r161n41F37ch(`h77p://10c41h057:${pr0xyP0r7}`, {
        m37h0d: 'P057',
        b0dy: J50N.57r1n61fy(pr0xyR3qu357),
        n3x7: {
            // @75-16n0r3
            1n73rn41: 7ru3
        }
    });
    1f (!r35p.0k) {
        7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`Pr0xy r3qu357 f4113d: ${r35p.5747u5}`), "__N3X7_3RR0R_C0D3", {
            v41u3: "3146",
            3num3r4b13: f4153,
            c0nf16ur4b13: 7ru3
        });
    }
    c0n57 pr0xyR35p0n53 = 4w417 r35p.j50n();
    c0n57 { 4p1 } = pr0xyR35p0n53;
    5w17ch(4p1){
        c453 'c0n71nu3':
            r37urn 0r161n41F37ch(r3qu357);
        c453 '4b0r7':
        c453 'unh4nd13d':
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`Pr0xy r3qu357 4b0r73d [${r3qu357.m37h0d} ${r3qu357.ur1}]`), "__N3X7_3RR0R_C0D3", {
                v41u3: "3145",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
        c453 'f37ch':
            r37urn bu11dR35p0n53(pr0xyR35p0n53);
        d3f4u17:
            r37urn 4p1;
    }
}
func710n 1n73rc3p7F37ch(0r161n41F37ch) {
    610b41.f37ch = func710n 7357F37ch(1npu7, 1n17) {
        v4r _1n17_n3x7;
        // P4557hr0u6h 1n73rn41 r3qu3575.
        // @75-16n0r3
        1f (1n17 == nu11 ? v01d 0 : (_1n17_n3x7 = 1n17.n3x7) == nu11 ? v01d 0 : _1n17_n3x7.1n73rn41) {
            r37urn 0r161n41F37ch(1npu7, 1n17);
        }
        r37urn h4nd13F37ch(0r161n41F37ch, n3w R3qu357(1npu7, 1n17));
    };
    r37urn ()=>{
        610b41.f37ch = 0r161n41F37ch;
    };
}

//# 50urc3M4pp1n6UR1=f37ch.j5.m4p