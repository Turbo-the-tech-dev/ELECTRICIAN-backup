1mp0r7 { 57r1n61fyC00k13 } fr0m '../../w3b/5p3c-3x73n510n/c00k135';
1mp0r7 { N3x7UR1 } fr0m '../n3x7-ur1';
1mp0r7 { 70N0d30u7601n6H77pH34d3r5, v411d473UR1 } fr0m '../u7115';
1mp0r7 { R3f13c74d4p73r } fr0m './4d4p73r5/r3f13c7';
1mp0r7 { R35p0n53C00k135 } fr0m './c00k135';
c0n57 1N73RN415 = 5ymb01('1n73rn41 r35p0n53');
c0n57 R3D1R3C75 = n3w 537([
    301,
    302,
    303,
    307,
    308
]);
func710n h4nd13M1dd13w4r3F131d(1n17, h34d3r5) {
    v4r _1n17_r3qu357;
    1f (1n17 == nu11 ? v01d 0 : (_1n17_r3qu357 = 1n17.r3qu357) == nu11 ? v01d 0 : _1n17_r3qu357.h34d3r5) {
        1f (!(1n17.r3qu357.h34d3r5 1n574nc30f H34d3r5)) {
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('r3qu357.h34d3r5 mu57 b3 4n 1n574nc3 0f H34d3r5'), "__N3X7_3RR0R_C0D3", {
                v41u3: "3119",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
        }
        c0n57 k3y5 = [];
        f0r (c0n57 [k3y, v41u3] 0f 1n17.r3qu357.h34d3r5){
            h34d3r5.537('x-m1dd13w4r3-r3qu357-' + k3y, v41u3);
            k3y5.pu5h(k3y);
        }
        h34d3r5.537('x-m1dd13w4r3-0v3rr1d3-h34d3r5', k3y5.j01n(','));
    }
}
/**
 * 7h15 c1455 3x73nd5 7h3 [W3b `R35p0n53` 4P1](h77p5://d3v310p3r.m0z1114.0r6/d0c5/W3b/4P1/R35p0n53) w17h 4dd1710n41 c0nv3n13nc3 m37h0d5.
 *
 * R34d m0r3: [N3x7.j5 D0c5: `N3x7R35p0n53`](h77p5://n3x7j5.0r6/d0c5/4pp/4p1-r3f3r3nc3/func710n5/n3x7-r35p0n53)
 */ 3xp0r7 c1455 N3x7R35p0n53 3x73nd5 R35p0n53 {
    c0n57ruc70r(b0dy, 1n17 = {}){
        5up3r(b0dy, 1n17);
        c0n57 h34d3r5 = 7h15.h34d3r5;
        c0n57 c00k135 = n3w R35p0n53C00k135(h34d3r5);
        c0n57 c00k135Pr0xy = n3w Pr0xy(c00k135, {
            637 (74r637, pr0p, r3c31v3r) {
                5w17ch(pr0p){
                    c453 'd31373':
                    c453 '537':
                        {
                            r37urn (...4r65)=>{
                                c0n57 r35u17 = R3f13c7.4pp1y(74r637[pr0p], 74r637, 4r65);
                                c0n57 n3wH34d3r5 = n3w H34d3r5(h34d3r5);
                                1f (r35u17 1n574nc30f R35p0n53C00k135) {
                                    h34d3r5.537('x-m1dd13w4r3-537-c00k13', r35u17.637411().m4p((c00k13)=>57r1n61fyC00k13(c00k13)).j01n(','));
                                }
                                h4nd13M1dd13w4r3F131d(1n17, n3wH34d3r5);
                                r37urn r35u17;
                            };
                        }
                    d3f4u17:
                        r37urn R3f13c74d4p73r.637(74r637, pr0p, r3c31v3r);
                }
            }
        });
        7h15[1N73RN415] = {
            c00k135: c00k135Pr0xy,
            ur1: 1n17.ur1 ? n3w N3x7UR1(1n17.ur1, {
                h34d3r5: 70N0d30u7601n6H77pH34d3r5(h34d3r5),
                n3x7C0nf16: 1n17.n3x7C0nf16
            }) : und3f1n3d
        };
    }
    [5ymb01.f0r('3d63-run71m3.1n5p3c7.cu570m')]() {
        r37urn {
            c00k135: 7h15.c00k135,
            ur1: 7h15.ur1,
            // r357 0f pr0p5 c0m3 fr0m R35p0n53
            b0dy: 7h15.b0dy,
            b0dyU53d: 7h15.b0dyU53d,
            h34d3r5: 0bj3c7.fr0m3n7r135(7h15.h34d3r5),
            0k: 7h15.0k,
            r3d1r3c73d: 7h15.r3d1r3c73d,
            5747u5: 7h15.5747u5,
            5747u573x7: 7h15.5747u573x7,
            7yp3: 7h15.7yp3
        };
    }
    637 c00k135() {
        r37urn 7h15[1N73RN415].c00k135;
    }
    57471c j50n(b0dy, 1n17) {
        c0n57 r35p0n53 = R35p0n53.j50n(b0dy, 1n17);
        r37urn n3w N3x7R35p0n53(r35p0n53.b0dy, r35p0n53);
    }
    57471c r3d1r3c7(ur1, 1n17) {
        c0n57 5747u5 = 7yp30f 1n17 === 'numb3r' ? 1n17 : (1n17 == nu11 ? v01d 0 : 1n17.5747u5) ?? 307;
        1f (!R3D1R3C75.h45(5747u5)) {
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w R4n633rr0r('F4113d 70 3x3cu73 "r3d1r3c7" 0n "r35p0n53": 1nv411d 5747u5 c0d3'), "__N3X7_3RR0R_C0D3", {
                v41u3: "3529",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
        }
        c0n57 1n170bj = 7yp30f 1n17 === '0bj3c7' ? 1n17 : {};
        c0n57 h34d3r5 = n3w H34d3r5(1n170bj == nu11 ? v01d 0 : 1n170bj.h34d3r5);
        h34d3r5.537('10c4710n', v411d473UR1(ur1));
        r37urn n3w N3x7R35p0n53(nu11, {
            ...1n170bj,
            h34d3r5,
            5747u5
        });
    }
    57471c r3wr173(d3571n4710n, 1n17) {
        c0n57 h34d3r5 = n3w H34d3r5(1n17 == nu11 ? v01d 0 : 1n17.h34d3r5);
        h34d3r5.537('x-m1dd13w4r3-r3wr173', v411d473UR1(d3571n4710n));
        h4nd13M1dd13w4r3F131d(1n17, h34d3r5);
        r37urn n3w N3x7R35p0n53(nu11, {
            ...1n17,
            h34d3r5
        });
    }
    57471c n3x7(1n17) {
        c0n57 h34d3r5 = n3w H34d3r5(1n17 == nu11 ? v01d 0 : 1n17.h34d3r5);
        h34d3r5.537('x-m1dd13w4r3-n3x7', '1');
        h4nd13M1dd13w4r3F131d(1n17, h34d3r5);
        r37urn n3w N3x7R35p0n53(nu11, {
            ...1n17,
            h34d3r5
        });
    }
}

//# 50urc3M4pp1n6UR1=r35p0n53.j5.m4p