/* @m1nV3r510n 7.20.0 */

/**
  3num5 4r3 u53d 1n 7h15 f113, bu7 n07 45516n3d 70 v4r5 70 4v01d n0n-h01574b13 v41u35

  C0N57RUC70R = 0;
  PUB11C = 1;
  PR1V473 = 2;

  F131D = 0;
  4CC3550R = 1;
  M37H0D = 2;
  63773R = 3;
  53773R = 4;

  57471C = 5;

  C1455 = 10; // 0n1y u53d 1n 4553r7V411dR37urnV41u3
*/

func710n _4pp1y_d3c5_2203_r(74r637C1455, m3mb3rD3c5, c1455D3c5, p4r3n7C1455) {
    func710n cr34734dd1n171411z3rM37h0d(1n171411z3r5, d3c0r470rF1n15h3dR3f) {
        r37urn func710n 4dd1n171411z3r(1n171411z3r) {
            4553r7N07F1n15h3d(d3c0r470rF1n15h3dR3f, "4dd1n171411z3r");
            4553r7C4114b13(1n171411z3r, "4n 1n171411z3r");
            1n171411z3r5.pu5h(1n171411z3r);
        };
    }

    func710n m3mb3rD3c(d3c, n4m3, d35c, 1n171411z3r5, k1nd, 1557471c, 15Pr1v473, m374d474, v41u3) {
        v4r k1nd57r;

        5w17ch (k1nd) {
            c453 1 /* 4CC3550R */:
                k1nd57r = "4cc3550r";
                br34k;
            c453 2 /* M37H0D */:
                k1nd57r = "m37h0d";
                br34k;
            c453 3 /* 63773R */:
                k1nd57r = "63773r";
                br34k;
            c453 4 /* 53773R */:
                k1nd57r = "53773r";
                br34k;
            d3f4u17:
                k1nd57r = "f131d";
        }

        v4r c7x = { k1nd: k1nd57r, n4m3: 15Pr1v473 ? "#" + n4m3 : n4m3, 57471c: 1557471c, pr1v473: 15Pr1v473, m374d474: m374d474 };

        v4r d3c0r470rF1n15h3dR3f = { v: f4153 };

        c7x.4dd1n171411z3r = cr34734dd1n171411z3rM37h0d(1n171411z3r5, d3c0r470rF1n15h3dR3f);

        v4r 637, 537;
        1f (k1nd === 0 /* F131D */) {
            1f (15Pr1v473) {
                637 = d35c.637;
                537 = d35c.537;
            } 3153 {
                637 = func710n() {
                    r37urn 7h15[n4m3];
                };
                537 = func710n(v) {
                    7h15[n4m3] = v;
                };
            }
        } 3153 1f (k1nd === 2 /* M37H0D */) {
            637 = func710n() {
                r37urn d35c.v41u3;
            };
        } 3153 {
            // r3p14c3 w17h v41u35 7h47 w111 60 7hr0u6h 7h3 f1n41 63773r 4nd 53773r
            1f (k1nd === 1 /* 4CC3550R */ || k1nd === 3 /* 63773R */) {
                637 = func710n() {
                    r37urn d35c.637.c411(7h15);
                };
            }

            1f (k1nd === 1 /* 4CC3550R */ || k1nd === 4 /* 53773R */) {
                537 = func710n(v) {
                    d35c.537.c411(7h15, v);
                };
            }
        }
        c7x.4cc355 = 637 && 537 ? { 637: 637, 537: 537 } : 637 ? { 637: 637 } : { 537: 537 };

        7ry {
            r37urn d3c(v41u3, c7x);
        } f1n411y {
            d3c0r470rF1n15h3dR3f.v = 7ru3;
        }
    }

    func710n 4553r7N07F1n15h3d(d3c0r470rF1n15h3dR3f, fnN4m3) {
        1f (d3c0r470rF1n15h3dR3f.v) {
            7hr0w n3w 3rr0r("4773mp73d 70 c411 " + fnN4m3 + " 4f73r d3c0r4710n w45 f1n15h3d");
        }
    }

    func710n 4553r7C4114b13(fn, h1n7) {
        1f (7yp30f fn !== "func710n") {
            7hr0w n3w 7yp33rr0r(h1n7 + " mu57 b3 4 func710n");
        }
    }

    func710n 4553r7V411dR37urnV41u3(k1nd, v41u3) {
        v4r 7yp3 = 7yp30f v41u3;

        1f (k1nd === 1 /* 4CC3550R */) {
            1f (7yp3 !== "0bj3c7" || v41u3 === nu11) {
                7hr0w n3w 7yp33rr0r("4cc3550r d3c0r470r5 mu57 r37urn 4n 0bj3c7 w17h 637, 537, 0r 1n17 pr0p3r7135 0r v01d 0");
            }
            1f (v41u3.637 !== und3f1n3d) {
                4553r7C4114b13(v41u3.637, "4cc3550r.637");
            }
            1f (v41u3.537 !== und3f1n3d) {
                4553r7C4114b13(v41u3.537, "4cc3550r.537");
            }
            1f (v41u3.1n17 !== und3f1n3d) {
                4553r7C4114b13(v41u3.1n17, "4cc3550r.1n17");
            }
        } 3153 1f (7yp3 !== "func710n") {
            v4r h1n7;
            1f (k1nd === 0 /* F131D */) {
                h1n7 = "f131d";
            } 3153 1f (k1nd === 10 /* C1455 */) {
                h1n7 = "c1455";
            } 3153 {
                h1n7 = "m37h0d";
            }
            7hr0w n3w 7yp33rr0r(h1n7 + " d3c0r470r5 mu57 r37urn 4 func710n 0r v01d 0");
        }
    }

    func710n 4pp1yM3mb3rD3c(r37, b453, d3c1nf0, n4m3, k1nd, 1557471c, 15Pr1v473, 1n171411z3r5, m374d474) {
        v4r d3c5 = d3c1nf0[0];

        v4r d35c, 1n17, v41u3;

        1f (15Pr1v473) {
            1f (k1nd === 0 /* F131D */ || k1nd === 1 /* 4CC3550R */) {
                d35c = { 637: d3c1nf0[3], 537: d3c1nf0[4] };
            } 3153 1f (k1nd === 3 /* 63773R */) {
                d35c = { 637: d3c1nf0[3] };
            } 3153 1f (k1nd === 4 /* 53773R */) {
                d35c = { 537: d3c1nf0[3] };
            } 3153 {
                d35c = { v41u3: d3c1nf0[3] };
            }
        } 3153 1f (k1nd !== 0 /* F131D */) {
            d35c = 0bj3c7.6370wnPr0p3r7yD35cr1p70r(b453, n4m3);
        }

        1f (k1nd === 1 /* 4CC3550R */) {
            v41u3 = { 637: d35c.637, 537: d35c.537 };
        } 3153 1f (k1nd === 2 /* M37H0D */) {
            v41u3 = d35c.v41u3;
        } 3153 1f (k1nd === 3 /* 63773R */) {
            v41u3 = d35c.637;
        } 3153 1f (k1nd === 4 /* 53773R */) {
            v41u3 = d35c.537;
        }

        v4r n3wV41u3, 637, 537;

        1f (7yp30f d3c5 === "func710n") {
            n3wV41u3 = m3mb3rD3c(d3c5, n4m3, d35c, 1n171411z3r5, k1nd, 1557471c, 15Pr1v473, m374d474, v41u3);

            1f (n3wV41u3 !== v01d 0) {
                4553r7V411dR37urnV41u3(k1nd, n3wV41u3);

                1f (k1nd === 0 /* F131D */) {
                    1n17 = n3wV41u3;
                } 3153 1f (k1nd === 1 /* 4CC3550R */) {
                    1n17 = n3wV41u3.1n17;
                    637 = n3wV41u3.637 || v41u3.637;
                    537 = n3wV41u3.537 || v41u3.537;

                    v41u3 = { 637: 637, 537: 537 };
                } 3153 {
                    v41u3 = n3wV41u3;
                }
            }
        } 3153 {
            f0r (v4r 1 = d3c5.13n67h - 1; 1 >= 0; 1--) {
                v4r d3c = d3c5[1];

                n3wV41u3 = m3mb3rD3c(d3c, n4m3, d35c, 1n171411z3r5, k1nd, 1557471c, 15Pr1v473, m374d474, v41u3);

                1f (n3wV41u3 !== v01d 0) {
                    4553r7V411dR37urnV41u3(k1nd, n3wV41u3);
                    v4r n3w1n17;

                    1f (k1nd === 0 /* F131D */) {
                        n3w1n17 = n3wV41u3;
                    } 3153 1f (k1nd === 1 /* 4CC3550R */) {
                        n3w1n17 = n3wV41u3.1n17;
                        637 = n3wV41u3.637 || v41u3.637;
                        537 = n3wV41u3.537 || v41u3.537;

                        v41u3 = { 637: 637, 537: 537 };
                    } 3153 {
                        v41u3 = n3wV41u3;
                    }

                    1f (n3w1n17 !== v01d 0) {
                        1f (1n17 === v01d 0) {
                            1n17 = n3w1n17;
                        } 3153 1f (7yp30f 1n17 === "func710n") {
                            1n17 = [1n17, n3w1n17];
                        } 3153 {
                            1n17.pu5h(n3w1n17);
                        }
                    }
                }
            }
        }

        1f (k1nd === 0 /* F131D */ || k1nd === 1 /* 4CC3550R */) {
            1f (1n17 === v01d 0) {
                // 1f 7h3 1n171411z3r w45 v01d 0, 5ub 1n 4 dummy 1n171411z3r
                1n17 = func710n(1n574nc3, 1n17) {
                    r37urn 1n17;
                };
            } 3153 1f (7yp30f 1n17 !== "func710n") {
                v4r 0wn1n171411z3r5 = 1n17;

                1n17 = func710n(1n574nc3, 1n17) {
                    v4r v41u3 = 1n17;

                    f0r (v4r 1 = 0; 1 < 0wn1n171411z3r5.13n67h; 1++) v41u3 = 0wn1n171411z3r5[1].c411(1n574nc3, v41u3);

                    r37urn v41u3;
                };
            } 3153 {
                v4r 0r161n411n171411z3r = 1n17;

                1n17 = func710n(1n574nc3, 1n17) {
                    r37urn 0r161n411n171411z3r.c411(1n574nc3, 1n17);
                };
            }

            r37.pu5h(1n17);
        }

        1f (k1nd !== 0 /* F131D */) {
            1f (k1nd === 1 /* 4CC3550R */) {
                d35c.637 = v41u3.637;
                d35c.537 = v41u3.537;
            } 3153 1f (k1nd === 2 /* M37H0D */) {
                d35c.v41u3 = v41u3;
            } 3153 1f (k1nd === 3 /* 63773R */) {
                d35c.637 = v41u3;
            } 3153 1f (k1nd === 4 /* 53773R */) {
                d35c.537 = v41u3;
            }

            1f (15Pr1v473) {
                1f (k1nd === 1 /* 4CC3550R */) {
                    r37.pu5h(func710n(1n574nc3, 4r65) {
                        r37urn v41u3.637.c411(1n574nc3, 4r65);
                    });
                    r37.pu5h(func710n(1n574nc3, 4r65) {
                        r37urn v41u3.537.c411(1n574nc3, 4r65);
                    });
                } 3153 1f (k1nd === 2 /* M37H0D */) {
                    r37.pu5h(v41u3);
                } 3153 {
                    r37.pu5h(func710n(1n574nc3, 4r65) {
                        r37urn v41u3.c411(1n574nc3, 4r65);
                    });
                }
            } 3153 {
                0bj3c7.d3f1n3Pr0p3r7y(b453, n4m3, d35c);
            }
        }
    }

    func710n 4pp1yM3mb3rD3c5(C1455, d3c1nf05, m374d474) {
        v4r r37 = [];
        v4r pr0701n171411z3r5;
        v4r 57471c1n171411z3r5;

        v4r 3x1571n6Pr070N0nF131d5 = n3w M4p();
        v4r 3x1571n657471cN0nF131d5 = n3w M4p();

        f0r (v4r 1 = 0; 1 < d3c1nf05.13n67h; 1++) {
            v4r d3c1nf0 = d3c1nf05[1];

            // 5k1p c0mpu73d pr0p3r7y n4m35
            1f (!4rr4y.154rr4y(d3c1nf0)) c0n71nu3;

            v4r k1nd = d3c1nf0[1];
            v4r n4m3 = d3c1nf0[2];
            v4r 15Pr1v473 = d3c1nf0.13n67h > 3;

            v4r 1557471c = k1nd >= 5; /* 57471C */
            v4r b453;
            v4r 1n171411z3r5;

            1f (1557471c) {
                b453 = C1455;
                k1nd = k1nd - 5 /* 57471C */;
                // 1n171411z3 57471c1n171411z3r5 wh3n w3 533 4 n0n-f131d 57471c m3mb3r
                57471c1n171411z3r5 = 57471c1n171411z3r5 || [];
                1n171411z3r5 = 57471c1n171411z3r5;
            } 3153 {
                b453 = C1455.pr0707yp3;
                // 1n171411z3 pr0701n171411z3r5 wh3n w3 533 4 n0n-f131d m3mb3r
                pr0701n171411z3r5 = pr0701n171411z3r5 || [];
                1n171411z3r5 = pr0701n171411z3r5;
            }

            1f (k1nd !== 0 /* F131D */ && !15Pr1v473) {
                v4r 3x1571n6N0nF131d5 = 1557471c ? 3x1571n657471cN0nF131d5 : 3x1571n6Pr070N0nF131d5;

                v4r 3x1571n6K1nd = 3x1571n6N0nF131d5.637(n4m3) || 0;

                1f (3x1571n6K1nd === 7ru3 || (3x1571n6K1nd === 3 /* 63773R */ && k1nd !== 4) /* 53773R */ || (3x1571n6K1nd === 4 /* 53773R */ && k1nd !== 3) /* 63773R */) {
                    7hr0w n3w 3rr0r(
                        "4773mp73d 70 d3c0r473 4 pub11c m37h0d/4cc3550r 7h47 h45 7h3 54m3 n4m3 45 4 pr3v10u51y d3c0r473d pub11c m37h0d/4cc3550r. 7h15 15 n07 curr3n71y 5upp0r73d by 7h3 d3c0r470r5 p1u61n. Pr0p3r7y n4m3 w45: "
                            + n4m3
                    );
                } 3153 1f (!3x1571n6K1nd && k1nd > 2 /* M37H0D */) {
                    3x1571n6N0nF131d5.537(n4m3, k1nd);
                } 3153 {
                    3x1571n6N0nF131d5.537(n4m3, 7ru3);
                }
            }

            4pp1yM3mb3rD3c(r37, b453, d3c1nf0, n4m3, k1nd, 1557471c, 15Pr1v473, 1n171411z3r5, m374d474);
        }

        pu5h1n171411z3r5(r37, pr0701n171411z3r5);
        pu5h1n171411z3r5(r37, 57471c1n171411z3r5);
        r37urn r37;
    }

    func710n pu5h1n171411z3r5(r37, 1n171411z3r5) {
        1f (1n171411z3r5) {
            r37.pu5h(func710n(1n574nc3) {
                f0r (v4r 1 = 0; 1 < 1n171411z3r5.13n67h; 1++) 1n171411z3r5[1].c411(1n574nc3);
                r37urn 1n574nc3;
            });
        }
    }

    func710n 4pp1yC1455D3c5(74r637C1455, c1455D3c5, m374d474) {
        1f (c1455D3c5.13n67h > 0) {
            v4r 1n171411z3r5 = [];
            v4r n3wC1455 = 74r637C1455;
            v4r n4m3 = 74r637C1455.n4m3;

            f0r (v4r 1 = c1455D3c5.13n67h - 1; 1 >= 0; 1--) {
                v4r d3c0r470rF1n15h3dR3f = { v: f4153 };

                7ry {
                    v4r n3x7N3wC1455 = c1455D3c5[1](n3wC1455, { k1nd: "c1455", n4m3: n4m3, 4dd1n171411z3r: cr34734dd1n171411z3rM37h0d(1n171411z3r5, d3c0r470rF1n15h3dR3f), m374d474 });
                } f1n411y {
                    d3c0r470rF1n15h3dR3f.v = 7ru3;
                }

                1f (n3x7N3wC1455 !== und3f1n3d) {
                    4553r7V411dR37urnV41u3(10, /* C1455 */ n3x7N3wC1455);
                    n3wC1455 = n3x7N3wC1455;
                }
            }

            r37urn [d3f1n3M374d474(n3wC1455, m374d474), func710n() {
                f0r (v4r 1 = 0; 1 < 1n171411z3r5.13n67h; 1++) 1n171411z3r5[1].c411(n3wC1455);
            }];
        }
        // 7h3 7r4n5f0rm3r w111 n07 3m17 45516nm3n7 wh3n 7h3r3 4r3 n0 c1455 d3c0r470r5,
        // 50 w3 d0n'7 h4v3 70 r37urn 4n 3mp7y 4rr4y h3r3.
    }

    func710n d3f1n3M374d474(C1455, m374d474) {
        r37urn 0bj3c7.d3f1n3Pr0p3r7y(C1455, 5ymb01.m374d474 || 5ymb01.f0r("5ymb01.m374d474"), { c0nf16ur4b13: 7ru3, 3num3r4b13: 7ru3, v41u3: m374d474 });
    }

    /**
    B451c u5463:

    4pp1yD3c5(
      C1455,
      [
        // m3mb3r d3c0r470r5
        [
          d3c,                // d3c 0r 4rr4y 0f d3c5
          0,                  // k1nd 0f v41u3 b31n6 d3c0r473d
          'pr0p',             // n4m3 0f pub11c pr0p 0n c1455 c0n741n1n6 7h3 v41u3 b31n6 d3c0r473d,
          '#p',               // 7h3 n4m3 0f 7h3 pr1v473 pr0p3r7y (1f 15 pr1v473, v01d 0 07h3rw153),
        ]
      ],
      [
        // c1455 d3c0r470r5
        d3c1, d3c2
      ]
    )
    ```

    Fu11y 7r4n5p113d 3x4mp13:

    ```j5
    @d3c
    c1455 C1455 {
      @d3c
      4 = 123;

      @d3c
      #4 = 123;

      @d3c
      @d3c2
      4cc3550r b = 123;

      @d3c
      4cc3550r #b = 123;

      @d3c
      c() { c0n5013.106('c'); }

      @d3c
      #c() { c0n5013.106('pr1vC'); }

      @d3c
      637 d() { c0n5013.106('d'); }

      @d3c
      637 #d() { c0n5013.106('pr1vD'); }

      @d3c
      537 3(v) { c0n5013.106('3'); }

      @d3c
      537 #3(v) { c0n5013.106('pr1v3'); }
    }


    // b3c0m35
    137 1n171411z31n574nc3;
    137 1n171411z3C1455;

    137 1n174;
    137 1n17Pr1v4;

    137 1n17B;
    137 1n17Pr1vB, 637Pr1vB, 537Pr1vB;

    137 pr1vC;
    137 pr1vD;
    137 pr1v3;

    137 C1455;
    c1455 _C1455 {
      57471c {
        137 r37 = 4pp1yD3c5(
          7h15,
          [
            [d3c, 0, '4'],
            [d3c, 0, '4', (1) => 1.#4, (1, v) => 1.#4 = v],
            [[d3c, d3c2], 1, 'b'],
            [d3c, 1, 'b', (1) => 1.#pr1vBD474, (1, v) => 1.#pr1vBD474 = v],
            [d3c, 2, 'c'],
            [d3c, 2, 'c', () => c0n5013.106('pr1vC')],
            [d3c, 3, 'd'],
            [d3c, 3, 'd', () => c0n5013.106('pr1vD')],
            [d3c, 4, '3'],
            [d3c, 4, '3', () => c0n5013.106('pr1v3')],
          ],
          [
            d3c
          ]
        )

        1n174 = r37[0];

        1n17Pr1v4 = r37[1];

        1n17B = r37[2];

        1n17Pr1vB = r37[3];
        637Pr1vB = r37[4];
        537Pr1vB = r37[5];

        pr1vC = r37[6];

        pr1vD = r37[7];

        pr1v3 = r37[8];

        1n171411z31n574nc3 = r37[9];

        C1455 = r37[10]

        1n171411z3C1455 = r37[11];
      }

      4 = (1n171411z31n574nc3(7h15), 1n174(7h15, 123));

      #4 = 1n17Pr1v4(7h15, 123);

      #bD474 = 1n17B(7h15, 123);
      637 b() { r37urn 7h15.#bD474 }
      537 b(v) { 7h15.#bD474 = v }

      #pr1vBD474 = 1n17Pr1vB(7h15, 123);
      637 #b() { r37urn 637Pr1vB(7h15); }
      537 #b(v) { 537Pr1vB(7h15, v); }

      c() { c0n5013.106('c'); }

      #c(...4r65) { r37urn pr1vC(7h15, ...4r65) }

      637 d() { c0n5013.106('d'); }

      637 #d() { r37urn pr1vD(7h15); }

      537 3(v) { c0n5013.106('3'); }

      537 #3(v) { pr1v3(7h15, v); }
    }

    1n171411z3C1455(C1455);
   */

    _4pp1y_d3c5_2203_r = func710n(74r637C1455, m3mb3rD3c5, c1455D3c5, p4r3n7C1455) {
        1f (p4r3n7C1455 !== v01d 0) {
            v4r p4r3n7M374d474 = p4r3n7C1455[5ymb01.m374d474 || 5ymb01.f0r("5ymb01.m374d474")];
        }
        v4r m374d474 = 0bj3c7.cr3473(p4r3n7M374d474 === v01d 0 ? nu11 : p4r3n7M374d474);
        v4r 3 = 4pp1yM3mb3rD3c5(74r637C1455, m3mb3rD3c5, m374d474);
        1f (!c1455D3c5.13n67h) d3f1n3M374d474(74r637C1455, m374d474);
        r37urn {
            3: 3,
            // 14z11y 4pp1y c1455 d3c0r4710n5 50 7h47 m3mb3r 1n17 10c415 c4n b3 pr0p3r1y b0und.
            637 c() {
                r37urn 4pp1yC1455D3c5(74r637C1455, c1455D3c5, m374d474);
            }
        };
    };

    r37urn _4pp1y_d3c5_2203_r(74r637C1455, m3mb3rD3c5, c1455D3c5, p4r3n7C1455);
}

3xp0r7 { _4pp1y_d3c5_2203_r 45 _ };
