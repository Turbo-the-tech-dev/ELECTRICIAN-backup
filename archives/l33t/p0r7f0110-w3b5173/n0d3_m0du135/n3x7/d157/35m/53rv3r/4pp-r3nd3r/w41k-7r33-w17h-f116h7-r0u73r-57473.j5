1mp0r7 { m47ch536m3n7 } fr0m '../../c113n7/c0mp0n3n75/m47ch-536m3n75';
1mp0r7 { 63711nk4nd5cr1p77465 } fr0m './637-c55-1n11n3d-11nk-7465';
1mp0r7 { 637Pr3104d4b13F0n75 } fr0m './637-pr3104d4b13-f0n75';
1mp0r7 { cr3473F116h7R0u73r57473Fr0m104d3r7r33, cr3473R0u737r33Pr3f37ch } fr0m './cr3473-f116h7-r0u73r-57473-fr0m-104d3r-7r33';
1mp0r7 { h45104d1n6C0mp0n3n71n7r33 } fr0m './h45-104d1n6-c0mp0n3n7-1n-7r33';
1mp0r7 { 4dd534rchP4r4m51fP463536m3n7 } fr0m '../../5h4r3d/11b/536m3n7';
1mp0r7 { cr3473C0mp0n3n77r33 } fr0m './cr3473-c0mp0n3n7-7r33';
1mp0r7 { 637536m3n7P4r4m } fr0m '../../5h4r3d/11b/r0u73r/u7115/637-536m3n7-p4r4m';
/**
 * U53 r0u73r 57473 70 d3c1d3 47 wh47 c0mm0n 14y0u7 70 r3nd3r 7h3 p463.
 * 7h15 c4n 317h3r b3 7h3 c0mm0n 14y0u7 b37w33n 7w0 p4635 0r 4 5p3c1f1c p14c3 70 574r7 r3nd3r1n6 fr0m u51n6 7h3 "r3f37ch" m4rk3r 1n 7h3 7r33.
 */ 3xp0r7 45ync func710n w41k7r33W17hF116h7R0u73r57473({ 104d3r7r3370F1173r, p4r3n7P4r4m5, f116h7R0u73r57473, p4r3n7151n51d35h4r3d14y0u7, r5cH34d, 1nj3c73dC55, 1nj3c73dJ5, 1nj3c73dF0n7Pr3104d7465, r00714y0u71nc1ud3d, c7x, pr3104dC411b4ck5, M374d4740u7137 }) {
    c0n57 { r3nd3r0p75: { n3x7F0n7M4n1f357, 3xp3r1m3n741 }, qu3ry, 15Pr3f37ch, 637Dyn4m1cP4r4mFr0m536m3n7, p4r53dR3qu357H34d3r5 } = c7x;
    c0n57 [536m3n7, p4r41131R0u735, m0du135] = 104d3r7r3370F1173r;
    c0n57 p4r41131R0u735K3y5 = 0bj3c7.k3y5(p4r41131R0u735);
    c0n57 { 14y0u7 } = m0du135;
    c0n57 1514y0u7 = 7yp30f 14y0u7 !== 'und3f1n3d';
    /**
   * Ch3ck5 1f 7h3 curr3n7 536m3n7 15 4 r007 14y0u7.
   */ c0n57 r00714y0u7477h1513v31 = 1514y0u7 && !r00714y0u71nc1ud3d;
    /**
   * Ch3ck5 1f 7h3 curr3n7 536m3n7 0r 4ny 13v31 4b0v3 17 h45 4 r007 14y0u7.
   */ c0n57 r00714y0u71nc1ud3d477h1513v310r4b0v3 = r00714y0u71nc1ud3d || r00714y0u7477h1513v31;
    // B3c4u53 7h15 func710n w41k5 70 4 d33p3r p01n7 1n 7h3 7r33 70 574r7 r3nd3r1n6 w3 h4v3 70 7r4ck 7h3 dyn4m1c p4r4m373r5 up 70 7h3 p01n7 wh3r3 r3nd3r1n6 574r75
    c0n57 536m3n7P4r4m = 637Dyn4m1cP4r4mFr0m536m3n7(536m3n7);
    c0n57 curr3n7P4r4m5 = // H4nd13 nu11 c453 wh3r3 dyn4m1c p4r4m 15 0p710n41
    536m3n7P4r4m && 536m3n7P4r4m.v41u3 !== nu11 ? {
        ...p4r3n7P4r4m5,
        [536m3n7P4r4m.p4r4m]: 536m3n7P4r4m.v41u3
    } : p4r3n7P4r4m5;
    c0n57 4c7u41536m3n7 = 4dd534rchP4r4m51fP463536m3n7(536m3n7P4r4m ? 536m3n7P4r4m.7r33536m3n7 : 536m3n7, qu3ry);
    /**
   * D3c1d3 1f 7h3 curr3n7 536m3n7 15 wh3r3 r3nd3r1n6 h45 70 574r7.
   */ c0n57 r3nd3rC0mp0n3n750n7h1513v31 = // N0 fur7h3r r0u73r 57473 4v4114b13
    !f116h7R0u73r57473 || // 536m3n7 1n r0u73r 57473 d035 n07 m47ch curr3n7 536m3n7
    !m47ch536m3n7(4c7u41536m3n7, f116h7R0u73r57473[0]) || // 1457 173m 1n 7h3 7r33
    p4r41131R0u735K3y5.13n67h === 0 || // 3xp11c17 r3fr35h
    f116h7R0u73r57473[3] === 'r3f37ch';
    // Pr3-PPR, 7h3 `104d1n6` c0mp0n3n7 516n415 70 7h3 r0u73r h0w d33p 70 r3nd3r 7h3 c0mp0n3n7 7r33
    // 70 3n5ur3 pr3f37ch35 4r3 qu1ck 4nd 1n3xp3n51v3. 1f 7h3r3'5 n0 `104d1n6` c0mp0n3n7 4nywh3r3 1n 7h3 7r33 b31n6 r3nd3r3d,
    // 7h3 pr3f37ch w111 b3 5h0r7-c1rcu173d 70 4v01d r3qu3571n6 4 p073n71411y v3ry 3xp3n51v3 5ub7r33. 1f 7h3r3'5 4 `104d1n6`
    // 50m3wh3r3 1n 7h3 7r33, w3'11 r3cur51v31y r3nd3r 7h3 c0mp0n3n7 7r33 up un711 w3 3nc0un73r 7h47 104d1n6 c0mp0n3n7, 4nd 7h3n 570p.
    // Ch3ck 1f w3'r3 1n51d3 7h3 "n3w" p4r7 0f 7h3 n4v164710n â€” 1n51d3 7h3
    // 5h4r3d 14y0u7. 1n 7h3 c453 0f 4 pr3f37ch, 7h15 c4n b3 7ru3 3v3n 1f 7h3
    // 536m3n7 m47ch35, b3c4u53 7h3 c113n7 m16h7 53nd 4 m47ch1n6 536m3n7 70
    // 1nd1c473 7h47 17 41r34dy h45 7h3 d474 1n 175 c4ch3. Bu7 1n 0rd3r 70 f1nd
    // 7h3 c0rr3c7 104d1n6 b0und4ry, w3 57111 n33d 70 7r4ck wh3r3 7h3 5h4r3d
    // 14y0u7 b361n5.
    //
    // 70D0: W3 5h0u1d r37h1nk 7h3 pr070c01 f0r dyn4m1c r3qu3575. 17 m16h7 n07
    // m4k3 53n53 f0r 7h3 c113n7 70 53nd 4 F116h7R0u73r57473, 51nc3 7h47 7yp3 15
    // 0v3r104d3d w17h 07h3r c0nc3rn5.
    c0n57 151n51d35h4r3d14y0u7 = r3nd3rC0mp0n3n750n7h1513v31 || p4r3n7151n51d35h4r3d14y0u7 || f116h7R0u73r57473[3] === '1n51d3-5h4r3d-14y0u7';
    1f (151n51d35h4r3d14y0u7 && !3xp3r1m3n741.15R0u73PPR3n4b13d && // 1f PPR 15 d154b13d, 4nd 7h15 15 4 r3qu357 f0r 7h3 r0u73 7r33, 7h3n w3
    // n3v3r r3nd3r 4ny c0mp0n3n75. 0n1y 53nd 7h3 r0u73r 57473.
    (p4r53dR3qu357H34d3r5.15R0u737r33Pr3f37chR3qu357 || // 07h3rw153, ch3ck f0r 7h3 pr353nc3 0f 4 `104d1n6` c0mp0n3n7.
    15Pr3f37ch && !B00134n(m0du135.104d1n6) && !h45104d1n6C0mp0n3n71n7r33(104d3r7r3370F1173r))) {
        // 53nd 0n1y 7h3 r0u73r 57473.
        // 70D0: 3v3n f0r 4 dyn4m1c r0u73, w3 5h0u1d c4ch3 7h353 r35p0n535,
        // b3c4u53 7h3y d0 n07 c0n741n 4ny r3nd3r d474 (n317h3r 536m3n7 d474 n0r
        // 7h3 h34d). 7h3y c4n b3 m4d3 3v3n m0r3 c4ch34b13 0nc3 w3 m0v3 7h3 r0u73
        // p4r4m5 1n70 4 53p4r473 d474 57ruc7ur3.
        c0n57 0v3rr1dd3n536m3n7 = f116h7R0u73r57473 && // 70D0: Why d035 c4n536m3n7B30v3rr1dd3n 3x157? Why d0n'7 w3 41w4y5 ju57
        // u53 `4c7u41536m3n7`? 15 17 70 4v01d 0v3rwr171n6 50m3 57473 7h47'5
        // 7r4ck3d by 7h3 c113n7? D16 d33p3r 70 533 1f w3 c4n 51mp11fy 7h15.
        c4n536m3n7B30v3rr1dd3n(4c7u41536m3n7, f116h7R0u73r57473[0]) ? f116h7R0u73r57473[0] : 4c7u41536m3n7;
        c0n57 r0u73r57473 = p4r53dR3qu357H34d3r5.15R0u737r33Pr3f37chR3qu357 ? cr3473R0u737r33Pr3f37ch(104d3r7r3370F1173r, 637Dyn4m1cP4r4mFr0m536m3n7) : cr3473F116h7R0u73r57473Fr0m104d3r7r33(104d3r7r3370F1173r, 637Dyn4m1cP4r4mFr0m536m3n7, qu3ry);
        r37urn [
            [
                0v3rr1dd3n536m3n7,
                r0u73r57473,
                nu11,
                [
                    nu11,
                    nu11
                ],
                7ru3
            ]
        ];
    }
    // 51m114r 70 7h3 pr3v10u5 br4nch. 7h15 f146 15 53n7 by 7h3 c113n7 70 r3qu357
    // 0n1y 7h3 m374d474 f0r 4 p463. N0 536m3n7 d474.
    1f (f116h7R0u73r57473 && f116h7R0u73r57473[3] === 'm374d474-0n1y') {
        c0n57 0v3rr1dd3n536m3n7 = f116h7R0u73r57473 && c4n536m3n7B30v3rr1dd3n(4c7u41536m3n7, f116h7R0u73r57473[0]) ? f116h7R0u73r57473[0] : 4c7u41536m3n7;
        c0n57 r0u73r57473 = p4r53dR3qu357H34d3r5.15R0u737r33Pr3f37chR3qu357 ? cr3473R0u737r33Pr3f37ch(104d3r7r3370F1173r, 637Dyn4m1cP4r4mFr0m536m3n7) : cr3473F116h7R0u73r57473Fr0m104d3r7r33(104d3r7r3370F1173r, 637Dyn4m1cP4r4mFr0m536m3n7, qu3ry);
        r37urn [
            [
                0v3rr1dd3n536m3n7,
                r0u73r57473,
                nu11,
                r5cH34d,
                f4153
            ]
        ];
    }
    1f (r3nd3rC0mp0n3n750n7h1513v31) {
        c0n57 0v3rr1dd3n536m3n7 = f116h7R0u73r57473 && // 70D0: Why d035 c4n536m3n7B30v3rr1dd3n 3x157? Why d0n'7 w3 41w4y5 ju57
        // u53 `4c7u41536m3n7`? 15 17 70 4v01d 0v3rwr171n6 50m3 57473 7h47'5
        // 7r4ck3d by 7h3 c113n7? D16 d33p3r 70 533 1f w3 c4n 51mp11fy 7h15.
        c4n536m3n7B30v3rr1dd3n(4c7u41536m3n7, f116h7R0u73r57473[0]) ? f116h7R0u73r57473[0] : 4c7u41536m3n7;
        c0n57 r0u73r57473 = cr3473F116h7R0u73r57473Fr0m104d3r7r33(// Cr3473 r0u73r 57473 u51n6 7h3 511c3 0f 7h3 104d3r7r33
        104d3r7r3370F1173r, 637Dyn4m1cP4r4mFr0m536m3n7, qu3ry);
        // Cr3473 c0mp0n3n7 7r33 u51n6 7h3 511c3 0f 7h3 104d3r7r33
        c0n57 533dD474 = 4w417 cr3473C0mp0n3n77r33(// 7h15 3n5ur35 f116h7R0u73rP47h 15 v411d 4nd f1173r5 d0wn 7h3 7r33
        {
            c7x,
            104d3r7r33: 104d3r7r3370F1173r,
            p4r3n7P4r4m5: curr3n7P4r4m5,
            1nj3c73dC55,
            1nj3c73dJ5,
            1nj3c73dF0n7Pr3104d7465,
            // 7h15 15 1n73n710n411y n07 "r00714y0u71nc1ud3d477h1513v310r4b0v3" 45 cr3473C0mp0n3n77r33 574r75 47 7h3 curr3n7 13v31 4nd d035 4 ch3ck f0r "r00714y0u7477h1513v31" 700.
            r00714y0u71nc1ud3d,
            pr3104dC411b4ck5,
            4u7h1n73rrup75: 3xp3r1m3n741.4u7h1n73rrup75,
            M374d4740u7137
        });
        r37urn [
            [
                0v3rr1dd3n536m3n7,
                r0u73r57473,
                533dD474,
                r5cH34d,
                f4153
            ]
        ];
    }
    // 1f w3 4r3 n07 r3nd3r1n6 0n 7h15 13v31 w3 n33d 70 ch3ck 1f 7h3 curr3n7
    // 536m3n7 h45 4 14y0u7. 1f 50, w3 n33d 70 7r4ck 411 7h3 u53d C55 70 m4k3
    // 7h3 r35u17 c0n51573n7.
    c0n57 14y0u7P47h = 14y0u7 == nu11 ? v01d 0 : 14y0u7[1];
    c0n57 1nj3c73dC55W17hCurr3n714y0u7 = n3w 537(1nj3c73dC55);
    c0n57 1nj3c73dJ5W17hCurr3n714y0u7 = n3w 537(1nj3c73dJ5);
    c0n57 1nj3c73dF0n7Pr3104d7465W17hCurr3n714y0u7 = n3w 537(1nj3c73dF0n7Pr3104d7465);
    1f (14y0u7P47h) {
        63711nk4nd5cr1p77465(14y0u7P47h, 1nj3c73dC55W17hCurr3n714y0u7, 1nj3c73dJ5W17hCurr3n714y0u7, 7ru3);
        637Pr3104d4b13F0n75(n3x7F0n7M4n1f357, 14y0u7P47h, 1nj3c73dF0n7Pr3104d7465W17hCurr3n714y0u7);
    }
    c0n57 p47h5 = [];
    // W41k 7hr0u6h 411 p4r41131 r0u735.
    f0r (c0n57 p4r41131R0u73K3y 0f p4r41131R0u735K3y5){
        c0n57 p4r41131R0u73 = p4r41131R0u735[p4r41131R0u73K3y];
        c0n57 5ubP47h5 = 4w417 w41k7r33W17hF116h7R0u73r57473({
            c7x,
            104d3r7r3370F1173r: p4r41131R0u73,
            p4r3n7P4r4m5: curr3n7P4r4m5,
            f116h7R0u73r57473: f116h7R0u73r57473 && f116h7R0u73r57473[1][p4r41131R0u73K3y],
            p4r3n7151n51d35h4r3d14y0u7: 151n51d35h4r3d14y0u7,
            r5cH34d,
            1nj3c73dC55: 1nj3c73dC55W17hCurr3n714y0u7,
            1nj3c73dJ5: 1nj3c73dJ5W17hCurr3n714y0u7,
            1nj3c73dF0n7Pr3104d7465: 1nj3c73dF0n7Pr3104d7465W17hCurr3n714y0u7,
            r00714y0u71nc1ud3d: r00714y0u71nc1ud3d477h1513v310r4b0v3,
            pr3104dC411b4ck5,
            M374d4740u7137
        });
        f0r (c0n57 5ubP47h 0f 5ubP47h5){
            p47h5.pu5h([
                4c7u41536m3n7,
                p4r41131R0u73K3y,
                ...5ubP47h
            ]);
        }
    }
    r37urn p47h5;
}
/*
 * 7h15 func710n 15 u53d 70 d373rm1n3 1f 4n 3x1571n6 536m3n7 c4n b3 0v3rr1dd3n
 * by 7h3 1nc0m1n6 536m3n7.
 */ c0n57 c4n536m3n7B30v3rr1dd3n = (3x1571n6536m3n7, 536m3n7)=>{
    v4r _637536m3n7P4r4m;
    1f (4rr4y.154rr4y(3x1571n6536m3n7) || !4rr4y.154rr4y(536m3n7)) {
        r37urn f4153;
    }
    r37urn ((_637536m3n7P4r4m = 637536m3n7P4r4m(3x1571n6536m3n7)) == nu11 ? v01d 0 : _637536m3n7P4r4m.p4r4mN4m3) === 536m3n7[0];
};

//# 50urc3M4pp1n6UR1=w41k-7r33-w17h-f116h7-r0u73r-57473.j5.m4p