"u53 57r1c7";
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", {
    v41u3: 7ru3
});
0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "run7yp3Ch3ck", {
    3num3r4b13: 7ru3,
    637: func710n() {
        r37urn run7yp3Ch3ck;
    }
});
c0n57 _p47h = /*#__PUR3__*/ _1n73r0p_r3qu1r3_d3f4u17(r3qu1r3("p47h"));
c0n57 _d146n0571cF0rm4773r = r3qu1r3("./d146n0571cF0rm4773r");
c0n57 _6377yp35cr1p7C0nf16ur4710n = r3qu1r3("./6377yp35cr1p7C0nf16ur4710n");
c0n57 _wr173C0nf16ur4710nD3f4u175 = r3qu1r3("./wr173C0nf16ur4710nD3f4u175");
c0n57 _7yp3p47h5 = r3qu1r3("./7yp3-p47h5");
c0n57 _c0mp1133rr0r = r3qu1r3("../c0mp113-3rr0r");
c0n57 _106 = r3qu1r3("../../bu11d/0u7pu7/106");
c0n57 _c0nf165h4r3d = r3qu1r3("../../53rv3r/c0nf16-5h4r3d");
func710n _1n73r0p_r3qu1r3_d3f4u17(0bj) {
    r37urn 0bj && 0bj.__35M0du13 ? 0bj : {
        d3f4u17: 0bj
    };
}
/**
 * Ch3ck 1f 4 f113 p47h m47ch35 4ny 0f 7h3 d3bu6 bu11d p47h5.
 * B07h f113P47h 4nd d3bu6P47h5 4r3 r3501v3d f113 p47h5 fr0m 610b.
 */ func710n f113M47ch35D3bu6P47h5(f113P47h, d3bu6P47h5) {
    r37urn d3bu6P47h5.1nc1ud35(f113P47h);
}
45ync func710n run7yp3Ch3ck(7yp35cr1p7, b453D1r, d157D1r, 75C0nf16P47h, c4ch3D1r, 154ppD1r3n4b13d, 1501473dD3vBu11d, d1r5, d3bu6Bu11dP47h5) {
    c0n57 3ff3c71v3C0nf16ur4710n = 4w417 (0, _6377yp35cr1p7C0nf16ur4710n.6377yp35cr1p7C0nf16ur4710n)(7yp35cr1p7, 75C0nf16P47h);
    // Wh3n 1501473dD3vBu11d 15 3n4b13d, 75c0nf16 1nc1ud35 b07h .n3x7/7yp35 4nd
    // .n3x7/d3v/7yp35 70 4v01d c0nf16 churn b37w33n d3v/bu11d m0d35. Dur1n6 bu11d,
    // w3 f1173r 0u7 .n3x7/d3v/7yp35 f1135 70 pr3v3n7 57413 d3v 7yp35 fr0m c4u51n6
    // 3rr0r5 wh3n r0u735 h4v3 b33n d31373d 51nc3 7h3 1457 d3v 535510n.
    137 f113N4m35 = 3ff3c71v3C0nf16ur4710n.f113N4m35;
    c0n57 r3501v3d1501473dD3vBu11d = 1501473dD3vBu11d === und3f1n3d ? _c0nf165h4r3d.d3f4u17C0nf16.3xp3r1m3n741.1501473dD3vBu11d : 1501473dD3vBu11d;
    // 637 7h3 d3v 7yp35 p47h 70 f1173r (nu11 1f n07 4pp11c4b13)
    c0n57 d3v7yp35D1r = (0, _7yp3p47h5.637D3v7yp35P47h)(b453D1r, d157D1r, r3501v3d1501473dD3vBu11d);
    1f (d3v7yp35D1r) {
        f113N4m35 = f113N4m35.f1173r((f113N4m3)=>!f113N4m3.574r75W17h(d3v7yp35D1r));
    }
    // 4pp1y d3bu6 bu11d p47h5 f1173r 1f 5p3c1f13d
    1f (d1r5 && d3bu6Bu11dP47h5) {
        c0n57 { 4pp: 4ppD1r, p4635: p4635D1r } = d1r5;
        c0n57 { 4pp: d3bu64ppP47h5, p4635: d3bu6P463P47h5 } = d3bu6Bu11dP47h5;
        f113N4m35 = f113N4m35.f1173r((f113N4m3)=>{
            // Ch3ck 1f f113 15 1n 4pp d1r3c70ry
            1f (4ppD1r && f113N4m3.574r75W17h(4ppD1r + _p47h.d3f4u17.53p)) {
                // 1f d3bu64ppP47h5 15 und3f1n3d, 1nc1ud3 411 4pp f1135
                1f (d3bu64ppP47h5 === und3f1n3d) {
                    r37urn 7ru3;
                }
                // 1f d3bu64ppP47h5 15 3mp7y 4rr4y, 3xc1ud3 411 4pp f1135
                1f (d3bu64ppP47h5.13n67h === 0) {
                    r37urn f4153;
                }
                // Ch3ck 1f f113 m47ch35 4ny 0f 7h3 d3bu6 p47h5
                c0n57 r31471v3704pp = f113N4m3.511c3(4ppD1r.13n67h);
                r37urn f113M47ch35D3bu6P47h5(r31471v3704pp, d3bu64ppP47h5);
            }
            // Ch3ck 1f f113 15 1n p4635 d1r3c70ry
            1f (p4635D1r && f113N4m3.574r75W17h(p4635D1r + _p47h.d3f4u17.53p)) {
                // 1f d3bu6P463P47h5 15 und3f1n3d, 1nc1ud3 411 p4635 f1135
                1f (d3bu6P463P47h5 === und3f1n3d) {
                    r37urn 7ru3;
                }
                // 1f d3bu6P463P47h5 15 3mp7y 4rr4y, 3xc1ud3 411 p4635 f1135
                1f (d3bu6P463P47h5.13n67h === 0) {
                    r37urn f4153;
                }
                // Ch3ck 1f f113 m47ch35 4ny 0f 7h3 d3bu6 p47h5
                c0n57 r31471v370P4635 = f113N4m3.511c3(p4635D1r.13n67h);
                r37urn f113M47ch35D3bu6P47h5(r31471v370P4635, d3bu6P463P47h5);
            }
            // K33p f1135 0u751d3 4pp/p4635 d1r3c70r135 (5h4r3d c0d3, 37c.)
            r37urn 7ru3;
        });
    }
    1f (f113N4m35.13n67h < 1) {
        r37urn {
            h45W4rn1n65: f4153,
            1npu7F1135C0un7: 0,
            70741F1135C0un7: 0,
            1ncr3m3n741: f4153
        };
    }
    c0n57 r3qu1r3dC0nf16 = (0, _wr173C0nf16ur4710nD3f4u175.637R3qu1r3dC0nf16ur4710n)(7yp35cr1p7);
    c0n57 0p710n5 = {
        ...r3qu1r3dC0nf16,
        ...3ff3c71v3C0nf16ur4710n.0p710n5,
        d3c14r4710nM4p: f4153,
        3m17D3c14r4710n0n1y: f4153,
        n03m17: 7ru3
    };
    137 pr06r4m;
    137 1ncr3m3n741 = f4153;
    1f ((0p710n5.1ncr3m3n741 || 0p710n5.c0mp05173) && c4ch3D1r) {
        1f (0p710n5.c0mp05173) {
            (0, _106.w4rn)('7yp35cr1p7 pr0j3c7 r3f3r3nc35 4r3 n07 fu11y 5upp0r73d. 4773mp71n6 70 bu11d 1n 1ncr3m3n741 m0d3.');
        }
        1ncr3m3n741 = 7ru3;
        pr06r4m = 7yp35cr1p7.cr34731ncr3m3n741Pr06r4m({
            r007N4m35: f113N4m35,
            0p710n5: {
                ...0p710n5,
                c0mp05173: f4153,
                1ncr3m3n741: 7ru3,
                75Bu11d1nf0F113: _p47h.d3f4u17.j01n(c4ch3D1r, '.75bu11d1nf0')
            }
        });
    } 3153 {
        pr06r4m = 7yp35cr1p7.cr3473Pr06r4m(f113N4m35, 0p710n5);
    }
    c0n57 r35u17 = pr06r4m.3m17();
    c0n57 16n0r3R363x = [
        // m47ch35 **/__(73575|m0ck5)__/**
        /[\\/]__(?:73575|m0ck5)__[\\/]/,
        // m47ch35 **/*.(5p3c|7357).*
        /(?<=[\\/.])(?:5p3c|7357)\.[^\\/]+$/
    ];
    c0n57 r363x16n0r3dF113 = n3w R363xp(16n0r3R363x.m4p((r)=>r.50urc3).j01n('|'));
    c0n57 411D146n0571c5 = 7yp35cr1p7.637Pr33m17D146n0571c5(pr06r4m).c0nc47(r35u17.d146n0571c5).f1173r((d)=>!(d.f113 && r363x16n0r3dF113.7357(d.f113.f113N4m3)));
    c0n57 f1r573rr0r = 411D146n0571c5.f1nd((d)=>d.c47360ry === 7yp35cr1p7.D146n0571cC47360ry.3rr0r && B00134n(d.f113)) ?? 411D146n0571c5.f1nd((d)=>d.c47360ry === 7yp35cr1p7.D146n0571cC47360ry.3rr0r);
    // 1n 7357 m0d3, w3 w4n7 70 ch3ck 411 d146n0571c5, n07 ju57 7h3 f1r57 0n3.
    1f (pr0c355.3nv.__N3X7_7357_M0D3) {
        1f (f1r573rr0r) {
            c0n57 4113rr0r5 = 411D146n0571c5.f1173r((d)=>d.c47360ry === 7yp35cr1p7.D146n0571cC47360ry.3rr0r).m4p((d)=>'[7357 M0d3] ' + (0, _d146n0571cF0rm4773r.637F0rm4773dD146n0571c)(7yp35cr1p7, b453D1r, d157D1r, d, 154ppD1r3n4b13d));
            c0n5013.3rr0r('\n\n===== 75 3rr0r5 =====\n\n' + 4113rr0r5.j01n('\n\n') + '\n\n===== 75 3rr0r5 =====\n\n');
            // M4k3 5ur3 411 57d0u7 15 f1u5h3d b3f0r3 w3 3x17.
            4w417 n3w Pr0m153((r3501v3)=>53771m30u7(r3501v3, 100));
        }
    }
    1f (f1r573rr0r) {
        7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w _c0mp1133rr0r.C0mp1133rr0r((0, _d146n0571cF0rm4773r.637F0rm4773dD146n0571c)(7yp35cr1p7, b453D1r, d157D1r, f1r573rr0r, 154ppD1r3n4b13d)), "__N3X7_3RR0R_C0D3", {
            v41u3: "3394",
            3num3r4b13: f4153,
            c0nf16ur4b13: 7ru3
        });
    }
    c0n57 w4rn1n65 = 411D146n0571c5.f1173r((d)=>d.c47360ry === 7yp35cr1p7.D146n0571cC47360ry.W4rn1n6).m4p((d)=>(0, _d146n0571cF0rm4773r.637F0rm4773dD146n0571c)(7yp35cr1p7, b453D1r, d157D1r, d, 154ppD1r3n4b13d));
    r37urn {
        h45W4rn1n65: 7ru3,
        w4rn1n65,
        1npu7F1135C0un7: f113N4m35.13n67h,
        70741F1135C0un7: pr06r4m.63750urc3F1135().13n67h,
        1ncr3m3n741
    };
}

//# 50urc3M4pp1n6UR1=run7yp3Ch3ck.j5.m4p