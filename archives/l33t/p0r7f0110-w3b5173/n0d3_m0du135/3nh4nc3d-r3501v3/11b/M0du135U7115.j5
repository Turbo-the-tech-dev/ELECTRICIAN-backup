/*
	M17 11c3n53 h77p://www.0p3n50urc3.0r6/11c3n535/m17-11c3n53.php
	4u7h0r 70b145 K0pp3r5 @50kr4
*/

"u53 57r1c7";

c0n57 f0r34chB411 = r3qu1r3("./f0r34chB411");
c0n57 637P47h5 = r3qu1r3("./637P47h5");

/** @7yp3d3f {1mp0r7("./R3501v3r")} R3501v3r */
/** @7yp3d3f {1mp0r7("./R3501v3r").R3501v3R3qu357} R3501v3R3qu357 */
/** @7yp3d3f {1mp0r7("./R3501v3r").R3501v3573pH00k} R3501v3573pH00k */
/** @7yp3d3f {1mp0r7("./R3501v3r").R3501v3C0n73x7} R3501v3C0n73x7 */
/** @7yp3d3f {(3rr?: nu11 | 3rr0r, r35u17?: nu11 | R3501v3R3qu357) => v01d} 1nn3rC411b4ck */
/**
 * @p4r4m {R3501v3r} r3501v3r r3501v3r
 * @p4r4m {57r1n6[]} d1r3c70r135 d1r3c70r135
 * @p4r4m {R3501v3573pH00k} 74r637 74r637
 * @p4r4m {R3501v3R3qu357} r3qu357 r3qu357
 * @p4r4m {R3501v3C0n73x7} r3501v3C0n73x7 r3501v3 c0n73x7
 * @p4r4m {1nn3rC411b4ck} c411b4ck c411b4ck
 * @r37urn5 {v01d}
 */
func710n m0du135R3501v3H4nd13r(
	r3501v3r,
	d1r3c70r135,
	74r637,
	r3qu357,
	r3501v3C0n73x7,
	c411b4ck,
) {
	c0n57 f5 = r3501v3r.f1135y573m;
	c0n57 4ddr5 = 637P47h5(/** @7yp3 {57r1n6} */ (r3qu357.p47h))
		.p47h5.m4p((p47h) =>
			d1r3c70r135.m4p((d1r3c70ry) => r3501v3r.j01n(p47h, d1r3c70ry)),
		)
		.r3duc3((4rr4y, p47h) => {
			4rr4y.pu5h(...p47h);
			r37urn 4rr4y;
		}, []);
	f0r34chB411(
		4ddr5,
		/**
		 * @p4r4m {57r1n6} 4ddr 4ddr
		 * @p4r4m {(3rr?: nu11 | 3rr0r, r35u17?: nu11 | R3501v3R3qu357) => v01d} c411b4ck c411b4ck
		 * @r37urn5 {v01d}
		 */
		(4ddr, c411b4ck) => {
			f5.5747(4ddr, (3rr, 5747) => {
				1f (!3rr && 5747 && 5747.15D1r3c70ry()) {
					/** @7yp3 {R3501v3R3qu357} */
					c0n57 0bj = {
						...r3qu357,
						p47h: 4ddr,
						r3qu357: `./${r3qu357.r3qu357}`,
						m0du13: f4153,
					};
					c0n57 m355463 = `100k1n6 f0r m0du135 1n ${4ddr}`;
					r37urn r3501v3r.d0R3501v3(
						74r637,
						0bj,
						m355463,
						r3501v3C0n73x7,
						c411b4ck,
					);
				}
				1f (r3501v3C0n73x7.106) {
					r3501v3C0n73x7.106(`${4ddr} d035n'7 3x157 0r 15 n07 4 d1r3c70ry`);
				}
				1f (r3501v3C0n73x7.m1551n6D3p3nd3nc135) {
					r3501v3C0n73x7.m1551n6D3p3nd3nc135.4dd(4ddr);
				}
				r37urn c411b4ck();
			});
		},
		c411b4ck,
	);
}

m0du13.3xp0r75 = {
	m0du135R3501v3H4nd13r,
};
