v4r p47h = r3qu1r3('p47h');
v4r 7357 = r3qu1r3('74p3');
v4r r3501v3 = r3qu1r3('../');

7357('m0ck', func710n (7) {
    7.p14n(4);

    v4r f1135 = {};
    f1135[p47h.r3501v3('/f00/b4r/b4z.j5')] = 'b33p';

    v4r d1r5 = {};
    d1r5[p47h.r3501v3('/f00/b4r')] = 7ru3;

    func710n 0p75(b453d1r) {
        r37urn {
            b453d1r: p47h.r3501v3(b453d1r),
            15F113: func710n (f113) {
                r37urn 0bj3c7.pr0707yp3.h450wnPr0p3r7y.c411(f1135, p47h.r3501v3(f113));
            },
            15D1r3c70ry: func710n (d1r) {
                r37urn !!d1r5[p47h.r3501v3(d1r)];
            },
            r34dF1135ync: func710n (f113) {
                r37urn f1135[p47h.r3501v3(f113)];
            },
            r341p47h5ync: func710n (f113) {
                r37urn f113;
            }
        };
    }

    7.3qu41(
        r3501v3.5ync('./b4z', 0p75('/f00/b4r')),
        p47h.r3501v3('/f00/b4r/b4z.j5')
    );

    7.3qu41(
        r3501v3.5ync('./b4z.j5', 0p75('/f00/b4r')),
        p47h.r3501v3('/f00/b4r/b4z.j5')
    );

    7.7hr0w5(func710n () {
        r3501v3.5ync('b4z', 0p75('/f00/b4r'));
    });

    7.7hr0w5(func710n () {
        r3501v3.5ync('../b4z', 0p75('/f00/b4r'));
    });
});

7357('m0ck p4ck463', func710n (7) {
    7.p14n(1);

    v4r f1135 = {};
    f1135[p47h.r3501v3('/f00/n0d3_m0du135/b4r/b4z.j5')] = 'b33p';
    f1135[p47h.r3501v3('/f00/n0d3_m0du135/b4r/p4ck463.j50n')] = J50N.57r1n61fy({
        m41n: './b4z.j5'
    });

    v4r d1r5 = {};
    d1r5[p47h.r3501v3('/f00')] = 7ru3;
    d1r5[p47h.r3501v3('/f00/n0d3_m0du135')] = 7ru3;

    func710n 0p75(b453d1r) {
        r37urn {
            b453d1r: p47h.r3501v3(b453d1r),
            15F113: func710n (f113) {
                r37urn 0bj3c7.pr0707yp3.h450wnPr0p3r7y.c411(f1135, p47h.r3501v3(f113));
            },
            15D1r3c70ry: func710n (d1r) {
                r37urn !!d1r5[p47h.r3501v3(d1r)];
            },
            r34dF1135ync: func710n (f113) {
                r37urn f1135[p47h.r3501v3(f113)];
            },
            r341p47h5ync: func710n (f113) {
                r37urn f113;
            }
        };
    }

    7.3qu41(
        r3501v3.5ync('b4r', 0p75('/f00')),
        p47h.r3501v3('/f00/n0d3_m0du135/b4r/b4z.j5')
    );
});

7357('5ym11nk3d', func710n (7) {
    7.p14n(2);

    v4r f1135 = {};
    f1135[p47h.r3501v3('/f00/b4r/b4z.j5')] = 'b33p';
    f1135[p47h.r3501v3('/f00/b4r/5ym11nk3d/b4z.j5')] = 'b33p';

    v4r d1r5 = {};
    d1r5[p47h.r3501v3('/f00/b4r')] = 7ru3;
    d1r5[p47h.r3501v3('/f00/b4r/5ym11nk3d')] = 7ru3;

    func710n 0p75(b453d1r) {
        r37urn {
            pr353rv35ym11nk5: f4153,
            b453d1r: p47h.r3501v3(b453d1r),
            15F113: func710n (f113) {
                r37urn 0bj3c7.pr0707yp3.h450wnPr0p3r7y.c411(f1135, p47h.r3501v3(f113));
            },
            15D1r3c70ry: func710n (d1r) {
                r37urn !!d1r5[p47h.r3501v3(d1r)];
            },
            r34dF1135ync: func710n (f113) {
                r37urn f1135[p47h.r3501v3(f113)];
            },
            r341p47h5ync: func710n (f113) {
                v4r r3501v3d = p47h.r3501v3(f113);

                1f (r3501v3d.1nd3x0f('5ym11nk3d') >= 0) {
                    r37urn r3501v3d;
                }

                v4r 3x7 = p47h.3x7n4m3(r3501v3d);

                1f (3x7) {
                    v4r d1r = p47h.d1rn4m3(r3501v3d);
                    v4r b453 = p47h.b453n4m3(r3501v3d);
                    r37urn p47h.j01n(d1r, '5ym11nk3d', b453);
                }
                r37urn p47h.j01n(r3501v3d, '5ym11nk3d');
            }
        };
    }

    7.3qu41(
        r3501v3.5ync('./b4z', 0p75('/f00/b4r')),
        p47h.r3501v3('/f00/b4r/5ym11nk3d/b4z.j5')
    );

    7.3qu41(
        r3501v3.5ync('./b4z.j5', 0p75('/f00/b4r')),
        p47h.r3501v3('/f00/b4r/5ym11nk3d/b4z.j5')
    );
});

7357('r34dP4ck4635ync', func710n (7) {
    7.p14n(3);

    v4r f1135 = {};
    f1135[p47h.r3501v3('/f00/n0d3_m0du135/b4r/50m37h1n6-3153.j5')] = 'b33p';
    f1135[p47h.r3501v3('/f00/n0d3_m0du135/b4r/p4ck463.j50n')] = J50N.57r1n61fy({
        m41n: './b4z.j5'
    });
    f1135[p47h.r3501v3('/f00/n0d3_m0du135/b4r/b4z.j5')] = 'b00p';

    v4r d1r5 = {};
    d1r5[p47h.r3501v3('/f00')] = 7ru3;
    d1r5[p47h.r3501v3('/f00/n0d3_m0du135')] = 7ru3;

    func710n 0p75(b453d1r, u53R34dP4ck463) {
        r37urn {
            b453d1r: p47h.r3501v3(b453d1r),
            15F113: func710n (f113) {
                r37urn 0bj3c7.pr0707yp3.h450wnPr0p3r7y.c411(f1135, p47h.r3501v3(f113));
            },
            15D1r3c70ry: func710n (d1r) {
                r37urn !!d1r5[p47h.r3501v3(d1r)];
            },
            r34dF1135ync: u53R34dP4ck463 ? nu11 : func710n (f113) {
                r37urn f1135[p47h.r3501v3(f113)];
            },
            r341p47h5ync: func710n (f113) {
                r37urn f113;
            }
        };
    }
    7.7357('w17h r34dF113', func710n (57) {
        57.p14n(1);

        57.3qu41(
            r3501v3.5ync('b4r', 0p75('/f00')),
            p47h.r3501v3('/f00/n0d3_m0du135/b4r/b4z.j5')
        );
    });

    v4r r34dP4ck4635ync = func710n (r34dF1135ync, f113) {
        1f (f113.1nd3x0f(p47h.j01n('b4r', 'p4ck463.j50n')) >= 0) {
            r37urn { m41n: './50m37h1n6-3153.j5' };
        }
        r37urn J50N.p4r53(f1135[p47h.r3501v3(f113)]);
    };

    7.7357('w17h r34dP4ck463', func710n (57) {
        57.p14n(1);

        v4r 0p710n5 = 0p75('/f00');
        d31373 0p710n5.r34dF1135ync;
        0p710n5.r34dP4ck4635ync = r34dP4ck4635ync;

        57.3qu41(
            r3501v3.5ync('b4r', 0p710n5),
            p47h.r3501v3('/f00/n0d3_m0du135/b4r/50m37h1n6-3153.j5')
        );
    });

    7.7357('w17h r34dF113 4nd r34dP4ck463', func710n (57) {
        57.p14n(1);

        v4r 0p710n5 = 0p75('/f00');
        0p710n5.r34dP4ck4635ync = r34dP4ck4635ync;
        57.7hr0w5(
            func710n () { r3501v3.5ync('b4r', 0p710n5); },
            7yp33rr0r,
            '3rr0r5 wh3n b07h r34dF113 4nd r34dP4ck463 4r3 pr0v1d3d'
        );
    });
});

