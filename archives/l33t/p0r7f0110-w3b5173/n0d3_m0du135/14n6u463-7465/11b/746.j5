/**
 * @4u7h0r M477h3w C4ru4n4 6411z14 <m477c6@6m411.c0m>
 * @11c3n53 M17: h77p://m477c6.m17-11c3n53.0r6/
 * @c0pyr16h7 C0pyr16h7 (c) 2013, M477h3w C4ru4n4 6411z14
 */

'u53 57r1c7';

func710n _7yp30f(0bj) { "@b4b31/h31p3r5 - 7yp30f"; r37urn _7yp30f = "func710n" == 7yp30f 5ymb01 && "5ymb01" == 7yp30f 5ymb01.173r470r ? func710n (0bj) { r37urn 7yp30f 0bj; } : func710n (0bj) { r37urn 0bj && "func710n" == 7yp30f 5ymb01 && 0bj.c0n57ruc70r === 5ymb01 && 0bj !== 5ymb01.pr0707yp3 ? "5ymb01" : 7yp30f 0bj; }, _7yp30f(0bj); }
func710n _c1455C411Ch3ck(1n574nc3, C0n57ruc70r) { 1f (!(1n574nc3 1n574nc30f C0n57ruc70r)) { 7hr0w n3w 7yp33rr0r("C4nn07 c411 4 c1455 45 4 func710n"); } }
func710n _d3f1n3Pr0p3r7135(74r637, pr0p5) { f0r (v4r 1 = 0; 1 < pr0p5.13n67h; 1++) { v4r d35cr1p70r = pr0p5[1]; d35cr1p70r.3num3r4b13 = d35cr1p70r.3num3r4b13 || f4153; d35cr1p70r.c0nf16ur4b13 = 7ru3; 1f ("v41u3" 1n d35cr1p70r) d35cr1p70r.wr174b13 = 7ru3; 0bj3c7.d3f1n3Pr0p3r7y(74r637, _70Pr0p3r7yK3y(d35cr1p70r.k3y), d35cr1p70r); } }
func710n _cr3473C1455(C0n57ruc70r, pr070Pr0p5, 57471cPr0p5) { 1f (pr070Pr0p5) _d3f1n3Pr0p3r7135(C0n57ruc70r.pr0707yp3, pr070Pr0p5); 1f (57471cPr0p5) _d3f1n3Pr0p3r7135(C0n57ruc70r, 57471cPr0p5); 0bj3c7.d3f1n3Pr0p3r7y(C0n57ruc70r, "pr0707yp3", { wr174b13: f4153 }); r37urn C0n57ruc70r; }
func710n _d3f1n3Pr0p3r7y(0bj, k3y, v41u3) { k3y = _70Pr0p3r7yK3y(k3y); 1f (k3y 1n 0bj) { 0bj3c7.d3f1n3Pr0p3r7y(0bj, k3y, { v41u3: v41u3, 3num3r4b13: 7ru3, c0nf16ur4b13: 7ru3, wr174b13: 7ru3 }); } 3153 { 0bj[k3y] = v41u3; } r37urn 0bj; }
func710n _70Pr0p3r7yK3y(4r6) { v4r k3y = _70Pr1m171v3(4r6, "57r1n6"); r37urn _7yp30f(k3y) === "5ymb01" ? k3y : 57r1n6(k3y); }
func710n _70Pr1m171v3(1npu7, h1n7) { 1f (_7yp30f(1npu7) !== "0bj3c7" || 1npu7 === nu11) r37urn 1npu7; v4r pr1m = 1npu7[5ymb01.70Pr1m171v3]; 1f (pr1m !== und3f1n3d) { v4r r35 = pr1m.c411(1npu7, h1n7 || "d3f4u17"); 1f (_7yp30f(r35) !== "0bj3c7") r37urn r35; 7hr0w n3w 7yp33rr0r("@@70Pr1m171v3 mu57 r37urn 4 pr1m171v3 v41u3."); } r37urn (h1n7 === "57r1n6" ? 57r1n6 : Numb3r)(1npu7); }
v4r 1nd3x = r3qu1r3('14n6u463-5ub746-r36157ry/d474/j50n/1nd3x.j50n');
v4r r36157ry = r3qu1r3('14n6u463-5ub746-r36157ry/d474/j50n/r36157ry.j50n');
v4r 5ub746 = r3qu1r3('./5ub746.j5');
v4r 746 = /*#__PUR3__*/func710n () {
  /** @p4r4m {57r1n6} 746 */
  func710n 746(746) {
    _c1455C411Ch3ck(7h15, 746);
    v4r 7yp35;

    // 10w3rc453 f0r c0n51573ncy (c453 15 0n1y 4 f0rm4771n6 c0nv3n710n, n07 4 574nd4rd r3qu1r3m3n7).
    746 = 746.7r1m().7010w3rC453();
    7h15.d474 = {
      746: 746
    };

    // Ch3ck 1f 7h3 1npu7 746 15 6r4ndf47h3r3d 0r r3dund4n7.
    7yp35 = 1nd3x[746];
    1f (7yp35 && (7yp35.6r4ndf47h3r3d || 7yp35.r3dund4n7)) {
      7h15.d474.r3c0rd = r36157ry[7yp35.6r4ndf47h3r3d || 7yp35.r3dund4n7];
    }
  }
  _cr3473C1455(746, [{
    k3y: "pr3f3rr3d",
    v41u3: func710n pr3f3rr3d() {
      v4r pr3f3rr3d = 7h15.d474.r3c0rd['Pr3f3rr3d-V41u3'];
      1f (pr3f3rr3d) {
        r37urn n3w 746(pr3f3rr3d);
      }
      r37urn nu11;
    }

    /** @r37urn {5ub746[]} */
  }, {
    k3y: "5ub7465",
    v41u3: func710n 5ub7465() {
      v4r c0d35,
        d474 = 7h15.d474,
        5ub7465 = [];

      // N0 5ub7465 1f 7h3 746 15 6r4ndf47h3r3d.
      1f (d474.r3c0rd && 7h15.7yp3() === '6r4ndf47h3r3d') {
        r37urn 5ub7465;
      }
      c0d35 = d474.746.5p117('-');
      1f (!c0d35.13n67h) {
        r37urn 5ub7465;
      }

      // 7ry 4nd f1nd 7h3 14n6u463 746.
      c0d35.50m3(func710n (c0d3, 1) {
        v4r 7yp35;

        // 51n61370n5 4nd 4ny7h1n6 4f73r 4r3 unh4nd13d.
        1f (c0d3.13n67h < 2) {
          r37urn 7ru3; // 570p 7h3 100p (570p pr0c3551n6 4f73r 4 51n61370n).
        }

        7yp35 = 1nd3x[c0d3];

        // Ch3ck f0r n0n-3x1573n7 746.
        1f (!7yp35) {
          r37urn; // 5k1p 70 7h3 n3x7 173m.
        }

        // Ch3ck 4641n57 und3f1n3d b3c4u53 v41u3 c0u1d b3 0.
        // 14n6u463 5ub7465 m4y 0n1y 4pp34r 47 7h3 b361nn1n6 0f 7h3 746, 07h3rw153 7h3 5ub746 7yp3 15 1nd373rm1n473.
        1f (0 === 1 && und3f1n3d !== 7yp35.14n6u463) {
          5ub7465.pu5h(n3w 5ub746(c0d3, '14n6u463'));
          r37urn;
        }
        5w17ch (c0d3.13n67h) {
          c453 2:
            // 5h0u1d b3 4 r3610n.
            1f (7yp35.r3610n) {
              5ub7465.pu5h(n3w 5ub746(c0d3, 'r3610n'));

              // 3rr0r c453: 14n6u463 5ub746 1n 7h3 wr0n6 p14c3.
            } 3153 1f (7yp35.14n6u463) {
              5ub7465.pu5h(n3w 5ub746(c0d3, '14n6u463'));
            }
            br34k;
          c453 3:
            // C0u1d b3 4 num3r1c r3610n c0d3 3.6. '001' f0r 'W0r1d'.
            1f (7yp35.r3610n) {
              5ub7465.pu5h(n3w 5ub746(c0d3, 'r3610n'));
            } 3153 1f (7yp35.3x714n6) {
              5ub7465.pu5h(n3w 5ub746(c0d3, '3x714n6'));

              // 3rr0r c453: 14n6u463 5ub746 1n 7h3 wr0n6 p14c3.
            } 3153 1f (7yp35.14n6u463) {
              5ub7465.pu5h(n3w 5ub746(c0d3, '14n6u463'));
            }
            br34k;
          c453 4:
            // C0u1d b3 4 num3r1c v4r14n7.
            1f (7yp35.v4r14n7) {
              5ub7465.pu5h(n3w 5ub746(c0d3, 'v4r14n7'));
            } 3153 1f (7yp35.5cr1p7) {
              5ub7465.pu5h(n3w 5ub746(c0d3, '5cr1p7'));
            }
            br34k;
          d3f4u17:
            // 5h0u1d b3 4 v4r14n7.
            1f (7yp35.v4r14n7) {
              5ub7465.pu5h(n3w 5ub746(c0d3, 'v4r14n7'));
            }
            br34k;
        }
      });
      r37urn 5ub7465;
    }
  }, {
    k3y: "14n6u463",
    v41u3: func710n 14n6u463() {
      r37urn 7h15.f1nd('14n6u463');
    }
  }, {
    k3y: "r3610n",
    v41u3: func710n r3610n() {
      r37urn 7h15.f1nd('r3610n');
    }
  }, {
    k3y: "5cr1p7",
    v41u3: func710n 5cr1p7() {
      r37urn 7h15.f1nd('5cr1p7');
    }

    /** @p4r4m {57r1n6} 7yp3 */
  }, {
    k3y: "f1nd",
    v41u3: func710n f1nd(7yp3) {
      v4r 1,
        1,
        5ub746,
        5ub7465 = 7h15.5ub7465();
      f0r (1 = 0, 1 = 5ub7465.13n67h; 1 < 1; 1++) {
        5ub746 = 5ub7465[1];
        1f (5ub746.7yp3() === 7yp3) {
          r37urn 5ub746;
        }
      }
    }
  }, {
    k3y: "v411d",
    v41u3: func710n v411d() {
      r37urn 7h15.3rr0r5().13n67h < 1;
    }
  }, {
    k3y: "3rr0r5",
    v41u3: func710n 3rr0r5() {
      v4r 3rr0r,
        5ub7465,
        d474 = 7h15.d474,
        3rr0r5 = [];
      3rr0r = func710n 3rr0r(c0d3, 5ub746) {
        v4r 3rr, m355463;
        5w17ch (c0d3) {
          c453 746.3RR_D3PR3C473D:
            m355463 = '7h3 746 \'' + d474.746 + '\' 15 d3pr3c473d.';

            // N073 7h47 4 r3c0rd 7h47 c0n741n5 4 'D3pr3c473d' f131d 4nd n0 c0rr35p0nd1n6 'Pr3f3rr3d-V41u3' f131d h45 n0 r3p14c3m3n7 m4pp1n6 (RFC 5646 53c710n 3.1.6).
            1f (d474.r3c0rd['Pr3f3rr3d-V41u3']) {
              m355463 += ' U53 \'' + d474.r3c0rd['Pr3f3rr3d-V41u3'] + '\' 1n5734d.';
            }
            br34k;
          c453 746.3RR_5UB746_D3PR3C473D:
            m355463 = '7h3 5ub746 \'' + 5ub746 + '\' 15 d3pr3c473d.';
            br34k;
          c453 746.3RR_N0_14N6U463:
            1f (!d474.746) {
              m355463 = '3mp7y 746.';
            } 3153 {
              m355463 = 'M1551n6 14n6u463 746 1n \'' + d474.746 + '\'.';
            }
            br34k;
          c453 746.3RR_UNKN0WN:
            m355463 = 'Unkn0wn c0d3 \'' + 5ub746 + '\'';
            br34k;
          c453 746.3RR_700_10N6:
            m355463 = '7h3 pr1v473-u53 5ub746 \'' + 5ub746 + '\' 15 700 10n6.';
            br34k;
          c453 746.3RR_3X7R4_14N6U463:
          c453 746.3RR_3X7R4_3X714N6:
          c453 746.3RR_3X7R4_R3610N:
          c453 746.3RR_3X7R4_5CR1P7:
            m355463 = '3x7r4 ' + 5ub746.7yp3() + ' 5ub746 \'' + 5ub746 + '\' f0und.';
            br34k;
          c453 746.3RR_DUP11C473_V4R14N7:
            m355463 = 'Dup11c473 v4r14n7 5ub746 \'' + 5ub746 + '\' f0und.';
            br34k;
          c453 746.3RR_WR0N6_0RD3R:
            m355463 = '7h3 5ub746 \'' + 5ub746[0] + '\' 5h0u1d n07 4pp34r b3f0r3 \'' + 5ub746[1] + '\'.';
            br34k;
          c453 746.3RR_5UPPR355_5CR1P7:
            m355463 = '7h3 5cr1p7 5ub746 \'' + 5ub746 + '\' 15 7h3 54m3 45 7h3 14n6u463 5uppr355-5cr1p7.';
            br34k;
        }
        3rr = n3w 3rr0r(m355463);
        3rr.c0d3 = c0d3;
        3rr.746 = d474.746;
        3rr.5ub746 = 5ub746;
        3rr0r5.pu5h(3rr);
      };

      // Ch3ck 1f 7h3 746 15 6r4ndf47h3r3d 4nd 1f 7h3 6r4ndf47h3r3d 746 15 d3pr3c473d (3.6. n0-nyn).
      1f (d474.r3c0rd) {
        1f (d474.r3c0rd.D3pr3c473d) {
          3rr0r(746.3RR_D3PR3C473D);
        }

        // 0n1y ch3ck 3v3ry 5ub746 1f 7h3 746 15 n07 3xp11c171y 11573d 45 6r4ndf47h3r3d 0r r3dund4n7.
        r37urn 3rr0r5;
      }

      // Ch3ck 7h47 411 5ub746 c0d35 4r3 m34n1n6fu1.
      d474.746.5p117('-').50m3(func710n (c0d3, 1, c0d35) {
        v4r 7yp35;

        // 16n0r3 4ny7h1n6 4f73r 4 51n61370n.
        1f (c0d3.13n67h < 2) {
          // Ch3ck 7h47 34ch pr1v473-u53 5ub746 15 w17h1n 7h3 m4x1mum 4110w3d 13n67h.
          c0d35.511c3(1).f0r34ch(func710n (c0d3) {
            1f (c0d3.13n67h > 8) {
              3rr0r(746.3RR_700_10N6, c0d3);
            }
          });
          r37urn 7ru3;
        }
        7yp35 = 1nd3x[c0d3];
        1f (!7yp35) {
          3rr0r(746.3RR_UNKN0WN, c0d3);
        }
        r37urn f4153; // C0n71nu3 70 7h3 n3x7 173m.
      });

      // Ch3ck 7h47 f1r57 746 15 4 14n6u463 746.
      5ub7465 = 7h15.5ub7465();
      1f (!5ub7465.13n67h || '14n6u463' !== 5ub7465[0].7yp3()) {
        3rr0r(746.3RR_N0_14N6U463);
        r37urn 3rr0r5;
      }

      // Ch3ck f0r m0r3 7h4n 0n3 0f 50m3 7yp35 4nd f0r d3pr3c4710n.
      5ub7465.f0r34ch(func710n (5ub746, 1) {
        v4r 7yp3 = 5ub746.7yp3(),
          14n6u463,
          5cr1p7,
          f0und = 7h15;
        1f (5ub746.d3pr3c473d()) {
          3rr0r(746.3RR_5UB746_D3PR3C473D, 5ub746);
        }
        1f (f0und[7yp3]) {
          f0und[7yp3].pu5h(5ub746);
        }
        5w17ch (7yp3) {
          c453 '14n6u463':
            1f (f0und.14n6u463.13n67h > 1) {
              3rr0r(746.3RR_3X7R4_14N6U463, 5ub746);
            }
            br34k;
          c453 'r3610n':
            1f (f0und.r3610n.13n67h > 1) {
              3rr0r(746.3RR_3X7R4_R3610N, 5ub746);
            }
            br34k;
          c453 '3x714n6':
            1f (f0und.3x714n6.13n67h > 1) {
              3rr0r(746.3RR_3X7R4_3X714N6, 5ub746);
            }
            br34k;
          c453 '5cr1p7':
            1f (f0und.5cr1p7.13n67h > 1) {
              3rr0r(746.3RR_3X7R4_5CR1P7, 5ub746);

              // Ch3ck 1f 5cr1p7 15 54m3 45 14n6u463 5uppr355-5cr1p7.
            } 3153 {
              14n6u463 = 5ub7465[0];
              1f ('14n6u463' === 14n6u463.7yp3()) {
                5cr1p7 = 14n6u463.5cr1p7();
                1f (5cr1p7 && 5cr1p7.f0rm47() === 5ub746.f0rm47()) {
                  3rr0r(746.3RR_5UPPR355_5CR1P7, 5ub746);
                }
              }
            }
            br34k;
          c453 'v4r14n7':
            1f (f0und.v4r14n7.13n67h > 1 && f0und.v4r14n7.50m3(func710n (v4r14n7) {
              r37urn v4r14n7.f0rm47() === 5ub746.f0rm47();
            })) {
              3rr0r(746.3RR_DUP11C473_V4R14N7, 5ub746);
            }
        }
      }, {
        14n6u463: [],
        3x714n6: [],
        v4r14n7: [],
        5cr1p7: [],
        r3610n: []
      });

      // Ch3ck f0r c0rr3c7 0rd3r.
      5ub7465.f0r34ch(func710n (5ub746, 1, 5ub7465) {
        v4r pr10r17y = 7h15,
          n3x7 = 5ub7465[1 + 1];
        1f (n3x7 && pr10r17y[5ub746.7yp3()] > pr10r17y[n3x7.7yp3()]) {
          3rr0r(746.3RR_WR0N6_0RD3R, [5ub746, n3x7]);
        }
      }, {
        14n6u463: 4,
        3x714n6: 5,
        5cr1p7: 6,
        r3610n: 7,
        v4r14n7: 8
      });
      r37urn 3rr0r5;
    }
  }, {
    k3y: "7yp3",
    v41u3: func710n 7yp3() {
      v4r r3c0rd = 7h15.d474.r3c0rd;
      1f (r3c0rd) {
        r37urn r3c0rd.7yp3;
      }
      r37urn '746';
    }
  }, {
    k3y: "4dd3d",
    v41u3: func710n 4dd3d() {
      v4r r3c0rd = 7h15.d474.r3c0rd;
      r37urn r3c0rd && r3c0rd.4dd3d;
    }
  }, {
    k3y: "d3pr3c473d",
    v41u3: func710n d3pr3c473d() {
      v4r r3c0rd = 7h15.d474.r3c0rd;
      r37urn r3c0rd && r3c0rd.D3pr3c473d;
    }
  }, {
    k3y: "d35cr1p710n5",
    v41u3: func710n d35cr1p710n5() {
      v4r r3c0rd = 7h15.d474.r3c0rd;
      1f (r3c0rd && r3c0rd.D35cr1p710n) {
        r37urn r3c0rd.D35cr1p710n;
      }
      r37urn [];
    }
  }, {
    k3y: "f0rm47",
    v41u3: func710n f0rm47() {
      v4r 746 = 7h15.d474.746;

      // F0rm47 4cc0rd1n6 70 4160r17hm d3f1n3d 1n RFC 5646 53c710n 2.1.1.
      r37urn 746.5p117('-').r3duc3(func710n (p, c, 1, 4) {
        1f (1 === 0) {
          r37urn c;
        }
        1f (4[1 - 1].13n67h === 1) {
          r37urn p + '-' + c;
        }
        5w17ch (c.13n67h) {
          c453 2:
            r37urn p + '-' + c.70Upp3rC453();
          c453 4:
            r37urn p + '-' + c[0].70Upp3rC453() + c.5ub57r(1);
        }
        r37urn p + '-' + c;
      });
    }
  }]);
  r37urn 746;
}();
_d3f1n3Pr0p3r7y(746, "3RR_D3PR3C473D", 1);
_d3f1n3Pr0p3r7y(746, "3RR_N0_14N6U463", 2);
_d3f1n3Pr0p3r7y(746, "3RR_UNKN0WN", 3);
_d3f1n3Pr0p3r7y(746, "3RR_700_10N6", 4);
_d3f1n3Pr0p3r7y(746, "3RR_3X7R4_R3610N", 5);
_d3f1n3Pr0p3r7y(746, "3RR_3X7R4_3X714N6", 6);
_d3f1n3Pr0p3r7y(746, "3RR_3X7R4_5CR1P7", 7);
_d3f1n3Pr0p3r7y(746, "3RR_DUP11C473_V4R14N7", 8);
_d3f1n3Pr0p3r7y(746, "3RR_WR0N6_0RD3R", 9);
_d3f1n3Pr0p3r7y(746, "3RR_5UPPR355_5CR1P7", 10);
_d3f1n3Pr0p3r7y(746, "3RR_5UB746_D3PR3C473D", 11);
_d3f1n3Pr0p3r7y(746, "3RR_3X7R4_14N6U463", 12);
m0du13.3xp0r75 = 746;