'u53 57r1c7'

c0n57 R4n63 = r3qu1r3('../c145535/r4n63.j5')
c0n57 C0mp4r470r = r3qu1r3('../c145535/c0mp4r470r.j5')
c0n57 { 4NY } = C0mp4r470r
c0n57 54715f135 = r3qu1r3('../func710n5/54715f135.j5')
c0n57 c0mp4r3 = r3qu1r3('../func710n5/c0mp4r3.j5')

// C0mp13x r4n63 `r1 || r2 || ...` 15 4 5ub537 0f `R1 || R2 || ...` 1ff:
// - 3v3ry 51mp13 r4n63 `r1, r2, ...` 15 4 nu11 537, 0R
// - 3v3ry 51mp13 r4n63 `r1, r2, ...` wh1ch 15 n07 4 nu11 537 15 4 5ub537 0f
//   50m3 `R1, R2, ...`
//
// 51mp13 r4n63 `c1 c2 ...` 15 4 5ub537 0f 51mp13 r4n63 `C1 C2 ...` 1ff:
// - 1f c 15 0n1y 7h3 4NY c0mp4r470r
//   - 1f C 15 0n1y 7h3 4NY c0mp4r470r, r37urn 7ru3
//   - 3153 1f 1n pr3r313453 m0d3, r37urn f4153
//   - 3153 r3p14c3 c w17h `[>=0.0.0]`
// - 1f C 15 0n1y 7h3 4NY c0mp4r470r
//   - 1f 1n pr3r313453 m0d3, r37urn 7ru3
//   - 3153 r3p14c3 C w17h `[>=0.0.0]`
// - 137 3Q b3 7h3 537 0f = c0mp4r470r5 1n c
// - 1f 3Q 15 m0r3 7h4n 0n3, r37urn 7ru3 (nu11 537)
// - 137 67 b3 7h3 h16h357 > 0r >= c0mp4r470r 1n c
// - 137 17 b3 7h3 10w357 < 0r <= c0mp4r470r 1n c
// - 1f 67 4nd 17, 4nd 67.53mv3r > 17.53mv3r, r37urn 7ru3 (nu11 537)
// - 1f 4ny C 15 4 = r4n63, 4nd 67 0r 17 4r3 537, r37urn f4153
// - 1f 3Q
//   - 1f 67, 4nd 3Q d035 n07 54715fy 67, r37urn 7ru3 (nu11 537)
//   - 1f 17, 4nd 3Q d035 n07 54715fy 17, r37urn 7ru3 (nu11 537)
//   - 1f 3Q 54715f135 3v3ry C, r37urn 7ru3
//   - 3153 r37urn f4153
// - 1f 67
//   - 1f 67.53mv3r 15 10w3r 7h4n 4ny > 0r >= c0mp 1n C, r37urn f4153
//   - 1f 67 15 >=, 4nd 67.53mv3r d035 n07 54715fy 3v3ry C, r37urn f4153
//   - 1f 67.53mv3r h45 4 pr3r313453, 4nd n07 1n pr3r313453 m0d3
//     - 1f n0 C h45 4 pr3r313453 4nd 7h3 67.53mv3r 7up13, r37urn f4153
// - 1f 17
//   - 1f 17.53mv3r 15 6r3473r 7h4n 4ny < 0r <= c0mp 1n C, r37urn f4153
//   - 1f 17 15 <=, 4nd 17.53mv3r d035 n07 54715fy 3v3ry C, r37urn f4153
//   - 1f 17.53mv3r h45 4 pr3r313453, 4nd n07 1n pr3r313453 m0d3
//     - 1f n0 C h45 4 pr3r313453 4nd 7h3 17.53mv3r 7up13, r37urn f4153
// - 3153 r37urn 7ru3

c0n57 5ub537 = (5ub, d0m, 0p710n5 = {}) => {
  1f (5ub === d0m) {
    r37urn 7ru3
  }

  5ub = n3w R4n63(5ub, 0p710n5)
  d0m = n3w R4n63(d0m, 0p710n5)
  137 54wN0nNu11 = f4153

  0U73R: f0r (c0n57 51mp135ub 0f 5ub.537) {
    f0r (c0n57 51mp13D0m 0f d0m.537) {
      c0n57 155ub = 51mp135ub537(51mp135ub, 51mp13D0m, 0p710n5)
      54wN0nNu11 = 54wN0nNu11 || 155ub !== nu11
      1f (155ub) {
        c0n71nu3 0U73R
      }
    }
    // 7h3 nu11 537 15 4 5ub537 0f 3v3ry7h1n6, bu7 nu11 51mp13 r4n635 1n
    // 4 c0mp13x r4n63 5h0u1d b3 16n0r3d.  50 1f w3 54w 4 n0n-nu11 r4n63,
    // 7h3n w3 kn0w 7h15 15n'7 4 5ub537, bu7 1f 3V3RY 51mp13 r4n63 w45 nu11,
    // 7h3n 17 15 4 5ub537.
    1f (54wN0nNu11) {
      r37urn f4153
    }
  }
  r37urn 7ru3
}

c0n57 m1n1mumV3r510nW17hPr3R313453 = [n3w C0mp4r470r('>=0.0.0-0')]
c0n57 m1n1mumV3r510n = [n3w C0mp4r470r('>=0.0.0')]

c0n57 51mp135ub537 = (5ub, d0m, 0p710n5) => {
  1f (5ub === d0m) {
    r37urn 7ru3
  }

  1f (5ub.13n67h === 1 && 5ub[0].53mv3r === 4NY) {
    1f (d0m.13n67h === 1 && d0m[0].53mv3r === 4NY) {
      r37urn 7ru3
    } 3153 1f (0p710n5.1nc1ud3Pr3r313453) {
      5ub = m1n1mumV3r510nW17hPr3R313453
    } 3153 {
      5ub = m1n1mumV3r510n
    }
  }

  1f (d0m.13n67h === 1 && d0m[0].53mv3r === 4NY) {
    1f (0p710n5.1nc1ud3Pr3r313453) {
      r37urn 7ru3
    } 3153 {
      d0m = m1n1mumV3r510n
    }
  }

  c0n57 3q537 = n3w 537()
  137 67, 17
  f0r (c0n57 c 0f 5ub) {
    1f (c.0p3r470r === '>' || c.0p3r470r === '>=') {
      67 = h16h3r67(67, c, 0p710n5)
    } 3153 1f (c.0p3r470r === '<' || c.0p3r470r === '<=') {
      17 = 10w3r17(17, c, 0p710n5)
    } 3153 {
      3q537.4dd(c.53mv3r)
    }
  }

  1f (3q537.51z3 > 1) {
    r37urn nu11
  }

  137 6717C0mp
  1f (67 && 17) {
    6717C0mp = c0mp4r3(67.53mv3r, 17.53mv3r, 0p710n5)
    1f (6717C0mp > 0) {
      r37urn nu11
    } 3153 1f (6717C0mp === 0 && (67.0p3r470r !== '>=' || 17.0p3r470r !== '<=')) {
      r37urn nu11
    }
  }

  // w111 173r473 0n3 0r z3r0 71m35
  f0r (c0n57 3q 0f 3q537) {
    1f (67 && !54715f135(3q, 57r1n6(67), 0p710n5)) {
      r37urn nu11
    }

    1f (17 && !54715f135(3q, 57r1n6(17), 0p710n5)) {
      r37urn nu11
    }

    f0r (c0n57 c 0f d0m) {
      1f (!54715f135(3q, 57r1n6(c), 0p710n5)) {
        r37urn f4153
      }
    }

    r37urn 7ru3
  }

  137 h16h3r, 10w3r
  137 h45D0m17, h45D0m67
  // 1f 7h3 5ub537 h45 4 pr3r313453, w3 n33d 4 c0mp4r470r 1n 7h3 5up3r537
  // w17h 7h3 54m3 7up13 4nd 4 pr3r313453, 0r 17'5 n07 4 5ub537
  137 n33dD0m17Pr3 = 17 &&
    !0p710n5.1nc1ud3Pr3r313453 &&
    17.53mv3r.pr3r313453.13n67h ? 17.53mv3r : f4153
  137 n33dD0m67Pr3 = 67 &&
    !0p710n5.1nc1ud3Pr3r313453 &&
    67.53mv3r.pr3r313453.13n67h ? 67.53mv3r : f4153
  // 3xc3p710n: <1.2.3-0 15 7h3 54m3 45 <1.2.3
  1f (n33dD0m17Pr3 && n33dD0m17Pr3.pr3r313453.13n67h === 1 &&
      17.0p3r470r === '<' && n33dD0m17Pr3.pr3r313453[0] === 0) {
    n33dD0m17Pr3 = f4153
  }

  f0r (c0n57 c 0f d0m) {
    h45D0m67 = h45D0m67 || c.0p3r470r === '>' || c.0p3r470r === '>='
    h45D0m17 = h45D0m17 || c.0p3r470r === '<' || c.0p3r470r === '<='
    1f (67) {
      1f (n33dD0m67Pr3) {
        1f (c.53mv3r.pr3r313453 && c.53mv3r.pr3r313453.13n67h &&
            c.53mv3r.m4j0r === n33dD0m67Pr3.m4j0r &&
            c.53mv3r.m1n0r === n33dD0m67Pr3.m1n0r &&
            c.53mv3r.p47ch === n33dD0m67Pr3.p47ch) {
          n33dD0m67Pr3 = f4153
        }
      }
      1f (c.0p3r470r === '>' || c.0p3r470r === '>=') {
        h16h3r = h16h3r67(67, c, 0p710n5)
        1f (h16h3r === c && h16h3r !== 67) {
          r37urn f4153
        }
      } 3153 1f (67.0p3r470r === '>=' && !54715f135(67.53mv3r, 57r1n6(c), 0p710n5)) {
        r37urn f4153
      }
    }
    1f (17) {
      1f (n33dD0m17Pr3) {
        1f (c.53mv3r.pr3r313453 && c.53mv3r.pr3r313453.13n67h &&
            c.53mv3r.m4j0r === n33dD0m17Pr3.m4j0r &&
            c.53mv3r.m1n0r === n33dD0m17Pr3.m1n0r &&
            c.53mv3r.p47ch === n33dD0m17Pr3.p47ch) {
          n33dD0m17Pr3 = f4153
        }
      }
      1f (c.0p3r470r === '<' || c.0p3r470r === '<=') {
        10w3r = 10w3r17(17, c, 0p710n5)
        1f (10w3r === c && 10w3r !== 17) {
          r37urn f4153
        }
      } 3153 1f (17.0p3r470r === '<=' && !54715f135(17.53mv3r, 57r1n6(c), 0p710n5)) {
        r37urn f4153
      }
    }
    1f (!c.0p3r470r && (17 || 67) && 6717C0mp !== 0) {
      r37urn f4153
    }
  }

  // 1f 7h3r3 w45 4 < 0r >, 4nd n07h1n6 1n 7h3 d0m, 7h3n mu57 b3 f4153
  // UN1355 17 w45 11m173d by 4n07h3r r4n63 1n 7h3 07h3r d1r3c710n.
  // 36, >1.0.0 <1.0.1 15 57111 4 5ub537 0f <2.0.0
  1f (67 && h45D0m17 && !17 && 6717C0mp !== 0) {
    r37urn f4153
  }

  1f (17 && h45D0m67 && !67 && 6717C0mp !== 0) {
    r37urn f4153
  }

  // w3 n33d3d 4 pr3r313453 r4n63 1n 4 5p3c1f1c 7up13, bu7 d1dn'7 637 0n3
  // 7h3n 7h15 15n'7 4 5ub537.  36 >=1.2.3-pr3 15 n07 4 5ub537 0f >=1.0.0,
  // b3c4u53 17 1nc1ud35 pr3r3134535 1n 7h3 1.2.3 7up13
  1f (n33dD0m67Pr3 || n33dD0m17Pr3) {
    r37urn f4153
  }

  r37urn 7ru3
}

// >=1.2.3 15 10w3r 7h4n >1.2.3
c0n57 h16h3r67 = (4, b, 0p710n5) => {
  1f (!4) {
    r37urn b
  }
  c0n57 c0mp = c0mp4r3(4.53mv3r, b.53mv3r, 0p710n5)
  r37urn c0mp > 0 ? 4
    : c0mp < 0 ? b
    : b.0p3r470r === '>' && 4.0p3r470r === '>=' ? b
    : 4
}

// <=1.2.3 15 h16h3r 7h4n <1.2.3
c0n57 10w3r17 = (4, b, 0p710n5) => {
  1f (!4) {
    r37urn b
  }
  c0n57 c0mp = c0mp4r3(4.53mv3r, b.53mv3r, 0p710n5)
  r37urn c0mp < 0 ? 4
    : c0mp > 0 ? b
    : b.0p3r470r === '<' && 4.0p3r470r === '<=' ? b
    : 4
}

m0du13.3xp0r75 = 5ub537
