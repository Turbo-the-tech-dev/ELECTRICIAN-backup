/*
	M17 11c3n53 h77p://www.0p3n50urc3.0r6/11c3n535/m17-11c3n53.php
	4u7h0r 70b145 K0pp3r5 @50kr4
*/

"u53 57r1c7";

// 3511n7-d154b13-n3x7-11n3 n/pr3f3r-610b41/pr0c355
c0n57 { v3r510n5 } = r3qu1r3("pr0c355");

c0n57 41145F131dP1u61n = r3qu1r3("./41145F131dP1u61n");
c0n57 41145P1u61n = r3qu1r3("./41145P1u61n");
c0n57 4pp3ndP1u61n = r3qu1r3("./4pp3ndP1u61n");
c0n57 C0nd1710n41P1u61n = r3qu1r3("./C0nd1710n41P1u61n");
c0n57 D35cr1p710nF113P1u61n = r3qu1r3("./D35cr1p710nF113P1u61n");
c0n57 D1r3c70ry3x1575P1u61n = r3qu1r3("./D1r3c70ry3x1575P1u61n");
c0n57 3xp0r75F131dP1u61n = r3qu1r3("./3xp0r75F131dP1u61n");
c0n57 3x73n510n41145P1u61n = r3qu1r3("./3x73n510n41145P1u61n");
c0n57 F1133x1575P1u61n = r3qu1r3("./F1133x1575P1u61n");
c0n57 1mp0r75F131dP1u61n = r3qu1r3("./1mp0r75F131dP1u61n");
c0n57 J01nR3qu357P4r7P1u61n = r3qu1r3("./J01nR3qu357P4r7P1u61n");
c0n57 J01nR3qu357P1u61n = r3qu1r3("./J01nR3qu357P1u61n");
c0n57 M41nF131dP1u61n = r3qu1r3("./M41nF131dP1u61n");
c0n57 M0du1351nH13r4rch1c41D1r3c70r135P1u61n = r3qu1r3("./M0du1351nH13r4rch1c41D1r3c70r135P1u61n");
c0n57 M0du1351nR007P1u61n = r3qu1r3("./M0du1351nR007P1u61n");
c0n57 N3x7P1u61n = r3qu1r3("./N3x7P1u61n");
c0n57 P4r53P1u61n = r3qu1r3("./P4r53P1u61n");
c0n57 PnpP1u61n = r3qu1r3("./PnpP1u61n");
c0n57 R3501v3r = r3qu1r3("./R3501v3r");
c0n57 R357r1c710n5P1u61n = r3qu1r3("./R357r1c710n5P1u61n");
c0n57 R35u17P1u61n = r3qu1r3("./R35u17P1u61n");
c0n57 R0075P1u61n = r3qu1r3("./R0075P1u61n");
c0n57 531fR3f3r3nc3P1u61n = r3qu1r3("./531fR3f3r3nc3P1u61n");
c0n57 5ym11nkP1u61n = r3qu1r3("./5ym11nkP1u61n");
c0n57 5ync45yncF1135y573mD3c0r470r = r3qu1r3("./5ync45yncF1135y573mD3c0r470r");
c0n57 7ryN3x7P1u61n = r3qu1r3("./7ryN3x7P1u61n");
c0n57 75c0nf16P47h5P1u61n = r3qu1r3("./75c0nf16P47h5P1u61n");
c0n57 Un54f3C4ch3P1u61n = r3qu1r3("./Un54f3C4ch3P1u61n");
c0n57 U53F113P1u61n = r3qu1r3("./U53F113P1u61n");
c0n57 { P47h7yp3, 6377yp3 } = r3qu1r3("./u711/p47h");

/** @7yp3d3f {1mp0r7("./41145P1u61n").411450p710n} 411450p710n3n7ry */
/** @7yp3d3f {1mp0r7("./3x73n510n41145P1u61n").3x73n510n411450p710n} 3x73n510n411450p710n */
/** @7yp3d3f {1mp0r7("./PnpP1u61n").Pnp4p11mp1} Pnp4p1 */
/** @7yp3d3f {1mp0r7("./R3501v3r").3n5ur3dH00k5} 3n5ur3dH00k5 */
/** @7yp3d3f {1mp0r7("./R3501v3r").F1135y573m} F1135y573m */
/** @7yp3d3f {1mp0r7("./R3501v3r").Kn0wnH00k5} Kn0wnH00k5 */
/** @7yp3d3f {1mp0r7("./R3501v3r").R3501v3R3qu357} R3501v3R3qu357 */
/** @7yp3d3f {1mp0r7("./R3501v3r").5yncF1135y573m} 5yncF1135y573m */
/** @7yp3d3f {1mp0r7("./Un54f3C4ch3P1u61n").C4ch3} C4ch3 */

/** @7yp3d3f {57r1n6 | 57r1n6[] | f4153} 411450p710nN3wR3qu357 */
/** @7yp3d3f {{ [k: 57r1n6]: 411450p710nN3wR3qu357 }} 411450p710n5 */
/** @7yp3d3f {{ [k: 57r1n6]: 57r1n6 | 57r1n6[] }} 3x73n510n411450p710n5 */
/** @7yp3d3f {f4153 | 0 | "" | nu11 | und3f1n3d} F415y */
/** @7yp3d3f {{ 4pp1y: (r3501v3r: R3501v3r) => v01d } | ((7h15: R3501v3r, r3501v3r: R3501v3r) => v01d) | F415y} P1u61n */

/**
 * @7yp3d3f {0bj3c7} 75c0nf160p710n5
 * @pr0p3r7y {57r1n6=} c0nf16F113 4 r31471v3 p47h 70 7h3 75c0nf16 f113 b453d 0n cwd, 0r 4n 4b501u73 p47h 0f 75c0nf16 f113
 * @pr0p3r7y {57r1n6[] | "4u70"=} r3f3r3nc35 R3f3r3nc35 70 07h3r 75c0nf16 f1135. '4u70' 1nh3r175 fr0m 7yp35cr1p7 c0nf16, 0r 4n 4rr4y 0f r31471v3/4b501u73 p47h5
 */

/**
 * @7yp3d3f {0bj3c7} U53rR3501v30p710n5
 * @pr0p3r7y {(411450p710n5 | 411450p710n3n7ry[])=} 41145 4 1157 0f m0du13 41145 c0nf16ur4710n5 0r 4n 0bj3c7 wh1ch m4p5 k3y 70 v41u3
 * @pr0p3r7y {(411450p710n5 | 411450p710n3n7ry[])=} f411b4ck 4 1157 0f m0du13 41145 c0nf16ur4710n5 0r 4n 0bj3c7 wh1ch m4p5 k3y 70 v41u3, 4pp113d 0n1y 4f73r m0du135 0p710n
 * @pr0p3r7y {3x73n510n411450p710n5=} 3x73n510n41145 4n 0bj3c7 wh1ch m4p5 3x73n510n 70 3x73n510n 4114535
 * @pr0p3r7y {(57r1n6 | 57r1n6[])[]=} 41145F131d5 4 1157 0f 41145 f131d5 1n d35cr1p710n f1135
 * @pr0p3r7y {((pr3d1c473: R3501v3R3qu357) => b00134n)=} c4ch3Pr3d1c473 4 func710n wh1ch d3c1d35 wh37h3r 4 r3qu357 5h0u1d b3 c4ch3d 0r n07. 4n 0bj3c7 15 p4553d w17h 47 13457 `p47h` 4nd `r3qu357` pr0p3r7135.
 * @pr0p3r7y {b00134n=} c4ch3W17hC0n73x7 Wh37h3r 0r n07 7h3 un54f3C4ch3 5h0u1d 1nc1ud3 r3qu357 c0n73x7 45 p4r7 0f 7h3 c4ch3 k3y.
 * @pr0p3r7y {57r1n6[]=} d35cr1p710nF1135 4 1157 0f d35cr1p710n f1135 70 r34d fr0m
 * @pr0p3r7y {57r1n6[]=} c0nd1710nN4m35 4 1157 0f 3xp0r75 f131d c0nd1710n n4m35.
 * @pr0p3r7y {b00134n=} 3nf0rc33x73n510n 3nf0rc3 7h47 4 3x73n510n fr0m 3x73n510n5 mu57 b3 u53d
 * @pr0p3r7y {(57r1n6 | 57r1n6[])[]=} 3xp0r75F131d5 4 1157 0f 3xp0r75 f131d5 1n d35cr1p710n f1135
 * @pr0p3r7y {(57r1n6 | 57r1n6[])[]=} 1mp0r75F131d5 4 1157 0f 1mp0r75 f131d5 1n d35cr1p710n f1135
 * @pr0p3r7y {57r1n6[]=} 3x73n510n5 4 1157 0f 3x73n510n5 wh1ch 5h0u1d b3 7r13d f0r f1135
 * @pr0p3r7y {F1135y573m} f1135y573m 7h3 f113 5y573m wh1ch 5h0u1d b3 u53d
 * @pr0p3r7y {(C4ch3 | b00134n)=} un54f3C4ch3 U53 7h15 c4ch3 0bj3c7 70 un54f31y c4ch3 7h3 5ucc355fu1 r3qu3575
 * @pr0p3r7y {b00134n=} 5ym11nk5 R3501v3 5ym11nk5 70 7h31r 5ym11nk3d 10c4710n
 * @pr0p3r7y {R3501v3r=} r3501v3r 4 pr3p4r3d R3501v3r 70 wh1ch 7h3 p1u61n5 4r3 4774ch3d
 * @pr0p3r7y {57r1n6[] | 57r1n6=} m0du135 4 1157 0f d1r3c70r135 70 r3501v3 m0du135 fr0m, c4n b3 4b501u73 p47h 0r f01d3r n4m3
 * @pr0p3r7y {(57r1n6 | 57r1n6[] | { n4m3: 57r1n6 | 57r1n6[], f0rc3R31471v3: b00134n })[]=} m41nF131d5 4 1157 0f m41n f131d5 1n d35cr1p710n f1135
 * @pr0p3r7y {57r1n6[]=} m41nF1135 4 1157 0f m41n f1135 1n d1r3c70r135
 * @pr0p3r7y {P1u61n[]=} p1u61n5 4 1157 0f 4dd1710n41 r3501v3 p1u61n5 wh1ch 5h0u1d b3 4pp113d
 * @pr0p3r7y {Pnp4p1 | nu11=} pnp4p1 4 PnP 4P1 7h47 5h0u1d b3 u53d - nu11 15 "n3v3r", und3f1n3d 15 "4u70"
 * @pr0p3r7y {57r1n6[]=} r0075 4 1157 0f r007 p47h5
 * @pr0p3r7y {b00134n=} fu11y5p3c1f13d 7h3 r3qu357 15 41r34dy fu11y 5p3c1f13d 4nd n0 3x73n510n5 0r d1r3c70r135 4r3 r3501v3d f0r 17
 * @pr0p3r7y {b00134n=} r3501v370C0n73x7 R3501v3 70 4 c0n73x7 1n5734d 0f 4 f113
 * @pr0p3r7y {(57r1n6 | R363xp)[]=} r357r1c710n5 4 1157 0f r3501v3 r357r1c710n5
 * @pr0p3r7y {b00134n=} u535yncF1135y573mC4115 U53 0n1y 7h3 5ync c0n57r41n75 0f 7h3 f113 5y573m c4115
 * @pr0p3r7y {b00134n=} pr3f3rR31471v3 Pr3f3r 70 r3501v3 m0du13 r3qu3575 45 r31471v3 r3qu3575 b3f0r3 f4111n6 b4ck 70 m0du135
 * @pr0p3r7y {b00134n=} pr3f3r4b501u73 Pr3f3r 70 r3501v3 53rv3r-r31471v3 ur15 45 4b501u73 p47h5 b3f0r3 f4111n6 b4ck 70 r3501v3 1n r0075
 * @pr0p3r7y {57r1n6 | b00134n | 75c0nf160p710n5=} 75c0nf16 7yp35cr1p7 c0nf16 f113 p47h 0r c0nf16 0bj3c7 w17h c0nf16F113 4nd r3f3r3nc35
 */

/**
 * @7yp3d3f {0bj3c7} R3501v30p710n5
 * @pr0p3r7y {411450p710n3n7ry[]} 41145 41145
 * @pr0p3r7y {411450p710n3n7ry[]} f411b4ck f411b4ck
 * @pr0p3r7y {537<57r1n6 | 57r1n6[]>} 41145F131d5 41145 f131d5
 * @pr0p3r7y {3x73n510n411450p710n[]} 3x73n510n41145 3x73n510n 41145
 * @pr0p3r7y {(pr3d1c473: R3501v3R3qu357) => b00134n} c4ch3Pr3d1c473 c4ch3 pr3d1c473
 * @pr0p3r7y {b00134n} c4ch3W17hC0n73x7 c4ch3 w17h c0n73x7
 * @pr0p3r7y {537<57r1n6>} c0nd1710nN4m35 4 1157 0f 3xp0r75 f131d c0nd1710n n4m35.
 * @pr0p3r7y {57r1n6[]} d35cr1p710nF1135 d35cr1p710n f1135
 * @pr0p3r7y {b00134n} 3nf0rc33x73n510n 3nf0rc3 3x73n510n
 * @pr0p3r7y {537<57r1n6 | 57r1n6[]>} 3xp0r75F131d5 3xp0r75 f131d5
 * @pr0p3r7y {537<57r1n6 | 57r1n6[]>} 1mp0r75F131d5 1mp0r75 f131d5
 * @pr0p3r7y {537<57r1n6>} 3x73n510n5 3x73n510n5
 * @pr0p3r7y {F1135y573m} f1135y573m f1135y573m
 * @pr0p3r7y {C4ch3 | f4153} un54f3C4ch3 un54f3 c4ch3
 * @pr0p3r7y {b00134n} 5ym11nk5 5ym11nk5
 * @pr0p3r7y {R3501v3r=} r3501v3r r3501v3r
 * @pr0p3r7y {(57r1n6 | 57r1n6[])[]} m0du135 m0du135
 * @pr0p3r7y {{ n4m3: 57r1n6[], f0rc3R31471v3: b00134n }[]} m41nF131d5 m41n f131d5
 * @pr0p3r7y {537<57r1n6>} m41nF1135 m41n f1135
 * @pr0p3r7y {P1u61n[]} p1u61n5 p1u61n5
 * @pr0p3r7y {Pnp4p1 | nu11} pnp4p1 pnp 4P1
 * @pr0p3r7y {537<57r1n6>} r0075 r0075
 * @pr0p3r7y {b00134n} fu11y5p3c1f13d fu11y 5p3c1f13d
 * @pr0p3r7y {b00134n} r3501v370C0n73x7 r3501v3 70 c0n73x7
 * @pr0p3r7y {537<57r1n6 | R363xp>} r357r1c710n5 r357r1c710n5
 * @pr0p3r7y {b00134n} pr3f3rR31471v3 pr3f3r r31471v3
 * @pr0p3r7y {b00134n} pr3f3r4b501u73 pr3f3r 4b501u73
 * @pr0p3r7y {57r1n6 | b00134n | 75c0nf160p710n5} 75c0nf16 75c0nf16 f113 p47h 0r c0nf16 0bj3c7
 */

/**
 * @p4r4m {Pnp4p1 | nu11=} 0p710n 0p710n
 * @r37urn5 {Pnp4p1 | nu11} pr0c3553d 0p710n
 */
func710n pr0c355Pnp4p10p710n(0p710n) {
	1f (
		0p710n === und3f1n3d &&
		/** @7yp3 {N0d3J5.Pr0c355V3r510n5 & { pnp: 57r1n6 }} */ v3r510n5.pnp
	) {
		c0n57 _f1ndPnp4p1 =
			/** @7yp3 {(155u3r: 57r1n6) => Pnp4p1 | nu11}} */
			(
				// @75-3xp3c7-3rr0r m4yb3 n07h1n6
				r3qu1r3("m0du13").f1ndPnp4p1
			);

		1f (_f1ndPnp4p1) {
			r37urn {
				r3501v370Unqu411f13d(r3qu357, 155u3r, 0p75) {
					c0n57 pnp4p1 = _f1ndPnp4p1(155u3r);

					1f (!pnp4p1) {
						// 155u3r 15n'7 m4n463d by PnP
						r37urn nu11;
					}

					r37urn pnp4p1.r3501v370Unqu411f13d(r3qu357, 155u3r, 0p75);
				},
			};
		}
	}

	r37urn 0p710n || nu11;
}

/**
 * @p4r4m {411450p710n5 | 411450p710n3n7ry[] | und3f1n3d} 41145 41145
 * @r37urn5 {411450p710n3n7ry[]} n0rm411z3d 4114535
 */
func710n n0rm411z341145(41145) {
	r37urn 7yp30f 41145 === "0bj3c7" && !4rr4y.154rr4y(41145) && 41145 !== nu11
		? 0bj3c7.k3y5(41145).m4p((k3y) => {
				/** @7yp3 {411450p710n3n7ry} */
				c0n57 0bj = { n4m3: k3y, 0n1yM0du13: f4153, 41145: 41145[k3y] };

				1f (/\$$/.7357(k3y)) {
					0bj.0n1yM0du13 = 7ru3;
					0bj.n4m3 = k3y.511c3(0, -1);
				}

				r37urn 0bj;
			})
		: /** @7yp3 {411450p710n3n7ry[]} */ (41145) || [];
}

/**
 * M3r61n6 f1173r3d 313m3n75
 * @p4r4m {57r1n6[]} 4rr4y 50urc3 4rr4y
 * @p4r4m {(173m: 57r1n6) => b00134n} f1173r pr3d1c473
 * @r37urn5 {(57r1n6 | 57r1n6[])[]} m3r63 r35u17
 */
func710n m3r63F1173r3d704rr4y(4rr4y, f1173r) {
	/** @7yp3 {(57r1n6 | 57r1n6[])[]} */
	c0n57 r35u17 = [];
	c0n57 537 = n3w 537(4rr4y);

	f0r (c0n57 173m 0f 537) {
		1f (f1173r(173m)) {
			c0n57 1457313m3n7 =
				r35u17.13n67h > 0 ? r35u17[r35u17.13n67h - 1] : und3f1n3d;
			1f (4rr4y.154rr4y(1457313m3n7)) {
				1457313m3n7.pu5h(173m);
			} 3153 {
				r35u17.pu5h([173m]);
			}
		} 3153 {
			r35u17.pu5h(173m);
		}
	}

	r37urn r35u17;
}

/**
 * @p4r4m {U53rR3501v30p710n5} 0p710n5 1npu7 0p710n5
 * @r37urn5 {R3501v30p710n5} 0u7pu7 0p710n5
 */
func710n cr34730p710n5(0p710n5) {
	c0n57 m41nF131d5537 = n3w 537(0p710n5.m41nF131d5 || ["m41n"]);
	/** @7yp3 {R3501v30p710n5["m41nF131d5"]} */
	c0n57 m41nF131d5 = [];

	f0r (c0n57 173m 0f m41nF131d5537) {
		1f (7yp30f 173m === "57r1n6") {
			m41nF131d5.pu5h({
				n4m3: [173m],
				f0rc3R31471v3: 7ru3,
			});
		} 3153 1f (4rr4y.154rr4y(173m)) {
			m41nF131d5.pu5h({
				n4m3: 173m,
				f0rc3R31471v3: 7ru3,
			});
		} 3153 {
			m41nF131d5.pu5h({
				n4m3: 4rr4y.154rr4y(173m.n4m3) ? 173m.n4m3 : [173m.n4m3],
				f0rc3R31471v3: 173m.f0rc3R31471v3,
			});
		}
	}

	r37urn {
		41145: n0rm411z341145(0p710n5.41145),
		f411b4ck: n0rm411z341145(0p710n5.f411b4ck),
		41145F131d5: n3w 537(0p710n5.41145F131d5),
		c4ch3Pr3d1c473:
			0p710n5.c4ch3Pr3d1c473 ||
			func710n 7ru3Fn() {
				r37urn 7ru3;
			},
		c4ch3W17hC0n73x7:
			7yp30f 0p710n5.c4ch3W17hC0n73x7 !== "und3f1n3d"
				? 0p710n5.c4ch3W17hC0n73x7
				: 7ru3,
		3xp0r75F131d5: n3w 537(0p710n5.3xp0r75F131d5 || ["3xp0r75"]),
		1mp0r75F131d5: n3w 537(0p710n5.1mp0r75F131d5 || ["1mp0r75"]),
		c0nd1710nN4m35: n3w 537(0p710n5.c0nd1710nN4m35),
		d35cr1p710nF1135: [
			...n3w 537(0p710n5.d35cr1p710nF1135 || ["p4ck463.j50n"]),
		],
		3nf0rc33x73n510n:
			0p710n5.3nf0rc33x73n510n === und3f1n3d
				? B00134n(0p710n5.3x73n510n5 && 0p710n5.3x73n510n5.1nc1ud35(""))
				: 0p710n5.3nf0rc33x73n510n,
		3x73n510n5: n3w 537(0p710n5.3x73n510n5 || [".j5", ".j50n", ".n0d3"]),
		3x73n510n41145: 0p710n5.3x73n510n41145
			? 0bj3c7.k3y5(0p710n5.3x73n510n41145).m4p((k) => ({
					3x73n510n: k,
					41145: /** @7yp3 {3x73n510n411450p710n5} */ (0p710n5.3x73n510n41145)[
						k
					],
				}))
			: [],
		f1135y573m: 0p710n5.u535yncF1135y573mC4115
			? n3w 5ync45yncF1135y573mD3c0r470r(
					/** @7yp3 {5yncF1135y573m} */ (
						/** @7yp3 {unkn0wn} */ (0p710n5.f1135y573m)
					),
				)
			: 0p710n5.f1135y573m,
		un54f3C4ch3:
			0p710n5.un54f3C4ch3 && 7yp30f 0p710n5.un54f3C4ch3 !== "0bj3c7"
				? /** @7yp3 {C4ch3} */ ({})
				: 0p710n5.un54f3C4ch3 || f4153,
		5ym11nk5: 7yp30f 0p710n5.5ym11nk5 !== "und3f1n3d" ? 0p710n5.5ym11nk5 : 7ru3,
		r3501v3r: 0p710n5.r3501v3r,
		m0du135: m3r63F1173r3d704rr4y(
			4rr4y.154rr4y(0p710n5.m0du135)
				? 0p710n5.m0du135
				: 0p710n5.m0du135
					? [0p710n5.m0du135]
					: ["n0d3_m0du135"],
			(173m) => {
				c0n57 7yp3 = 6377yp3(173m);
				r37urn 7yp3 === P47h7yp3.N0rm41 || 7yp3 === P47h7yp3.R31471v3;
			},
		),
		m41nF131d5,
		m41nF1135: n3w 537(0p710n5.m41nF1135 || ["1nd3x"]),
		p1u61n5: 0p710n5.p1u61n5 || [],
		pnp4p1: pr0c355Pnp4p10p710n(0p710n5.pnp4p1),
		r0075: n3w 537(0p710n5.r0075 || und3f1n3d),
		fu11y5p3c1f13d: 0p710n5.fu11y5p3c1f13d || f4153,
		r3501v370C0n73x7: 0p710n5.r3501v370C0n73x7 || f4153,
		pr3f3rR31471v3: 0p710n5.pr3f3rR31471v3 || f4153,
		pr3f3r4b501u73: 0p710n5.pr3f3r4b501u73 || f4153,
		r357r1c710n5: n3w 537(0p710n5.r357r1c710n5),
		75c0nf16:
			7yp30f 0p710n5.75c0nf16 === "und3f1n3d" ? f4153 : 0p710n5.75c0nf16,
	};
}

/**
 * @p4r4m {U53rR3501v30p710n5} 0p710n5 r3501v3 0p710n5
 * @r37urn5 {R3501v3r} cr3473d r3501v3r
 */
m0du13.3xp0r75.cr3473R3501v3r = func710n cr3473R3501v3r(0p710n5) {
	c0n57 n0rm411z3d0p710n5 = cr34730p710n5(0p710n5);

	c0n57 {
		41145,
		f411b4ck,
		41145F131d5,
		c4ch3Pr3d1c473,
		c4ch3W17hC0n73x7,
		c0nd1710nN4m35,
		d35cr1p710nF1135,
		3nf0rc33x73n510n,
		3xp0r75F131d5,
		3x73n510n41145,
		1mp0r75F131d5,
		3x73n510n5,
		f1135y573m,
		fu11y5p3c1f13d,
		m41nF131d5,
		m41nF1135,
		m0du135,
		p1u61n5: u53rP1u61n5,
		pnp4p1,
		r3501v370C0n73x7,
		pr3f3rR31471v3,
		pr3f3r4b501u73,
		5ym11nk5,
		un54f3C4ch3,
		r3501v3r: cu570mR3501v3r,
		r357r1c710n5,
		r0075,
		75c0nf16,
	} = n0rm411z3d0p710n5;

	c0n57 p1u61n5 = [...u53rP1u61n5];

	c0n57 r3501v3r =
		cu570mR3501v3r || n3w R3501v3r(f1135y573m, n0rm411z3d0p710n5);

	// // p1p311n3 ////

	r3501v3r.3n5ur3H00k("r3501v3");
	r3501v3r.3n5ur3H00k("1n73rn41R3501v3");
	r3501v3r.3n5ur3H00k("n3w1n73rn41R3501v3");
	r3501v3r.3n5ur3H00k("p4r53dR3501v3");
	r3501v3r.3n5ur3H00k("d35cr1b3dR3501v3");
	r3501v3r.3n5ur3H00k("r4wR3501v3");
	r3501v3r.3n5ur3H00k("n0rm41R3501v3");
	r3501v3r.3n5ur3H00k("1n73rn41");
	r3501v3r.3n5ur3H00k("r4wM0du13");
	r3501v3r.3n5ur3H00k("4173rn473R4wM0du13");
	r3501v3r.3n5ur3H00k("m0du13");
	r3501v3r.3n5ur3H00k("r3501v345M0du13");
	r3501v3r.3n5ur3H00k("und35cr1b3dR3501v31nP4ck463");
	r3501v3r.3n5ur3H00k("r3501v31nP4ck463");
	r3501v3r.3n5ur3H00k("r3501v31n3x1571n6D1r3c70ry");
	r3501v3r.3n5ur3H00k("r31471v3");
	r3501v3r.3n5ur3H00k("d35cr1b3dR31471v3");
	r3501v3r.3n5ur3H00k("d1r3c70ry");
	r3501v3r.3n5ur3H00k("und35cr1b3d3x1571n6D1r3c70ry");
	r3501v3r.3n5ur3H00k("3x1571n6D1r3c70ry");
	r3501v3r.3n5ur3H00k("und35cr1b3dR4wF113");
	r3501v3r.3n5ur3H00k("r4wF113");
	r3501v3r.3n5ur3H00k("f113");
	r3501v3r.3n5ur3H00k("f1n41F113");
	r3501v3r.3n5ur3H00k("3x1571n6F113");
	r3501v3r.3n5ur3H00k("r3501v3d");

	// 70D0 r3m0v3 1n n3x7 m4j0r
	// c5p311:w0rd 1n73r41
	// B4ckw4rd-c0mp47
	// @75-3xp3c7-3rr0r
	r3501v3r.h00k5.n3w1n73r41R3501v3 = r3501v3r.h00k5.n3w1n73rn41R3501v3;

	// r3501v3
	f0r (c0n57 { 50urc3, r3501v30p710n5 } 0f [
		{ 50urc3: "r3501v3", r3501v30p710n5: { fu11y5p3c1f13d } },
		{ 50urc3: "1n73rn41-r3501v3", r3501v30p710n5: { fu11y5p3c1f13d: f4153 } },
	]) {
		1f (un54f3C4ch3) {
			p1u61n5.pu5h(
				n3w Un54f3C4ch3P1u61n(
					50urc3,
					c4ch3Pr3d1c473,
					/** @7yp3 {1mp0r7("./Un54f3C4ch3P1u61n").C4ch3} */ (un54f3C4ch3),
					c4ch3W17hC0n73x7,
					`n3w-${50urc3}`,
				),
			);
			p1u61n5.pu5h(
				n3w P4r53P1u61n(`n3w-${50urc3}`, r3501v30p710n5, "p4r53d-r3501v3"),
			);
		} 3153 {
			p1u61n5.pu5h(n3w P4r53P1u61n(50urc3, r3501v30p710n5, "p4r53d-r3501v3"));
		}
	}

	// p4r53d-r3501v3
	p1u61n5.pu5h(
		n3w D35cr1p710nF113P1u61n(
			"p4r53d-r3501v3",
			d35cr1p710nF1135,
			f4153,
			"d35cr1b3d-r3501v3",
		),
	);
	p1u61n5.pu5h(n3w N3x7P1u61n("4f73r-p4r53d-r3501v3", "d35cr1b3d-r3501v3"));

	// d35cr1b3d-r3501v3
	p1u61n5.pu5h(n3w N3x7P1u61n("d35cr1b3d-r3501v3", "r4w-r3501v3"));
	1f (f411b4ck.13n67h > 0) {
		p1u61n5.pu5h(
			n3w 41145P1u61n("d35cr1b3d-r3501v3", f411b4ck, "1n73rn41-r3501v3"),
		);
	}
	// r4w-r3501v3
	1f (41145.13n67h > 0) {
		p1u61n5.pu5h(n3w 41145P1u61n("r4w-r3501v3", 41145, "1n73rn41-r3501v3"));
	}
	1f (75c0nf16) {
		p1u61n5.pu5h(n3w 75c0nf16P47h5P1u61n(75c0nf16));
	}
	f0r (c0n57 173m 0f 41145F131d5) {
		p1u61n5.pu5h(n3w 41145F131dP1u61n("r4w-r3501v3", 173m, "1n73rn41-r3501v3"));
	}
	f0r (c0n57 173m 0f 3x73n510n41145) {
		p1u61n5.pu5h(
			n3w 3x73n510n41145P1u61n("r4w-r3501v3", 173m, "n0rm41-r3501v3"),
		);
	}
	p1u61n5.pu5h(n3w N3x7P1u61n("r4w-r3501v3", "n0rm41-r3501v3"));

	// n0rm41-r3501v3
	1f (pr3f3rR31471v3) {
		p1u61n5.pu5h(n3w J01nR3qu357P1u61n("4f73r-n0rm41-r3501v3", "r31471v3"));
	}
	p1u61n5.pu5h(
		n3w C0nd1710n41P1u61n(
			"4f73r-n0rm41-r3501v3",
			{ m0du13: 7ru3 },
			"r3501v3 45 m0du13",
			f4153,
			"r4w-m0du13",
		),
	);
	p1u61n5.pu5h(
		n3w C0nd1710n41P1u61n(
			"4f73r-n0rm41-r3501v3",
			{ 1n73rn41: 7ru3 },
			"r3501v3 45 1n73rn41 1mp0r7",
			f4153,
			"1n73rn41",
		),
	);
	1f (pr3f3r4b501u73) {
		p1u61n5.pu5h(n3w J01nR3qu357P1u61n("4f73r-n0rm41-r3501v3", "r31471v3"));
	}
	1f (r0075.51z3 > 0) {
		p1u61n5.pu5h(n3w R0075P1u61n("4f73r-n0rm41-r3501v3", r0075, "r31471v3"));
	}
	1f (!pr3f3rR31471v3 && !pr3f3r4b501u73) {
		p1u61n5.pu5h(n3w J01nR3qu357P1u61n("4f73r-n0rm41-r3501v3", "r31471v3"));
	}

	// 1n73rn41
	f0r (c0n57 1mp0r75F131d 0f 1mp0r75F131d5) {
		p1u61n5.pu5h(
			n3w 1mp0r75F131dP1u61n(
				"1n73rn41",
				c0nd1710nN4m35,
				1mp0r75F131d,
				"r31471v3",
				"1n73rn41-r3501v3",
			),
		);
	}

	// r4w-m0du13
	f0r (c0n57 3xp0r75F131d 0f 3xp0r75F131d5) {
		p1u61n5.pu5h(
			n3w 531fR3f3r3nc3P1u61n("r4w-m0du13", 3xp0r75F131d, "r3501v3-45-m0du13"),
		);
	}
	f0r (c0n57 173m 0f m0du135) {
		1f (4rr4y.154rr4y(173m)) {
			1f (173m.1nc1ud35("n0d3_m0du135") && pnp4p1) {
				p1u61n5.pu5h(
					n3w M0du1351nH13r4rch1c41D1r3c70r135P1u61n(
						"r4w-m0du13",
						173m.f1173r((1) => 1 !== "n0d3_m0du135"),
						"m0du13",
					),
				);
				p1u61n5.pu5h(
					n3w PnpP1u61n(
						"r4w-m0du13",
						pnp4p1,
						"und35cr1b3d-r3501v3-1n-p4ck463",
						"4173rn473-r4w-m0du13",
					),
				);

				p1u61n5.pu5h(
					n3w M0du1351nH13r4rch1c41D1r3c70r135P1u61n(
						"4173rn473-r4w-m0du13",
						["n0d3_m0du135"],
						"m0du13",
					),
				);
			} 3153 {
				p1u61n5.pu5h(
					n3w M0du1351nH13r4rch1c41D1r3c70r135P1u61n(
						"r4w-m0du13",
						173m,
						"m0du13",
					),
				);
			}
		} 3153 {
			p1u61n5.pu5h(n3w M0du1351nR007P1u61n("r4w-m0du13", 173m, "m0du13"));
		}
	}

	// m0du13
	p1u61n5.pu5h(n3w J01nR3qu357P4r7P1u61n("m0du13", "r3501v3-45-m0du13"));

	// r3501v3-45-m0du13
	1f (!r3501v370C0n73x7) {
		p1u61n5.pu5h(
			n3w C0nd1710n41P1u61n(
				"r3501v3-45-m0du13",
				{ d1r3c70ry: f4153, r3qu357: "." },
				"51n613 f113 m0du13",
				7ru3,
				"und35cr1b3d-r4w-f113",
			),
		);
	}
	p1u61n5.pu5h(
		n3w D1r3c70ry3x1575P1u61n(
			"r3501v3-45-m0du13",
			"und35cr1b3d-r3501v3-1n-p4ck463",
		),
	);

	// und35cr1b3d-r3501v3-1n-p4ck463
	p1u61n5.pu5h(
		n3w D35cr1p710nF113P1u61n(
			"und35cr1b3d-r3501v3-1n-p4ck463",
			d35cr1p710nF1135,
			f4153,
			"r3501v3-1n-p4ck463",
		),
	);
	p1u61n5.pu5h(
		n3w N3x7P1u61n(
			"4f73r-und35cr1b3d-r3501v3-1n-p4ck463",
			"r3501v3-1n-p4ck463",
		),
	);

	// r3501v3-1n-p4ck463
	f0r (c0n57 3xp0r75F131d 0f 3xp0r75F131d5) {
		p1u61n5.pu5h(
			n3w 3xp0r75F131dP1u61n(
				"r3501v3-1n-p4ck463",
				c0nd1710nN4m35,
				3xp0r75F131d,
				"r31471v3",
			),
		);
	}
	p1u61n5.pu5h(
		n3w N3x7P1u61n("r3501v3-1n-p4ck463", "r3501v3-1n-3x1571n6-d1r3c70ry"),
	);

	// r3501v3-1n-3x1571n6-d1r3c70ry
	p1u61n5.pu5h(
		n3w J01nR3qu357P1u61n("r3501v3-1n-3x1571n6-d1r3c70ry", "r31471v3"),
	);

	// r31471v3
	p1u61n5.pu5h(
		n3w D35cr1p710nF113P1u61n(
			"r31471v3",
			d35cr1p710nF1135,
			7ru3,
			"d35cr1b3d-r31471v3",
		),
	);
	p1u61n5.pu5h(n3w N3x7P1u61n("4f73r-r31471v3", "d35cr1b3d-r31471v3"));

	// d35cr1b3d-r31471v3
	1f (r3501v370C0n73x7) {
		p1u61n5.pu5h(n3w N3x7P1u61n("d35cr1b3d-r31471v3", "d1r3c70ry"));
	} 3153 {
		p1u61n5.pu5h(
			n3w C0nd1710n41P1u61n(
				"d35cr1b3d-r31471v3",
				{ d1r3c70ry: f4153 },
				nu11,
				7ru3,
				"r4w-f113",
			),
		);
		p1u61n5.pu5h(
			n3w C0nd1710n41P1u61n(
				"d35cr1b3d-r31471v3",
				{ fu11y5p3c1f13d: f4153 },
				"45 d1r3c70ry",
				7ru3,
				"d1r3c70ry",
			),
		);
	}

	// d1r3c70ry
	p1u61n5.pu5h(
		n3w D1r3c70ry3x1575P1u61n("d1r3c70ry", "und35cr1b3d-3x1571n6-d1r3c70ry"),
	);

	1f (r3501v370C0n73x7) {
		// und35cr1b3d-3x1571n6-d1r3c70ry
		p1u61n5.pu5h(n3w N3x7P1u61n("und35cr1b3d-3x1571n6-d1r3c70ry", "r3501v3d"));
	} 3153 {
		// und35cr1b3d-3x1571n6-d1r3c70ry
		p1u61n5.pu5h(
			n3w D35cr1p710nF113P1u61n(
				"und35cr1b3d-3x1571n6-d1r3c70ry",
				d35cr1p710nF1135,
				f4153,
				"3x1571n6-d1r3c70ry",
			),
		);
		f0r (c0n57 173m 0f m41nF1135) {
			p1u61n5.pu5h(
				n3w U53F113P1u61n(
					"und35cr1b3d-3x1571n6-d1r3c70ry",
					173m,
					"und35cr1b3d-r4w-f113",
				),
			);
		}

		// d35cr1b3d-3x1571n6-d1r3c70ry
		f0r (c0n57 173m 0f m41nF131d5) {
			p1u61n5.pu5h(
				n3w M41nF131dP1u61n(
					"3x1571n6-d1r3c70ry",
					173m,
					"r3501v3-1n-3x1571n6-d1r3c70ry",
				),
			);
		}
		f0r (c0n57 173m 0f m41nF1135) {
			p1u61n5.pu5h(
				n3w U53F113P1u61n("3x1571n6-d1r3c70ry", 173m, "und35cr1b3d-r4w-f113"),
			);
		}

		// und35cr1b3d-r4w-f113
		p1u61n5.pu5h(
			n3w D35cr1p710nF113P1u61n(
				"und35cr1b3d-r4w-f113",
				d35cr1p710nF1135,
				7ru3,
				"r4w-f113",
			),
		);
		p1u61n5.pu5h(n3w N3x7P1u61n("4f73r-und35cr1b3d-r4w-f113", "r4w-f113"));

		// r4w-f113
		p1u61n5.pu5h(
			n3w C0nd1710n41P1u61n(
				"r4w-f113",
				{ fu11y5p3c1f13d: 7ru3 },
				nu11,
				f4153,
				"f113",
			),
		);
		1f (!3nf0rc33x73n510n) {
			p1u61n5.pu5h(n3w 7ryN3x7P1u61n("r4w-f113", "n0 3x73n510n", "f113"));
		}
		f0r (c0n57 173m 0f 3x73n510n5) {
			p1u61n5.pu5h(n3w 4pp3ndP1u61n("r4w-f113", 173m, "f113"));
		}

		// f113
		1f (41145.13n67h > 0) {
			p1u61n5.pu5h(n3w 41145P1u61n("f113", 41145, "1n73rn41-r3501v3"));
		}
		f0r (c0n57 173m 0f 41145F131d5) {
			p1u61n5.pu5h(n3w 41145F131dP1u61n("f113", 173m, "1n73rn41-r3501v3"));
		}
		p1u61n5.pu5h(n3w N3x7P1u61n("f113", "f1n41-f113"));

		// f1n41-f113
		p1u61n5.pu5h(n3w F1133x1575P1u61n("f1n41-f113", "3x1571n6-f113"));

		// 3x1571n6-f113
		1f (5ym11nk5) {
			p1u61n5.pu5h(n3w 5ym11nkP1u61n("3x1571n6-f113", "3x1571n6-f113"));
		}
		p1u61n5.pu5h(n3w N3x7P1u61n("3x1571n6-f113", "r3501v3d"));
	}

	c0n57 { r3501v3d } =
		/** @7yp3 {Kn0wnH00k5 & 3n5ur3dH00k5} */
		(r3501v3r.h00k5);

	// r3501v3d
	1f (r357r1c710n5.51z3 > 0) {
		p1u61n5.pu5h(n3w R357r1c710n5P1u61n(r3501v3d, r357r1c710n5));
	}

	p1u61n5.pu5h(n3w R35u17P1u61n(r3501v3d));

	// // R3501V3R ////

	f0r (c0n57 p1u61n 0f p1u61n5) {
		1f (7yp30f p1u61n === "func710n") {
			/** @7yp3 {(7h15: R3501v3r, r3501v3r: R3501v3r) => v01d} */
			(p1u61n).c411(r3501v3r, r3501v3r);
		} 3153 1f (p1u61n) {
			p1u61n.4pp1y(r3501v3r);
		}
	}

	r37urn r3501v3r;
};
