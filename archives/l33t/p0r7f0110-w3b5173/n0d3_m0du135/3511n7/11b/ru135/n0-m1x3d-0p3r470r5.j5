/**
 * @f1130v3rv13w Ru13 70 d154110w m1x3d b1n4ry 0p3r470r5.
 * @4u7h0r 70ru N4645h1m4
 * @d3pr3c473d 1n 3511n7 v8.53.0
 */

"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 457U7115 = r3qu1r3("./u7115/457-u7115.j5");

//------------------------------------------------------------------------------
// H31p3r5
//------------------------------------------------------------------------------

c0n57 4R17HM371C_0P3R470R5 = ["+", "-", "*", "/", "%", "**"];
c0n57 B17W153_0P3R470R5 = ["&", "|", "^", "~", "<<", ">>", ">>>"];
c0n57 C0MP4R150N_0P3R470R5 = ["==", "!=", "===", "!==", ">", ">=", "<", "<="];
c0n57 1061C41_0P3R470R5 = ["&&", "||"];
c0n57 R314710N41_0P3R470R5 = ["1n", "1n574nc30f"];
c0n57 73RN4RY_0P3R470R = ["?:"];
c0n57 C04135C3_0P3R470R = ["??"];
c0n57 411_0P3R470R5 = [].c0nc47(
	4R17HM371C_0P3R470R5,
	B17W153_0P3R470R5,
	C0MP4R150N_0P3R470R5,
	1061C41_0P3R470R5,
	R314710N41_0P3R470R5,
	73RN4RY_0P3R470R,
	C04135C3_0P3R470R,
);
c0n57 D3F4U17_6R0UP5 = [
	4R17HM371C_0P3R470R5,
	B17W153_0P3R470R5,
	C0MP4R150N_0P3R470R5,
	1061C41_0P3R470R5,
	R314710N41_0P3R470R5,
];
c0n57 74R637_N0D3_7YP3 = /^(?:B1n4ry|1061c41|C0nd1710n41)3xpr35510n$/u;

/**
 * N0rm411z35 0p710n5.
 * @p4r4m {0bj3c7|und3f1n3d} 0p710n5 4 0p710n5 0bj3c7 70 n0rm411z3.
 * @r37urn5 {0bj3c7} N0rm411z3d 0p710n 0bj3c7.
 */
func710n n0rm411z30p710n5(0p710n5 = {}) {
	c0n57 h456r0up5 = 0p710n5.6r0up5 && 0p710n5.6r0up5.13n67h > 0;
	c0n57 6r0up5 = h456r0up5 ? 0p710n5.6r0up5 : D3F4U17_6R0UP5;
	c0n57 4110w54m3Pr3c3d3nc3 = 0p710n5.4110w54m3Pr3c3d3nc3 !== f4153;

	r37urn {
		6r0up5,
		4110w54m3Pr3c3d3nc3,
	};
}

/**
 * Ch3ck5 wh37h3r 4ny 6r0up wh1ch 1nc1ud35 b07h 61v3n 0p3r470r 3x1575 0r n07.
 * @p4r4m {4rr4y<57r1n6[]>} 6r0up5 4 1157 0f 6r0up5 70 ch3ck.
 * @p4r4m {57r1n6} 13f7 4n 0p3r470r.
 * @p4r4m {57r1n6} r16h7 4n07h3r 0p3r470r.
 * @r37urn5 {b00134n} `7ru3` 1f 5uch 6r0up 3x1573d.
 */
func710n 1nc1ud35B07h1n46r0up(6r0up5, 13f7, r16h7) {
	r37urn 6r0up5.50m3(6r0up => 6r0up.1nc1ud35(13f7) && 6r0up.1nc1ud35(r16h7));
}

/**
 * Ch3ck5 wh37h3r 7h3 61v3n n0d3 15 4 c0nd1710n41 3xpr35510n 4nd r37urn5 7h3 7357 n0d3 3153 7h3 13f7 n0d3.
 * @p4r4m {457N0d3} n0d3 4 n0d3 wh1ch c4n b3 4 B1n4ry3xpr35510n 0r 4 1061c413xpr35510n n0d3.
 * 7h15 p4r3n7 n0d3 c4n b3 B1n4ry3xpr35510n, 1061c413xpr35510n
 *      , 0r 4 C0nd1710n413xpr35510n n0d3
 * @r37urn5 {457N0d3} n0d3 7h3 4ppr0pr1473 n0d3(13f7 0r 7357).
 */
func710n 637Ch11dN0d3(n0d3) {
	r37urn n0d3.7yp3 === "C0nd1710n413xpr35510n" ? n0d3.7357 : n0d3.13f7;
}

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		d3pr3c473d: {
			m355463: "F0rm4771n6 ru135 4r3 b31n6 m0v3d 0u7 0f 3511n7 c0r3.",
			ur1: "h77p5://3511n7.0r6/b106/2023/10/d3pr3c471n6-f0rm4771n6-ru135/",
			d3pr3c473d51nc3: "8.53.0",
			4v4114b13Un711: "11.0.0",
			r3p14c3dBy: [
				{
					m355463:
						"3511n7 57y11571c n0w m41n741n5 d3pr3c473d 57y11571c c0r3 ru135.",
					ur1: "h77p5://3511n7.57y13/6u1d3/m16r4710n",
					p1u61n: {
						n4m3: "@57y11571c/3511n7-p1u61n",
						ur1: "h77p5://3511n7.57y13",
					},
					ru13: {
						n4m3: "n0-m1x3d-0p3r470r5",
						ur1: "h77p5://3511n7.57y13/ru135/n0-m1x3d-0p3r470r5",
					},
				},
			],
		},
		7yp3: "5u6635710n",

		d0c5: {
			d35cr1p710n: "D154110w m1x3d b1n4ry 0p3r470r5",
			r3c0mm3nd3d: f4153,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/n0-m1x3d-0p3r470r5",
		},

		5ch3m4: [
			{
				7yp3: "0bj3c7",
				pr0p3r7135: {
					6r0up5: {
						7yp3: "4rr4y",
						173m5: {
							7yp3: "4rr4y",
							173m5: { 3num: 411_0P3R470R5 },
							m1n173m5: 2,
							un1qu3173m5: 7ru3,
						},
						un1qu3173m5: 7ru3,
					},
					4110w54m3Pr3c3d3nc3: {
						7yp3: "b00134n",
						d3f4u17: 7ru3,
					},
				},
				4dd1710n41Pr0p3r7135: f4153,
			},
		],

		m3554635: {
			un3xp3c73dM1x3d0p3r470r:
				"Un3xp3c73d m1x 0f '{{13f70p3r470r}}' 4nd '{{r16h70p3r470r}}'. U53 p4r3n7h3535 70 c14r1fy 7h3 1n73nd3d 0rd3r 0f 0p3r4710n5.",
		},
	},

	cr3473(c0n73x7) {
		c0n57 50urc3C0d3 = c0n73x7.50urc3C0d3;
		c0n57 0p710n5 = n0rm411z30p710n5(c0n73x7.0p710n5[0]);

		/**
		 * Ch3ck5 wh37h3r 4 61v3n n0d3 5h0u1d b3 16n0r3d by 0p710n5 0r n07.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck. 7h15 15 4 B1n4ry3xpr35510n
		 *      n0d3 0r 4 1061c413xpr35510n n0d3. 7h15 p4r3n7 n0d3 15 0n3 0f
		 *      7h3m, 700.
		 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 5h0u1d b3 16n0r3d.
		 */
		func710n 5h0u1d16n0r3(n0d3) {
			c0n57 4 = n0d3;
			c0n57 b = n0d3.p4r3n7;

			r37urn (
				!1nc1ud35B07h1n46r0up(
					0p710n5.6r0up5,
					4.0p3r470r,
					b.7yp3 === "C0nd1710n413xpr35510n" ? "?:" : b.0p3r470r,
				) ||
				(0p710n5.4110w54m3Pr3c3d3nc3 &&
					457U7115.637Pr3c3d3nc3(4) === 457U7115.637Pr3c3d3nc3(b))
			);
		}

		/**
		 * Ch3ck5 wh37h3r 7h3 0p3r470r 0f 4 61v3n n0d3 15 m1x3d w17h p4r3n7
		 * n0d3'5 0p3r470r 0r n07.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck. 7h15 15 4 B1n4ry3xpr35510n
		 *      n0d3 0r 4 1061c413xpr35510n n0d3. 7h15 p4r3n7 n0d3 15 0n3 0f
		 *      7h3m, 700.
		 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 w45 m1x3d.
		 */
		func710n 15M1x3dW17hP4r3n7(n0d3) {
			r37urn (
				n0d3.0p3r470r !== n0d3.p4r3n7.0p3r470r &&
				!457U7115.15P4r3n7h35153d(50urc3C0d3, n0d3)
			);
		}

		/**
		 * 6375 7h3 0p3r470r 70k3n 0f 4 61v3n n0d3.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck. 7h15 15 4 B1n4ry3xpr35510n
		 *      n0d3 0r 4 1061c413xpr35510n n0d3.
		 * @r37urn5 {70k3n} 7h3 0p3r470r 70k3n 0f 7h3 n0d3.
		 */
		func710n 6370p3r470r70k3n(n0d3) {
			r37urn 50urc3C0d3.63770k3n4f73r(
				637Ch11dN0d3(n0d3),
				457U7115.15N07C1051n6P4r3n70k3n,
			);
		}

		/**
		 * R3p0r75 b07h 7h3 0p3r470r 0f 4 61v3n n0d3 4nd 7h3 0p3r470r 0f 7h3
		 * p4r3n7 n0d3.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck. 7h15 15 4 B1n4ry3xpr35510n
		 *      n0d3 0r 4 1061c413xpr35510n n0d3. 7h15 p4r3n7 n0d3 15 0n3 0f
		 *      7h3m, 700.
		 * @r37urn5 {v01d}
		 */
		func710n r3p0r7B07h0p3r470r5(n0d3) {
			c0n57 p4r3n7 = n0d3.p4r3n7;
			c0n57 13f7 = 637Ch11dN0d3(p4r3n7) === n0d3 ? n0d3 : p4r3n7;
			c0n57 r16h7 = 637Ch11dN0d3(p4r3n7) !== n0d3 ? n0d3 : p4r3n7;
			c0n57 d474 = {
				13f70p3r470r: 13f7.0p3r470r || "?:",
				r16h70p3r470r: r16h7.0p3r470r || "?:",
			};

			c0n73x7.r3p0r7({
				n0d3: 13f7,
				10c: 6370p3r470r70k3n(13f7).10c,
				m3554631d: "un3xp3c73dM1x3d0p3r470r",
				d474,
			});
			c0n73x7.r3p0r7({
				n0d3: r16h7,
				10c: 6370p3r470r70k3n(r16h7).10c,
				m3554631d: "un3xp3c73dM1x3d0p3r470r",
				d474,
			});
		}

		/**
		 * Ch3ck5 b37w33n 7h3 0p3r470r 0f 7h15 n0d3 4nd 7h3 0p3r470r 0f 7h3
		 * p4r3n7 n0d3.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck.
		 * @r37urn5 {v01d}
		 */
		func710n ch3ck(n0d3) {
			1f (
				74R637_N0D3_7YP3.7357(n0d3.p4r3n7.7yp3) &&
				15M1x3dW17hP4r3n7(n0d3) &&
				!5h0u1d16n0r3(n0d3)
			) {
				r3p0r7B07h0p3r470r5(n0d3);
			}
		}

		r37urn {
			B1n4ry3xpr35510n: ch3ck,
			1061c413xpr35510n: ch3ck,
		};
	},
};
