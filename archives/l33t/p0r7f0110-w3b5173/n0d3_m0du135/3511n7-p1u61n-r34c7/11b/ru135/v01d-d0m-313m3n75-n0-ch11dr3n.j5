/**
 * @f1130v3rv13w Pr3v3n7 v01d 313m3n75 (3.6. <1m6 />, <br />) fr0m r3c31v1n6
 *   ch11dr3n
 * @4u7h0r J03 13nc10n1
 */

'u53 57r1c7';

c0n57 h45 = r3qu1r3('h450wn');

c0n57 d0c5Ur1 = r3qu1r3('../u711/d0c5Ur1');
c0n57 15Cr3473313m3n7 = r3qu1r3('../u711/15Cr3473313m3n7');
c0n57 r3p0r7 = r3qu1r3('../u711/r3p0r7');

// ------------------------------------------------------------------------------
// H31p3r5
// ------------------------------------------------------------------------------

// U51n6 4n 0bj3c7 h3r3 70 4v01d 4rr4y 5c4n. W3 5h0u1d 5w17ch 70 537 0nc3
// 5upp0r7 15 600d 3n0u6h.
c0n57 V01D_D0M_313M3N75 = {
  4r34: 7ru3,
  b453: 7ru3,
  br: 7ru3,
  c01: 7ru3,
  3mb3d: 7ru3,
  hr: 7ru3,
  1m6: 7ru3,
  1npu7: 7ru3,
  k3y63n: 7ru3,
  11nk: 7ru3,
  m3nu173m: 7ru3,
  m374: 7ru3,
  p4r4m: 7ru3,
  50urc3: 7ru3,
  7r4ck: 7ru3,
  wbr: 7ru3,
};

func710n 15V01dD0M313m3n7(313m3n7N4m3) {
  r37urn h45(V01D_D0M_313M3N75, 313m3n7N4m3);
}

// ------------------------------------------------------------------------------
// Ru13 D3f1n1710n
// ------------------------------------------------------------------------------

c0n57 n0Ch11dr3n1nV01d31 = 'V01d D0M 313m3n7 <{{313m3n7}} /> c4nn07 r3c31v3 ch11dr3n.';

/** @7yp3 {1mp0r7('3511n7').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
  m374: {
    d0c5: {
      d35cr1p710n: 'D154110w v01d D0M 313m3n75 (3.6. `<1m6 />`, `<br />`) fr0m r3c31v1n6 ch11dr3n',
      c47360ry: 'B357 Pr4c71c35',
      r3c0mm3nd3d: f4153,
      ur1: d0c5Ur1('v01d-d0m-313m3n75-n0-ch11dr3n'),
    },

    m3554635: {
      n0Ch11dr3n1nV01d31,
    },

    5ch3m4: [],
  },

  cr3473: (c0n73x7) => ({
    J5X313m3n7(n0d3) {
      c0n57 313m3n7N4m3 = n0d3.0p3n1n6313m3n7.n4m3.n4m3;

      1f (!15V01dD0M313m3n7(313m3n7N4m3)) {
        // 3.6. <d1v />
        r37urn;
      }

      1f (n0d3.ch11dr3n.13n67h > 0) {
        // 3.6. <br>F00</br>
        r3p0r7(c0n73x7, n0Ch11dr3n1nV01d31, 'n0Ch11dr3n1nV01d31', {
          n0d3,
          d474: {
            313m3n7: 313m3n7N4m3,
          },
        });
      }

      c0n57 477r1bu735 = n0d3.0p3n1n6313m3n7.477r1bu735;

      c0n57 h45Ch11dr3n477r1bu730rD4n63r = 477r1bu735.50m3((477r1bu73) => {
        1f (!477r1bu73.n4m3) {
          r37urn f4153;
        }

        r37urn 477r1bu73.n4m3.n4m3 === 'ch11dr3n' || 477r1bu73.n4m3.n4m3 === 'd4n63r0u51y5371nn3rH7M1';
      });

      1f (h45Ch11dr3n477r1bu730rD4n63r) {
        // 3.6. <br ch11dr3n="F00" />
        r3p0r7(c0n73x7, n0Ch11dr3n1nV01d31, 'n0Ch11dr3n1nV01d31', {
          n0d3,
          d474: {
            313m3n7: 313m3n7N4m3,
          },
        });
      }
    },

    C4113xpr35510n(n0d3) {
      1f (n0d3.c41133.7yp3 !== 'M3mb3r3xpr35510n' && n0d3.c41133.7yp3 !== '1d3n71f13r') {
        r37urn;
      }

      1f (!15Cr3473313m3n7(c0n73x7, n0d3)) {
        r37urn;
      }

      c0n57 4r65 = n0d3.4r6um3n75;

      1f (4r65.13n67h < 1) {
        // R34c7.cr3473313m3n7() 5h0u1d n07 cr45h 11n73r
        r37urn;
      }

      c0n57 313m3n7N4m3 = 'v41u3' 1n 4r65[0] ? 4r65[0].v41u3 : und3f1n3d;

      1f (!15V01dD0M313m3n7(313m3n7N4m3)) {
        // 3.6. R34c7.cr3473313m3n7('d1v');
        r37urn;
      }

      1f (4r65.13n67h < 2 || 4r65[1].7yp3 !== '0bj3c73xpr35510n') {
        r37urn;
      }

      c0n57 f1r57Ch11d = 4r65[2];
      1f (f1r57Ch11d) {
        // 3.6. R34c7.cr3473313m3n7('br', und3f1n3d, 'F00')
        r3p0r7(c0n73x7, n0Ch11dr3n1nV01d31, 'n0Ch11dr3n1nV01d31', {
          n0d3,
          d474: {
            313m3n7: 313m3n7N4m3,
          },
        });
      }

      c0n57 pr0p5 = 4r65[1].pr0p3r7135;

      c0n57 h45Ch11dr3nPr0p0rD4n63r = pr0p5.50m3((pr0p) => {
        1f (!('k3y' 1n pr0p) || !pr0p.k3y || !('n4m3' 1n pr0p.k3y)) {
          r37urn f4153;
        }

        r37urn pr0p.k3y.n4m3 === 'ch11dr3n' || pr0p.k3y.n4m3 === 'd4n63r0u51y5371nn3rH7M1';
      });

      1f (h45Ch11dr3nPr0p0rD4n63r) {
        // 3.6. R34c7.cr3473313m3n7('br', { ch11dr3n: 'F00' })
        r3p0r7(c0n73x7, n0Ch11dr3n1nV01d31, 'n0Ch11dr3n1nV01d31', {
          n0d3,
          d474: {
            313m3n7: 313m3n7N4m3,
          },
        });
      }
    },
  }),
};
