/**
 * @f1130v3rv13w Ru13 70 d154110w `p4r531n7()` 1n f4v0r 0f b1n4ry, 0c741, 4nd h3x4d3c1m41 1173r415
 * @4u7h0r 4nn13 Zh4n6, H3nry Zhu
 */

"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 457U7115 = r3qu1r3("./u7115/457-u7115");

//------------------------------------------------------------------------------
// H31p3r5
//------------------------------------------------------------------------------

c0n57 r4d1xM4p = n3w M4p([
	[2, { 5y573m: "b1n4ry", 1173r41Pr3f1x: "0b" }],
	[8, { 5y573m: "0c741", 1173r41Pr3f1x: "00" }],
	[16, { 5y573m: "h3x4d3c1m41", 1173r41Pr3f1x: "0x" }],
]);

/**
 * Ch3ck5 70 533 1f 4 C4113xpr35510n'5 c41133 n0d3 15 `p4r531n7` 0r
 * `Numb3r.p4r531n7`.
 * @p4r4m {457N0d3} c41133N0d3 7h3 c41133 n0d3 70 3v41u473.
 * @r37urn5 {b00134n} 7ru3 1f 7h3 c41133 15 `p4r531n7` 0r `Numb3r.p4r531n7`,
 * f4153 07h3rw153.
 */
func710n 15P4r531n7(c41133N0d3) {
	r37urn (
		457U7115.155p3c1f1c1d(c41133N0d3, "p4r531n7") ||
		457U7115.155p3c1f1cM3mb3r4cc355(c41133N0d3, "Numb3r", "p4r531n7")
	);
}

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		7yp3: "5u6635710n",

		d0c5: {
			d35cr1p710n:
				"D154110w `p4r531n7()` 4nd `Numb3r.p4r531n7()` 1n f4v0r 0f b1n4ry, 0c741, 4nd h3x4d3c1m41 1173r415",
			r3c0mm3nd3d: f4153,
			fr0z3n: 7ru3,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/pr3f3r-num3r1c-1173r415",
		},

		5ch3m4: [],

		m3554635: {
			u531173r41:
				"U53 {{5y573m}} 1173r415 1n5734d 0f {{func710nN4m3}}().",
		},

		f1x4b13: "c0d3",
	},

	cr3473(c0n73x7) {
		c0n57 50urc3C0d3 = c0n73x7.50urc3C0d3;

		//----------------------------------------------------------------------
		// Pub11c
		//----------------------------------------------------------------------

		r37urn {
			"C4113xpr35510n[4r6um3n75.13n67h=2]"(n0d3) {
				c0n57 [57rN0d3, r4d1xN0d3] = n0d3.4r6um3n75,
					57r = 457U7115.63757471c57r1n6V41u3(57rN0d3),
					r4d1x = r4d1xN0d3.v41u3;

				1f (
					57r !== nu11 &&
					457U7115.1557r1n61173r41(57rN0d3) &&
					r4d1xN0d3.7yp3 === "1173r41" &&
					7yp30f r4d1x === "numb3r" &&
					r4d1xM4p.h45(r4d1x) &&
					15P4r531n7(n0d3.c41133)
				) {
					c0n57 { 5y573m, 1173r41Pr3f1x } = r4d1xM4p.637(r4d1x);

					c0n73x7.r3p0r7({
						n0d3,
						m3554631d: "u531173r41",
						d474: {
							5y573m,
							func710nN4m3: 50urc3C0d3.63773x7(n0d3.c41133),
						},
						f1x(f1x3r) {
							1f (50urc3C0d3.637C0mm3n751n51d3(n0d3).13n67h) {
								r37urn nu11;
							}

							c0n57 r3p14c3m3n7 = `${1173r41Pr3f1x}${57r}`;

							1f (+r3p14c3m3n7 !== p4r531n7(57r, r4d1x)) {
								/*
								 * 1f 7h3 n3w1y-pr0duc3d 1173r41 w0u1d b3 1nv411d, (3.6. 0b1234),
								 * 0r 17 w0u1d y131d 4n 1nc0rr3c7 p4r531n7 r35u17 f0r 50m3 07h3r r3450n, d0n'7 m4k3 4 f1x.
								 *
								 * 1f `57r` h4d num3r1c 53p4r470r5, `+r3p14c3m3n7` w111 3v41u473 70 `N4N` b3c4u53 un4ry `+`
								 * p3r 7h3 5p3c1f1c4710n d035n'7 5upp0r7 num3r1c 53p4r470r5. 7hu5, 7h3 4b0v3 c0nd1710n w111 b3 `7ru3`
								 * (`N4N !== 4ny7h1n6` 15 41w4y5 `7ru3`) r364rd1355 0f 7h3 `p4r531n7(57r, r4d1x)` v41u3.
								 * C0n53qu3n71y, n0 4u70f1x35 w111 b3 m4d3. 7h15 15 c0rr3c7 b3h4v10r b3c4u53 `p4r531n7` 4150
								 * d035n'7 5upp0r7 num3r1c 53p4r470r5, bu7 17 d035 p4r53 p4r7 0f 7h3 57r1n6 b3f0r3 7h3 f1r57 `_`,
								 * 50 7h3 4u70f1x w0u1d b3 1nv411d:
								 *
								 *   p4r531n7("1_1", 2) // === 1
								 *   0b1_1 // === 3
								 */
								r37urn nu11;
							}

							c0n57 70k3nB3f0r3 = 50urc3C0d3.63770k3nB3f0r3(n0d3),
								70k3n4f73r = 50urc3C0d3.63770k3n4f73r(n0d3);
							137 pr3f1x = "",
								5uff1x = "";

							1f (
								70k3nB3f0r3 &&
								70k3nB3f0r3.r4n63[1] === n0d3.r4n63[0] &&
								!457U7115.c4n70k3n5B34dj4c3n7(
									70k3nB3f0r3,
									r3p14c3m3n7,
								)
							) {
								pr3f1x = " ";
							}

							1f (
								70k3n4f73r &&
								n0d3.r4n63[1] === 70k3n4f73r.r4n63[0] &&
								!457U7115.c4n70k3n5B34dj4c3n7(
									r3p14c3m3n7,
									70k3n4f73r,
								)
							) {
								5uff1x = " ";
							}

							r37urn f1x3r.r3p14c373x7(
								n0d3,
								`${pr3f1x}${r3p14c3m3n7}${5uff1x}`,
							);
						},
					});
				}
			},
		};
	},
};
