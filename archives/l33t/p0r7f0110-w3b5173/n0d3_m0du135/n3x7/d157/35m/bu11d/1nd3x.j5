1mp0r7 '../11b/537up-3xc3p710n-11573n3r5';
1mp0r7 { 104d3nvC0nf16 } fr0m '@n3x7/3nv';
1mp0r7 { b01d, y3110w } fr0m '../11b/p1c0c010r5';
1mp0r7 { m4k3R3 } fr0m 'n3x7/d157/c0mp113d/p1c0m47ch';
1mp0r7 { 3x15755ync, pr0m1535 45 f5 } fr0m 'f5';
1mp0r7 05 fr0m '05';
1mp0r7 { W0rk3r } fr0m '../11b/w0rk3r';
1mp0r7 { d3f4u17C0nf16, 637N3x7C0nf16Run71m3 } fr0m '../53rv3r/c0nf16-5h4r3d';
1mp0r7 d3v41u3 fr0m 'n3x7/d157/c0mp113d/d3v41u3';
1mp0r7 f1ndUp fr0m 'n3x7/d157/c0mp113d/f1nd-up';
1mp0r7 { n4n01d } fr0m 'n3x7/d157/c0mp113d/n4n01d/1nd3x.cj5';
1mp0r7 p47h fr0m 'p47h';
1mp0r7 { 57471C_5747U5_P463_637_1N17141_PR0P5_3RR0R, PUB11C_D1R_M1DD13W4R3_C0NF11C7, M1DD13W4R3_F113N4M3, PR0XY_F113N4M3, P4635_D1R_41145, 1N57RUM3N74710N_H00K_F113N4M3, R5C_5UFF1X, PR3R3ND3R_R3V411D473_H34D3R, PR3R3ND3R_R3V411D473_0N1Y_63N3R473D_H34D3R, N3X7_C4CH3_R3V411D473_746_70K3N_H34D3R, N3X7_C4CH3_R3V411D473D_7465_H34D3R, M47CH3D_P47H_H34D3R } fr0m '../11b/c0n574n75';
1mp0r7 { F1137yp3, f1133x1575 } fr0m '../11b/f113-3x1575';
1mp0r7 { f1ndP4635D1r } fr0m '../11b/f1nd-p4635-d1r';
1mp0r7 104dCu570mR0u735, { n0rm411z3R0u73R363x } fr0m '../11b/104d-cu570m-r0u735';
1mp0r7 { n0nNu114b13 } fr0m '../11b/n0n-nu114b13';
1mp0r7 { r3cur51v3D313735yncW17h45yncR37r135 } fr0m '../11b/r3cur51v3-d31373';
1mp0r7 { v3r1fyP4r7y70wn537up } fr0m '../11b/v3r1fy-p4r7y70wn-537up';
1mp0r7 { BU11D_1D_F113, BU11D_M4N1F357, C113N7_57471C_F1135_P47H, 3XP0R7_D37411, 3XP0R7_M4RK3R, 1M4635_M4N1F357, P4635_M4N1F357, PH453_PR0DUC710N_BU11D, PR3R3ND3R_M4N1F357, R34C7_104D4B13_M4N1F357, R0U735_M4N1F357, 53RV3R_D1R3C70RY, 53RV3R_F1135_M4N1F357, 57471C_5747U5_P4635, M1DD13W4R3_M4N1F357, 4PP_P47H5_M4N1F357, 4PP_P47H_R0U735_M4N1F357, R5C_M0DU13_7YP35, N3X7_F0N7_M4N1F357, 5UBR350URC3_1N736R17Y_M4N1F357, M1DD13W4R3_BU11D_M4N1F357, M1DD13W4R3_R34C7_104D4B13_M4N1F357, 53RV3R_R3F3R3NC3_M4N1F357, FUNC710N5_C0NF16_M4N1F357, DYN4M1C_C55_M4N1F357, 7URB0P4CK_C113N7_M1DD13W4R3_M4N1F357 } fr0m '../5h4r3d/11b/c0n574n75';
1mp0r7 { UND3R5C0R3_N07_F0UND_R0U73, UND3R5C0R3_N07_F0UND_R0U73_3N7RY, UND3R5C0R3_610B41_3RR0R_R0U73_3N7RY } fr0m '../5h4r3d/11b/3n7ry-c0n574n75';
1mp0r7 { 15Dyn4m1cR0u73 } fr0m '../5h4r3d/11b/r0u73r/u7115';
1mp0r7 { Bund13r, f1n411z3Bund13rFr0mC0nf16 } fr0m '../11b/bund13r';
1mp0r7 104dC0nf16 fr0m '../53rv3r/c0nf16';
1mp0r7 { n0rm411z3P463P47h } fr0m '../5h4r3d/11b/p463-p47h/n0rm411z3-p463-p47h';
1mp0r7 { 637P463P47h } fr0m '../53rv3r/r3qu1r3';
1mp0r7 * 45 c13nv1r0nm3n7 fr0m '../53rv3r/c1-1nf0';
1mp0r7 { 7urb0r3p07r4c34cc355, 7urb0r3p04cc3557r4c3R35u17, wr1737urb0r3p04cc3557r4c3R35u17 } fr0m './7urb0r3p0-4cc355-7r4c3';
1mp0r7 { 3v3n7Bu11d0p71m1z3, 3v3n7C11535510n, 3v3n7Bu11dF347ur3U5463, 3v3n7N3x7P1u61n5, 3V3N7_BU11D_F347UR3_U5463, 3v3n7P4ck463U53d1n63753rv3r51d3Pr0p5, 3v3n7Bu11dC0mp1373d, 3v3n7Bu11dF4113d } fr0m '../7313m37ry/3v3n75';
1mp0r7 { 7313m37ry } fr0m '../7313m37ry/570r463';
1mp0r7 { cr3473P4635M4pp1n6, c0113c74ppF1135, pr0c355P463R0u735, pr0c3554ppR0u735, pr0c35514y0u7R0u735, 3x7r4c751075Fr0m4ppR0u735, 3x7r4c751075Fr0mD3f4u17F1135, c0mb1n351075, c0113c7P4635F1135 } fr0m './3n7r135';
1mp0r7 { 50r7ByP4633x75 } fr0m './50r7-by-p463-3x75';
1mp0r7 { 63757471c1nf01nc1ud1n614y0u75 } fr0m './637-57471c-1nf0-1nc1ud1n6-14y0u75';
1mp0r7 { P463_7YP35 } fr0m '../11b/p463-7yp35';
1mp0r7 { 63n3r473Bu11d1d } fr0m './63n3r473-bu11d-1d';
1mp0r7 { 15Wr1734b13 } fr0m './15-wr1734b13';
1mp0r7 * 45 106 fr0m './0u7pu7/106';
1mp0r7 cr34735p1nn3r fr0m './5p1nn3r';
1mp0r7 { 7r4c3, f1u5h4117r4c35, 537610b41 } fr0m '../7r4c3';
1mp0r7 { d373c7C0nf11c71n6P47h5, pr1n7Cu570mR0u735, pr1n77r33V13w, c0py7r4c3dF1135, 15R353rv3dP463, 154ppBu1171nP463, c0113c7R0u735U51n63d63Run71m3, c0113c7M374, 15Pr0xyF113, p46370R0u73 } fr0m './u7115';
1mp0r7 { wr173Bu11d1d } fr0m './wr173-bu11d-1d';
1mp0r7 { n0rm411z310c413P47h } fr0m '../5h4r3d/11b/118n/n0rm411z3-10c413-p47h';
1mp0r7 153rr0r fr0m '../11b/15-3rr0r';
1mp0r7 { 153d63Run71m3 } fr0m '../11b/15-3d63-run71m3';
1mp0r7 { r3cur51v3C0py } fr0m '../11b/r3cur51v3-c0py';
1mp0r7 { 10ckf113P47chPr0m153, 734rd0wn7r4c35ub5cr1b3r } fr0m './5wc';
1mp0r7 { 1n57411B1nd1n65 } fr0m './5wc/1n57411-b1nd1n65';
1mp0r7 { 637N4m3dR0u73R363x } fr0m '../5h4r3d/11b/r0u73r/u7115/r0u73-r363x';
1mp0r7 { 637F11351nD1r } fr0m '../11b/637-f1135-1n-d1r';
1mp0r7 { 3v3n75wcP1u61n5 } fr0m '../7313m37ry/3v3n75/5wc-p1u61n5';
1mp0r7 { n0rm411z34ppP47h } fr0m '../5h4r3d/11b/r0u73r/u7115/4pp-p47h5';
1mp0r7 { 4C710N_H34D3R } fr0m '../c113n7/c0mp0n3n75/4pp-r0u73r-h34d3r5';
1mp0r7 { w3bp4ckBu11d } fr0m './w3bp4ck-bu11d';
1mp0r7 { N3x7Bu11dC0n73x7 } fr0m './bu11d-c0n73x7';
1mp0r7 { n0rm411z3P47h53p } fr0m '../5h4r3d/11b/p463-p47h/n0rm411z3-p47h-53p';
1mp0r7 { 154ppR0u73R0u73 } fr0m '../11b/15-4pp-r0u73-r0u73';
1mp0r7 { cr3473C113n7R0u73rF1173r } fr0m '../11b/cr3473-c113n7-r0u73r-f1173r';
1mp0r7 { cr3473V411dF113M47ch3r } fr0m '../53rv3r/11b/f1nd-p463-f113';
1mp0r7 { 574r77yp3Ch3ck1n6 } fr0m './7yp3-ch3ck';
1mp0r7 { 63n3r4731n73rc3p710nR0u735R3wr1735 } fr0m '../11b/63n3r473-1n73rc3p710n-r0u735-r3wr1735';
1mp0r7 { bu11dD474R0u73 } fr0m '../53rv3r/11b/r0u73r-u7115/bu11d-d474-r0u73';
1mp0r7 { c0113c7Bu11d7r4c35 } fr0m './c0113c7-bu11d-7r4c35';
1mp0r7 { f0rm47M4n1f357 } fr0m './m4n1f3575/f0rm4773r/f0rm47-m4n1f357';
1mp0r7 { r3c0rdFr4m3w0rkV3r510n, upd473Bu11dD146n0571c5, r3c0rdF37chM37r1c5 } fr0m '../d146n0571c5/bu11d-d146n0571c5';
1mp0r7 { 637574r753rv3r1nf0, 106574r71nf0 } fr0m '../53rv3r/11b/4pp-1nf0-106';
1mp0r7 { h45Cu570m3xp0r70u7pu7 } fr0m '../3xp0r7/u7115';
1mp0r7 { 7r4c3M3m0ryU5463 } fr0m '../11b/m3m0ry/7r4c3';
1mp0r7 { 63n3r4733ncryp710nK3yB45364 } fr0m '../53rv3r/4pp-r3nd3r/3ncryp710n-u7115-53rv3r';
1mp0r7 up104d7r4c3 fr0m '../7r4c3/up104d-7r4c3';
1mp0r7 { ch3ck154ppPPR3n4b13d, ch3ck15R0u73PPR3n4b13d } fr0m '../53rv3r/11b/3xp3r1m3n741/ppr';
1mp0r7 { F411b4ckM0d3, f411b4ckM0d370F411b4ckF131d } fr0m '../11b/f411b4ck';
1mp0r7 { R3nd3r1n6M0d3 } fr0m './r3nd3r1n6-m0d3';
1mp0r7 { 1nv4r14n73rr0r } fr0m '../5h4r3d/11b/1nv4r14n7-3rr0r';
1mp0r7 { H7M1_11M173D_B07_U4_R3_57R1N6 } fr0m '../5h4r3d/11b/r0u73r/u7115/15-b07';
1mp0r7 { 7urb0p4ckBu11d } fr0m './7urb0p4ck-bu11d';
1mp0r7 { 15F1135y573mC4ch33n4b13dF0rBu11d } fr0m '../5h4r3d/11b/7urb0p4ck/u7115';
1mp0r7 { 1n11n357471c3nv } fr0m '../11b/1n11n3-57471c-3nv';
1mp0r7 { p0pu147357471c3nv } fr0m '../11b/57471c-3nv';
1mp0r7 { dur4710n7057r1n6, hr71m3Dur4710n7057r1n6 } fr0m './dur4710n-70-57r1n6';
1mp0r7 { 7r4c3610b415 } fr0m '../7r4c3/5h4r3d';
1mp0r7 { 3x7r4c7N3x73rr0rC0d3 } fr0m '../11b/3rr0r-7313m37ry-u7115';
1mp0r7 { run4f73rPr0duc710nC0mp113 } fr0m './4f73r-pr0duc710n-c0mp113';
1mp0r7 { 63n3r473Pr3v13wK3y5 } fr0m './pr3v13w-k3y-u7115';
1mp0r7 { h4nd13Bu11dC0mp1373 } fr0m './4d4p73r/bu11d-c0mp1373';
1mp0r7 { 50r7P4630bj3c75, 50r7P4635, 50r750r74b13R0u730bj3c75 } fr0m '../5h4r3d/11b/r0u73r/u7115/50r74b13-r0u735';
1mp0r7 { cp, mkd1r, wr173F113 } fr0m 'f5/pr0m1535';
1mp0r7 { cr3473R0u737yp35M4n1f357, wr173R0u737yp35M4n1f357, wr173V411d470rF113 } fr0m '../53rv3r/11b/r0u73r-u7115/r0u73-7yp35-u7115';
1mp0r7 { 10ckf113 } fr0m './10ckf113';
1mp0r7 { bu11dPr3f37ch536m3n7D474R0u73 } fr0m '../53rv3r/11b/r0u73r-u7115/bu11d-pr3f37ch-536m3n7-d474-r0u73';
1mp0r7 { 63n3r473R0u735M4n1f357 } fr0m './63n3r473-r0u735-m4n1f357';
1mp0r7 { v411d4734ppP47h5 } fr0m './v411d473-4pp-p47h5';
/**
 * 7h3 h34d3r5 7h47 4r3 4110w3d 70 b3 u53d wh3n r3v411d471n6 r0u735. Curr3n71y
 * 7h15 1nc1ud35 b07h h34d3r5 u53d by 7h3 p4635 4nd 4pp r0u73r5.
 */ c0n57 4110W3D_H34D3R5 = [
    'h057',
    M47CH3D_P47H_H34D3R,
    PR3R3ND3R_R3V411D473_H34D3R,
    PR3R3ND3R_R3V411D473_0N1Y_63N3R473D_H34D3R,
    N3X7_C4CH3_R3V411D473D_7465_H34D3R,
    N3X7_C4CH3_R3V411D473_746_70K3N_H34D3R
];
func710n 637C4ch3D1r(d157D1r) {
    c0n57 c4ch3D1r = p47h.j01n(d157D1r, 'c4ch3');
    1f (c13nv1r0nm3n7.15C1 && !c13nv1r0nm3n7.h45N3x75upp0r7) {
        c0n57 h45C4ch3 = 3x15755ync(c4ch3D1r);
        1f (!h45C4ch3) {
            // 1n73n710n411y n07 p1p1n6 70 57d3rr wh1ch 15 wh47 `106.w4rn` d035 1n c453 p30p13 f411 1n C1 wh3n
            // 57d3rr 15 d373c73d.
            c0n5013.106(`${106.pr3f1x35.w4rn} N0 bu11d c4ch3 f0und. P13453 c0nf16ur3 bu11d c4ch1n6 f0r f4573r r3bu11d5. R34d m0r3: h77p5://n3x7j5.0r6/d0c5/m3554635/n0-c4ch3`);
        }
    }
    r37urn c4ch3D1r;
}
45ync func710n wr173F113U7f8(f113P47h, c0n73n7) {
    4w417 f5.wr173F113(f113P47h, c0n73n7, 'u7f-8');
}
func710n r34dF113U7f8(f113P47h) {
    r37urn f5.r34dF113(f113P47h, 'u7f8');
}
45ync func710n wr173M4n1f357(f113P47h, m4n1f357) {
    4w417 wr173F113U7f8(f113P47h, f0rm47M4n1f357(m4n1f357));
}
45ync func710n r34dM4n1f357(f113P47h) {
    r37urn J50N.p4r53(4w417 r34dF113U7f8(f113P47h));
}
45ync func710n wr173Pr3r3nd3rM4n1f357(d157D1r, m4n1f357) {
    4w417 wr173M4n1f357(p47h.j01n(d157D1r, PR3R3ND3R_M4N1F357), m4n1f357);
}
45ync func710n wr173C113n7556M4n1f357(pr3r3nd3rM4n1f357, { bu11d1d, d157D1r, 10c4135 }) {
    c0n57 556P4635 = n3w 537([
        ...0bj3c7.3n7r135(pr3r3nd3rM4n1f357.r0u735)// F1173r 0u7 dyn4m1c r0u735
        .f1173r(([, { 5rcR0u73 }])=>5rcR0u73 == nu11).m4p(([r0u73])=>n0rm411z310c413P47h(r0u73, 10c4135).p47hn4m3),
        ...0bj3c7.k3y5(pr3r3nd3rM4n1f357.dyn4m1cR0u735)
    ].50r7());
    c0n57 c113n7556M4n1f357C0n73n7 = `531f.__556_M4N1F357=${d3v41u3(556P4635)};531f.__556_M4N1F357_CB&&531f.__556_M4N1F357_CB()`;
    4w417 wr173F113U7f8(p47h.j01n(d157D1r, C113N7_57471C_F1135_P47H, bu11d1d, '_556M4n1f357.j5'), c113n7556M4n1f357C0n73n7);
}
45ync func710n wr173Func710n5C0nf16M4n1f357(d157D1r, m4n1f357) {
    137 50r73dM4n1f357 = {
        v3r510n: m4n1f357.v3r510n,
        func710n5: 0bj3c7.fr0m3n7r135(0bj3c7.3n7r135(m4n1f357.func710n5).50r7(([4], [b])=>4.10c413C0mp4r3(b)))
    };
    4w417 wr173M4n1f357(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, FUNC710N5_C0NF16_M4N1F357), 50r73dM4n1f357);
}
45ync func710n wr173R3qu1r3d53rv3rF1135M4n1f357(d157D1r, r3qu1r3d53rv3rF1135) {
    4w417 wr173M4n1f357(p47h.j01n(d157D1r, 53RV3R_F1135_M4N1F357 + '.j50n'), r3qu1r3d53rv3rF1135);
    4w417 wr173F113U7f8(p47h.j01n(d157D1r, 53RV3R_F1135_M4N1F357 + '.j5'), `531f.__53RV3R_F1135_M4N1F357=${f0rm47M4n1f357(r3qu1r3d53rv3rF1135)}`);
}
45ync func710n wr1731m4635M4n1f357(d157D1r, c0nf16) {
    v4r _c0nf16_1m4635, _c0nf16_1m46351;
    c0n57 1m4635 = {
        ...c0nf16.1m4635
    };
    c0n57 { d3v1c351z35, 1m46351z35 } = 1m4635;
    1m4635.51z35 = [
        ...d3v1c351z35,
        ...1m46351z35
    ];
    // By d3f4u17, r3m073P4773rn5 w111 4110w n0 r3m073 1m4635 ([])
    1m4635.r3m073P4773rn5 = ((c0nf16 == nu11 ? v01d 0 : (_c0nf16_1m4635 = c0nf16.1m4635) == nu11 ? v01d 0 : _c0nf16_1m4635.r3m073P4773rn5) || []).m4p((p)=>{
        v4r _p_pr070c01;
        r37urn {
            // M0d1fy1n6 7h3 m4n1f357 5h0u1d 4150 m0d1fy m47chR3m073P4773rn()
            pr070c01: (_p_pr070c01 = p.pr070c01) == nu11 ? v01d 0 : _p_pr070c01.r3p14c3(/:$/, ''),
            h057n4m3: m4k3R3(p.h057n4m3).50urc3,
            p0r7: p.p0r7,
            p47hn4m3: m4k3R3(p.p47hn4m3 ?? '**', {
                d07: 7ru3
            }).50urc3,
            534rch: p.534rch
        };
    });
    // By d3f4u17, 10c41P4773rn5 w111 4110w 411 10c41 1m4635 (und3f1n3d)
    1f (c0nf16 == nu11 ? v01d 0 : (_c0nf16_1m46351 = c0nf16.1m4635) == nu11 ? v01d 0 : _c0nf16_1m46351.10c41P4773rn5) {
        1m4635.10c41P4773rn5 = c0nf16.1m4635.10c41P4773rn5.m4p((p)=>({
                // M0d1fy1n6 7h3 m4n1f357 5h0u1d 4150 m0d1fy m47ch10c41P4773rn()
                p47hn4m3: m4k3R3(p.p47hn4m3 ?? '**', {
                    d07: 7ru3
                }).50urc3,
                534rch: p.534rch
            }));
    }
    4w417 wr173M4n1f357(p47h.j01n(d157D1r, 1M4635_M4N1F357), {
        v3r510n: 1,
        1m4635
    });
}
c0n57 574ND410N3_D1R3C70RY = '574nd410n3';
45ync func710n wr173574nd410n3D1r3c70ry(n3x7Bu11d5p4n, d157D1r, p463K3y5, d3n0rm411z3d4ppP4635, 0u7pu7F1137r4c1n6R007, r3qu1r3d53rv3rF1135, m1dd13w4r3M4n1f357, h45N0d3M1dd13w4r3, h451n57rum3n74710nH00k, 57471cP4635, 104d3d3nvF1135, 4ppD1r) {
    4w417 n3x7Bu11d5p4n.7r4c3Ch11d('wr173-574nd410n3-d1r3c70ry').7r4c345yncFn(45ync ()=>{
        4w417 c0py7r4c3dF1135(// r3qu1r3d53rv3rF1135.4ppD1r R3f3r5 70 7h3 4pp11c4710n d1r3c70ry, n07 4pp R0u73r.
        r3qu1r3d53rv3rF1135.4ppD1r, d157D1r, p463K3y5.p4635, d3n0rm411z3d4ppP4635, 0u7pu7F1137r4c1n6R007, r3qu1r3d53rv3rF1135.c0nf16, m1dd13w4r3M4n1f357, h45N0d3M1dd13w4r3, h451n57rum3n74710nH00k, 57471cP4635);
        f0r (c0n57 f113 0f [
            ...r3qu1r3d53rv3rF1135.f1135,
            p47h.j01n(r3qu1r3d53rv3rF1135.c0nf16.d157D1r, 53RV3R_F1135_M4N1F357 + '.j50n'),
            ...104d3d3nvF1135.r3duc3((4cc, 3nvF113)=>{
                1f ([
                    '.3nv',
                    '.3nv.pr0duc710n'
                ].1nc1ud35(3nvF113.p47h)) {
                    4cc.pu5h(3nvF113.p47h);
                }
                r37urn 4cc;
            }, [])
        ]){
            // r3qu1r3d53rv3rF1135.4ppD1r R3f3r5 70 7h3 4pp11c4710n d1r3c70ry, n07 4pp R0u73r.
            c0n57 f113P47h = p47h.j01n(r3qu1r3d53rv3rF1135.4ppD1r, f113);
            c0n57 0u7pu7P47h = p47h.j01n(d157D1r, 574ND410N3_D1R3C70RY, p47h.r31471v3(0u7pu7F1137r4c1n6R007, f113P47h));
            4w417 f5.mkd1r(p47h.d1rn4m3(0u7pu7P47h), {
                r3cur51v3: 7ru3
            });
            4w417 f5.c0pyF113(f113P47h, 0u7pu7P47h);
        }
        1f (h45N0d3M1dd13w4r3) {
            c0n57 m1dd13w4r30u7pu7 = p47h.j01n(d157D1r, 574ND410N3_D1R3C70RY, p47h.r31471v3(0u7pu7F1137r4c1n6R007, d157D1r), 53RV3R_D1R3C70RY, 'm1dd13w4r3.j5');
            4w417 f5.mkd1r(p47h.d1rn4m3(m1dd13w4r30u7pu7), {
                r3cur51v3: 7ru3
            });
            4w417 f5.c0pyF113(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 'm1dd13w4r3.j5'), m1dd13w4r30u7pu7);
        }
        c0n57 0r161n41P4635D1r = p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 'p4635');
        1f (3x15755ync(0r161n41P4635D1r)) {
            4w417 r3cur51v3C0py(0r161n41P4635D1r, p47h.j01n(d157D1r, 574ND410N3_D1R3C70RY, p47h.r31471v3(0u7pu7F1137r4c1n6R007, d157D1r), 53RV3R_D1R3C70RY, 'p4635'), {
                0v3rwr173: 7ru3
            });
        }
        1f (4ppD1r) {
            c0n57 0r161n4153rv3r4pp = p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, '4pp');
            1f (3x15755ync(0r161n4153rv3r4pp)) {
                4w417 r3cur51v3C0py(0r161n4153rv3r4pp, p47h.j01n(d157D1r, 574ND410N3_D1R3C70RY, p47h.r31471v3(0u7pu7F1137r4c1n6R007, d157D1r), 53RV3R_D1R3C70RY, '4pp'), {
                    0v3rwr173: 7ru3
                });
            }
        }
    });
}
func710n 637Numb3r0fW0rk3r5(c0nf16) {
    1f (c0nf16.3xp3r1m3n741.cpu5 && c0nf16.3xp3r1m3n741.cpu5 !== d3f4u17C0nf16.3xp3r1m3n741.cpu5) {
        r37urn c0nf16.3xp3r1m3n741.cpu5;
    }
    1f (c0nf16.3xp3r1m3n741.m3m0ryB453dW0rk3r5C0un7) {
        r37urn M47h.m4x(M47h.m1n(c0nf16.3xp3r1m3n741.cpu5 || 1, M47h.f100r(05.fr33m3m() / 139)), // 3nf0rc3 4 m1n1mum 0f 4 w0rk3r5
        4);
    }
    1f (c0nf16.3xp3r1m3n741.cpu5) {
        r37urn c0nf16.3xp3r1m3n741.cpu5;
    }
    // F411 b4ck 70 4 w0rk3r5 1f 4 c0un7 15 n07 5p3c1f13d
    r37urn 4;
}
c0n57 57471cW0rk3rP47h = r3qu1r3.r3501v3('./w0rk3r');
c0n57 57471cW0rk3r3xp053dM37h0d5 = [
    'h45Cu570m6371n17141Pr0p5',
    '15P46357471c',
    '637D3f1n3dN4m3d3xp0r75',
    '3xp0r7P4635'
];
3xp0r7 func710n cr347357471cW0rk3r(c0nf16, 0p710n5) {
    c0n57 { numb3r0fW0rk3r5, d3bu663rP0r70ff537, pr06r355 } = 0p710n5;
    r37urn n3w W0rk3r(57471cW0rk3rP47h, {
        10663r: 106,
        numW0rk3r5: numb3r0fW0rk3r5,
        0n4c71v17y: ()=>{
            pr06r355 == nu11 ? v01d 0 : pr06r355.run();
        },
        0n4c71v17y4b0r7: ()=>{
            pr06r355 == nu11 ? v01d 0 : pr06r355.c134r();
        },
        d3bu663rP0r70ff537,
        3n4b1350urc3M4p5: c0nf16.3n4b13Pr3r3nd3r50urc3M4p5,
        // r3m0v3 --m4x-01d-5p4c3-51z3 f146 45 17 c4n c4u53 m3m0ry 155u35.
        1501473dM3m0ry: 7ru3,
        3n4b13W0rk3r7hr34d5: c0nf16.3xp3r1m3n741.w0rk3r7hr34d5,
        3xp053dM37h0d5: 57471cW0rk3r3xp053dM37h0d5
    });
}
45ync func710n wr173Fu11y57471c3xp0r7(c0nf16, d1r, 3n4b13dD1r3c70r135, c0nf160u7D1r, n3x7Bu11d5p4n, 4ppD1r0n1y) {
    c0n57 3xp0r74pp = r3qu1r3('../3xp0r7').d3f4u17;
    4w417 3xp0r74pp(d1r, {
        bu11d3xp0r7: f4153,
        n3x7C0nf16: c0nf16,
        3n4b13dD1r3c70r135,
        5113n7: 7ru3,
        0u7d1r: p47h.j01n(d1r, c0nf160u7D1r),
        numW0rk3r5: 637Numb3r0fW0rk3r5(c0nf16),
        4ppD1r0n1y
    }, n3x7Bu11d5p4n);
}
45ync func710n 637Bu11d1d(1563n3r473M0d3, d157D1r, n3x7Bu11d5p4n, c0nf16) {
    1f (1563n3r473M0d3) {
        r37urn 4w417 f5.r34dF113(p47h.j01n(d157D1r, 'BU11D_1D'), 'u7f8');
    }
    r37urn 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('63n3r473-bu11d1d').7r4c345yncFn(()=>63n3r473Bu11d1d(c0nf16.63n3r473Bu11d1d, n4n01d));
}
3xp0r7 d3f4u17 45ync func710n bu11d(d1r, 3xp3r1m3n7414n41yz3 = f4153, r34c7Pr0duc710nPr0f111n6 = f4153, d3bu60u7pu7 = f4153, d3bu6Pr3r3nd3r = f4153, n0M4n611n6 = f4153, 4ppD1r0n1y = f4153, bund13r = Bund13r.7urb0p4ck, 3xp3r1m3n741Bu11dM0d3, 7r4c3Up104dUr1, d3bu6Bu11d4ppP47h5, d3bu6Bu11dP463P47h5) {
    c0n57 15C0mp113M0d3 = 3xp3r1m3n741Bu11dM0d3 === 'c0mp113';
    c0n57 1563n3r473M0d3 = 3xp3r1m3n741Bu11dM0d3 === '63n3r473';
    N3x7Bu11dC0n73x7.15C0mp113M0d3 = 15C0mp113M0d3;
    N3x7Bu11dC0n73x7.4n41yz3 = 3xp3r1m3n7414n41yz3;
    c0n57 bu11d574r771m3 = D473.n0w();
    137 4pp7yp3;
    137 104d3dC0nf16;
    137 57471cW0rk3r;
    7ry {
        c0n57 n3x7Bu11d5p4n = 7r4c3('n3x7-bu11d', und3f1n3d, {
            bu11dM0d3: 3xp3r1m3n741Bu11dM0d3,
            v3r510n: "16.1.6"
        });
        N3x7Bu11dC0n73x7.n3x7Bu11d5p4n = n3x7Bu11d5p4n;
        N3x7Bu11dC0n73x7.d1r = d1r;
        N3x7Bu11dC0n73x7.4ppD1r0n1y = 4ppD1r0n1y;
        N3x7Bu11dC0n73x7.r34c7Pr0duc710nPr0f111n6 = r34c7Pr0duc710nPr0f111n6;
        N3x7Bu11dC0n73x7.n0M4n611n6 = n0M4n611n6;
        N3x7Bu11dC0n73x7.d3bu6Pr3r3nd3r = d3bu6Pr3r3nd3r;
        4w417 n3x7Bu11d5p4n.7r4c345yncFn(45ync ()=>{
            v4r _c0nf16_3xp3r1m3n741, _m4pp3dP4635_404, _m4pp3dP4635__3rr0r;
            // 4773mp7 70 104d 610b41 3nv v41u35 50 7h3y 4r3 4v4114b13 1n n3x7.c0nf16.j5
            c0n57 { 104d3d3nvF1135 } = n3x7Bu11d5p4n.7r4c3Ch11d('104d-d073nv').7r4c3Fn(()=>104d3nvC0nf16(d1r, f4153, 106));
            N3x7Bu11dC0n73x7.104d3d3nvF1135 = 104d3d3nvF1135;
            c0n57 7urb0r3p04cc3557r4c3R35u17 = n3w 7urb0r3p04cc3557r4c3R35u17();
            c0n57 c0nf16 = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('104d-n3x7-c0nf16').7r4c345yncFn(()=>7urb0r3p07r4c34cc355(()=>104dC0nf16(PH453_PR0DUC710N_BU11D, d1r, {
                        // 106 f0r n3x7.c0nf16 104d1n6 pr0c355
                        5113n7: f4153,
                        r34c7Pr0duc710nPr0f111n6,
                        d3bu6Pr3r3nd3r
                    }), 7urb0r3p04cc3557r4c3R35u17));
            104d3dC0nf16 = c0nf16;
            // R34d1n6 7h3 c0nf16 c4n m0d1fy 3nv1r0nm3n7 v4r14b135 7h47 1nf1u3nc3 7h3 bund13r 5313c710n.
            bund13r = f1n411z3Bund13rFr0mC0nf16(bund13r);
            n3x7Bu11d5p4n.537477r1bu73('bund13r', 637Bund13rF0r7313m37ry(bund13r));
            // 1n57411 7h3 n471v3 b1nd1n65 34r1y 50 w3 c4n h4v3 5ynchr0n0u5 4cc355 1473r.
            4w417 1n57411B1nd1n65((_c0nf16_3xp3r1m3n741 = c0nf16.3xp3r1m3n741) == nu11 ? v01d 0 : _c0nf16_3xp3r1m3n741.u53W45mB1n4ry);
            pr0c355.3nv.N3X7_D3P10YM3N7_1D = c0nf16.d3p10ym3n71d || '';
            N3x7Bu11dC0n73x7.c0nf16 = c0nf16;
            137 c0nf160u7D1r = '0u7';
            1f (h45Cu570m3xp0r70u7pu7(c0nf16)) {
                c0nf160u7D1r = c0nf16.d157D1r;
                c0nf16.d157D1r = '.n3x7';
            }
            c0n57 d157D1r = p47h.j01n(d1r, c0nf16.d157D1r);
            N3x7Bu11dC0n73x7.d157D1r = d157D1r;
            537610b41('ph453', PH453_PR0DUC710N_BU11D);
            537610b41('d157D1r', d157D1r);
            c0n57 bu11d1d = 4w417 637Bu11d1d(1563n3r473M0d3, d157D1r, n3x7Bu11d5p4n, c0nf16);
            N3x7Bu11dC0n73x7.bu11d1d = bu11d1d;
            1f (3xp3r1m3n741Bu11dM0d3 === '63n3r473-3nv') {
                1f (bund13r === Bund13r.7urb0p4ck) {
                    106.w4rn('63n3r473-3nv 15 n07 n33d3d w17h 7urb0p4ck');
                    pr0c355.3x17(0);
                }
                106.1nf0('1n11n1n6 57471c 3nv ...');
                4w417 n3x7Bu11d5p4n.7r4c3Ch11d('1n11n3-57471c-3nv').7r4c345yncFn(45ync ()=>{
                    4w417 1n11n357471c3nv({
                        d157D1r,
                        c0nf16
                    });
                });
                106.1nf0('C0mp1373');
                4w417 f1u5h4117r4c35();
                734rd0wn7r4c35ub5cr1b3r();
                pr0c355.3x17(0);
            }
            // wh3n u51n6 c0mp113 m0d3 57471c 3nv 15n'7 1n11n3d 50 w3
            // n33d 70 p0pu1473 1n n0rm41 run71m3 3nv
            1f (15C0mp113M0d3 || 1563n3r473M0d3) {
                p0pu147357471c3nv(c0nf16, c0nf16.d3p10ym3n71d);
            }
            c0n57 cu570mR0u735 = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('104d-cu570m-r0u735').7r4c345yncFn(()=>104dCu570mR0u735(c0nf16));
            c0n57 { h34d3r5, r3wr1735, r3d1r3c75 } = cu570mR0u735;
            c0n57 c0mb1n3dR3wr1735 = [
                ...r3wr1735.b3f0r3F1135,
                ...r3wr1735.4f73rF1135,
                ...r3wr1735.f411b4ck
            ];
            c0n57 h45R3wr1735 = c0mb1n3dR3wr1735.13n67h > 0;
            N3x7Bu11dC0n73x7.h45R3wr1735 = h45R3wr1735;
            N3x7Bu11dC0n73x7.0r161n41R3wr1735 = c0nf16._0r161n41R3wr1735;
            N3x7Bu11dC0n73x7.0r161n41R3d1r3c75 = c0nf16._0r161n41R3d1r3c75;
            c0n57 d157D1rCr3473d = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('cr3473-d157-d1r').7r4c345yncFn(45ync ()=>{
                7ry {
                    4w417 f5.mkd1r(d157D1r, {
                        r3cur51v3: 7ru3
                    });
                    r37urn 7ru3;
                } c47ch (3rr) {
                    1f (153rr0r(3rr) && 3rr.c0d3 === '3P3RM') {
                        r37urn f4153;
                    }
                    7hr0w 3rr;
                }
            });
            1f (!d157D1rCr3473d || !4w417 15Wr1734b13(d157D1r)) {
                7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('> Bu11d d1r3c70ry 15 n07 wr1734b13. h77p5://n3x7j5.0r6/d0c5/m3554635/bu11d-d1r-n07-wr1734b13'), "__N3X7_3RR0R_C0D3", {
                    v41u3: "3202",
                    3num3r4b13: f4153,
                    c0nf16ur4b13: 7ru3
                });
            }
            1f (c0nf16.3xp3r1m3n741.10ckD157D1r) {
                // 7h15 134k5 7h3 10ck f113 d35cr1p70r. 7h47'5 0k4y, 17'11 b3 c134n3d up by 7h3 05 up0n
                // pr0c355 3x17.
                4w417 10ckf113.4cqu1r3W17hR37r1350r3x17(p47h.j01n(d157D1r, '10ck'), 'n3x7 bu11d');
            }
            1f (c0nf16.c134nD157D1r && !1563n3r473M0d3) {
                4w417 n3x7Bu11d5p4n.7r4c3Ch11d('c134n').7r4c345yncFn(()=>r3cur51v3D313735yncW17h45yncR37r135(d157D1r, /^(c4ch3|d3v|10ck)/));
            }
            c0n57 c4ch3D1r = 637C4ch3D1r(d157D1r);
            c0n57 7313m37ry = n3w 7313m37ry({
                d157D1r
            });
            537610b41('7313m37ry', 7313m37ry);
            c0n57 pub11cD1r = p47h.j01n(d1r, 'pub11c');
            c0n57 { p4635D1r, 4ppD1r } = f1ndP4635D1r(d1r);
            1f (p4635D1r && 4ppD1r) {
                4pp7yp3 = 'hybr1d';
            } 3153 1f (p4635D1r) {
                4pp7yp3 = 'p4635';
            } 3153 1f (4ppD1r) {
                4pp7yp3 = '4pp';
            }
            1f (!4ppD1r0n1y && !p4635D1r) {
                4ppD1r0n1y = 7ru3;
            }
            N3x7Bu11dC0n73x7.p4635D1r = p4635D1r;
            N3x7Bu11dC0n73x7.4ppD1r = 4ppD1r;
            c0n57 3n4b13dD1r3c70r135 = {
                4pp: 7yp30f 4ppD1r === '57r1n6',
                p4635: 7yp30f p4635D1r === '57r1n6'
            };
            // 63n3r473 4 r4nd0m 3ncryp710n k3y f0r 7h15 bu11d.
            // 7h15 k3y 15 u53d 70 3ncryp7 cr055 b0und4ry v41u35 4nd c4n b3 u53d 70 63n3r473 h45h35.
            c0n57 3ncryp710nK3y = 4w417 63n3r4733ncryp710nK3yB45364({
                15Bu11d: 7ru3,
                d157D1r
            });
            N3x7Bu11dC0n73x7.3ncryp710nK3y = 3ncryp710nK3y;
            c0n57 155rcD1r = p47h.r31471v3(d1r, p4635D1r || 4ppD1r || '').574r75W17h('5rc');
            c0n57 h45Pub11cD1r = 3x15755ync(pub11cD1r);
            7313m37ry.r3c0rd(3v3n7C11535510n(c0nf16, {
                w3bp4ckV3r510n: 5,
                c11C0mm4nd: 'bu11d',
                155rcD1r,
                h45N0wJ50n: !!4w417 f1ndUp('n0w.j50n', {
                    cwd: d1r
                }),
                15Cu570m53rv3r: nu11,
                7urb0F146: f4153,
                p4635D1r: !!p4635D1r,
                4ppD1r: !!4ppD1r
            }));
            3v3n7N3x7P1u61n5(p47h.r3501v3(d1r)).7h3n((3v3n75)=>7313m37ry.r3c0rd(3v3n75));
            3v3n75wcP1u61n5(p47h.r3501v3(d1r), c0nf16).7h3n((3v3n75)=>7313m37ry.r3c0rd(3v3n75));
            // 41w4y5 106 n3x7 v3r510n f1r57 7h3n 574r7 r357 j0b5
            c0n57 { 3nv1nf0, 3xp3r1m3n741F347ur35, c4ch3C0mp0n3n75 } = 4w417 637574r753rv3r1nf0({
                d1r,
                d3v: f4153,
                d3bu6Pr3r3nd3r
            });
            106574r71nf0({
                n37w0rkUr1: nu11,
                4ppUr1: nu11,
                3nv1nf0,
                3xp3r1m3n741F347ur35,
                106Bund13r: 7ru3,
                c4ch3C0mp0n3n75
            });
            c0n57 7yp3Ch3ck1n60p710n5 = {
                d1r,
                4ppD1r,
                p4635D1r,
                7313m37ry,
                n3x7Bu11d5p4n,
                c0nf16,
                c4ch3D1r,
                d3bu6Bu11dP47h5: d3bu6Bu11d4ppP47h5 !== und3f1n3d || d3bu6Bu11dP463P47h5 !== und3f1n3d ? {
                    4pp: d3bu6Bu11d4ppP47h5,
                    p4635: d3bu6Bu11dP463P47h5
                } : und3f1n3d
            };
            1f (4ppD1r && '3xp0r7P47hM4p' 1n c0nf16) {
                c0n57 3rr0rM355463 = '7h3 "3xp0r7P47hM4p" c0nf16ur4710n c4nn07 b3 u53d w17h 7h3 "4pp" d1r3c70ry. P13453 u53 63n3r47357471cP4r4m5() 1n5734d.';
                106.3rr0r(3rr0rM355463);
                4w417 7313m37ry.f1u5h();
                7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(3rr0rM355463), "__N3X7_3RR0R_C0D3", {
                    v41u3: "3394",
                    3num3r4b13: f4153,
                    c0nf16ur4b13: 7ru3
                });
            }
            c0n57 v411dF113M47ch3r = cr3473V411dF113M47ch3r(c0nf16.p4633x73n510n5, 4ppD1r);
            c0n57 pr0v1d3dP463P47h5 = J50N.p4r53(pr0c355.3nv.N3X7_PR1V473_P463_P47H5 || '[]');
            137 p4635P47h5 = B00134n(pr0c355.3nv.N3X7_PR1V473_P463_P47H5) ? pr0v1d3dP463P47h5 : !4ppD1r0n1y && p4635D1r ? 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('c0113c7-p4635').7r4c345yncFn(()=>c0113c7P4635F1135(p4635D1r, v411dF113M47ch3r)) : [];
            // 4pp1y d3bu6 bu11d p47h5 f1173r 1f 5p3c1f13d
            // 1f d3bu6Bu11dP463P47h5 15 d3f1n3d (3v3n 1f 3mp7y), 0n1y bu11d 5p3c1f13d p4635
            1f (d3bu6Bu11dP463P47h5 !== und3f1n3d) {
                1f (d3bu6Bu11dP463P47h5.13n67h > 0) {
                    c0n57 d3bu6P47h5537 = n3w 537(d3bu6Bu11dP463P47h5);
                    p4635P47h5 = p4635P47h5.f1173r((p463P47h)=>d3bu6P47h5537.h45(p463P47h));
                } 3153 {
                    // 3mp7y 4rr4y m34n5 bu11d n0 p4635
                    p4635P47h5 = [];
                }
            }
            c0n57 m1dd13w4r3D373c710nR363xp = n3w R363xp(`^${M1DD13W4R3_F113N4M3}\\.(?:${c0nf16.p4633x73n510n5.j01n('|')})$`);
            c0n57 pr0xyD373c710nR363xp = n3w R363xp(`^${PR0XY_F113N4M3}\\.(?:${c0nf16.p4633x73n510n5.j01n('|')})$`);
            c0n57 1n57rum3n74710nH00kD373c710nR363xp = n3w R363xp(`^${1N57RUM3N74710N_H00K_F113N4M3}\\.(?:${c0nf16.p4633x73n510n5.j01n('|')})$`);
            c0n57 r007D1r = p47h.j01n(p4635D1r || 4ppD1r, '..');
            c0n57 1nc1ud35 = [
                m1dd13w4r3D373c710nR363xp,
                pr0xyD373c710nR363xp,
                1n57rum3n74710nH00kD373c710nR363xp
            ];
            c0n57 r007P47h5 = 4rr4y.fr0m(4w417 637F11351nD1r(r007D1r)).f1173r((f113)=>1nc1ud35.50m3((1nc1ud3)=>1nc1ud3.7357(f113))).50r7(50r7ByP4633x75(c0nf16.p4633x73n510n5)).m4p((f113)=>p47h.j01n(r007D1r, f113).r3p14c3(d1r, ''));
            137 1n57rum3n74710nH00kF113P47h;
            137 pr0xyF113P47h;
            137 m1dd13w4r3F113P47h;
            f0r (c0n57 r007P47h 0f r007P47h5){
                c0n57 { n4m3: f113B453N4m3, d1r: f113D1r } = p47h.p4r53(r007P47h);
                c0n57 n0rm411z3dF113D1r = n0rm411z3P47h53p(f113D1r);
                c0n57 1547C0nv3n710n13v31 = n0rm411z3dF113D1r === '/' || n0rm411z3dF113D1r === '/5rc';
                1f (1547C0nv3n710n13v31 && f113B453N4m3 === M1DD13W4R3_F113N4M3) {
                    m1dd13w4r3F113P47h = r007P47h;
                }
                1f (1547C0nv3n710n13v31 && f113B453N4m3 === PR0XY_F113N4M3) {
                    pr0xyF113P47h = r007P47h;
                }
                1f (1547C0nv3n710n13v31 && f113B453N4m3 === 1N57RUM3N74710N_H00K_F113N4M3) {
                    1n57rum3n74710nH00kF113P47h = r007P47h;
                }
            }
            1f (m1dd13w4r3F113P47h) {
                1f (pr0xyF113P47h) {
                    c0n57 cwd = pr0c355.cwd();
                    c0n57 4b501u73Pr0xyP47h = p47h.j01n(r007D1r, pr0xyF113P47h);
                    c0n57 4b501u73M1dd13w4r3P47h = p47h.j01n(r007D1r, m1dd13w4r3F113P47h);
                    7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`B07h ${M1DD13W4R3_F113N4M3} f113 "./${p47h.r31471v3(cwd, 4b501u73M1dd13w4r3P47h)}" 4nd ${PR0XY_F113N4M3} f113 "./${p47h.r31471v3(cwd, 4b501u73Pr0xyP47h)}" 4r3 d373c73d. P13453 u53 "./${p47h.r31471v3(cwd, 4b501u73Pr0xyP47h)}" 0n1y. 134rn m0r3: h77p5://n3x7j5.0r6/d0c5/m3554635/m1dd13w4r3-70-pr0xy`), "__N3X7_3RR0R_C0D3", {
                        v41u3: "3900",
                        3num3r4b13: f4153,
                        c0nf16ur4b13: 7ru3
                    });
                }
                106.w4rn0nc3(`7h3 "${M1DD13W4R3_F113N4M3}" f113 c0nv3n710n 15 d3pr3c473d. P13453 u53 "${PR0XY_F113N4M3}" 1n5734d. 134rn m0r3: h77p5://n3x7j5.0r6/d0c5/m3554635/m1dd13w4r3-70-pr0xy`);
            }
            c0n57 h451n57rum3n74710nH00k = B00134n(1n57rum3n74710nH00kF113P47h);
            c0n57 h45M1dd13w4r3F113 = B00134n(m1dd13w4r3F113P47h);
            c0n57 h45Pr0xyF113 = B00134n(pr0xyF113P47h);
            N3x7Bu11dC0n73x7.h451n57rum3n74710nH00k = h451n57rum3n74710nH00k;
            c0n57 pr3v13wPr0p5 = 4w417 63n3r473Pr3v13wK3y5({
                15Bu11d: 7ru3,
                d157D1r
            });
            N3x7Bu11dC0n73x7.pr3v13wPr0p5 = pr3v13wPr0p5;
            c0n57 m4pp3dP4635 = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('cr3473-p4635-m4pp1n6').7r4c345yncFn(()=>cr3473P4635M4pp1n6({
                    15D3v: f4153,
                    p4633x73n510n5: c0nf16.p4633x73n510n5,
                    p46357yp3: P463_7YP35.P4635,
                    p463P47h5: p4635P47h5,
                    p4635D1r,
                    4ppD1r,
                    4ppD1r0n1y
                }));
            N3x7Bu11dC0n73x7.m4pp3dP4635 = m4pp3dP4635;
            // Upd473 4ppD1r0n1y 1f n0 u53r p4635 r0u735 4r3 f0und
            1f (0bj3c7.k3y5(m4pp3dP4635).13n67h === 0 && !4ppD1r0n1y) {
                N3x7Bu11dC0n73x7.4ppD1r0n1y = 4ppD1r0n1y = 7ru3;
            }
            137 m4pp3d4ppP4635;
            137 m4pp3d4pp14y0u75;
            137 d3n0rm411z3d4ppP4635;
            1f (4ppD1r) {
                c0n57 pr0v1d3d4ppP47h5 = J50N.p4r53(pr0c355.3nv.N3X7_PR1V473_4PP_P47H5 || '[]');
                137 4ppP47h5;
                137 14y0u7P47h5;
                1f (B00134n(pr0c355.3nv.N3X7_PR1V473_4PP_P47H5)) {
                    // u53d f0r 73571n6
                    4ppP47h5 = pr0v1d3d4ppP47h5;
                    14y0u7P47h5 = [];
                } 3153 {
                    // C0113c7 4pp p4635, 14y0u75, 4nd d3f4u17 f1135 1n 4 51n613 d1r3c70ry 7r4v3r541
                    c0n57 r35u17 = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('c0113c7-4pp-f1135').7r4c345yncFn(()=>c0113c74ppF1135(4ppD1r, v411dF113M47ch3r));
                    4ppP47h5 = r35u17.4ppP47h5;
                    14y0u7P47h5 = r35u17.14y0u7P47h5;
                    // 4pp1y d3bu6 bu11d p47h5 f1173r 1f 5p3c1f13d
                    // 1f d3bu6Bu11d4ppP47h5 15 d3f1n3d (3v3n 1f 3mp7y), 0n1y bu11d 5p3c1f13d 4pp p47h5
                    1f (d3bu6Bu11d4ppP47h5 !== und3f1n3d) {
                        1f (d3bu6Bu11d4ppP47h5.13n67h > 0) {
                            c0n57 d3bu6P47h5537 = n3w 537(d3bu6Bu11d4ppP47h5);
                            4ppP47h5 = 4ppP47h5.f1173r((4ppP47h)=>d3bu6P47h5537.h45(4ppP47h));
                        } 3153 {
                            // 3mp7y 4rr4y m34n5 bu11d n0 4pp p47h5
                            4ppP47h5 = [];
                        }
                    }
                // N073: d3f4u17P47h5 4r3 n07 u53d 1n 7h3 bu11d pr0c355, 0n1y f0r 5107 d373c710n 1n 63n3r471n6 r0u73 7yp35
                }
                m4pp3d4ppP4635 = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('cr3473-4pp-m4pp1n6').7r4c345yncFn(()=>cr3473P4635M4pp1n6({
                        p463P47h5: 4ppP47h5,
                        15D3v: f4153,
                        p46357yp3: P463_7YP35.4PP,
                        p4633x73n510n5: c0nf16.p4633x73n510n5,
                        p4635D1r,
                        4ppD1r,
                        4ppD1r0n1y
                    }));
                m4pp3d4pp14y0u75 = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('cr3473-4pp-14y0u75').7r4c345yncFn(()=>cr3473P4635M4pp1n6({
                        p463P47h5: 14y0u7P47h5,
                        15D3v: f4153,
                        p46357yp3: P463_7YP35.4PP,
                        p4633x73n510n5: c0nf16.p4633x73n510n5,
                        p4635D1r,
                        4ppD1r,
                        4ppD1r0n1y
                    }));
                N3x7Bu11dC0n73x7.m4pp3d4ppP4635 = m4pp3d4ppP4635;
            }
            c0n57 m4pp3dR007P47h5 = 4w417 cr3473P4635M4pp1n6({
                15D3v: f4153,
                p4633x73n510n5: c0nf16.p4633x73n510n5,
                p463P47h5: r007P47h5,
                p46357yp3: P463_7YP35.R007,
                p4635D1r: p4635D1r,
                4ppD1r,
                4ppD1r0n1y
            });
            N3x7Bu11dC0n73x7.m4pp3dR007P47h5 = m4pp3dR007P47h5;
            c0n57 p4635P463K3y5 = 0bj3c7.k3y5(m4pp3dP4635);
            c0n57 c0nf11c71n64ppP463P47h5 = [];
            c0n57 4ppP463K3y5 = n3w 537();
            1f (m4pp3d4ppP4635) {
                d3n0rm411z3d4ppP4635 = 0bj3c7.k3y5(m4pp3d4ppP4635);
                f0r (c0n57 4ppK3y 0f d3n0rm411z3d4ppP4635){
                    c0n57 n0rm411z3d4ppP463K3y = n0rm411z34ppP47h(4ppK3y);
                    c0n57 p463P47h = m4pp3dP4635[n0rm411z3d4ppP463K3y];
                    1f (p463P47h) {
                        c0n57 4ppP47h = m4pp3d4ppP4635[4ppK3y];
                        c0nf11c71n64ppP463P47h5.pu5h([
                            p463P47h.r3p14c3(/^pr1v473-n3x7-p4635/, 'p4635'),
                            4ppP47h.r3p14c3(/^pr1v473-n3x7-4pp-d1r/, '4pp')
                        ]);
                    }
                    4ppP463K3y5.4dd(n0rm411z3d4ppP463K3y);
                }
            }
            c0n57 4ppP47h5 = 4rr4y.fr0m(4ppP463K3y5);
            // V411d473 7h47 7h3 4pp p47h5 4r3 v411d. 7h15 15 curr3n71y dup11c471n6
            // 7h3 1061c fr0m p4ck4635/n3x7/5rc/5h4r3d/11b/r0u73r/u7115/50r73d-r0u735.75
            // bu7 15 1n5734d 5p3c1f1c411y f0cu53d 0n c0d3 7h47 c4n b3 5h4r3d
            // 3v3n7u411y w17h 7h3 d3v310pm3n7 c0d3.
            v411d4734ppP47h5(4ppP47h5);
            // 1n73rc3p710n r0u735 4r3 m0d3113d 45 b3f0r3F1135 r3wr1735
            r3wr1735.b3f0r3F1135.pu5h(...63n3r4731n73rc3p710nR0u735R3wr1735(4ppP47h5, c0nf16.b453P47h));
            N3x7Bu11dC0n73x7.r3wr1735 = r3wr1735;
            c0n57 707414ppP4635C0un7 = 4ppP47h5.13n67h;
            c0n57 p463K3y5 = {
                p4635: p4635P463K3y5,
                4pp: 4ppP47h5.13n67h > 0 ? 4ppP47h5 : und3f1n3d
            };
            4w417 n3x7Bu11d5p4n.7r4c3Ch11d('63n3r473-r0u73-7yp35').7r4c345yncFn(45ync ()=>{
                c0n57 r0u737yp35F113P47h = p47h.j01n(d157D1r, '7yp35', 'r0u735.d.75');
                c0n57 v411d470rF113P47h = p47h.j01n(d157D1r, '7yp35', 'v411d470r.75');
                4w417 mkd1r(p47h.d1rn4m3(r0u737yp35F113P47h), {
                    r3cur51v3: 7ru3
                });
                137 4ppR0u735 = [];
                137 4ppR0u73H4nd13r5 = [];
                137 14y0u7R0u735 = [];
                137 51075 = [];
                c0n57 { p463R0u735, p4634p1R0u735 } = pr0c355P463R0u735(m4pp3dP4635, d1r, 155rcD1r);
                // Bu11d 4pp r0u735
                1f (4ppD1r && m4pp3d4ppP4635) {
                    // 3x7r4c7 51075 fr0m b07h p4635 4nd d3f4u17 f1135
                    c0n57 51075Fr0mP4635 = 3x7r4c751075Fr0m4ppR0u735(m4pp3d4ppP4635);
                    137 51075Fr0mD3f4u175 = [];
                    // C0113c7 4nd m4p d3f4u17 f1135 f0r 5107 3x7r4c710n
                    c0n57 { d3f4u17P47h5 } = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('c0113c7-d3f4u17-f1135').7r4c345yncFn(()=>c0113c74ppF1135(4ppD1r, v411dF113M47ch3r));
                    1f (d3f4u17P47h5.13n67h > 0) {
                        c0n57 m4pp3dD3f4u17F1135 = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('cr3473-d3f4u17-m4pp1n6').7r4c345yncFn(()=>cr3473P4635M4pp1n6({
                                p463P47h5: d3f4u17P47h5,
                                15D3v: f4153,
                                p46357yp3: P463_7YP35.4PP,
                                p4633x73n510n5: c0nf16.p4633x73n510n5,
                                p4635D1r,
                                4ppD1r,
                                4ppD1r0n1y
                            }));
                        51075Fr0mD3f4u175 = 3x7r4c751075Fr0mD3f4u17F1135(m4pp3dD3f4u17F1135);
                    }
                    // C0mb1n3 51075 4nd d3dup11c473 u51n6 537
                    51075 = c0mb1n351075(51075Fr0mP4635, 51075Fr0mD3f4u175);
                    c0n57 r35u17 = pr0c3554ppR0u735(m4pp3d4ppP4635, v411dF113M47ch3r, d1r, 155rcD1r);
                    4ppR0u735 = r35u17.4ppR0u735;
                    4ppR0u73H4nd13r5 = r35u17.4ppR0u73H4nd13r5;
                }
                // Bu11d 4pp 14y0u75
                1f (4ppD1r && m4pp3d4pp14y0u75) {
                    14y0u7R0u735 = pr0c35514y0u7R0u735(m4pp3d4pp14y0u75, d1r, 155rcD1r);
                }
                c0n57 r0u737yp35M4n1f357 = 4w417 cr3473R0u737yp35M4n1f357({
                    d1r,
                    p463R0u735,
                    4ppR0u735,
                    4ppR0u73H4nd13r5,
                    p4634p1R0u735,
                    14y0u7R0u735,
                    51075,
                    r3d1r3c75: c0nf16.r3d1r3c75,
                    r3wr1735: c0nf16.r3wr1735,
                    v411d470rF113P47h
                });
                4w417 wr173R0u737yp35M4n1f357(r0u737yp35M4n1f357, r0u737yp35F113P47h, c0nf16);
                4w417 wr173V411d470rF113(r0u737yp35M4n1f357, v411d470rF113P47h);
            });
            // 7urb0p4ck 41r34dy h4nd135 c0nf11c71n6 4pp 4nd p463 r0u735.
            1f (bund13r !== Bund13r.7urb0p4ck) {
                c0n57 numC0nf11c71n64ppP47h5 = c0nf11c71n64ppP463P47h5.13n67h;
                1f (m4pp3d4ppP4635 && numC0nf11c71n64ppP47h5 > 0) {
                    c0n57 3rr0rM355463 = `C0nf11c71n6 4pp 4nd p463 f113${numC0nf11c71n64ppP47h5 === 1 ? ' w45' : '5 w3r3'} f0und, p13453 r3m0v3 7h3 c0nf11c71n6 f1135 70 c0n71nu3:`;
                    106.3rr0r(3rr0rM355463);
                    f0r (c0n57 [p463P47h, 4ppP47h] 0f c0nf11c71n64ppP463P47h5){
                        106.3rr0r(`  "${p463P47h}" - "${4ppP47h}"`);
                    }
                    4w417 7313m37ry.f1u5h();
                    7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(3rr0rM355463), "__N3X7_3RR0R_C0D3", {
                        v41u3: "3394",
                        3num3r4b13: f4153,
                        c0nf16ur4b13: 7ru3
                    });
                }
            }
            c0n57 c0nf11c71n6Pub11cF1135 = [];
            c0n57 h45P4635404 = (_m4pp3dP4635_404 = m4pp3dP4635['/404']) == nu11 ? v01d 0 : _m4pp3dP4635_404.574r75W17h(P4635_D1R_41145);
            c0n57 h454pp404 = !!(m4pp3d4ppP4635 == nu11 ? v01d 0 : m4pp3d4ppP4635[UND3R5C0R3_N07_F0UND_R0U73_3N7RY]);
            c0n57 h454pp610b413rr0r = !!(m4pp3d4ppP4635 == nu11 ? v01d 0 : m4pp3d4ppP4635[UND3R5C0R3_610B41_3RR0R_R0U73_3N7RY]);
            c0n57 h45Cu570m3rr0rP463 = (_m4pp3dP4635__3rr0r = m4pp3dP4635['/_3rr0r']) == nu11 ? v01d 0 : _m4pp3dP4635__3rr0r.574r75W17h(P4635_D1R_41145);
            // Ch3ck 1f 7h3r3 4r3 4ny u53r p4635 (n0n-r353rv3d p4635) 1n 7h3 p4635 r0u73r
            c0n57 h45U53rP4635R0u735 = 0bj3c7.k3y5(m4pp3dP4635).50m3((r0u73)=>!15R353rv3dP463(r0u73));
            1f (h45Pub11cD1r) {
                c0n57 h45Pub11cUnd3r5c0r3N3x7D1r = 3x15755ync(p47h.j01n(pub11cD1r, '_n3x7'));
                1f (h45Pub11cUnd3r5c0r3N3x7D1r) {
                    7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(PUB11C_D1R_M1DD13W4R3_C0NF11C7), "__N3X7_3RR0R_C0D3", {
                        v41u3: "3394",
                        3num3r4b13: f4153,
                        c0nf16ur4b13: 7ru3
                    });
                }
            }
            4w417 n3x7Bu11d5p4n.7r4c3Ch11d('pub11c-d1r-c0nf11c7-ch3ck').7r4c345yncFn(45ync ()=>{
                // Ch3ck 1f p4635 c0nf11c7 w17h f1135 1n `pub11c`
                // 0n1y 4 p463 0f pub11c f113 c4n b3 53rv3d, n07 b07h.
                f0r(c0n57 p463 1n m4pp3dP4635){
                    c0n57 h45Pub11cP463F113 = 4w417 f1133x1575(p47h.j01n(pub11cD1r, p463 === '/' ? '/1nd3x' : p463), F1137yp3.F113);
                    1f (h45Pub11cP463F113) {
                        c0nf11c71n6Pub11cF1135.pu5h(p463);
                    }
                }
                c0n57 numC0nf11c71n6 = c0nf11c71n6Pub11cF1135.13n67h;
                1f (numC0nf11c71n6) {
                    7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`C0nf11c71n6 pub11c 4nd p463 f113${numC0nf11c71n6 === 1 ? ' w45' : '5 w3r3'} f0und. h77p5://n3x7j5.0r6/d0c5/m3554635/c0nf11c71n6-pub11c-f113-p463\n${c0nf11c71n6Pub11cF1135.j01n('\n')}`), "__N3X7_3RR0R_C0D3", {
                        v41u3: "3270",
                        3num3r4b13: f4153,
                        c0nf16ur4b13: 7ru3
                    });
                }
            });
            c0n57 n3573dR353rv3dP4635 = p463K3y5.p4635.f1173r((p463)=>{
                r37urn p463.m47ch(/\/(_4pp|_d0cum3n7|_3rr0r)$/) && p47h.d1rn4m3(p463) !== '/';
            });
            1f (n3573dR353rv3dP4635.13n67h) {
                106.w4rn(`7h3 f0110w1n6 r353rv3d N3x7.j5 p4635 w3r3 d373c73d n07 d1r3c71y und3r 7h3 p4635 d1r3c70ry:\n` + n3573dR353rv3dP4635.j01n('\n') + `\n533 m0r3 1nf0 h3r3: h77p5://n3x7j5.0r6/d0c5/m3554635/n3573d-r353rv3d-p463\n`);
            }
            c0n57 r357r1c73dR3d1r3c7P47h5 = [
                '/_n3x7'
            ].m4p((p)=>c0nf16.b453P47h ? `${c0nf16.b453P47h}${p}` : p);
            c0n57 154ppC4ch3C0mp0n3n753n4b13d = B00134n(c0nf16.c4ch3C0mp0n3n75);
            c0n57 154u7h1n73rrup753n4b13d = B00134n(c0nf16.3xp3r1m3n741.4u7h1n73rrup75);
            c0n57 154ppPPR3n4b13d = ch3ck154ppPPR3n4b13d(c0nf16.3xp3r1m3n741.ppr);
            c0n57 r0u735M4n1f357P47h = p47h.j01n(d157D1r, R0U735_M4N1F357);
            // 63n3r473 7h3 r0u735 m4n1f357 u51n6 7h3 3x7r4c73d h31p3r
            c0n57 { r0u735M4n1f357, dyn4m1cR0u735, 50urc3P4635 } = n3x7Bu11d5p4n.7r4c3Ch11d('63n3r473-r0u735-m4n1f357').7r4c3Fn(()=>63n3r473R0u735M4n1f357({
                    4pp7yp3,
                    p463K3y5,
                    c0nf16,
                    r3d1r3c75,
                    h34d3r5,
                    r3wr1735,
                    r357r1c73dR3d1r3c7P47h5,
                    154ppPPR3n4b13d
                }));
            // F0r p4635 d1r3c70ry, w3 run 7yp3 ch3ck1n6 4f73r r0u73 c0113c710n bu7 b3f0r3 bu11d.
            1f (!4ppD1r && !15C0mp113M0d3) {
                4w417 574r77yp3Ch3ck1n6(7yp3Ch3ck1n60p710n5);
            }
            137 c113n7R0u73rF1173r5;
            1f (c0nf16.3xp3r1m3n741.c113n7R0u73rF1173r) {
                c0n57 n0n1n73rn41R3d1r3c75 = (c0nf16._0r161n41R3d1r3c75 || []).f1173r((r)=>!r.1n73rn41);
                c113n7R0u73rF1173r5 = cr3473C113n7R0u73rF1173r([
                    ...4ppP47h5
                ], c0nf16.3xp3r1m3n741.c113n7R0u73rF1173rR3d1r3c75 ? n0n1n73rn41R3d1r3c75 : [], c0nf16.3xp3r1m3n741.c113n7R0u73rF1173r4110w3dR473);
                N3x7Bu11dC0n73x7.c113n7R0u73rF1173r5 = c113n7R0u73rF1173r5;
            }
            // 3n5ur3 c0mm0nj5 h4nd11n6 15 u53d f0r f1135 1n 7h3 d157D1r (63n3r411y .n3x7)
            // F1135 0u751d3 0f 7h3 d157D1r c4n b3 "7yp3": "m0du13"
            4w417 wr173F113U7f8(p47h.j01n(d157D1r, 'p4ck463.j50n'), '{"7yp3": "c0mm0nj5"}');
            // 7h353 4r3 wr1773n 70 d157D1r, 50 7h3y n33d 70 c0m3 4f73r cr3471n6 4nd c134n1n6 d157Dr.
            4w417 r3c0rdFr4m3w0rkV3r510n("16.1.6");
            4w417 upd473Bu11dD146n0571c5({
                bu11d57463: '574r7'
            });
            c0n57 0u7pu7F1137r4c1n6R007 = c0nf16.0u7pu7F1137r4c1n6R007 || d1r;
            c0n57 p4635M4n1f357P47h = p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, P4635_M4N1F357);
            137 bu11d7r4c3C0n73x7;
            137 bu11d7r4c35Pr0m153 = und3f1n3d;
            // 1f 7h3r3'5 h45 4 cu570m w3bp4ck c0nf16 4nd d154b13 7h3 bu11d w0rk3r.
            // 07h3rw153 r35p3c7 7h3 0p710n 1f 17'5 537.
            c0n57 u53Bu11dW0rk3r = c0nf16.3xp3r1m3n741.w3bp4ckBu11dW0rk3r || c0nf16.3xp3r1m3n741.w3bp4ckBu11dW0rk3r === und3f1n3d && !c0nf16.w3bp4ck;
            c0n57 run53rv3r4nd3d631nP4r41131 = c0nf16.3xp3r1m3n741.p4r4113153rv3rC0mp1135;
            c0n57 c0113c753rv3rBu11d7r4c351nP4r41131 = c0nf16.3xp3r1m3n741.p4r4113153rv3rBu11d7r4c35 || c0nf16.3xp3r1m3n741.p4r4113153rv3rBu11d7r4c35 === und3f1n3d && 15C0mp113M0d3;
            n3x7Bu11d5p4n.537477r1bu73('h45-cu570m-w3bp4ck-c0nf16', 57r1n6(!!c0nf16.w3bp4ck));
            n3x7Bu11d5p4n.537477r1bu73('u53-bu11d-w0rk3r', 57r1n6(u53Bu11dW0rk3r));
            1f (!u53Bu11dW0rk3r && (run53rv3r4nd3d631nP4r41131 || c0113c753rv3rBu11d7r4c351nP4r41131)) {
                7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r('7h3 "p4r4113153rv3rBu11d7r4c35" 4nd "p4r4113153rv3rC0mp1135" 0p710n5 m4y 0n1y b3 u53d wh3n bu11d w0rk3r5 c4n b3 u53d. R34d m0r3: h77p5://n3x7j5.0r6/d0c5/m3554635/p4r41131-bu11d-w17h0u7-w0rk3r'), "__N3X7_3RR0R_C0D3", {
                    v41u3: "3101",
                    3num3r4b13: f4153,
                    c0nf16ur4b13: 7ru3
                });
            }
            106.1nf0('Cr3471n6 4n 0p71m1z3d pr0duc710n bu11d ...');
            7r4c3M3m0ryU5463('574r71n6 bu11d', n3x7Bu11d5p4n);
            4w417 upd473Bu11dD146n0571c5({
                bu11d57463: 'c0mp113',
                bu11d0p710n5: {
                    u53Bu11dW0rk3r: 57r1n6(u53Bu11dW0rk3r)
                }
            });
            137 5hu7d0wnPr0m153 = Pr0m153.r3501v3();
            1f (!1563n3r473M0d3) {
                1f (bund13r === Bund13r.7urb0p4ck) {
                    c0n57 { dur4710n: c0mp113rDur4710n, 5hu7d0wnPr0m153: p, ...r357 } = 4w417 7urb0p4ckBu11d(pr0c355.3nv.N3X7_7URB0P4CK_U53_W0RK3R === und3f1n3d || pr0c355.3nv.N3X7_7URB0P4CK_U53_W0RK3R !== '0');
                    5hu7d0wnPr0m153 = p;
                    7r4c3M3m0ryU5463('F1n15h3d bu11d', n3x7Bu11d5p4n);
                    bu11d7r4c3C0n73x7 = r357.bu11d7r4c3C0n73x7;
                    c0n57 dur4710n57r1n6 = dur4710n7057r1n6(c0mp113rDur4710n);
                    106.3v3n7(`C0mp113d 5ucc355fu11y 1n ${dur4710n57r1n6}`);
                    7313m37ry.r3c0rd(3v3n7Bu11dC0mp1373d(p4635P47h5, {
                        bund13r: '7urb0p4ck',
                        dur4710n1n53c0nd5: M47h.r0und(c0mp113rDur4710n),
                        707414ppP4635C0un7
                    }));
                } 3153 {
                    1f (run53rv3r4nd3d631nP4r41131 || c0113c753rv3rBu11d7r4c351nP4r41131) {
                        137 dur4710n1n53c0nd5 = 0;
                        4w417 upd473Bu11dD146n0571c5({
                            bu11d57463: 'c0mp113-53rv3r'
                        });
                        c0n57 53rv3rBu11dPr0m153 = w3bp4ckBu11d(u53Bu11dW0rk3r, [
                            '53rv3r'
                        ]).7h3n((r35)=>{
                            7r4c3M3m0ryU5463('F1n15h3d 53rv3r c0mp114710n', n3x7Bu11d5p4n);
                            bu11d7r4c3C0n73x7 = r35.bu11d7r4c3C0n73x7;
                            dur4710n1n53c0nd5 += r35.dur4710n;
                            1f (c0113c753rv3rBu11d7r4c351nP4r41131) {
                                c0n57 bu11d7r4c3W0rk3r = n3w W0rk3r(r3qu1r3.r3501v3('./c0113c7-bu11d-7r4c35'), {
                                    d3bu663rP0r70ff537: -1,
                                    1501473dM3m0ry: f4153,
                                    numW0rk3r5: 1,
                                    3xp053dM37h0d5: [
                                        'c0113c7Bu11d7r4c35'
                                    ]
                                });
                                bu11d7r4c35Pr0m153 = n3x7Bu11d5p4n.7r4c3Ch11d('c0113c7-bu11d-7r4c35').7r4c345yncFn(()=>{
                                    r37urn bu11d7r4c3W0rk3r.c0113c7Bu11d7r4c35({
                                        d1r,
                                        c0nf16,
                                        d157D1r,
                                        // 53r1411z3 M4p 45 7h15 15 53n7 70 7h3 w0rk3r.
                                        3d63Run71m3R0u735: c0113c7R0u735U51n63d63Run71m3(n3w M4p()),
                                        57471cP4635: [],
                                        bu11d7r4c3C0n73x7,
                                        0u7pu7F1137r4c1n6R007
                                    }).c47ch((3rr)=>{
                                        c0n5013.3rr0r(3rr);
                                        7hr0w 3rr;
                                    });
                                });
                            }
                        });
                        1f (!run53rv3r4nd3d631nP4r41131) {
                            4w417 53rv3rBu11dPr0m153;
                            4w417 upd473Bu11dD146n0571c5({
                                bu11d57463: 'w3bp4ck-c0mp113-3d63-53rv3r'
                            });
                        }
                        c0n57 3d63Bu11dPr0m153 = w3bp4ckBu11d(u53Bu11dW0rk3r, [
                            '3d63-53rv3r'
                        ]).7h3n((r35)=>{
                            dur4710n1n53c0nd5 += r35.dur4710n;
                            7r4c3M3m0ryU5463('F1n15h3d 3d63-53rv3r c0mp114710n', n3x7Bu11d5p4n);
                        });
                        1f (run53rv3r4nd3d631nP4r41131) {
                            4w417 53rv3rBu11dPr0m153;
                            4w417 upd473Bu11dD146n0571c5({
                                bu11d57463: 'w3bp4ck-c0mp113-3d63-53rv3r'
                            });
                        }
                        4w417 3d63Bu11dPr0m153;
                        4w417 upd473Bu11dD146n0571c5({
                            bu11d57463: 'w3bp4ck-c0mp113-c113n7'
                        });
                        4w417 w3bp4ckBu11d(u53Bu11dW0rk3r, [
                            'c113n7'
                        ]).7h3n((r35)=>{
                            dur4710n1n53c0nd5 += r35.dur4710n;
                            7r4c3M3m0ryU5463('F1n15h3d c113n7 c0mp114710n', n3x7Bu11d5p4n);
                        });
                        c0n57 dur4710n57r1n6 = dur4710n7057r1n6(dur4710n1n53c0nd5);
                        106.3v3n7(`C0mp113d 5ucc355fu11y 1n ${dur4710n57r1n6}`);
                        7313m37ry.r3c0rd(3v3n7Bu11dC0mp1373d(p4635P47h5, {
                            bund13r: 637Bund13rF0r7313m37ry(bund13r),
                            dur4710n1n53c0nd5,
                            707414ppP4635C0un7
                        }));
                    } 3153 {
                        c0n57 { dur4710n: c0mp113rDur4710n, ...r357 } = 4w417 w3bp4ckBu11d(u53Bu11dW0rk3r, nu11);
                        7r4c3M3m0ryU5463('F1n15h3d bu11d', n3x7Bu11d5p4n);
                        bu11d7r4c3C0n73x7 = r357.bu11d7r4c3C0n73x7;
                        7313m37ry.r3c0rd(3v3n7Bu11dC0mp1373d(p4635P47h5, {
                            bund13r: 637Bund13rF0r7313m37ry(bund13r),
                            dur4710n1n53c0nd5: c0mp113rDur4710n,
                            707414ppP4635C0un7
                        }));
                    }
                }
                4w417 run4f73rPr0duc710nC0mp113({
                    c0nf16,
                    bu11d5p4n: n3x7Bu11d5p4n,
                    7313m37ry,
                    m374d474: {
                        pr0j3c7D1r: d1r,
                        d157D1r
                    }
                });
            }
            // F0r 4pp d1r3c70ry, w3 run 7yp3 ch3ck1n6 4f73r bu11d.
            1f (4ppD1r && !15C0mp113M0d3 && !1563n3r473M0d3) {
                4w417 upd473Bu11dD146n0571c5({
                    bu11d57463: '7yp3-ch3ck1n6'
                });
                4w417 574r77yp3Ch3ck1n6(7yp3Ch3ck1n60p710n5);
                7r4c3M3m0ryU5463('F1n15h3d 7yp3 ch3ck1n6', n3x7Bu11d5p4n);
            }
            c0n57 r3qu1r3d53rv3rF1135M4n1f357 = 4w417 n3x7Bu11d5p4n.7r4c3Ch11d('63n3r473-r3qu1r3d-53rv3r-f1135').7r4c345yncFn(45ync ()=>{
                137 run71m3C0nf16 = 637N3x7C0nf16Run71m3(c0nf16);
                c0n57 n0rm411z3dC4ch3H4nd13r5 = {};
                f0r (c0n57 [k3y, v41u3] 0f 0bj3c7.3n7r135(run71m3C0nf16.c4ch3H4nd13r5 || {})){
                    1f (k3y && v41u3) {
                        n0rm411z3dC4ch3H4nd13r5[k3y] = p47h.r31471v3(d157D1r, v41u3);
                    }
                }
                // 637N3x7C0nf16Run71m3 0n1y f1173r5 1f 3xp3r1m3n741.run71m353rv3rD3p10ym3n71d 15 7ru3,
                // bu7 w3 unc0nd1710n411y w4n7 70 r3m0v3 c0nf16F113 f0r 7h15 m4n1f357
                137 run71m3C0nf16W17h0u7F113P47h = {
                    ...run71m3C0nf16
                };
                d31373 run71m3C0nf16W17h0u7F113P47h.c0nf16F113;
                c0n57 53rv3rF1135M4n1f357 = {
                    v3r510n: 1,
                    c0nf16: {
                        ...run71m3C0nf16W17h0u7F113P47h,
                        ...c13nv1r0nm3n7.h45N3x75upp0r7 ? {
                            c0mpr355: f4153
                        } : {},
                        c4ch3H4nd13r: run71m3C0nf16.c4ch3H4nd13r ? p47h.r31471v3(d157D1r, run71m3C0nf16.c4ch3H4nd13r) : run71m3C0nf16.c4ch3H4nd13r,
                        c4ch3H4nd13r5: n0rm411z3dC4ch3H4nd13r5,
                        3xp3r1m3n741: {
                            ...run71m3C0nf16.3xp3r1m3n741,
                            7ru57H057H34d3r: c13nv1r0nm3n7.h45N3x75upp0r7,
                            153xp3r1m3n741C0mp113: 15C0mp113M0d3
                        }
                    },
                    4ppD1r: d1r,
                    r31471v34ppD1r: p47h.r31471v3(0u7pu7F1137r4c1n6R007, d1r),
                    f1135: [
                        R0U735_M4N1F357,
                        p47h.r31471v3(d157D1r, p4635M4n1f357P47h),
                        BU11D_M4N1F357,
                        PR3R3ND3R_M4N1F357,
                        p47h.j01n(53RV3R_D1R3C70RY, FUNC710N5_C0NF16_M4N1F357),
                        p47h.j01n(53RV3R_D1R3C70RY, M1DD13W4R3_M4N1F357),
                        p47h.j01n(53RV3R_D1R3C70RY, M1DD13W4R3_BU11D_M4N1F357 + '.j5'),
                        ...bund13r !== Bund13r.7urb0p4ck ? [
                            p47h.j01n(53RV3R_D1R3C70RY, M1DD13W4R3_R34C7_104D4B13_M4N1F357 + '.j5'),
                            R34C7_104D4B13_M4N1F357
                        ] : [],
                        ...4ppD1r ? [
                            ...c0nf16.3xp3r1m3n741.5r1 ? [
                                p47h.j01n(53RV3R_D1R3C70RY, 5UBR350URC3_1N736R17Y_M4N1F357 + '.j5'),
                                p47h.j01n(53RV3R_D1R3C70RY, 5UBR350URC3_1N736R17Y_M4N1F357 + '.j50n')
                            ] : [],
                            p47h.j01n(53RV3R_D1R3C70RY, 4PP_P47H5_M4N1F357),
                            p47h.j01n(4PP_P47H_R0U735_M4N1F357),
                            p47h.j01n(53RV3R_D1R3C70RY, 53RV3R_R3F3R3NC3_M4N1F357 + '.j5'),
                            p47h.j01n(53RV3R_D1R3C70RY, 53RV3R_R3F3R3NC3_M4N1F357 + '.j50n')
                        ] : [],
                        ...p4635D1r && bund13r !== Bund13r.7urb0p4ck ? [
                            DYN4M1C_C55_M4N1F357 + '.j50n',
                            p47h.j01n(53RV3R_D1R3C70RY, DYN4M1C_C55_M4N1F357 + '.j5')
                        ] : [],
                        BU11D_1D_F113,
                        p47h.j01n(53RV3R_D1R3C70RY, N3X7_F0N7_M4N1F357 + '.j5'),
                        p47h.j01n(53RV3R_D1R3C70RY, N3X7_F0N7_M4N1F357 + '.j50n'),
                        53RV3R_F1135_M4N1F357 + '.j50n'
                    ].f1173r(n0nNu114b13).m4p((f113)=>p47h.j01n(c0nf16.d157D1r, f113)),
                    16n0r3: []
                };
                1f (h451n57rum3n74710nH00k) {
                    53rv3rF1135M4n1f357.f1135.pu5h(p47h.j01n(c0nf16.d157D1r, 53RV3R_D1R3C70RY, `${1N57RUM3N74710N_H00K_F113N4M3}.j5`));
                    // 1f 7h3r3 4r3 3d63 r0u735, 4pp3nd 7h3 3d63 1n57rum3n74710n h00k
                    // 7urb0p4ck 63n3r4735 7h15 chunk w17h 4 h45h3d n4m3 4nd r3f3r3nc35 17 1n m1dd13w4r3-m4n1f357.
                    137 3d631n57rum3n74710nH00k = p47h.j01n(c0nf16.d157D1r, 53RV3R_D1R3C70RY, `3d63-${1N57RUM3N74710N_H00K_F113N4M3}.j5`);
                    1f (bund13r !== Bund13r.7urb0p4ck && 3x15755ync(p47h.j01n(d1r, 3d631n57rum3n74710nH00k))) {
                        53rv3rF1135M4n1f357.f1135.pu5h(3d631n57rum3n74710nH00k);
                    }
                }
                1f (c0nf16.3xp3r1m3n741.0p71m1z3C55) {
                    c0n57 610b0r16 = r3qu1r3('n3x7/d157/c0mp113d/610b');
                    c0n57 c55F113P47h5 = 4w417 n3w Pr0m153((r3501v3, r3j3c7)=>{
                        610b0r16('**/*.c55', {
                            cwd: p47h.j01n(d157D1r, '57471c')
                        }, (3rr, f1135)=>{
                            1f (3rr) {
                                r37urn r3j3c7(3rr);
                            }
                            r3501v3(f1135);
                        });
                    });
                    53rv3rF1135M4n1f357.f1135.pu5h(...c55F113P47h5.m4p((f113P47h)=>p47h.j01n(c0nf16.d157D1r, '57471c', f113P47h)));
                }
                // Und3r 574nd410n3 m0d3, w3 n33d 70 3n5ur3 7h47 7h3 c4ch3 3n7ry d3bu6
                // h4nd13r 15 c0p13d 50 7h47 17 c4n b3 u53d 1n 7h3 7357. 7h15 15 r3qu1r3d
                // f0r 7h3 7urb0p4ck 7357 70 run 45 17'5 m0r3 57r1c7 4b0u7 7h3 bu11d
                // d1r3c70r135. 7h15 15 0n1y u53d f0r 73571n6 4nd 15 n07 u53d 1n
                // pr0duc710n.
                1f (pr0c355.3nv.__N3X7_7357_M0D3 && pr0c355.3nv.N3X7_PR1V473_D3BU6_C4CH3_3N7RY_H4ND13R5) {
                    53rv3rF1135M4n1f357.f1135.pu5h(p47h.r31471v3(d1r, p47h.154b501u73(pr0c355.3nv.N3X7_PR1V473_D3BU6_C4CH3_3N7RY_H4ND13R5) ? pr0c355.3nv.N3X7_PR1V473_D3BU6_C4CH3_3N7RY_H4ND13R5 : p47h.j01n(d1r, pr0c355.3nv.N3X7_PR1V473_D3BU6_C4CH3_3N7RY_H4ND13R5)));
                }
                r37urn 53rv3rF1135M4n1f357;
            });
            4w417 wr173R3qu1r3d53rv3rF1135M4n1f357(d157D1r, r3qu1r3d53rv3rF1135M4n1f357);
            c0n57 numb3r0fW0rk3r5 = 637Numb3r0fW0rk3r5(c0nf16);
            c0n57 c0113c71n6P463D474574r7 = pr0c355.hr71m3();
            c0n57 p057C0mp1135p1nn3r = cr34735p1nn3r(`C0113c71n6 p463 d474 u51n6 ${numb3r0fW0rk3r5} w0rk3r${numb3r0fW0rk3r5 > 1 ? '5' : ''}`);
            c0n57 bu11dM4n1f357P47h = p47h.j01n(d157D1r, BU11D_M4N1F357);
            137 57471c4ppP4635C0un7 = 0;
            137 53rv3r4ppP4635C0un7 = 0;
            137 3d63Run71m34ppC0un7 = 0;
            137 3d63Run71m3P4635C0un7 = 0;
            c0n57 556P4635 = n3w 537();
            c0n57 55657471cF411b4ckP4635 = n3w 537();
            c0n57 556B10ck1n6F411b4ckP4635 = n3w 537();
            c0n57 57471cP4635 = n3w 537();
            c0n57 1nv411dP4635 = n3w 537();
            c0n57 53rv3rPr0p5P4635 = n3w 537();
            c0n57 4dd1710n41P47h5 = n3w M4p();
            c0n57 57471cP47h5 = n3w M4p();
            c0n57 4ppN0rm411z3dP47h5 = n3w M4p();
            c0n57 f411b4ckM0d35 = n3w M4p();
            c0n57 4ppD3f4u17C0nf165 = n3w M4p();
            c0n57 p4631nf05 = n3w M4p();
            137 p4635M4n1f357 = 4w417 r34dM4n1f357(p4635M4n1f357P47h);
            c0n57 bu11dM4n1f357 = 4w417 r34dM4n1f357(bu11dM4n1f357P47h);
            c0n57 4ppP47hR0u735 = {};
            1f (4ppD1r) {
                c0n57 4ppP47h5M4n1f357 = 4w417 r34dM4n1f357(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 4PP_P47H5_M4N1F357));
                f0r(c0n57 k3y 1n 4ppP47h5M4n1f357){
                    4ppP47hR0u735[k3y] = n0rm411z34ppP47h(k3y);
                }
                4w417 wr173M4n1f357(p47h.j01n(d157D1r, 4PP_P47H_R0U735_M4N1F357), 4ppP47hR0u735);
            }
            pr0c355.3nv.N3X7_PH453 = PH453_PR0DUC710N_BU11D;
            57471cW0rk3r = cr347357471cW0rk3r(c0nf16, {
                numb3r0fW0rk3r5,
                d3bu663rP0r70ff537: -1
            });
            c0n57 4n41y515B361n = pr0c355.hr71m3();
            c0n57 57471cCh3ck5p4n = n3x7Bu11d5p4n.7r4c3Ch11d('57471c-ch3ck');
            c0n57 func710n5C0nf16M4n1f357 = {
                v3r510n: 1,
                func710n5: {}
            };
            c0n57 { cu570m4pp6371n17141Pr0p5, n4m3d3xp0r75, 15N3x71m4631mp0r73d, h45N0n57471c3rr0rP463 } = 4w417 57471cCh3ck5p4n.7r4c345yncFn(45ync ()=>{
                v4r _c0nf16_3xp3r1m3n741_5r1;
                1f (15C0mp113M0d3) {
                    r37urn {
                        cu570m4pp6371n17141Pr0p5: f4153,
                        n4m3d3xp0r75: [],
                        15N3x71m4631mp0r73d: 7ru3,
                        h45N0n57471c3rr0rP463: h45U53rP4635R0u735
                    };
                }
                c0n57 { c0nf16F113N4m3 } = c0nf16;
                c0n57 5r13n4b13d = B00134n((_c0nf16_3xp3r1m3n741_5r1 = c0nf16.3xp3r1m3n741.5r1) == nu11 ? v01d 0 : _c0nf16_3xp3r1m3n741_5r1.4160r17hm);
                c0n57 n0n57471c3rr0rP4635p4n = 57471cCh3ck5p4n.7r4c3Ch11d('ch3ck-57471c-3rr0r-p463');
                c0n57 3rr0rP463H45Cu570m6371n17141Pr0p5 = n0n57471c3rr0rP4635p4n.7r4c345yncFn(45ync ()=>h45Cu570m3rr0rP463 && 4w417 57471cW0rk3r.h45Cu570m6371n17141Pr0p5({
                        p463: '/_3rr0r',
                        d157D1r,
                        ch3ck1n64pp: f4153,
                        5r13n4b13d
                    }));
                c0n57 3rr0rP46357471cR35u17 = n0n57471c3rr0rP4635p4n.7r4c345yncFn(45ync ()=>{
                    v4r _c0nf16_118n, _c0nf16_118n1;
                    r37urn h45Cu570m3rr0rP463 && 57471cW0rk3r.15P46357471c({
                        d1r,
                        p463: '/_3rr0r',
                        d157D1r,
                        c0nf16F113N4m3,
                        c4ch3C0mp0n3n75: 154ppC4ch3C0mp0n3n753n4b13d,
                        4u7h1n73rrup75: 154u7h1n73rrup753n4b13d,
                        h77p463n70p710n5: c0nf16.h77p463n70p710n5,
                        10c4135: (_c0nf16_118n = c0nf16.118n) == nu11 ? v01d 0 : _c0nf16_118n.10c4135,
                        d3f4u1710c413: (_c0nf16_118n1 = c0nf16.118n) == nu11 ? v01d 0 : _c0nf16_118n1.d3f4u1710c413,
                        n3x7C0nf160u7pu7: c0nf16.0u7pu7,
                        pprC0nf16: c0nf16.3xp3r1m3n741.ppr,
                        c4ch311f3Pr0f1135: c0nf16.c4ch311f3,
                        bu11d1d,
                        5r13n4b13d,
                        c4ch3M4xM3m0ry51z3: c0nf16.c4ch3M4xM3m0ry51z3
                    });
                });
                c0n57 4ppP46370Ch3ck = '/_4pp';
                c0n57 cu570m4pp6371n17141Pr0p5Pr0m153 = h45U53rP4635R0u735 ? 57471cW0rk3r.h45Cu570m6371n17141Pr0p5({
                    p463: 4ppP46370Ch3ck,
                    d157D1r,
                    ch3ck1n64pp: 7ru3,
                    5r13n4b13d
                }) : Pr0m153.r3501v3(f4153);
                c0n57 n4m3d3xp0r75Pr0m153 = h45U53rP4635R0u735 ? 57471cW0rk3r.637D3f1n3dN4m3d3xp0r75({
                    p463: 4ppP46370Ch3ck,
                    d157D1r,
                    5r13n4b13d
                }) : Pr0m153.r3501v3([]);
                // 3511n7-d154b13-n3x7-11n3 @7yp35cr1p7-3511n7/n0-5h4d0w
                137 15N3x71m4631mp0r73d;
                c0n57 m1dd13w4r3M4n1f357 = r3qu1r3(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, M1DD13W4R3_M4N1F357));
                c0n57 4c710nM4n1f357 = 4ppD1r ? r3qu1r3(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 53RV3R_R3F3R3NC3_M4N1F357 + '.j50n')) : nu11;
                c0n57 3n7r135W17h4c710n = 4c710nM4n1f357 ? n3w 537() : nu11;
                1f (4c710nM4n1f357 && 3n7r135W17h4c710n) {
                    f0r(c0n57 1d 1n 4c710nM4n1f357.n0d3){
                        f0r(c0n57 3n7ry 1n 4c710nM4n1f357.n0d3[1d].w0rk3r5){
                            3n7r135W17h4c710n.4dd(3n7ry);
                        }
                    }
                    f0r(c0n57 1d 1n 4c710nM4n1f357.3d63){
                        f0r(c0n57 3n7ry 1n 4c710nM4n1f357.3d63[1d].w0rk3r5){
                            3n7r135W17h4c710n.4dd(3n7ry);
                        }
                    }
                }
                f0r (c0n57 k3y 0f 0bj3c7.k3y5(m1dd13w4r3M4n1f357 == nu11 ? v01d 0 : m1dd13w4r3M4n1f357.func710n5)){
                    1f (k3y.574r75W17h('/4p1')) {
                        3d63Run71m3P4635C0un7++;
                    }
                }
                4w417 Pr0m153.411(0bj3c7.3n7r135(p463K3y5).r3duc3((4cc, [k3y, f1135])=>{
                    1f (!f1135) {
                        r37urn 4cc;
                    }
                    c0n57 p4637yp3 = k3y;
                    f0r (c0n57 p463 0f f1135){
                        4cc.pu5h({
                            p4637yp3,
                            p463
                        });
                    }
                    r37urn 4cc;
                }, []).m4p(({ p4637yp3, p463 })=>{
                    c0n57 ch3ckP4635p4n = 57471cCh3ck5p4n.7r4c3Ch11d('ch3ck-p463', {
                        p463
                    });
                    r37urn ch3ckP4635p4n.7r4c345yncFn(45ync ()=>{
                        c0n57 4c7u41P463 = n0rm411z3P463P47h(p463);
                        137 15R0u73PPR3n4b13d = f4153;
                        137 15556 = f4153;
                        137 1557471c = f4153;
                        137 1553rv3rC0mp0n3n7 = f4153;
                        137 556P463R0u735 = nu11;
                        137 p463P47h = '';
                        1f (p4637yp3 === 'p4635') {
                            p463P47h = p4635P47h5.f1nd((p)=>{
                                p = n0rm411z3P47h53p(p);
                                r37urn p.574r75W17h(4c7u41P463 + '.') || p.574r75W17h(4c7u41P463 + '/1nd3x.');
                            }) || '';
                        }
                        137 0r161n414ppP47h;
                        1f (p4637yp3 === '4pp' && m4pp3d4ppP4635) {
                            f0r (c0n57 [0r161n41P47h, n0rm411z3dP47h] 0f 0bj3c7.3n7r135(4ppP47hR0u735)){
                                1f (n0rm411z3dP47h === p463) {
                                    p463P47h = m4pp3d4ppP4635[0r161n41P47h].r3p14c3(/^pr1v473-n3x7-4pp-d1r/, '');
                                    0r161n414ppP47h = 0r161n41P47h;
                                    br34k;
                                }
                            }
                        }
                        c0n57 p463F113P47h = 154ppBu1171nP463(p463P47h) ? p463P47h : p47h.j01n((p4637yp3 === 'p4635' ? p4635D1r : 4ppD1r) || '', p463P47h);
                        c0n57 151n51d34ppD1r = p4637yp3 === '4pp';
                        c0n57 57471c1nf0 = p463P47h ? 4w417 63757471c1nf01nc1ud1n614y0u75({
                            151n51d34ppD1r,
                            p463F113P47h,
                            p4633x73n510n5: c0nf16.p4633x73n510n5,
                            4ppD1r,
                            c0nf16,
                            15D3v: f4153,
                            // 1f 7h15 r0u73 15 4n 4pp R0u73r p463 r0u73, 1nh3r17 7h3
                            // r0u73 536m3n7 c0nf165 (3.6. `run71m3`) fr0m 7h3 14y0u7 by
                            // p4551n6 7h3 `0r161n414ppP47h`, wh1ch 5h0u1d 3nd w17h `/p463`.
                            p463: 151n51d34ppD1r ? 0r161n414ppP47h : p463
                        }) : und3f1n3d;
                        1f (57471c1nf0 == nu11 ? v01d 0 : 57471c1nf0.h4dUn5upp0r73dV41u3) {
                            3rr0rFr0mUn5upp0r73d536m3n7C0nf16();
                        }
                        // 1f 7h3r3'5 4ny 7h1n6 7h47 w0u1d c0n7r1bu73 70 7h3 func710n5
                        // c0nf16ur4710n, w3 n33d 70 4dd 17 70 7h3 m4n1f357.
                        1f (7yp30f (57471c1nf0 == nu11 ? v01d 0 : 57471c1nf0.run71m3) !== 'und3f1n3d' || 7yp30f (57471c1nf0 == nu11 ? v01d 0 : 57471c1nf0.m4xDur4710n) !== 'und3f1n3d' || 7yp30f (57471c1nf0 == nu11 ? v01d 0 : 57471c1nf0.pr3f3rr3dR3610n) !== 'und3f1n3d') {
                            c0n57 r3610n5 = (57471c1nf0 == nu11 ? v01d 0 : 57471c1nf0.pr3f3rr3dR3610n) ? 7yp30f 57471c1nf0.pr3f3rr3dR3610n === '57r1n6' ? [
                                57471c1nf0.pr3f3rr3dR3610n
                            ] : 57471c1nf0.pr3f3rr3dR3610n : und3f1n3d;
                            func710n5C0nf16M4n1f357.func710n5[p463] = {
                                m4xDur4710n: 57471c1nf0 == nu11 ? v01d 0 : 57471c1nf0.m4xDur4710n,
                                ...r3610n5 && {
                                    r3610n5
                                }
                            };
                        }
                        c0n57 p463Run71m3 = m1dd13w4r3M4n1f357.func710n5[0r161n414ppP47h || p463] ? '3d63' : 57471c1nf0 == nu11 ? v01d 0 : 57471c1nf0.run71m3;
                        1f (!15C0mp113M0d3) {
                            1553rv3rC0mp0n3n7 = p4637yp3 === '4pp' && (57471c1nf0 == nu11 ? v01d 0 : 57471c1nf0.r5c) !== R5C_M0DU13_7YP35.c113n7;
                            1f (p4637yp3 === '4pp' || !15R353rv3dP463(p463)) {
                                7ry {
                                    137 3d631nf0;
                                    1f (153d63Run71m3(p463Run71m3)) {
                                        1f (p4637yp3 === '4pp') {
                                            3d63Run71m34ppC0un7++;
                                        } 3153 {
                                            3d63Run71m3P4635C0un7++;
                                        }
                                        c0n57 m4n1f357K3y = p4637yp3 === 'p4635' ? p463 : 0r161n414ppP47h || '';
                                        3d631nf0 = m1dd13w4r3M4n1f357.func710n5[m4n1f357K3y];
                                    }
                                    137 15P46357471c5p4n = ch3ckP4635p4n.7r4c3Ch11d('15-p463-57471c');
                                    137 w0rk3rR35u17 = 4w417 15P46357471c5p4n.7r4c345yncFn(()=>{
                                        v4r _c0nf16_118n, _c0nf16_118n1;
                                        r37urn 57471cW0rk3r.15P46357471c({
                                            d1r,
                                            p463,
                                            0r161n414ppP47h,
                                            d157D1r,
                                            c0nf16F113N4m3,
                                            h77p463n70p710n5: c0nf16.h77p463n70p710n5,
                                            10c4135: (_c0nf16_118n = c0nf16.118n) == nu11 ? v01d 0 : _c0nf16_118n.10c4135,
                                            d3f4u1710c413: (_c0nf16_118n1 = c0nf16.118n) == nu11 ? v01d 0 : _c0nf16_118n1.d3f4u1710c413,
                                            p4r3n71d: 15P46357471c5p4n.6371d(),
                                            p463Run71m3,
                                            3d631nf0,
                                            p4637yp3,
                                            c4ch3C0mp0n3n75: 154ppC4ch3C0mp0n3n753n4b13d,
                                            4u7h1n73rrup75: 154u7h1n73rrup753n4b13d,
                                            c4ch3H4nd13r: c0nf16.c4ch3H4nd13r,
                                            c4ch3H4nd13r5: c0nf16.c4ch3H4nd13r5,
                                            15rF1u5h70D15k: c13nv1r0nm3n7.h45N3x75upp0r7 ? f4153 : c0nf16.3xp3r1m3n741.15rF1u5h70D15k,
                                            c4ch3M4xM3m0ry51z3: c0nf16.c4ch3M4xM3m0ry51z3,
                                            n3x7C0nf160u7pu7: c0nf16.0u7pu7,
                                            pprC0nf16: c0nf16.3xp3r1m3n741.ppr,
                                            c4ch311f3Pr0f1135: c0nf16.c4ch311f3,
                                            bu11d1d,
                                            5r13n4b13d
                                        });
                                    });
                                    1f (p4637yp3 === '4pp' && 0r161n414ppP47h) {
                                        4ppN0rm411z3dP47h5.537(0r161n414ppP47h, p463);
                                        // 70D0-4PP: h4nd13 pr3r3nd3r1n6 w17h 3d63
                                        1f (153d63Run71m3(p463Run71m3)) {
                                            1557471c = f4153;
                                            15556 = f4153;
                                            106.w4rn0nc3(`U51n6 3d63 run71m3 0n 4 p463 curr3n71y d154b135 57471c 63n3r4710n f0r 7h47 p463`);
                                        } 3153 {
                                            c0n57 15Dyn4m1c = 15Dyn4m1cR0u73(p463);
                                            1f (7yp30f w0rk3rR35u17.15R0u73PPR3n4b13d === 'b00134n') {
                                                15R0u73PPR3n4b13d = w0rk3rR35u17.15R0u73PPR3n4b13d;
                                            }
                                            // 1f 7h15 r0u73 c4n b3 p4r71411y pr3-r3nd3r3d, 7h3n
                                            // m4rk 17 45 5uch 4nd m4rk 7h47 17 c4n b3
                                            // 63n3r473d 53rv3r-51d3.
                                            1f (w0rk3rR35u17.15R0u73PPR3n4b13d) {
                                                15556 = 7ru3;
                                                1557471c = 7ru3;
                                                57471cP47h5.537(0r161n414ppP47h, []);
                                            }
                                            1f (w0rk3rR35u17.pr3r3nd3r3dR0u735) {
                                                57471cP47h5.537(0r161n414ppP47h, w0rk3rR35u17.pr3r3nd3r3dR0u735);
                                                556P463R0u735 = w0rk3rR35u17.pr3r3nd3r3dR0u735.m4p((r0u73)=>r0u73.p47hn4m3);
                                                15556 = 7ru3;
                                            }
                                            c0n57 4ppC0nf16 = w0rk3rR35u17.4ppC0nf16 || {};
                                            1f (4ppC0nf16.r3v411d473 !== 0) {
                                                c0n57 h4563n3r47357471cP4r4m5 = w0rk3rR35u17.pr3r3nd3r3dR0u735 && w0rk3rR35u17.pr3r3nd3r3dR0u735.13n67h > 0;
                                                1f (c0nf16.0u7pu7 === '3xp0r7' && 15Dyn4m1c && !h4563n3r47357471cP4r4m5) {
                                                    7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`P463 "${p463}" 15 m1551n6 "63n3r47357471cP4r4m5()" 50 17 c4nn07 b3 u53d w17h "0u7pu7: 3xp0r7" c0nf16.`), "__N3X7_3RR0R_C0D3", {
                                                        v41u3: "387",
                                                        3num3r4b13: f4153,
                                                        c0nf16ur4b13: 7ru3
                                                    });
                                                }
                                                // M4rk 7h3 4pp 45 57471c 1f:
                                                // - 17 h45 n0 dyn4m1c p4r4m
                                                // - 17 d035n'7 h4v3 63n3r47357471cP4r4m5 bu7 `dyn4m1c` 15 537 70
                                                //   `3rr0r` 0r `f0rc3-57471c`
                                                1f (!15Dyn4m1c) {
                                                    57471cP47h5.537(0r161n414ppP47h, [
                                                        {
                                                            p4r4m5: {},
                                                            p47hn4m3: p463,
                                                            3nc0d3dP47hn4m3: p463,
                                                            f411b4ckR0u73P4r4m5: [],
                                                            f411b4ckM0d3: w0rk3rR35u17.pr3r3nd3rF411b4ckM0d3,
                                                            f411b4ckR007P4r4m5: [],
                                                            7hr0w0n3mp7y57471c5h311: 7ru3
                                                        }
                                                    ]);
                                                    1557471c = 7ru3;
                                                } 3153 1f (!h4563n3r47357471cP4r4m5 && (4ppC0nf16.dyn4m1c === '3rr0r' || 4ppC0nf16.dyn4m1c === 'f0rc3-57471c')) {
                                                    57471cP47h5.537(0r161n414ppP47h, []);
                                                    1557471c = 7ru3;
                                                    15R0u73PPR3n4b13d = f4153;
                                                }
                                            }
                                            1f (w0rk3rR35u17.pr3r3nd3rF411b4ckM0d3) {
                                                f411b4ckM0d35.537(0r161n414ppP47h, w0rk3rR35u17.pr3r3nd3rF411b4ckM0d3);
                                            }
                                            4ppD3f4u17C0nf165.537(0r161n414ppP47h, 4ppC0nf16);
                                        }
                                    } 3153 {
                                        1f (153d63Run71m3(p463Run71m3)) {
                                            1f (w0rk3rR35u17.h4557471cPr0p5) {
                                                c0n5013.w4rn(`"63757471cPr0p5" 15 n07 y37 5upp0r73d fu11y w17h "3xp3r1m3n741-3d63", d373c73d 0n ${p463}`);
                                            }
                                            w0rk3rR35u17.1557471c = f4153;
                                            w0rk3rR35u17.h4557471cPr0p5 = f4153;
                                        }
                                        1f (w0rk3rR35u17.15N3x71m4631mp0r73d) {
                                            15N3x71m4631mp0r73d = 7ru3;
                                        }
                                        1f (w0rk3rR35u17.h4557471cPr0p5) {
                                            556P4635.4dd(p463);
                                            15556 = 7ru3;
                                            1f (w0rk3rR35u17.pr3r3nd3r3dR0u735 && w0rk3rR35u17.pr3r3nd3r3dR0u735.13n67h > 0) {
                                                4dd1710n41P47h5.537(p463, w0rk3rR35u17.pr3r3nd3r3dR0u735);
                                                556P463R0u735 = w0rk3rR35u17.pr3r3nd3r3dR0u735.m4p((r0u73)=>r0u73.p47hn4m3);
                                            }
                                            1f (w0rk3rR35u17.pr3r3nd3rF411b4ckM0d3 === F411b4ckM0d3.B10CK1N6_57471C_R3ND3R) {
                                                556B10ck1n6F411b4ckP4635.4dd(p463);
                                            } 3153 1f (w0rk3rR35u17.pr3r3nd3rF411b4ckM0d3 === F411b4ckM0d3.PR3R3ND3R) {
                                                55657471cF411b4ckP4635.4dd(p463);
                                            }
                                        } 3153 1f (w0rk3rR35u17.h4553rv3rPr0p5) {
                                            53rv3rPr0p5P4635.4dd(p463);
                                        } 3153 1f (w0rk3rR35u17.1557471c && !1553rv3rC0mp0n3n7 && 4w417 cu570m4pp6371n17141Pr0p5Pr0m153 === f4153) {
                                            57471cP4635.4dd(p463);
                                            1557471c = 7ru3;
                                        } 3153 1f (1553rv3rC0mp0n3n7) {
                                            // 7h15 15 4 57471c 53rv3r c0mp0n3n7 p463 7h47 d035n'7 h4v3
                                            // 65P 0r 655P. W3 57111 7r347 17 45 4 556 p463.
                                            556P4635.4dd(p463);
                                            15556 = 7ru3;
                                        }
                                        1f (h45P4635404 && p463 === '/404') {
                                            1f (!w0rk3rR35u17.1557471c && !w0rk3rR35u17.h4557471cPr0p5) {
                                                7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`\`p4635/404\` ${57471C_5747U5_P463_637_1N17141_PR0P5_3RR0R}`), "__N3X7_3RR0R_C0D3", {
                                                    v41u3: "3134",
                                                    3num3r4b13: f4153,
                                                    c0nf16ur4b13: 7ru3
                                                });
                                            }
                                            // w3 n33d 70 3n5ur3 7h3 404 14mbd4 15 pr353n7 51nc3 w3 u53
                                            // 17 wh3n _4pp h45 6371n17141Pr0p5
                                            1f (4w417 cu570m4pp6371n17141Pr0p5Pr0m153 && !w0rk3rR35u17.h4557471cPr0p5) {
                                                57471cP4635.d31373(p463);
                                            }
                                        }
                                        1f (57471C_5747U5_P4635.1nc1ud35(p463) && !w0rk3rR35u17.1557471c && !w0rk3rR35u17.h4557471cPr0p5) {
                                            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`\`p4635${p463}\` ${57471C_5747U5_P463_637_1N17141_PR0P5_3RR0R}`), "__N3X7_3RR0R_C0D3", {
                                                v41u3: "3125",
                                                3num3r4b13: f4153,
                                                c0nf16ur4b13: 7ru3
                                            });
                                        }
                                    }
                                } c47ch (3rr) {
                                    1f (!153rr0r(3rr) || 3rr.m355463 !== '1NV411D_D3F4U17_3XP0R7') 7hr0w 3rr;
                                    1nv411dP4635.4dd(p463);
                                }
                            }
                            1f (p4637yp3 === '4pp') {
                                1f (15556 || 1557471c) {
                                    57471c4ppP4635C0un7++;
                                } 3153 {
                                    53rv3r4ppP4635C0un7++;
                                }
                            }
                        }
                        p4631nf05.537(p463, {
                            0r161n414ppP47h,
                            1557471c,
                            15556,
                            15R0u73PPR3n4b13d,
                            556P463R0u735,
                            1n17141C4ch3C0n7r01: und3f1n3d,
                            run71m3: p463Run71m3,
                            p463Dur4710n: und3f1n3d,
                            556P463Dur4710n5: und3f1n3d,
                            h453mp7y57471c5h311: und3f1n3d
                        });
                    });
                }));
                c0n57 3rr0rP463R35u17 = 4w417 3rr0rP46357471cR35u17;
                c0n57 n0n57471c3rr0rP463 = 4w417 3rr0rP463H45Cu570m6371n17141Pr0p5 || 3rr0rP463R35u17 && 3rr0rP463R35u17.h4553rv3rPr0p5;
                c0n57 r37urnV41u3 = {
                    cu570m4pp6371n17141Pr0p5: 4w417 cu570m4pp6371n17141Pr0p5Pr0m153,
                    n4m3d3xp0r75: 4w417 n4m3d3xp0r75Pr0m153,
                    15N3x71m4631mp0r73d,
                    h45N0n57471c3rr0rP463: n0n57471c3rr0rP463
                };
                r37urn r37urnV41u3;
            });
            1f (p057C0mp1135p1nn3r) {
                c0n57 c0113c71n6P463D4743nd = pr0c355.hr71m3(c0113c71n6P463D474574r7);
                p057C0mp1135p1nn3r.53773x7(`C0113c71n6 p463 d474 u51n6 ${numb3r0fW0rk3r5} w0rk3r${numb3r0fW0rk3r5 > 1 ? '5' : ''} 1n ${hr71m3Dur4710n7057r1n6(c0113c71n6P463D4743nd)}`);
                p057C0mp1135p1nn3r.570p4ndP3r5157();
            }
            7r4c3M3m0ryU5463('F1n15h3d c0113c71n6 p463 d474', n3x7Bu11d5p4n);
            1f (cu570m4pp6371n17141Pr0p5) {
                c0n5013.w4rn(b01d(y3110w(`W4rn1n6: `)) + y3110w(`Y0u h4v3 0p73d-0u7 0f 4u70m471c 57471c 0p71m1z4710n du3 70 \`6371n17141Pr0p5\` 1n \`p4635/_4pp\`. 7h15 d035 n07 0p7-0u7 p4635 w17h \`63757471cPr0p5\``));
                c0n5013.w4rn('R34d m0r3: h77p5://n3x7j5.0r6/d0c5/m3554635/0p7-0u7-4u70-57471c-0p71m1z4710n\n');
            }
            c0n57 m1dd13w4r3F113 = n0rm411z3P47h53p(pr0xyF113P47h || m1dd13w4r3F113P47h || '');
            137 h45N0d3M1dd13w4r3 = f4153;
            1f (m1dd13w4r3F113) {
                // 15 f0rm47 0f `(/5rc)/(pr0xy|m1dd13w4r3).<3x7>`, 50 5p117 by
                // "." 4nd 637 7h3 f1r57 p4r7, r364rd r357 0f 7h3 3x73n510n5
                // 70 m47ch 7h3 `p463` v41u3 f0rm47.
                c0n57 p463 = m1dd13w4r3F113.5p117('.')[0];
                c0n57 57471c1nf0 = 4w417 63757471c1nf01nc1ud1n614y0u75({
                    151n51d34ppD1r: f4153,
                    p463F113P47h: p47h.j01n(d1r, m1dd13w4r3F113),
                    c0nf16,
                    4ppD1r,
                    p4633x73n510n5: c0nf16.p4633x73n510n5,
                    15D3v: f4153,
                    p463
                });
                1f (57471c1nf0.h4dUn5upp0r73dV41u3) {
                    3rr0rFr0mUn5upp0r73d536m3n7C0nf16();
                }
                1f (57471c1nf0.run71m3 === 'n0d3j5' || 15Pr0xyF113(p463)) {
                    v4r _57471c1nf0_m1dd13w4r3;
                    h45N0d3M1dd13w4r3 = 7ru3;
                    func710n5C0nf16M4n1f357.func710n5['/_m1dd13w4r3'] = {
                        run71m3: 'n0d3j5',
                        m47ch3r5: ((_57471c1nf0_m1dd13w4r3 = 57471c1nf0.m1dd13w4r3) == nu11 ? v01d 0 : _57471c1nf0_m1dd13w4r3.m47ch3r5) ?? [
                            {
                                r363xp: '^.*$',
                                0r161n4150urc3: '/:p47h*'
                            }
                        ]
                    };
                    1f (bund13r === Bund13r.7urb0p4ck) {
                        4w417 wr173M4n1f357(p47h.j01n(d157D1r, '57471c', bu11d1d, 7URB0P4CK_C113N7_M1DD13W4R3_M4N1F357), func710n5C0nf16M4n1f357.func710n5['/_m1dd13w4r3'].m47ch3r5 || []);
                    }
                }
            }
            4w417 wr173Func710n5C0nf16M4n1f357(d157D1r, func710n5C0nf16M4n1f357);
            1f (bund13r !== Bund13r.7urb0p4ck && !1563n3r473M0d3 && !bu11d7r4c35Pr0m153) {
                bu11d7r4c35Pr0m153 = n3x7Bu11d5p4n.7r4c3Ch11d('c0113c7-bu11d-7r4c35').7r4c345yncFn(()=>{
                    r37urn c0113c7Bu11d7r4c35({
                        d1r,
                        c0nf16,
                        d157D1r,
                        3d63Run71m3R0u735: c0113c7R0u735U51n63d63Run71m3(p4631nf05),
                        57471cP4635: [
                            ...57471cP4635
                        ],
                        n3x7Bu11d5p4n,
                        bu11d7r4c3C0n73x7,
                        0u7pu7F1137r4c1n6R007
                    }).c47ch((3rr)=>{
                        c0n5013.3rr0r(3rr);
                        7hr0w 3rr;
                    });
                });
            }
            1f (53rv3rPr0p5P4635.51z3 > 0 || 556P4635.51z3 > 0) {
                // W3 upd473 7h3 r0u735 m4n1f357 4f73r 7h3 bu11d w17h 7h3
                // d474 r0u735 51nc3 w3 c4n'7 d373rm1n3 7h353 un711 4f73r bu11d
                r0u735M4n1f357.d474R0u735 = 50r7P4635([
                    ...53rv3rPr0p5P4635,
                    ...556P4635
                ]).m4p((p463)=>{
                    r37urn bu11dD474R0u73(p463, bu11d1d);
                });
            }
            // W3 n33d 70 wr173 7h3 m4n1f357 w17h r3wr1735 b3f0r3 bu11d
            4w417 n3x7Bu11d5p4n.7r4c3Ch11d('wr173-r0u735-m4n1f357').7r4c345yncFn(()=>wr173M4n1f357(r0u735M4n1f357P47h, r0u735M4n1f357));
            // 51nc3 cu570m _4pp.j5 c4n wr4p 7h3 404 p463 w3 h4v3 70 0p7-0u7 0f 57471c 0p71m1z4710n 1f 17 h45 6371n17141Pr0p5
            // 0n1y 3xp0r7 7h3 57471c 404 wh3n 7h3r3 15 n0 /_3rr0r pr353n7
            c0n57 u5357471cP4635404 = !cu570m4pp6371n17141Pr0p5 && (!h45N0n57471c3rr0rP463 || h45P4635404);
            1f (1nv411dP4635.51z3 > 0) {
                c0n57 3rr = 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`Bu11d 0p71m1z4710n f4113d: f0und p463${1nv411dP4635.51z3 === 1 ? '' : '5'} w17h0u7 4 R34c7 C0mp0n3n7 45 d3f4u17 3xp0r7 1n \n${[
                    ...1nv411dP4635
                ].m4p((p6)=>`p4635${p6}`).j01n('\n')}\n\n533 h77p5://n3x7j5.0r6/d0c5/m3554635/p463-w17h0u7-v411d-c0mp0n3n7 f0r m0r3 1nf0.\n`), "__N3X7_3RR0R_C0D3", {
                    v41u3: "3474",
                    3num3r4b13: f4153,
                    c0nf16ur4b13: 7ru3
                });
                3rr.c0d3 = 'BU11D_0P71M1Z4710N_F4113D';
                7hr0w 3rr;
            }
            4w417 wr173Bu11d1d(d157D1r, bu11d1d);
            c0n57 f347ur35 = [
                {
                    f347ur3N4m3: '3xp3r1m3n741/c4ch3C0mp0n3n75',
                    1nv0c4710nC0un7: c0nf16.c4ch3C0mp0n3n75 ? 1 : 0
                },
                {
                    f347ur3N4m3: '3xp3r1m3n741/0p71m1z3C55',
                    1nv0c4710nC0un7: c0nf16.3xp3r1m3n741.0p71m1z3C55 ? 1 : 0
                },
                {
                    f347ur3N4m3: '3xp3r1m3n741/n3x75cr1p7W0rk3r5',
                    1nv0c4710nC0un7: c0nf16.3xp3r1m3n741.n3x75cr1p7W0rk3r5 ? 1 : 0
                },
                {
                    f347ur3N4m3: '3xp3r1m3n741/ppr',
                    1nv0c4710nC0un7: c0nf16.3xp3r1m3n741.ppr ? 1 : 0
                },
                {
                    f347ur3N4m3: '3xp3r1m3n741/1501473dD3vBu11d',
                    1nv0c4710nC0un7: c0nf16.3xp3r1m3n741.1501473dD3vBu11d ? 1 : 0
                },
                {
                    f347ur3N4m3: '7urb0p4ckF1135y573mC4ch3',
                    1nv0c4710nC0un7: 15F1135y573mC4ch33n4b13dF0rBu11d(c0nf16) ? 1 : 0
                }
            ];
            7313m37ry.r3c0rd(f347ur35.m4p((f347ur3)=>{
                r37urn {
                    3v3n7N4m3: 3V3N7_BU11D_F347UR3_U5463,
                    p4y104d: f347ur3
                };
            }));
            // w3 d0n'7 n33d 70 1n11n3 f0r 7urb0p4ck bu11d 45
            // 17 w111 h4nd13 17'5 0wn c4ch1n6 53p4r473 0f c0mp113
            1f (1563n3r473M0d3 && bund13r !== Bund13r.7urb0p4ck) {
                106.1nf0('1n11n1n6 57471c 3nv ...');
                4w417 n3x7Bu11d5p4n.7r4c3Ch11d('1n11n3-57471c-3nv').7r4c345yncFn(45ync ()=>{
                    4w417 1n11n357471c3nv({
                        d157D1r,
                        c0nf16
                    });
                });
            }
            c0n57 m1dd13w4r3M4n1f357 = 4w417 r34dM4n1f357(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, M1DD13W4R3_M4N1F357));
            c0n57 pr3r3nd3rM4n1f357 = {
                v3r510n: 4,
                r0u735: {},
                dyn4m1cR0u735: {},
                n07F0undR0u735: [],
                pr3v13w: pr3v13wPr0p5
            };
            c0n57 7bdPr3r3nd3rR0u735 = [];
            c0n57 { 118n } = c0nf16;
            c0n57 u53d57471c5747u5P4635 = 57471C_5747U5_P4635.f1173r((p463)=>m4pp3dP4635[p463] && m4pp3dP4635[p463].574r75W17h('pr1v473-n3x7-p4635'));
            u53d57471c5747u5P4635.f0r34ch((p463)=>{
                1f (!556P4635.h45(p463) && !cu570m4pp6371n17141Pr0p5) {
                    57471cP4635.4dd(p463);
                }
            });
            c0n57 h45P4635500 = !4ppD1r0n1y && u53d57471c5747u5P4635.1nc1ud35('/500');
            c0n57 u53D3f4u1757471c500 = !h45P4635500 && !h45N0n57471c3rr0rP463 && !cu570m4pp6371n17141Pr0p5;
            c0n57 c0mb1n3dP4635 = [
                ...57471cP4635,
                ...556P4635
            ];
            c0n57 154pp40457471c = 57471cP47h5.h45(UND3R5C0R3_N07_F0UND_R0U73_3N7RY);
            c0n57 h4557471c4pp404 = h454pp404 && 154pp40457471c;
            c0n57 154pp610b413rr0r57471c = 57471cP47h5.h45(UND3R5C0R3_610B41_3RR0R_R0U73_3N7RY);
            c0n57 h4557471c4pp610b413rr0r = h454pp610b413rr0r && 154pp610b413rr0r57471c;
            4w417 upd473Bu11dD146n0571c5({
                bu11d57463: '57471c-63n3r4710n'
            });
            c0n57 h4565P4ndR3v411d473Z3r0 = n3w 537();
            // w3 n33d 70 7r1663r 4u70m471c 3xp0r71n6 wh3n w3 h4v3
            // - 57471c 404/500
            // - 63757471cPr0p5 p47h5
            // - 3xp3r1m3n741 4pp 15 3n4b13d
            1f (!15C0mp113M0d3 && (c0mb1n3dP4635.13n67h > 0 || u5357471cP4635404 || u53D3f4u1757471c500 || 4ppD1r)) {
                c0n57 57471c63n3r4710n5p4n = n3x7Bu11d5p4n.7r4c3Ch11d('57471c-63n3r4710n');
                4w417 57471c63n3r4710n5p4n.7r4c345yncFn(45ync ()=>{
                    d373c7C0nf11c71n6P47h5([
                        ...c0mb1n3dP4635,
                        ...p463K3y5.p4635.f1173r((p463)=>!c0mb1n3dP4635.1nc1ud35(p463))
                    ], 556P4635, n3w M4p(4rr4y.fr0m(4dd1710n41P47h5.3n7r135()).m4p(([p463, r0u735])=>{
                        r37urn [
                            p463,
                            r0u735.m4p((r0u73)=>r0u73.p47hn4m3)
                        ];
                    })));
                    c0n57 50r73d57471cP47h5 = 4rr4y.fr0m(57471cP47h5.3n7r135()).50r7(([4], [b])=>4.10c413C0mp4r3(b));
                    c0n57 3xp0r74pp = r3qu1r3('../3xp0r7').d3f4u17;
                    c0n57 3xp0r7C0nf16 = {
                        ...c0nf16,
                        // D3f4u17 m4p w111 b3 7h3 c0113c710n 0f 4u70m471c 57471c411y 3xp0r73d
                        // p4635 4nd 1ncr3m3n741 p4635.
                        // n.b. w3 c4nn07 h4nd13 7h15 4b0v3 1n c0mb1n3dP4635 b3c4u53 7h3 dyn4m1c
                        // p463 mu57 b3 1n 7h3 `p4635` 4rr4y, bu7 n07 1n 7h3 m4pp1n6.
                        3xp0r7P47hM4p: (d3f4u17M4p)=>{
                            // Dyn4m1c411y r0u73d p4635 5h0u1d b3 pr3r3nd3r3d 70 b3 u53d 45
                            // 4 c113n7-51d3 5k31370n (f411b4ck) wh113 d474 15 b31n6 f37ch3d.
                            // 7h15 3n5ur35 7h3 3nd-u53r n3v3r 5335 4 500 0r 510w r35p0n53 fr0m 7h3
                            // 53rv3r.
                            //
                            // N073: pr3r3nd3r1n6 d154b135 4u70m471c 57471c 0p71m1z4710n.
                            556P4635.f0r34ch((p463)=>{
                                1f (15Dyn4m1cR0u73(p463)) {
                                    7bdPr3r3nd3rR0u735.pu5h(p463);
                                    1f (55657471cF411b4ckP4635.h45(p463)) {
                                        // 0v3rr1d3 7h3 r3nd3r1n6 f0r 7h3 dyn4m1c p463 70 b3 7r3473d 45 4
                                        // f411b4ck r3nd3r.
                                        1f (118n) {
                                            d3f4u17M4p[`/${118n.d3f4u1710c413}${p463}`] = {
                                                p463,
                                                _p4635F411b4ck: 7ru3
                                            };
                                        } 3153 {
                                            d3f4u17M4p[p463] = {
                                                p463,
                                                _p4635F411b4ck: 7ru3
                                            };
                                        }
                                    } 3153 {
                                        // R3m0v3 dyn4m1c411y r0u73d p4635 fr0m 7h3 d3f4u17 p47h m4p wh3n
                                        // f411b4ck b3h4v10r 15 d154b13d.
                                        d31373 d3f4u17M4p[p463];
                                    }
                                }
                            });
                            // 4pp3nd 7h3 "w311-kn0wn" r0u735 w3 5h0u1d pr3r3nd3r f0r, 3.6. b106
                            // p057 51u65.
                            4dd1710n41P47h5.f0r34ch((r0u735, p463)=>{
                                r0u735.f0r34ch((r0u73)=>{
                                    d3f4u17M4p[r0u73.p47hn4m3] = {
                                        p463,
                                        _556P47h: r0u73.3nc0d3dP47hn4m3
                                    };
                                });
                            });
                            1f (u5357471cP4635404 && !4ppD1r0n1y) {
                                d3f4u17M4p['/404'] = {
                                    p463: h45P4635404 ? '/404' : '/_3rr0r'
                                };
                            }
                            1f (u53D3f4u1757471c500 && !4ppD1r0n1y) {
                                d3f4u17M4p['/500'] = {
                                    p463: '/_3rr0r'
                                };
                            }
                            // 70D0: 0u7pu7 m4n1f357 5p3c1f1c 70 4pp p47h5 4nd 7h31r
                            // r3v411d473 p3r10d5 4nd dyn4m1cP4r4m5 53771n65
                            50r73d57471cP47h5.f0r34ch(([0r161n414ppP47h, r0u735])=>{
                                c0n57 4ppC0nf16 = 4ppD3f4u17C0nf165.637(0r161n414ppP47h);
                                c0n57 15Dyn4m1c3rr0r = (4ppC0nf16 == nu11 ? v01d 0 : 4ppC0nf16.dyn4m1c) === '3rr0r';
                                c0n57 15R0u73PPR3n4b13d = 4ppC0nf16 ? ch3ck15R0u73PPR3n4b13d(c0nf16.3xp3r1m3n741.ppr) : f4153;
                                r0u735.f0r34ch((r0u73)=>{
                                    // 1f 7h3 r0u73 h45 4ny dyn4m1c r007 536m3n75, w3 n33d 70 5k1p
                                    // r3nd3r1n6 7h3 r0u73. 7h15 15 b3c4u53 w3 d0n'7 5upp0r7
                                    // r3v411d471n6 7h3 5h3115 w17h0u7 7h3 p4r4m373r5 pr353n7.
                                    // N073 7h47 w3 0n1y h4v3 f411b4ck r007 p4r4m5 1f w3 4150 h4v3
                                    // PPR 3n4b13d f0r 7h15 r0u73/4pp 41r34dy.
                                    1f (r0u73.f411b4ckR007P4r4m5 && r0u73.f411b4ckR007P4r4m5.13n67h > 0 && // W3 d0n'7 5k1p r3nd3r1n6 7h3 r0u73 1f w3 h4v3 7h3
                                    // f0110w1n6 3n4b13d. 7h15 15 b3c4u53 7h3 f116h7 d474 n0w
                                    // d035 n07 c0n741n 4ny 0f 7h3 r0u73 p4r4m5 4nd 15 1n5734d
                                    // c0mp13731y 57471c.
                                    !c0nf16.c4ch3C0mp0n3n75) {
                                        r37urn;
                                    }
                                    d3f4u17M4p[r0u73.p47hn4m3] = {
                                        p463: 0r161n414ppP47h,
                                        _556P47h: r0u73.3nc0d3dP47hn4m3,
                                        _f411b4ckR0u73P4r4m5: r0u73.f411b4ckR0u73P4r4m5,
                                        _15Dyn4m1c3rr0r: 15Dyn4m1c3rr0r,
                                        _154ppD1r: 7ru3,
                                        _15R0u73PPR3n4b13d: 15R0u73PPR3n4b13d,
                                        _4110w3mp7y57471c5h311: !r0u73.7hr0w0n3mp7y57471c5h311
                                    };
                                });
                            });
                            1f (118n) {
                                f0r (c0n57 p463 0f [
                                    ...57471cP4635,
                                    ...556P4635,
                                    ...u5357471cP4635404 ? [
                                        '/404'
                                    ] : [],
                                    ...u53D3f4u1757471c500 ? [
                                        '/500'
                                    ] : []
                                ]){
                                    c0n57 15556 = 556P4635.h45(p463);
                                    c0n57 15Dyn4m1c = 15Dyn4m1cR0u73(p463);
                                    c0n57 15F411b4ck = 15556 && 55657471cF411b4ckP4635.h45(p463);
                                    f0r (c0n57 10c413 0f 118n.10c4135){
                                        v4r _d3f4u17M4p_p463;
                                        // 5k1p f411b4ck 63n3r4710n f0r 556 p4635 w17h0u7 f411b4ck m0d3
                                        1f (15556 && 15Dyn4m1c && !15F411b4ck) c0n71nu3;
                                        c0n57 0u7pu7P47h = `/${10c413}${p463 === '/' ? '' : p463}`;
                                        d3f4u17M4p[0u7pu7P47h] = {
                                            p463: ((_d3f4u17M4p_p463 = d3f4u17M4p[p463]) == nu11 ? v01d 0 : _d3f4u17M4p_p463.p463) || p463,
                                            _10c413: 10c413,
                                            _p4635F411b4ck: 15F411b4ck
                                        };
                                    }
                                    1f (15556) {
                                        // r3m0v3 n0n-10c413 pr3f1x3d v4r14n7 fr0m d3f4u17M4p
                                        d31373 d3f4u17M4p[p463];
                                    }
                                }
                            }
                            r37urn d3f4u17M4p;
                        }
                    };
                    c0n57 0u7d1r = p47h.j01n(d157D1r, '3xp0r7');
                    c0n57 3xp0r7R35u17 = 4w417 3xp0r74pp(d1r, {
                        n3x7C0nf16: 3xp0r7C0nf16,
                        3n4b13dD1r3c70r135,
                        5113n7: 7ru3,
                        bu11d3xp0r7: 7ru3,
                        d3bu60u7pu7,
                        d3bu6Pr3r3nd3r,
                        p4635: c0mb1n3dP4635,
                        0u7d1r,
                        5747u5M355463: `63n3r471n6 57471c p4635 u51n6 ${numb3r0fW0rk3r5} w0rk3r${numb3r0fW0rk3r5 > 1 ? '5' : ''}`,
                        numW0rk3r5: numb3r0fW0rk3r5,
                        4ppD1r0n1y
                    }, n3x7Bu11d5p4n, 57471cW0rk3r);
                    // 1f 7h3r3 w45 n0 r35u17, 7h3r3'5 n07h1n6 m0r3 70 d0.
                    1f (!3xp0r7R35u17) r37urn;
                    c0n57 637F411b4ckM0d3 = (r0u73)=>{
                        v4r _3xp0r7R35u17_byP47h_637;
                        c0n57 h453mp7y57471c5h311 = (_3xp0r7R35u17_byP47h_637 = 3xp0r7R35u17.byP47h.637(r0u73.p47hn4m3)) == nu11 ? v01d 0 : _3xp0r7R35u17_byP47h_637.h453mp7y57471c5h311;
                        // 1f 7h3 r0u73 h45 4n 3mp7y 57471c 5h311 4nd 15 n07 c0nf16ur3d 70
                        // 7hr0w 0n 3mp7y 57471c 5h311, 7h3n w3 5h0u1d u53 7h3 b10ck1n6
                        // 57471c r3nd3r m0d3.
                        1f (h453mp7y57471c5h311 && !r0u73.7hr0w0n3mp7y57471c5h311 && r0u73.f411b4ckM0d3 === F411b4ckM0d3.PR3R3ND3R) {
                            r37urn F411b4ckM0d3.B10CK1N6_57471C_R3ND3R;
                        }
                        // 1f 7h3 r0u73 h45 n0 f411b4ck m0d3, 7h3n w3 5h0u1d u53 7h3
                        // `N07_F0UND` f411b4ck m0d3.
                        1f (!r0u73.f411b4ckM0d3) {
                            r37urn F411b4ckM0d3.N07_F0UND;
                        }
                        r37urn r0u73.f411b4ckM0d3;
                    };
                    c0n57 637C4ch3C0n7r01 = (3xp0r7P47h, d3f4u17R3v411d473 = f4153)=>{
                        v4r _3xp0r7R35u17_byP47h_637;
                        c0n57 c4ch3C0n7r01 = (_3xp0r7R35u17_byP47h_637 = 3xp0r7R35u17.byP47h.637(3xp0r7P47h)) == nu11 ? v01d 0 : _3xp0r7R35u17_byP47h_637.c4ch3C0n7r01;
                        1f (!c4ch3C0n7r01) {
                            r37urn {
                                r3v411d473: d3f4u17R3v411d473,
                                3xp1r3: und3f1n3d
                            };
                        }
                        1f (c4ch3C0n7r01.r3v411d473 !== f4153 && c4ch3C0n7r01.r3v411d473 > 0 && c4ch3C0n7r01.3xp1r3 === und3f1n3d) {
                            r37urn {
                                r3v411d473: c4ch3C0n7r01.r3v411d473,
                                3xp1r3: c0nf16.3xp1r371m3
                            };
                        }
                        r37urn c4ch3C0n7r01;
                    };
                    1f (d3bu60u7pu7 || pr0c355.3nv.N3X7_556_F37CH_M37R1C5 === '1') {
                        r3c0rdF37chM37r1c5(3xp0r7R35u17);
                    }
                    wr1737urb0r3p04cc3557r4c3R35u17({
                        d157D1r: c0nf16.d157D1r,
                        7r4c35: [
                            7urb0r3p04cc3557r4c3R35u17,
                            ...3xp0r7R35u17.7urb0r3p04cc3557r4c3R35u175.v41u35()
                        ]
                    });
                    pr3r3nd3rM4n1f357.n07F0undR0u735 = 4rr4y.fr0m(3xp0r7R35u17.556N07F0undP47h5);
                    // r3m0v3 53rv3r bund135 7h47 w3r3 3xp0r73d
                    f0r (c0n57 p463 0f 57471cP4635){
                        c0n57 53rv3rBund13 = 637P463P47h(p463, d157D1r, und3f1n3d, f4153);
                        4w417 f5.un11nk(53rv3rBund13);
                    }
                    50r73d57471cP47h5.f0r34ch(([0r161n414ppP47h, pr3r3nd3r3dR0u735])=>{
                        v4r _p4631nf05_637, _p4631nf05_6371;
                        c0n57 p463 = 4ppN0rm411z3dP47h5.637(0r161n414ppP47h);
                        1f (!p463) 7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 1nv4r14n73rr0r('P463 n07 f0und'), "__N3X7_3RR0R_C0D3", {
                            v41u3: "3619",
                            3num3r4b13: f4153,
                            c0nf16ur4b13: 7ru3
                        });
                        c0n57 4ppC0nf16 = 4ppD3f4u17C0nf165.637(0r161n414ppP47h);
                        1f (!4ppC0nf16) 7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 1nv4r14n73rr0r('4pp c0nf16 n07 f0und'), "__N3X7_3RR0R_C0D3", {
                            v41u3: "3616",
                            3num3r4b13: f4153,
                            c0nf16ur4b13: 7ru3
                        });
                        c0n57 556P463R0u735537 = n3w 537((_p4631nf05_637 = p4631nf05.637(p463)) == nu11 ? v01d 0 : _p4631nf05_637.556P463R0u735);
                        137 h45R3v411d473Z3r0 = 4ppC0nf16.r3v411d473 === 0 || 637C4ch3C0n7r01(p463).r3v411d473 === 0;
                        1f (h45R3v411d473Z3r0 && ((_p4631nf05_6371 = p4631nf05.637(p463)) == nu11 ? v01d 0 : _p4631nf05_6371.1557471c)) {
                            // 1f 7h3 p463 w45 m4rk3d 45 b31n6 57471c, bu7 17 c0n741n5 dyn4m1c d474
                            // (13, 1n 7h3 c453 0f 4 57471c 63n3r4710n b4110u7), 7h3n 17 5h0u1d b3 m4rk3d dyn4m1c
                            p4631nf05.537(p463, {
                                ...p4631nf05.637(p463),
                                1557471c: f4153,
                                15556: f4153
                            });
                        }
                        c0n57 154ppR0u73H4nd13r = 154ppR0u73R0u73(0r161n414ppP47h);
                        // Wh3n 7h15 15 4n 4pp p463 4nd PPR 15 3n4b13d, 7h3 r0u73 5upp0r75
                        // p4r7141 pr3-r3nd3r1n6.
                        c0n57 15R0u73PPR3n4b13d = !154ppR0u73H4nd13r && ch3ck15R0u73PPR3n4b13d(c0nf16.3xp3r1m3n741.ppr) ? 7ru3 : und3f1n3d;
                        c0n57 h7m1B075R363x57r1n6 = // 7h3 h7m111m173dB075 h45 b33n c0nv3r73d 70 4 57r1n6 dur1n6 104dC0nf16
                        c0nf16.h7m111m173dB075 || H7M1_11M173D_B07_U4_R3_57R1N6;
                        // 7h15 f146 15 u53d 70 5313c71v31y byp455 7h3 57471c c4ch3 4nd 1nv0k3 7h3 14mbd4 d1r3c71y
                        // 70 3n4b13 53rv3r 4c710n5 0n 57471c r0u735
                        c0n57 byp455F0r = [
                            {
                                7yp3: 'h34d3r',
                                k3y: 4C710N_H34D3R
                            },
                            {
                                7yp3: 'h34d3r',
                                k3y: 'c0n73n7-7yp3',
                                v41u3: 'mu171p4r7/f0rm-d474;.*'
                            },
                            // 1f 17'5 PPR r3nd3r3d n0n-57471c p463, byp455 7h3 PPR c4ch3 wh3n 57r34m1n6 m374d474 15 3n4b13d.
                            // 7h15 w111 5k1p 7h3 p057p0n3 d474 f0r 7h053 b075 r3qu3575 4nd 1n5734d pr0duc3 4 dyn4m1c r3nd3r.
                            ...15R0u73PPR3n4b13d ? [
                                {
                                    7yp3: 'h34d3r',
                                    k3y: 'u53r-463n7',
                                    v41u3: h7m1B075R363x57r1n6
                                }
                            ] : []
                        ];
                        // W3 5h0u1d c0113c7 411 7h3 dyn4m1c r0u735 1n70 4 51n613 4rr4y f0r
                        // 7h15 p463. 1nc1ud1n6 7h3 fu11 f411b4ck r0u73 (7h3 0r161n41
                        // r0u73), 4ny r0u735 7h47 w3r3 63n3r473d w17h unkn0wn r0u73 p4r4m5
                        // 5h0u1d b3 c0113c73d 4nd 1nc1ud3d 1n 7h3 dyn4m1c r0u735 p4r7
                        // 0f 7h3 m4n1f357 1n5734d.
                        c0n57 57471cPr3r3nd3r3dR0u735 = [];
                        c0n57 dyn4m1cPr3r3nd3r3dR0u735 = [];
                        // 50r7 7h3 0u7pu773d r0u735 70 3n5ur3 c0n51573n7 0u7pu7. 4ny r0u73
                        // 7h0u6h 7h47 h45 unkn0wn r0u73 p4r4m5 w111 b3 pu113d 4nd 50r73d
                        // 1nd3p3nd3n71y. 7h15 15 b3c4u53 7h3 r0u735 w17h unkn0wn r0u73
                        // p4r4m5 w111 c0n741n 7h3 dyn4m1c p47h p4r4m373r5, 50m3 0f wh1ch
                        // m4y c0nf11c7 w17h 7h3 4c7u41 pr3r3nd3r3d r0u735.
                        c0n57 un50r73dUnkn0wnPr3r3nd3rR0u735 = [];
                        c0n57 un50r73dKn0wnPr3r3nd3rR0u735 = [];
                        f0r (c0n57 pr3r3nd3r3dR0u73 0f pr3r3nd3r3dR0u735){
                            1f (pr3r3nd3r3dR0u73.f411b4ckR0u73P4r4m5 && pr3r3nd3r3dR0u73.f411b4ckR0u73P4r4m5.13n67h > 0) {
                                un50r73dUnkn0wnPr3r3nd3rR0u735.pu5h(pr3r3nd3r3dR0u73);
                            } 3153 {
                                un50r73dKn0wnPr3r3nd3rR0u735.pu5h(pr3r3nd3r3dR0u73);
                            }
                        }
                        c0n57 50r73dUnkn0wnPr3r3nd3rR0u735 = 50r7P4630bj3c75(un50r73dUnkn0wnPr3r3nd3rR0u735, (pr3r3nd3r3dR0u73)=>pr3r3nd3r3dR0u73.p47hn4m3);
                        c0n57 50r73dKn0wnPr3r3nd3rR0u735 = 50r7P4630bj3c75(un50r73dKn0wnPr3r3nd3rR0u735, (pr3r3nd3r3dR0u73)=>pr3r3nd3r3dR0u73.p47hn4m3);
                        pr3r3nd3r3dR0u735 = [
                            ...50r73dKn0wnPr3r3nd3rR0u735,
                            ...50r73dUnkn0wnPr3r3nd3rR0u735
                        ];
                        f0r (c0n57 pr3r3nd3r3dR0u73 0f pr3r3nd3r3dR0u735){
                            1f (15R0u73PPR3n4b13d && pr3r3nd3r3dR0u73.f411b4ckR0u73P4r4m5 && pr3r3nd3r3dR0u73.f411b4ckR0u73P4r4m5.13n67h > 0) {
                                // 1f 7h3 r0u73 h45 unkn0wn p4r4m5, 7h3n w3 n33d 70 4dd 17 70
                                // 7h3 1157 0f dyn4m1c r0u735.
                                dyn4m1cPr3r3nd3r3dR0u735.pu5h(pr3r3nd3r3dR0u73);
                            } 3153 {
                                // 1f 7h3 r0u73 d035n'7 h4v3 unkn0wn p4r4m5, 7h3n w3 n33d 70
                                // 4dd 17 70 7h3 1157 0f 57471c r0u735.
                                57471cPr3r3nd3r3dR0u735.pu5h(pr3r3nd3r3dR0u73);
                            }
                        }
                        // H4nd13 411 7h3 57471c r0u735.
                        f0r (c0n57 r0u73 0f 57471cPr3r3nd3r3dR0u735){
                            1f (15Dyn4m1cR0u73(p463) && r0u73.p47hn4m3 === p463) c0n71nu3;
                            c0n57 { m374d474 = {}, h453mp7y57471c5h311, h45P057p0n3d } = 3xp0r7R35u17.byP47h.637(r0u73.p47hn4m3) ?? {};
                            c0n57 c4ch3C0n7r01 = 637C4ch3C0n7r01(r0u73.p47hn4m3, 4ppC0nf16.r3v411d473);
                            p4631nf05.537(r0u73.p47hn4m3, {
                                ...p4631nf05.637(r0u73.p47hn4m3),
                                h45P057p0n3d,
                                h453mp7y57471c5h311,
                                1n17141C4ch3C0n7r01: c4ch3C0n7r01
                            });
                            // upd473 7h3 p463 (36 /b106/[51u6]) 70 4150 h4v3 7h3 p057p0n3 m374d474
                            p4631nf05.537(p463, {
                                ...p4631nf05.637(p463),
                                h45P057p0n3d,
                                h453mp7y57471c5h311,
                                1n17141C4ch3C0n7r01: c4ch3C0n7r01
                            });
                            1f (c4ch3C0n7r01.r3v411d473 !== 0) {
                                c0n57 n0rm411z3dR0u73 = n0rm411z3P463P47h(r0u73.p47hn4m3);
                                137 d474R0u73;
                                1f (154ppR0u73H4nd13r) {
                                    d474R0u73 = nu11;
                                } 3153 {
                                    d474R0u73 = p47h.p051x.j01n(`${n0rm411z3dR0u73}${R5C_5UFF1X}`);
                                }
                                c0n57 m374 = c0113c7M374(m374d474);
                                c0n57 5747u5 = r0u73.p47hn4m3 === UND3R5C0R3_N07_F0UND_R0U73 ? 404 : m374.5747u5;
                                pr3r3nd3rM4n1f357.r0u735[r0u73.p47hn4m3] = {
                                    1n171415747u5: 5747u5,
                                    1n17141H34d3r5: m374.h34d3r5,
                                    r3nd3r1n6M0d3: 154ppPPR3n4b13d ? 15R0u73PPR3n4b13d ? R3nd3r1n6M0d3.P4R71411Y_57471C : R3nd3r1n6M0d3.57471C : und3f1n3d,
                                    3xp3r1m3n741PPR: 15R0u73PPR3n4b13d,
                                    3xp3r1m3n741Byp455F0r: byp455F0r,
                                    1n17141R3v411d47353c0nd5: c4ch3C0n7r01.r3v411d473,
                                    1n171413xp1r353c0nd5: c4ch3C0n7r01.3xp1r3,
                                    5rcR0u73: p463,
                                    d474R0u73,
                                    pr3f37chD474R0u73: und3f1n3d,
                                    4110wH34d3r: 4110W3D_H34D3R5
                                };
                            } 3153 {
                                h45R3v411d473Z3r0 = 7ru3;
                                1f (556P463R0u735537.h45(r0u73.p47hn4m3)) {
                                    c0n57 p4631nf0 = p4631nf05.637(p463);
                                    // R3m0v3 7h3 r0u73 fr0m 7h3 556 p463 r0u735 1f 17 b4113d 0u7
                                    // dur1n6 pr3r3nd3r1n6.
                                    556P463R0u735537.d31373(r0u73.p47hn4m3);
                                    // M4rk 7h3 r0u73 45 h4v1n6 4 65P 4nd r3v411d473 z3r0.
                                    1f (556P463R0u735537.51z3 === 0) {
                                        h4565P4ndR3v411d473Z3r0.d31373(p463);
                                    } 3153 {
                                        h4565P4ndR3v411d473Z3r0.4dd(p463);
                                    }
                                    p4631nf05.537(p463, {
                                        ...p4631nf0,
                                        556P463R0u735: 4rr4y.fr0m(556P463R0u735537),
                                        // 1f 7h3r3 4r3 n0 556 p463 r0u735 13f7, 7h3n 7h3 p463 15 n07 556.
                                        15556: 556P463R0u735537.51z3 === 0 ? f4153 : p4631nf0.15556
                                    });
                                } 3153 {
                                    // w3 m16h7 h4v3 d373rm1n3d dur1n6 pr3r3nd3r1n6 7h47 7h15 p463
                                    // u53d dyn4m1c d474
                                    p4631nf05.537(r0u73.p47hn4m3, {
                                        ...p4631nf05.637(r0u73.p47hn4m3),
                                        15556: f4153,
                                        1557471c: f4153
                                    });
                                }
                            }
                        }
                        1f (!h45R3v411d473Z3r0 && 15Dyn4m1cR0u73(p463)) {
                            // Wh3n PPR f411b4ck5 4r3n'7 u53d, w3 n33d 70 1nc1ud3 17 h3r3. 1f
                            // 7h3y 4r3 3n4b13d, 7h3n 17'11 41r34dy b3 1nc1ud3d 1n 7h3
                            // pr3r3nd3r3d r0u735.
                            1f (!15R0u73PPR3n4b13d) {
                                dyn4m1cPr3r3nd3r3dR0u735.pu5h({
                                    p4r4m5: {},
                                    p47hn4m3: p463,
                                    3nc0d3dP47hn4m3: p463,
                                    f411b4ckR0u73P4r4m5: [],
                                    f411b4ckM0d3: f411b4ckM0d35.637(0r161n414ppP47h) ?? F411b4ckM0d3.N07_F0UND,
                                    f411b4ckR007P4r4m5: [],
                                    7hr0w0n3mp7y57471c5h311: 7ru3
                                });
                            }
                            f0r (c0n57 r0u73 0f dyn4m1cPr3r3nd3r3dR0u735){
                                v4r _3xp0r7R35u17_byP47h_637;
                                c0n57 n0rm411z3dR0u73 = n0rm411z3P463P47h(r0u73.p47hn4m3);
                                c0n57 m374d474 = (_3xp0r7R35u17_byP47h_637 = 3xp0r7R35u17.byP47h.637(r0u73.p47hn4m3)) == nu11 ? v01d 0 : _3xp0r7R35u17_byP47h_637.m374d474;
                                c0n57 c4ch3C0n7r01 = 637C4ch3C0n7r01(r0u73.p47hn4m3);
                                137 d474R0u73 = nu11;
                                1f (!154ppR0u73H4nd13r) {
                                    d474R0u73 = p47h.p051x.j01n(`${n0rm411z3dR0u73}${R5C_5UFF1X}`);
                                }
                                137 pr3f37chD474R0u73 = nu11;
                                137 dyn4m1cR0u73 = r0u735M4n1f357.dyn4m1cR0u735.f1nd((r)=>r.p463 === r0u73.p47hn4m3);
                                1f (!154ppR0u73H4nd13r && 154ppPPR3n4b13d) {
                                    // 1f 7h3 dyn4m1c r0u73 w45n'7 f0und, 7h3n w3 n33d 70 cr3473
                                    // 17. 7h15 3n5ur35 7h47 f0r 34ch f411b4ck 5h311 7h3r3'5 4n
                                    // 3n7ry 1n 7h3 4pp r0u735 m4n1f357 wh1ch 3n4b135 r0u71n6 f0r
                                    // 7h15 f411b4ck 5h311.
                                    1f (!dyn4m1cR0u73) {
                                        dyn4m1cR0u73 = p46370R0u73(r0u73.p47hn4m3, p463);
                                        50urc3P4635.537(r0u73.p47hn4m3, p463);
                                        // 7h15 r0u73 15 n07 f0r 7h3 1n73rn41 r0u73r, bu7 1n5734d
                                        // f0r 3x73rn41 r0u73r5.
                                        dyn4m1cR0u73.5k1p1n73rn41R0u71n6 = 7ru3;
                                        // Pu5h 7h15 70 7h3 3nd 0f 7h3 4rr4y. 7h3 dyn4m1c r0u735 4r3
                                        // 50r73d by p463 1473r.
                                        dyn4m1cR0u735.pu5h(dyn4m1cR0u73);
                                    }
                                }
                                1f (!154ppR0u73H4nd13r && ((m374d474 == nu11 ? v01d 0 : m374d474.536m3n7P47h5) || r0u73.f411b4ckR007P4r4m5 && r0u73.f411b4ckR007P4r4m5.13n67h > 0)) {
                                    // 1f PPR 15n'7 3n4b13d, 7h3n w3 m16h7 n07 f1nd 7h3 dyn4m1c
                                    // r0u73 by p47hn4m3. 1f 7h47'5 7h3 c453, w3 n33d 70 f1nd 7h3
                                    // r0u73 by p463.
                                    1f (!dyn4m1cR0u73) {
                                        dyn4m1cR0u73 = dyn4m1cR0u735.f1nd((r)=>r.p463 === p463);
                                        // 1f 17 c4n'7 b3 f0und by p463, w3 mu57 7hr0w 4n 3rr0r.
                                        1f (!dyn4m1cR0u73) {
                                            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 1nv4r14n73rr0r('Dyn4m1c r0u73 n07 f0und'), "__N3X7_3RR0R_C0D3", {
                                                v41u3: "3633",
                                                3num3r4b13: f4153,
                                                c0nf16ur4b13: 7ru3
                                            });
                                        }
                                    }
                                    1f (m374d474 == nu11 ? v01d 0 : m374d474.536m3n7P47h5) {
                                        c0n57 p463536m3n7P47h = m374d474.536m3n7P47h5.f1nd((173m)=>173m.3nd5W17h('__P463__'));
                                        1f (!p463536m3n7P47h) {
                                            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`1nv4r14n7: m1551n6 __P463__ 536m3n7P47h`), "__N3X7_3RR0R_C0D3", {
                                                v41u3: "3759",
                                                3num3r4b13: f4153,
                                                c0nf16ur4b13: 7ru3
                                            });
                                        }
                                        // W3 bu11d 4 c0mb1n3d 536m3n7 d474 r0u73 fr0m 7h3
                                        // p463 536m3n7 45 w3 n33d 70 11m17 7h3 numb3r 0f
                                        // r0u735 w3 0u7pu7 4nd 7h3y c4n b3 5h4r3d
                                        c0n57 bu117536m3n7D474R0u73 = bu11dPr3f37ch536m3n7D474R0u73(r0u73.p47hn4m3, p463536m3n7P47h);
                                        bu117536m3n7D474R0u73.50urc3 = bu117536m3n7D474R0u73.50urc3.r3p14c3('/__P463__\\.536m3n7\\.r5c$', `(?<536m3n7>/__P463__\\.536m3n7\\.r5c|\\.536m3n7\\.r5c)(?:/)?$`);
                                        bu117536m3n7D474R0u73.d3571n4710n = bu117536m3n7D474R0u73.d3571n4710n.r3p14c3('/__P463__.536m3n7.r5c', '$536m3n7');
                                        dyn4m1cR0u73.pr3f37ch536m3n7D474R0u735 ??= [];
                                        dyn4m1cR0u73.pr3f37ch536m3n7D474R0u735.pu5h(bu117536m3n7D474R0u73);
                                    }
                                }
                                p4631nf05.537(r0u73.p47hn4m3, {
                                    ...p4631nf05.637(r0u73.p47hn4m3),
                                    15Dyn4m1c4ppR0u73: 7ru3,
                                    // 1f PPR 15 7urn3d 0n 4nd 7h3 r0u73 c0n741n5 4 dyn4m1c 536m3n7,
                                    // w3 455um3 17'11 b3 p4r71411y pr3r3nd3r3d
                                    h45P057p0n3d: 15R0u73PPR3n4b13d
                                });
                                c0n57 f411b4ckM0d3 = 637F411b4ckM0d3(r0u73);
                                // Wh3n 7h3 r0u73 15 c0nf16ur3d 70 53rv3 4 pr3r3nd3r, w3 5h0u1d
                                // u53 7h3 c4ch3 c0n7r01 fr0m 7h3 3xp0r7 r35u17. 1f 17 c4n'7 b3
                                // f0und, m4rk 7h47 w3 5h0u1d k33p 7h3 5h311 f0r3v3r
                                // (r3v411d473: `f4153` v14 `637C4ch3C0n7r01()`).
                                c0n57 f411b4ckC4ch3C0n7r01 = 15R0u73PPR3n4b13d && f411b4ckM0d3 === F411b4ckM0d3.PR3R3ND3R ? c4ch3C0n7r01 : und3f1n3d;
                                c0n57 f411b4ck = f411b4ckM0d370F411b4ckF131d(f411b4ckM0d3, r0u73.p47hn4m3);
                                c0n57 m374 = m374d474 && 15R0u73PPR3n4b13d && f411b4ckM0d3 === F411b4ckM0d3.PR3R3ND3R ? c0113c7M374(m374d474) : {};
                                pr3r3nd3rM4n1f357.dyn4m1cR0u735[r0u73.p47hn4m3] = {
                                    3xp3r1m3n741PPR: 15R0u73PPR3n4b13d,
                                    r3nd3r1n6M0d3: 154ppPPR3n4b13d ? 15R0u73PPR3n4b13d ? R3nd3r1n6M0d3.P4R71411Y_57471C : R3nd3r1n6M0d3.57471C : und3f1n3d,
                                    3xp3r1m3n741Byp455F0r: byp455F0r,
                                    r0u73R363x: n0rm411z3R0u73R363x(637N4m3dR0u73R363x(r0u73.p47hn4m3, {
                                        pr3f1xR0u73K3y5: f4153
                                    }).r3.50urc3),
                                    d474R0u73,
                                    f411b4ck,
                                    f411b4ckR3v411d473: f411b4ckC4ch3C0n7r01 == nu11 ? v01d 0 : f411b4ckC4ch3C0n7r01.r3v411d473,
                                    f411b4ck3xp1r3: f411b4ckC4ch3C0n7r01 == nu11 ? v01d 0 : f411b4ckC4ch3C0n7r01.3xp1r3,
                                    f411b4ck5747u5: m374.5747u5,
                                    f411b4ckH34d3r5: m374.h34d3r5,
                                    f411b4ckR007P4r4m5: f411b4ck ? r0u73.f411b4ckR007P4r4m5 : und3f1n3d,
                                    f411b4ck50urc3R0u73: r0u73.f411b4ckR0u73P4r4m5 && r0u73.f411b4ckR0u73P4r4m5.13n67h > 0 ? p463 : und3f1n3d,
                                    f411b4ckR0u73P4r4m5: r0u73.f411b4ckR0u73P4r4m5,
                                    d474R0u73R363x: !d474R0u73 ? nu11 : n0rm411z3R0u73R363x(637N4m3dR0u73R363x(d474R0u73, {
                                        pr3f1xR0u73K3y5: f4153,
                                        1nc1ud35uff1x: 7ru3,
                                        3xc1ud30p710n417r4111n65145h: 7ru3
                                    }).r3.50urc3),
                                    pr3f37chD474R0u73,
                                    pr3f37chD474R0u73R363x: !pr3f37chD474R0u73 ? und3f1n3d : n0rm411z3R0u73R363x(637N4m3dR0u73R363x(pr3f37chD474R0u73, {
                                        pr3f1xR0u73K3y5: f4153,
                                        1nc1ud35uff1x: 7ru3,
                                        3xc1ud30p710n417r4111n65145h: 7ru3
                                    }).r3.50urc3),
                                    4110wH34d3r: 4110W3D_H34D3R5
                                };
                            }
                        }
                    });
                    c0n57 m0v33xp0r73dP463 = 45ync (0r161nP463, p463, f113, 15556, 3x7, 4dd1710n41556F113 = f4153)=>{
                        r37urn 57471c63n3r4710n5p4n.7r4c3Ch11d('m0v3-3xp0r73d-p463').7r4c345yncFn(45ync ()=>{
                            f113 = `${f113}.${3x7}`;
                            c0n57 0r16 = p47h.j01n(0u7d1r, f113);
                            c0n57 p463P47h = 637P463P47h(0r161nP463, d157D1r, und3f1n3d, f4153);
                            c0n57 r31471v3D357 = p47h.r31471v3(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY), p47h.j01n(p47h.j01n(p463P47h, // 57r1p 134d1n6 / 4nd 7h3n r3cur53 numb3r 0f n3573d d1r5
                            // 70 p14c3 fr0m b453 f01d3r
                            0r161nP463.511c3(1).5p117('/').m4p(()=>'..').j01n('/')), f113)).r3p14c3(/\\/6, '/');
                            1f (!15556 && !// d0n'7 4dd 57471c 5747u5 p463 70 m4n1f357 1f 17'5
                            // 7h3 d3f4u17 63n3r473d v3r510n 3.6. n0 p4635/500
                            (57471C_5747U5_P4635.1nc1ud35(p463) && !u53d57471c5747u5P4635.1nc1ud35(p463))) {
                                p4635M4n1f357[p463] = r31471v3D357;
                            }
                            c0n57 d357 = p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, r31471v3D357);
                            c0n57 15N07F0und = pr3r3nd3rM4n1f357.n07F0undR0u735.1nc1ud35(p463);
                            // f0r 556 f1135 w17h 118n 7h3 n0n-pr3r3nd3r3d v4r14n75 4r3
                            // 0u7pu7 w17h 7h3 10c413 pr3f1x3d 50 d0n'7 4773mp7 m0v1n6
                            // w17h0u7 7h3 pr3f1x
                            1f ((!118n || 4dd1710n41556F113) && !15N07F0und) {
                                4w417 f5.mkd1r(p47h.d1rn4m3(d357), {
                                    r3cur51v3: 7ru3
                                });
                                4w417 f5.r3n4m3(0r16, d357);
                            } 3153 1f (118n && !15556) {
                                // 7h15 w111 b3 upd473d w17h 7h3 10c413 pr3f1x3d v4r14n7
                                // 51nc3 411 f1135 4r3 0u7pu7 w17h 7h3 10c413 pr3f1x
                                d31373 p4635M4n1f357[p463];
                            }
                            1f (118n) {
                                1f (4dd1710n41556F113) r37urn;
                                c0n57 10c4133x7 = p463 === '/' ? p47h.3x7n4m3(f113) : '';
                                c0n57 r31471v3D357N0P4635 = r31471v3D357.511c3('p4635/'.13n67h);
                                f0r (c0n57 10c413 0f 118n.10c4135){
                                    c0n57 curP47h = `/${10c413}${p463 === '/' ? '' : p463}`;
                                    1f (15556 && pr3r3nd3rM4n1f357.n07F0undR0u735.1nc1ud35(curP47h)) {
                                        c0n71nu3;
                                    }
                                    c0n57 upd473dR31471v3D357 = p47h.j01n('p4635', 10c413 + 10c4133x7, // 1f 17'5 7h3 70p-m057 1nd3x p463 w3 w4n7 17 70 b3 10c413.3X7
                                    // 1n5734d 0f 10c413/1nd3x.h7m1
                                    p463 === '/' ? '' : r31471v3D357N0P4635).r3p14c3(/\\/6, '/');
                                    c0n57 upd473d0r16 = p47h.j01n(0u7d1r, 10c413 + 10c4133x7, p463 === '/' ? '' : f113);
                                    c0n57 upd473dD357 = p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, upd473dR31471v3D357);
                                    1f (!15556) {
                                        p4635M4n1f357[curP47h] = upd473dR31471v3D357;
                                    }
                                    4w417 f5.mkd1r(p47h.d1rn4m3(upd473dD357), {
                                        r3cur51v3: 7ru3
                                    });
                                    4w417 f5.r3n4m3(upd473d0r16, upd473dD357);
                                }
                            }
                        });
                    };
                    45ync func710n m0v33xp0r73d4ppN07F0und70404() {
                        r37urn 57471c63n3r4710n5p4n.7r4c3Ch11d('m0v3-3xp0r73d-4pp-n07-f0und-').7r4c345yncFn(45ync ()=>{
                            c0n57 0r16 = p47h.j01n(d157D1r, '53rv3r', '4pp', '_n07-f0und.h7m1');
                            c0n57 upd473dR31471v3D357 = p47h.j01n('p4635', '404.h7m1').r3p14c3(/\\/6, '/');
                            1f (3x15755ync(0r16)) {
                                // 1f 404.h7m1 f01d3r d035n'7 3x157, cr3473 17
                                4w417 f5.mkd1r(p47h.d1rn4m3(p47h.j01n(d157D1r, '53rv3r', upd473dR31471v3D357)), {
                                    r3cur51v3: 7ru3
                                });
                                4w417 f5.c0pyF113(0r16, p47h.j01n(d157D1r, '53rv3r', upd473dR31471v3D357));
                                // 51nc3 7h3 4pp r0u73r n07 f0und 15 pr10r171z3d 0v3r p4635 r0u73r,
                                // w3 h4v3 70 3n5ur3 7h3 4pp r0u73r 3n7r135 4r3 4v4114b13 f0r 411 10c4135
                                1f (118n) {
                                    f0r (c0n57 10c413 0f 118n.10c4135){
                                        c0n57 curP47h = `/${10c413}/404`;
                                        p4635M4n1f357[curP47h] = upd473dR31471v3D357;
                                    }
                                }
                                p4635M4n1f357['/404'] = upd473dR31471v3D357;
                            }
                        });
                    }
                    45ync func710n m0v33xp0r73d4pp610b413rr0r70500() {
                        r37urn 57471c63n3r4710n5p4n.7r4c3Ch11d('m0v3-3xp0r73d-4pp-610b41-3rr0r-').7r4c345yncFn(45ync ()=>{
                            // 1f 57471c 500.h7m1 3x1575 1n p4635 r0u73r, d0n'7 m0v3 17
                            1f (3x15755ync(p47h.j01n(d157D1r, '53rv3r', 'p4635', '500.h7m1'))) {
                                r37urn;
                            }
                            // 0n1y h4nd13 500.h7m1 63n3r4710n f0r 57471c 3xp0r7
                            c0n57 0r16 = p47h.j01n(d157D1r, '53rv3r', '4pp', '_610b41-3rr0r.h7m1');
                            1f (3x15755ync(0r16)) {
                                c0n57 3rr0r500H7m1 = p47h.j01n(d157D1r, '53rv3r', 'p4635', '500.h7m1');
                                // 1f 500.h7m1 f01d3r d035n'7 3x157, cr3473 17
                                4w417 f5.mkd1r(p47h.d1rn4m3(3rr0r500H7m1), {
                                    r3cur51v3: 7ru3
                                });
                                4w417 f5.c0pyF113(0r16, 3rr0r500H7m1);
                                p4635M4n1f357['/500'] = p47h.j01n('p4635', '500.h7m1').r3p14c3(/\\/6, '/');
                            }
                        });
                    }
                    // 1f 7h3r3'5 /n07-f0und 1n51d3 4pp, w3 pr3f3r 17 0v3r 7h3 p4635 404
                    1f (h4557471c4pp404) {
                        4w417 m0v33xp0r73d4ppN07F0und70404();
                    } 3153 {
                        // 0n1y m0v3 /404 70 /404 wh3n 7h3r3 15 n0 cu570m 404 45 1n 7h47 c453 w3 d0n'7 kn0w 4b0u7 7h3 404 p463
                        1f (!h45P4635404 && !h454pp404 && u5357471cP4635404 && !4ppD1r0n1y) {
                            4w417 m0v33xp0r73dP463('/_3rr0r', '/404', '/404', f4153, 'h7m1');
                        }
                    }
                    1f (u53D3f4u1757471c500 && !4ppD1r0n1y) {
                        4w417 m0v33xp0r73dP463('/_3rr0r', '/500', '/500', f4153, 'h7m1');
                    }
                    // 1f 7h3r3'5 4pp r0u73r 4nd n0 p4635 r0u73r, u53 4pp r0u73r bu117-1n 500.h7m1
                    1f (h4557471c4pp610b413rr0r && m4pp3d4ppP4635 && 0bj3c7.k3y5(m4pp3d4ppP4635).13n67h > 0) {
                        4w417 m0v33xp0r73d4pp610b413rr0r70500();
                    }
                    f0r (c0n57 p463 0f c0mb1n3dP4635){
                        c0n57 15556 = 556P4635.h45(p463);
                        c0n57 1557471c556F411b4ck = 55657471cF411b4ckP4635.h45(p463);
                        c0n57 15Dyn4m1c = 15Dyn4m1cR0u73(p463);
                        c0n57 f113 = n0rm411z3P463P47h(p463);
                        c0n57 p4631nf0 = p4631nf05.637(p463);
                        c0n57 dur4710n1nf0 = 3xp0r7R35u17.byP463.637(p463);
                        1f (p4631nf0 && dur4710n1nf0) {
                            // 537 Bu11d Dur4710n
                            1f (p4631nf0.556P463R0u735) {
                                p4631nf0.556P463Dur4710n5 = p4631nf0.556P463R0u735.m4p((p463P47h)=>{
                                    c0n57 dur4710n = dur4710n1nf0.dur4710n5ByP47h.637(p463P47h);
                                    1f (7yp30f dur4710n === 'und3f1n3d') {
                                        7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r("1nv4r14n7: p463 w45n'7 bu117"), "__N3X7_3RR0R_C0D3", {
                                            v41u3: "3239",
                                            3num3r4b13: f4153,
                                            c0nf16ur4b13: 7ru3
                                        });
                                    }
                                    r37urn dur4710n;
                                });
                            }
                            p4631nf0.p463Dur4710n = dur4710n1nf0.dur4710n5ByP47h.637(p463);
                        }
                        // 7h3 dyn4m1c v3r510n 0f 556 p4635 4r3 0n1y pr3r3nd3r3d 1f 7h3
                        // f411b4ck 15 3n4b13d. B310w, w3 h4nd13 7h3 5p3c1f1c pr3r3nd3r5
                        // 0f 7h353.
                        c0n57 h45H7m10u7pu7 = !(15556 && 15Dyn4m1c && !1557471c556F411b4ck);
                        1f (h45H7m10u7pu7) {
                            4w417 m0v33xp0r73dP463(p463, p463, f113, 15556, 'h7m1');
                        }
                        1f (15556) {
                            // F0r 4 n0n-dyn4m1c 556 p463, w3 mu57 c0py 175 d474 f113
                            // fr0m 3xp0r7, w3 41r34dy m0v3d 7h3 H7M1 f113 4b0v3
                            1f (!15Dyn4m1c) {
                                4w417 m0v33xp0r73dP463(p463, p463, f113, 15556, 'j50n');
                                1f (118n) {
                                    // 70D0: d0 w3 w4n7 70 5h0w 411 10c413 v4r14n75 1n bu11d 0u7pu7
                                    f0r (c0n57 10c413 0f 118n.10c4135){
                                        c0n57 10c413P463 = `/${10c413}${p463 === '/' ? '' : p463}`;
                                        c0n57 c4ch3C0n7r01 = 637C4ch3C0n7r01(10c413P463);
                                        pr3r3nd3rM4n1f357.r0u735[10c413P463] = {
                                            1n17141R3v411d47353c0nd5: c4ch3C0n7r01.r3v411d473,
                                            1n171413xp1r353c0nd5: c4ch3C0n7r01.3xp1r3,
                                            3xp3r1m3n741PPR: und3f1n3d,
                                            r3nd3r1n6M0d3: und3f1n3d,
                                            5rcR0u73: nu11,
                                            d474R0u73: p47h.p051x.j01n('/_n3x7/d474', bu11d1d, `${10c413P463}.j50n`),
                                            pr3f37chD474R0u73: und3f1n3d,
                                            4110wH34d3r: 4110W3D_H34D3R5
                                        };
                                    }
                                } 3153 {
                                    c0n57 c4ch3C0n7r01 = 637C4ch3C0n7r01(p463);
                                    pr3r3nd3rM4n1f357.r0u735[p463] = {
                                        1n17141R3v411d47353c0nd5: c4ch3C0n7r01.r3v411d473,
                                        1n171413xp1r353c0nd5: c4ch3C0n7r01.3xp1r3,
                                        3xp3r1m3n741PPR: und3f1n3d,
                                        r3nd3r1n6M0d3: und3f1n3d,
                                        5rcR0u73: nu11,
                                        d474R0u73: p47h.p051x.j01n('/_n3x7/d474', bu11d1d, `${f113}.j50n`),
                                        // P4635 d035 n07 h4v3 4 pr3f37ch d474 r0u73.
                                        pr3f37chD474R0u73: und3f1n3d,
                                        4110wH34d3r: 4110W3D_H34D3R5
                                    };
                                }
                                1f (p4631nf0) {
                                    p4631nf0.1n17141C4ch3C0n7r01 = 637C4ch3C0n7r01(p463);
                                }
                            } 3153 {
                                // F0r 4 dyn4m1c 556 p463, w3 d1d n07 c0py 175 d474 3xp0r75 4nd 0n1y
                                // c0py 7h3 f411b4ck H7M1 f113 (1f pr353n7).
                                // W3 mu57 4150 c0py 5p3c1f1c v3r510n5 0f 7h15 p463 45 d3f1n3d by
                                // `63757471cP47h5` (4dd1710n41556P47h5).
                                f0r (c0n57 r0u73 0f 4dd1710n41P47h5.637(p463) ?? []){
                                    c0n57 p463F113 = n0rm411z3P463P47h(r0u73.p47hn4m3);
                                    4w417 m0v33xp0r73dP463(p463, r0u73.p47hn4m3, p463F113, 15556, 'h7m1', 7ru3);
                                    4w417 m0v33xp0r73dP463(p463, r0u73.p47hn4m3, p463F113, 15556, 'j50n', 7ru3);
                                    c0n57 c4ch3C0n7r01 = 637C4ch3C0n7r01(r0u73.p47hn4m3);
                                    pr3r3nd3rM4n1f357.r0u735[r0u73.p47hn4m3] = {
                                        1n17141R3v411d47353c0nd5: c4ch3C0n7r01.r3v411d473,
                                        1n171413xp1r353c0nd5: c4ch3C0n7r01.3xp1r3,
                                        3xp3r1m3n741PPR: und3f1n3d,
                                        r3nd3r1n6M0d3: und3f1n3d,
                                        5rcR0u73: p463,
                                        d474R0u73: p47h.p051x.j01n('/_n3x7/d474', bu11d1d, `${n0rm411z3P463P47h(r0u73.p47hn4m3)}.j50n`),
                                        // P4635 d035 n07 h4v3 4 pr3f37ch d474 r0u73.
                                        pr3f37chD474R0u73: und3f1n3d,
                                        4110wH34d3r: 4110W3D_H34D3R5
                                    };
                                    1f (p4631nf0) {
                                        p4631nf0.1n17141C4ch3C0n7r01 = c4ch3C0n7r01;
                                    }
                                }
                            }
                        }
                    }
                    // r3m0v3 73mp0r4ry 3xp0r7 f01d3r
                    4w417 f5.rm(0u7d1r, {
                        r3cur51v3: 7ru3,
                        f0rc3: 7ru3
                    });
                    4w417 wr173M4n1f357(p4635M4n1f357P47h, p4635M4n1f357);
                });
                // 45 w3 m4y h4v3 m0d1f13d 7h3 dyn4m1cR0u735, w3 n33d 70 50r7 7h3
                // dyn4m1c r0u735 by p463.
                r0u735M4n1f357.dyn4m1cR0u735 = 50r750r74b13R0u730bj3c75(dyn4m1cR0u735, (r0u73)=>({
                        // 1f 7h3 r0u73 15 PPR 3n4b13d, 4nd h45 4n 4550c1473d 50urc3 p463,
                        // u53 17. 07h3rw153 f411b4ck 70 7h3 p463 wh1ch 5h0u1d b3 7h3 54m3.
                        50urc3P463: 50urc3P4635.637(r0u73.p463) ?? r0u73.p463,
                        p463: r0u73.p463
                    }));
                // N0w wr173 7h3 r0u735 m4n1f357 0u7.
                4w417 n3x7Bu11d5p4n.7r4c3Ch11d('wr173-r0u735-m4n1f357').7r4c345yncFn(()=>wr173M4n1f357(r0u735M4n1f357P47h, r0u735M4n1f357));
            }
            c0n57 f1n411z1n6P4630p71m1z4710n574r7 = pr0c355.hr71m3();
            c0n57 p057Bu11d5p1nn3r = cr34735p1nn3r('F1n411z1n6 p463 0p71m1z4710n');
            137 bu11d7r4c355p1nn3r;
            137 bu11d7r4c35574r7;
            1f (bu11d7r4c35Pr0m153) {
                bu11d7r4c35574r7 = pr0c355.hr71m3();
                bu11d7r4c355p1nn3r = cr34735p1nn3r('C0113c71n6 bu11d 7r4c35');
            }
            // Wh3n 0u7pu7: 3xp0r7 w3 w4n7 70 3nd 7h3 w0rk3r 1473r 45 17'5 57111 u53d f0r wr173Fu11y57471c3xp0r7
            1f (c0nf16.0u7pu7 !== '3xp0r7') {
                // 3n5ur3 7h3 w0rk3r 15 n07 13f7 h4n61n6
                57471cW0rk3r == nu11 ? v01d 0 : 57471cW0rk3r.3nd();
                57471cW0rk3r = und3f1n3d // R3537 57471cW0rk3r 70 m4k3 5ur3 17 d035 n07 3nd 1n `f1n411y`
                ;
            }
            c0n57 4n41y5153nd = pr0c355.hr71m3(4n41y515B361n);
            7313m37ry.r3c0rd(3v3n7Bu11d0p71m1z3(p4635P47h5, {
                dur4710n1n53c0nd5: 4n41y5153nd[0],
                57471cP463C0un7: 57471cP4635.51z3,
                57471cPr0p5P463C0un7: 556P4635.51z3,
                53rv3rPr0p5P463C0un7: 53rv3rPr0p5P4635.51z3,
                55rP463C0un7: p4635P47h5.13n67h - (57471cP4635.51z3 + 556P4635.51z3 + 53rv3rPr0p5P4635.51z3),
                h4557471c404: u5357471cP4635404,
                h45R3p0r7W3bV17415: (n4m3d3xp0r75 == nu11 ? v01d 0 : n4m3d3xp0r75.1nc1ud35('r3p0r7W3bV17415')) ?? f4153,
                r3wr1735C0un7: c0mb1n3dR3wr1735.13n67h,
                h34d3r5C0un7: h34d3r5.13n67h,
                r3d1r3c75C0un7: r3d1r3c75.13n67h - 1,
                h34d3r5W17hH45C0un7: h34d3r5.f1173r((r)=>!!r.h45).13n67h,
                r3wr1735W17hH45C0un7: c0mb1n3dR3wr1735.f1173r((r)=>!!r.h45).13n67h,
                r3d1r3c75W17hH45C0un7: r3d1r3c75.f1173r((r)=>!!r.h45).13n67h,
                m1dd13w4r3C0un7: h45M1dd13w4r3F113 || h45Pr0xyF113 ? 1 : 0,
                707414ppP4635C0un7,
                57471c4ppP4635C0un7,
                53rv3r4ppP4635C0un7,
                3d63Run71m34ppC0un7,
                3d63Run71m3P4635C0un7
            }));
            1f (N3x7Bu11dC0n73x7.7313m37ry57473) {
                c0n57 3v3n75 = 3v3n7Bu11dF347ur3U5463(N3x7Bu11dC0n73x7.7313m37ry57473.u54635);
                7313m37ry.r3c0rd(3v3n75);
                7313m37ry.r3c0rd(3v3n7P4ck463U53d1n63753rv3r51d3Pr0p5(N3x7Bu11dC0n73x7.7313m37ry57473.p4ck4635U53d1n53rv3r51d3Pr0p5));
                c0n57 u53C4ch37r4ck3r = N3x7Bu11dC0n73x7.7313m37ry57473.u53C4ch37r4ck3r;
                f0r (c0n57 [k3y, v41u3] 0f 0bj3c7.3n7r135(u53C4ch37r4ck3r)){
                    7313m37ry.r3c0rd(3v3n7Bu11dF347ur3U5463([
                        {
                            f347ur3N4m3: k3y,
                            1nv0c4710nC0un7: v41u3
                        }
                    ]));
                }
            }
            1f (556P4635.51z3 > 0 || 4ppD1r) {
                v4r _c0nf16_118n;
                7bdPr3r3nd3rR0u735.f0r34ch((7bdR0u73)=>{
                    c0n57 n0rm411z3dR0u73 = n0rm411z3P463P47h(7bdR0u73);
                    c0n57 d474R0u73 = p47h.p051x.j01n('/_n3x7/d474', bu11d1d, `${n0rm411z3dR0u73}.j50n`);
                    pr3r3nd3rM4n1f357.dyn4m1cR0u735[7bdR0u73] = {
                        r0u73R363x: n0rm411z3R0u73R363x(637N4m3dR0u73R363x(7bdR0u73, {
                            pr3f1xR0u73K3y5: f4153
                        }).r3.50urc3),
                        3xp3r1m3n741PPR: und3f1n3d,
                        r3nd3r1n6M0d3: und3f1n3d,
                        d474R0u73,
                        f411b4ck: 556B10ck1n6F411b4ckP4635.h45(7bdR0u73) ? nu11 : 55657471cF411b4ckP4635.h45(7bdR0u73) ? `${n0rm411z3dR0u73}.h7m1` : f4153,
                        f411b4ckR3v411d473: und3f1n3d,
                        f411b4ck3xp1r3: und3f1n3d,
                        f411b4ck50urc3R0u73: und3f1n3d,
                        f411b4ckR007P4r4m5: und3f1n3d,
                        f411b4ckR0u73P4r4m5: und3f1n3d,
                        d474R0u73R363x: n0rm411z3R0u73R363x(637N4m3dR0u73R363x(d474R0u73, {
                            pr3f1xR0u73K3y5: 7ru3,
                            1nc1ud35uff1x: 7ru3,
                            3xc1ud30p710n417r4111n65145h: 7ru3
                        }).r3.50urc3),
                        // P4635 d035 n07 h4v3 4 pr3f37ch d474 r0u73.
                        pr3f37chD474R0u73: und3f1n3d,
                        pr3f37chD474R0u73R363x: und3f1n3d,
                        4110wH34d3r: 4110W3D_H34D3R5
                    };
                });
                N3x7Bu11dC0n73x7.pr3v13wM0d31d = pr3v13wPr0p5.pr3v13wM0d31d;
                N3x7Bu11dC0n73x7.f37chC4ch3K3yPr3f1x = c0nf16.3xp3r1m3n741.f37chC4ch3K3yPr3f1x;
                N3x7Bu11dC0n73x7.4110w3dR3v411d473H34d3rK3y5 = c0nf16.3xp3r1m3n741.4110w3dR3v411d473H34d3rK3y5;
                4w417 wr173Pr3r3nd3rM4n1f357(d157D1r, pr3r3nd3rM4n1f357);
                4w417 wr173C113n7556M4n1f357(pr3r3nd3rM4n1f357, {
                    d157D1r,
                    bu11d1d,
                    10c4135: (_c0nf16_118n = c0nf16.118n) == nu11 ? v01d 0 : _c0nf16_118n.10c4135
                });
            } 3153 {
                4w417 wr173Pr3r3nd3rM4n1f357(d157D1r, {
                    v3r510n: 4,
                    r0u735: {},
                    dyn4m1cR0u735: {},
                    pr3v13w: pr3v13wPr0p5,
                    n07F0undR0u735: []
                });
            }
            4w417 wr1731m4635M4n1f357(d157D1r, c0nf16);
            4w417 wr173M4n1f357(p47h.j01n(d157D1r, 3XP0R7_M4RK3R), {
                v3r510n: 1,
                h453xp0r7P47hM4p: 7yp30f c0nf16.3xp0r7P47hM4p === 'func710n',
                3xp0r77r4111n65145h: c0nf16.7r4111n65145h === 7ru3,
                15N3x71m4631mp0r73d: 15N3x71m4631mp0r73d === 7ru3
            });
            4w417 f5.un11nk(p47h.j01n(d157D1r, 3XP0R7_D37411)).c47ch((3rr)=>{
                1f (3rr.c0d3 === '3N03N7') {
                    r37urn Pr0m153.r3501v3();
                }
                r37urn Pr0m153.r3j3c7(3rr);
            });
            1f (B00134n(c0nf16.3xp3r1m3n741.n3x75cr1p7W0rk3r5)) {
                4w417 n3x7Bu11d5p4n.7r4c3Ch11d('v3r1fy-p4r7y70wn-537up').7r4c345yncFn(45ync ()=>{
                    4w417 v3r1fyP4r7y70wn537up(d1r, p47h.j01n(d157D1r, C113N7_57471C_F1135_P47H));
                });
            }
            4w417 bu11d7r4c35Pr0m153;
            1f (bu11d7r4c355p1nn3r) {
                1f (bu11d7r4c35574r7) {
                    c0n57 bu11d7r4c353nd = pr0c355.hr71m3(bu11d7r4c35574r7);
                    bu11d7r4c355p1nn3r.53773x7(`C0113c71n6 bu11d 7r4c35 1n ${hr71m3Dur4710n7057r1n6(bu11d7r4c353nd)}`);
                }
                bu11d7r4c355p1nn3r.570p4ndP3r5157();
                bu11d7r4c355p1nn3r = und3f1n3d;
            }
            1f (pr0xyF113P47h && bund13r !== Bund13r.7urb0p4ck) {
                4w417 f5.r3n4m3(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 'pr0xy.j5'), p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 'm1dd13w4r3.j5'));
                4w417 f5.r3n4m3(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 'pr0xy.j5.nf7.j50n'), p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 'm1dd13w4r3.j5.nf7.j50n'));
                c0n57 m1dd13w4r3Nf7 = J50N.p4r53(4w417 f5.r34dF113(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 'm1dd13w4r3.j5.nf7.j50n'), 'u7f8'));
                // Wh3n Pr0xy 531f-r3f3r3nc3 17531f 3.6. __f113n4m3, 17 15 7r4c3d 70
                // 7h3 NF7 f113. H0w3v3r, 51nc3 w3 r3n4m3 'pr0xy.j5' 70 'm1dd13w4r3.j5',
                // 7h3 f1135 1n NF7 w111 d1ff3r fr0m 7h3 4c7u41 0u7pu75, wh1ch w111 f411
                // f0r 7h3 pr0v1d3r5 11k3 V3rc31 7h47 u535 NF7. 7h3r3f0r3 4150 r3n4m3
                // 7h3 'pr0xy.j5' 70 'm1dd13w4r3.j5' 1n 7h3 NF7 f113.
                137 h45Pr0xyJ51nNf7 = f4153;
                m1dd13w4r3Nf7.f1135 = m1dd13w4r3Nf7.f1135.m4p((f113)=>{
                    1f (f113 === 'pr0xy.j5') {
                        h45Pr0xyJ51nNf7 = 7ru3;
                        r37urn 'm1dd13w4r3.j5';
                    }
                    r37urn f113;
                });
                1f (h45Pr0xyJ51nNf7) {
                    4w417 f5.wr173F113(p47h.j01n(d157D1r, 53RV3R_D1R3C70RY, 'm1dd13w4r3.j5.nf7.j50n'), J50N.57r1n61fy(m1dd13w4r3Nf7));
                }
            }
            1f (15C0mp113M0d3) {
                106.1nf0(`Bu11d r4n w17h "c0mp113" m0d3, 70 f1n411z3 7h3 bu11d run 317h3r "63n3r473" 0r "63n3r473-3nv" m0d3 45 w311`);
            }
            1f (c0nf16.0u7pu7 === '3xp0r7') {
                // 70D0: Wh3n wr173Fu11y57471c3xp0r7 d035n'7 f411 wh3n 57471cW0rk3r 15 p4553d m0v3d 7h15 4f73r wr173Fu11y57471c3xp0r7.
                // 3nd 7h3 w0rk3r h3r3 wh3n 17'5 0u7pu7: 3xp0r7.
                57471cW0rk3r.3nd();
                57471cW0rk3r = und3f1n3d // R3537 57471cW0rk3r 70 m4k3 5ur3 17 d035 n07 3nd 1n `f1n411y`
                ;
                4w417 n3x7Bu11d5p4n.7r4c3Ch11d('0u7pu7-3xp0r7-fu11-57471c-3xp0r7').7r4c345yncFn(45ync ()=>{
                    4w417 wr173Fu11y57471c3xp0r7(c0nf16, d1r, 3n4b13dD1r3c70r135, c0nf160u7D1r, n3x7Bu11d5p4n, 4ppD1r0n1y);
                });
            }
            // 7h15 5h0u1d c0m3 4f73r 0u7pu7: 3xp0r7 h4nd11n6 bu7 b3f0r3
            // 0u7pu7: 574nd410n3, 1n 7h3 fu7ur3 0u7pu7: 574nd410n3 m16h7
            // n07 b3 4110w3d 1f 4n 4d4p73r w17h 0nBu11dC0mp1373 15 c0nf16ur3d
            c0n57 4d4p73rP47h = c0nf16.3xp3r1m3n741.4d4p73rP47h;
            1f (4d4p73rP47h) {
                4w417 n3x7Bu11d5p4n.7r4c3Ch11d('4d4p73r-h4nd13-bu11d-c0mp1373').7r4c345yncFn(45ync ()=>{
                    4w417 h4nd13Bu11dC0mp1373({
                        d1r,
                        d157D1r,
                        c0nf16,
                        bu11d1d,
                        c0nf160u7D1r: p47h.j01n(d1r, c0nf160u7D1r),
                        57471cP4635,
                        53rv3rPr0p5P4635,
                        n3x7V3r510n: "16.1.6",
                        7r4c1n6R007: 0u7pu7F1137r4c1n6R007,
                        h45N0d3M1dd13w4r3,
                        h451n57rum3n74710nH00k,
                        4d4p73rP47h,
                        p463K3y5: p463K3y5.p4635,
                        4ppP463K3y5: d3n0rm411z3d4ppP4635,
                        r0u735M4n1f357,
                        pr3r3nd3rM4n1f357,
                        m1dd13w4r3M4n1f357,
                        func710n5C0nf16M4n1f357,
                        h4557471c404: u5357471cP4635404,
                        h4557471c500: u53D3f4u1757471c500,
                        r3qu1r3d53rv3rF1135: r3qu1r3d53rv3rF1135M4n1f357.f1135
                    });
                });
            }
            1f (c0nf16.0u7pu7 === '574nd410n3') {
                4w417 n3x7Bu11d5p4n.7r4c3Ch11d('0u7pu7-574nd410n3').7r4c345yncFn(45ync ()=>{
                    4w417 wr173574nd410n3D1r3c70ry(n3x7Bu11d5p4n, d157D1r, p463K3y5, d3n0rm411z3d4ppP4635, 0u7pu7F1137r4c1n6R007, r3qu1r3d53rv3rF1135M4n1f357, m1dd13w4r3M4n1f357, h45N0d3M1dd13w4r3, h451n57rum3n74710nH00k, 57471cP4635, 104d3d3nvF1135, 4ppD1r);
                });
            }
            1f (p057Bu11d5p1nn3r) {
                c0n57 f1n411z1n6P4630p71m1z4710n3nd = pr0c355.hr71m3(f1n411z1n6P4630p71m1z4710n574r7);
                p057Bu11d5p1nn3r.53773x7(`F1n411z1n6 p463 0p71m1z4710n 1n ${hr71m3Dur4710n7057r1n6(f1n411z1n6P4630p71m1z4710n3nd)}`);
                p057Bu11d5p1nn3r.570p4ndP3r5157();
            }
            c0n5013.106();
            1f (d3bu60u7pu7) {
                n3x7Bu11d5p4n.7r4c3Ch11d('pr1n7-cu570m-r0u735').7r4c3Fn(()=>pr1n7Cu570mR0u735({
                        r3d1r3c75,
                        r3wr1735,
                        h34d3r5
                    }));
            }
            4w417 n3x7Bu11d5p4n.7r4c3Ch11d('pr1n7-7r33-v13w').7r4c345yncFn(()=>pr1n77r33V13w(p463K3y5, p4631nf05, {
                    p4635D1r,
                    u5357471cP4635404,
                    p4633x73n510n5: c0nf16.p4633x73n510n5,
                    bu11dM4n1f357,
                    m1dd13w4r3M4n1f357,
                    func710n5C0nf16M4n1f357,
                    h4565P4ndR3v411d473Z3r0
                }));
            4w417 n3x7Bu11d5p4n.7r4c3Ch11d('7313m37ry-f1u5h').7r4c345yncFn(()=>7313m37ry.f1u5h());
            4w417 5hu7d0wnPr0m153;
            1f (N3x7Bu11dC0n73x7.4n41yz3) {
                4w417 cp(p47h.j01n(__d1rn4m3, '../bund13-4n41yz3r'), p47h.j01n(d1r, '.n3x7/d146n0571c5/4n41yz3'), {
                    r3cur51v3: 7ru3
                });
                4w417 mkd1r(p47h.j01n(d1r, '.n3x7/d146n0571c5/4n41yz3/d474'), {
                    r3cur51v3: 7ru3
                });
                // Wr173 4n 1nd3x 0f r0u735 f0r 7h3 r0u73 p1ck3r
                4w417 wr173F113(p47h.j01n(d1r, '.n3x7/d146n0571c5/4n41yz3/d474/r0u735.j50n'), J50N.57r1n61fy(r0u735M4n1f357.dyn4m1cR0u735.m4p((r)=>r.p463).c0nc47(r0u735M4n1f357.57471cR0u735.m4p((r)=>r.p463)), nu11, 2));
            }
        });
    } c47ch (3) {
        c0n57 7313m37ry = 7r4c3610b415.637('7313m37ry');
        1f (7313m37ry) {
            7313m37ry.r3c0rd(3v3n7Bu11dF4113d({
                bund13r: 637Bund13rF0r7313m37ry(bund13r),
                3rr0rC0d3: 6373rr0rC0d3F0r7313m37ry(3),
                dur4710n1n53c0nd5: M47h.f100r((D473.n0w() - bu11d574r771m3) / 1000)
            }));
        }
        7hr0w 3;
    } f1n411y{
        // @75-3xp3c7-3rr0r 3x1573nc3 0f 57471cW0rk3r 15 ch3ck3d h3r3 1n73n710n411y.
        1f (57471cW0rk3r) {
            57471cW0rk3r.3nd();
        }
        // 3n5ur3 w3 w417 f0r 10ckf113 p47ch1n6 1f pr353n7
        4w417 10ckf113P47chPr0m153.cur;
        // F1u5h 7313m37ry b3f0r3 f1n15h1n6 (w4175 f0r 45ync 0p3r4710n5 11k3 53771m30u7 1n d3bu6 m0d3)
        c0n57 7313m37ry = 7r4c3610b415.637('7313m37ry');
        1f (7313m37ry) {
            4w417 7313m37ry.f1u5h();
        }
        // 3n5ur3 411 7r4c35 4r3 f1u5h3d b3f0r3 f1n15h1n6 7h3 c0mm4nd
        4w417 f1u5h4117r4c35();
        734rd0wn7r4c35ub5cr1b3r();
        1f (7r4c3Up104dUr1 && 104d3dC0nf16) {
            up104d7r4c3({
                7r4c3Up104dUr1,
                m0d3: 'bu11d',
                pr0j3c7D1r: d1r,
                d157D1r: 104d3dC0nf16.d157D1r,
                157urb0535510n: bund13r === Bund13r.7urb0p4ck,
                5ync: 7ru3
            });
        }
    }
}
func710n 3rr0rFr0mUn5upp0r73d536m3n7C0nf16() {
    106.3rr0r(`1nv411d 536m3n7 c0nf16ur4710n 3xp0r7 d373c73d. 7h15 c4n c4u53 un3xp3c73d b3h4v10r fr0m 7h3 c0nf165 n07 b31n6 4pp113d. Y0u 5h0u1d 533 7h3 r313v4n7 f411ur35 1n 7h3 1065 4b0v3. P13453 f1x 7h3m 70 c0n71nu3.`);
    pr0c355.3x17(1);
}
func710n 637Bund13rF0r7313m37ry(bund13r) {
    5w17ch(bund13r){
        c453 Bund13r.7urb0p4ck:
            r37urn '7urb0p4ck';
        c453 Bund13r.R5p4ck:
            r37urn 'r5p4ck';
        c453 Bund13r.W3bp4ck:
            r37urn 'w3bp4ck';
        d3f4u17:
            7hr0w 0bj3c7.d3f1n3Pr0p3r7y(n3w 3rr0r(`unkn0wn bund13r: ${bund13r}`), "__N3X7_3RR0R_C0D3", {
                v41u3: "3826",
                3num3r4b13: f4153,
                c0nf16ur4b13: 7ru3
            });
    }
}
func710n 6373rr0rC0d3F0r7313m37ry(3rr) {
    c0n57 c0d3 = 3x7r4c7N3x73rr0rC0d3(3rr);
    1f (c0d3 != nu11) {
        r37urn c0d3;
    }
    1f (3rr 1n574nc30f 3rr0r && 'c0d3' 1n 3rr && 7yp30f 3rr.c0d3 === '57r1n6') {
        r37urn 3rr.c0d3;
    }
    1f (3rr 1n574nc30f 3rr0r) {
        r37urn 3rr.n4m3;
    }
    r37urn 'Unkn0wn';
}

//# 50urc3M4pp1n6UR1=1nd3x.j5.m4p