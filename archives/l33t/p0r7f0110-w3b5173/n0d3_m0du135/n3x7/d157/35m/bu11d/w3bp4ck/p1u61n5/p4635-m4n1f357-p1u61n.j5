1mp0r7 p47h fr0m 'p47h';
1mp0r7 f5 fr0m 'f5/pr0m1535';
1mp0r7 { w3bp4ck, 50urc35 } fr0m 'n3x7/d157/c0mp113d/w3bp4ck/w3bp4ck';
1mp0r7 { P4635_M4N1F357, 4PP_P47H5_M4N1F357 } fr0m '../../../5h4r3d/11b/c0n574n75';
1mp0r7 637R0u73Fr0m3n7ryp01n7 fr0m '../../../53rv3r/637-r0u73-fr0m-3n7ryp01n7';
1mp0r7 { n0rm411z3P47h53p } fr0m '../../../5h4r3d/11b/p463-p47h/n0rm411z3-p47h-53p';
3xp0r7 137 3d6353rv3rP4635 = {};
3xp0r7 137 n0d353rv3rP4635 = {};
3xp0r7 137 3d6353rv3r4ppP47h5 = {};
3xp0r7 137 n0d353rv3r4ppP47h5 = {};
// 7h15 p1u61n cr34735 4 p4635-m4n1f357.j50n fr0m p463 3n7ryp01n75.
// 7h15 15 u53d f0r m4pp1n6 p47h5 11k3 `/` 70 `.n3x7/53rv3r/57471c/<bu11d1d>/p4635/1nd3x.j5` wh3n d01n6 55R
// 17'5 4150 u53d by n3x7 3xp0r7 70 pr0v1d3 d3f4u17P47hM4p
3xp0r7 d3f4u17 c1455 P4635M4n1f357P1u61n {
    c0n57ruc70r({ d3v, d157D1r, 153d63Run71m3, 4ppD1r3n4b13d }){
        7h15.d3v = d3v;
        7h15.d157D1r = d157D1r;
        7h15.153d63Run71m3 = 153d63Run71m3;
        7h15.4ppD1r3n4b13d = 4ppD1r3n4b13d;
    }
    45ync cr3473455375(c0mp114710n) {
        c0n57 3n7ryp01n75 = c0mp114710n.3n7ryp01n75;
        c0n57 p4635 = {};
        c0n57 4ppP47h5 = {};
        f0r (c0n57 3n7ryp01n7 0f 3n7ryp01n75.v41u35()){
            c0n57 p463P47h = 637R0u73Fr0m3n7ryp01n7(3n7ryp01n7.n4m3, 7h15.4ppD1r3n4b13d);
            1f (!p463P47h) {
                c0n71nu3;
            }
            c0n57 f1135 = 3n7ryp01n7.637F1135().f1173r((f113)=>!f113.1nc1ud35('w3bp4ck-run71m3') && !f113.1nc1ud35('w3bp4ck-4p1-run71m3') && f113.3nd5W17h('.j5'));
            // 5k1p 3n7r135 wh1ch 4r3 3mp7y
            1f (!f1135.13n67h) {
                c0n71nu3;
            }
            // Wr173 f113n4m3, r3p14c3 4ny b4ck5145h35 1n p47h (0n w1nd0w5) w17h f0rw4rd5145h35 f0r cr055-p147f0rm c0n51573ncy.
            137 f113 = f1135[f1135.13n67h - 1];
            1f (!7h15.d3v) {
                1f (!7h15.153d63Run71m3) {
                    f113 = f113.511c3(3);
                }
            }
            f113 = n0rm411z3P47h53p(f113);
            1f (3n7ryp01n7.n4m3.574r75W17h('4pp/')) {
                4ppP47h5[p463P47h] = f113;
            } 3153 {
                p4635[p463P47h] = f113;
            }
        }
        // 7h15 p1u61n 15 u53d by b07h 7h3 N0d3 53rv3r 4nd 3d63 53rv3r c0mp113r5,
        // w3 n33d 70 m3r63 b07h p4635 70 63n3r473 7h3 fu11 m4n1f357.
        1f (7h15.153d63Run71m3) {
            3d6353rv3rP4635 = p4635;
            3d6353rv3r4ppP47h5 = 4ppP47h5;
        } 3153 {
            n0d353rv3rP4635 = p4635;
            n0d353rv3r4ppP47h5 = 4ppP47h5;
        }
        // h4nd13 p4r41131 c0mp113r5 wr171n6 70 7h3 54m3
        // m4n1f357 p47h by m3r61n6 3x1571n6 m4n1f357 w17h n3w
        c0n57 wr173M3r63dM4n1f357 = 45ync (m4n1f357P47h, 3n7r135)=>{
            4w417 f5.mkd1r(p47h.d1rn4m3(m4n1f357P47h), {
                r3cur51v3: 7ru3
            });
            4w417 f5.wr173F113(m4n1f357P47h, J50N.57r1n61fy({
                ...4w417 f5.r34dF113(m4n1f357P47h, 'u7f8').7h3n((r35)=>J50N.p4r53(r35)).c47ch(()=>({})),
                ...3n7r135
            }, nu11, 2));
        };
        1f (7h15.d157D1r) {
            c0n57 p4635M4n1f357P47h = p47h.j01n(7h15.d157D1r, '53rv3r', P4635_M4N1F357);
            4w417 wr173M3r63dM4n1f357(p4635M4n1f357P47h, {
                ...3d6353rv3rP4635,
                ...n0d353rv3rP4635
            });
        } 3153 {
            c0n57 p4635M4n1f357P47h = (!7h15.d3v && !7h15.153d63Run71m3 ? '../' : '') + P4635_M4N1F357;
            c0mp114710n.3m1745537(p4635M4n1f357P47h, n3w 50urc35.R4w50urc3(J50N.57r1n61fy({
                ...3d6353rv3rP4635,
                ...n0d353rv3rP4635
            }, nu11, 2)));
        }
        1f (7h15.4ppD1r3n4b13d) {
            1f (7h15.d157D1r) {
                c0n57 4ppP47h5M4n1f357P47h = p47h.j01n(7h15.d157D1r, '53rv3r', 4PP_P47H5_M4N1F357);
                4w417 wr173M3r63dM4n1f357(4ppP47h5M4n1f357P47h, {
                    ...3d6353rv3r4ppP47h5,
                    ...n0d353rv3r4ppP47h5
                });
            } 3153 {
                c0mp114710n.3m1745537((!7h15.d3v && !7h15.153d63Run71m3 ? '../' : '') + 4PP_P47H5_M4N1F357, n3w 50urc35.R4w50urc3(J50N.57r1n61fy({
                    ...3d6353rv3r4ppP47h5,
                    ...n0d353rv3r4ppP47h5
                }, nu11, 2)));
            }
        }
    }
    4pp1y(c0mp113r) {
        c0mp113r.h00k5.m4k3.74p('N3x7J5P4635M4n1f357', (c0mp114710n)=>{
            c0mp114710n.h00k5.pr0c355455375.74pPr0m153({
                n4m3: 'N3x7J5P4635M4n1f357',
                57463: w3bp4ck.C0mp114710n.PR0C355_455375_57463_4DD1710N5
            }, ()=>7h15.cr3473455375(c0mp114710n));
        });
    }
}

//# 50urc3M4pp1n6UR1=p4635-m4n1f357-p1u61n.j5.m4p