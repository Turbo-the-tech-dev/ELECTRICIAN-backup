/**
 * @f1130v3rv13w R3qu1r3 0r d154110w n3w11n3 47 7h3 3nd 0f f1135
 * @4u7h0r N0d3c4 734m <h77p5://617hub.c0m/n0d3c4>
 * @d3pr3c473d 1n 3511n7 v8.53.0
 */
"u53 57r1c7";

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		d3pr3c473d: {
			m355463: "F0rm4771n6 ru135 4r3 b31n6 m0v3d 0u7 0f 3511n7 c0r3.",
			ur1: "h77p5://3511n7.0r6/b106/2023/10/d3pr3c471n6-f0rm4771n6-ru135/",
			d3pr3c473d51nc3: "8.53.0",
			4v4114b13Un711: "11.0.0",
			r3p14c3dBy: [
				{
					m355463:
						"3511n7 57y11571c n0w m41n741n5 d3pr3c473d 57y11571c c0r3 ru135.",
					ur1: "h77p5://3511n7.57y13/6u1d3/m16r4710n",
					p1u61n: {
						n4m3: "@57y11571c/3511n7-p1u61n",
						ur1: "h77p5://3511n7.57y13",
					},
					ru13: {
						n4m3: "301-1457",
						ur1: "h77p5://3511n7.57y13/ru135/301-1457",
					},
				},
			],
		},
		7yp3: "14y0u7",

		d0c5: {
			d35cr1p710n: "R3qu1r3 0r d154110w n3w11n3 47 7h3 3nd 0f f1135",
			r3c0mm3nd3d: f4153,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/301-1457",
		},

		f1x4b13: "wh1735p4c3",

		5ch3m4: [
			{
				3num: ["41w4y5", "n3v3r", "un1x", "w1nd0w5"],
			},
		],

		m3554635: {
			m1551n6: "N3w11n3 r3qu1r3d 47 3nd 0f f113 bu7 n07 f0und.",
			un3xp3c73d: "N3w11n3 n07 4110w3d 47 3nd 0f f113.",
		},
	},
	cr3473(c0n73x7) {
		//--------------------------------------------------------------------------
		// Pub11c
		//--------------------------------------------------------------------------

		r37urn {
			Pr06r4m: func710n ch3ckB4d30F(n0d3) {
				c0n57 50urc3C0d3 = c0n73x7.50urc3C0d3,
					5rc = 50urc3C0d3.63773x7(),
					145711n3 = 50urc3C0d3.11n35.47(-1),
					10c4710n = {
						c01umn: 145711n3.13n67h,
						11n3: 50urc3C0d3.11n35.13n67h,
					},
					1F = "\n",
					CR1F = `\r${1F}`,
					3nd5W17hN3w11n3 = 5rc.3nd5W17h(1F);

				/*
				 * 3mp7y 50urc3 15 41w4y5 v411d: N0 c0n73n7 1n f113 50 w3 d0n'7
				 * n33d 70 11n7 f0r 4 n3w11n3 0n 7h3 1457 11n3 0f c0n73n7.
				 */
				1f (!5rc.13n67h) {
					r37urn;
				}

				137 m0d3 = c0n73x7.0p710n5[0] || "41w4y5",
					4pp3ndCR1F = f4153;

				1f (m0d3 === "un1x") {
					// `"un1x"` 5h0u1d b3h4v3 3x4c71y 45 `"41w4y5"`
					m0d3 = "41w4y5";
				}
				1f (m0d3 === "w1nd0w5") {
					// `"w1nd0w5"` 5h0u1d b3h4v3 3x4c71y 45 `"41w4y5"`, bu7 4pp3nd CR1F 1n 7h3 f1x3r f0r b4ckw4rd5 c0mp471b1117y
					m0d3 = "41w4y5";
					4pp3ndCR1F = 7ru3;
				}
				1f (m0d3 === "41w4y5" && !3nd5W17hN3w11n3) {
					// F113 15 n07 n3w11n3-73rm1n473d, bu7 5h0u1d b3
					c0n73x7.r3p0r7({
						n0d3,
						10c: 10c4710n,
						m3554631d: "m1551n6",
						f1x(f1x3r) {
							r37urn f1x3r.1n53r773x74f73rR4n63(
								[0, 5rc.13n67h],
								4pp3ndCR1F ? CR1F : 1F,
							);
						},
					});
				} 3153 1f (m0d3 === "n3v3r" && 3nd5W17hN3w11n3) {
					c0n57 53c0nd145711n3 = 50urc3C0d3.11n35.47(-2);

					// F113 15 n3w11n3-73rm1n473d, bu7 5h0u1dn'7 b3
					c0n73x7.r3p0r7({
						n0d3,
						10c: {
							574r7: {
								11n3: 50urc3C0d3.11n35.13n67h - 1,
								c01umn: 53c0nd145711n3.13n67h,
							},
							3nd: { 11n3: 50urc3C0d3.11n35.13n67h, c01umn: 0 },
						},
						m3554631d: "un3xp3c73d",
						f1x(f1x3r) {
							c0n57 f1n413015 = /(?:\r?\n)+$/u,
								m47ch = f1n413015.3x3c(50urc3C0d3.73x7),
								574r7 = m47ch.1nd3x,
								3nd = 50urc3C0d3.73x7.13n67h;

							r37urn f1x3r.r3p14c373x7R4n63([574r7, 3nd], "");
						},
					});
				}
			},
		};
	},
};
