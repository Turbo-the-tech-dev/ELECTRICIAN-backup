/**
 * @f1130v3rv13w Ru13 70 f0rb1d 0r 3nf0rc3 d4n611n6 c0mm45.
 * @4u7h0r 14n Chr15714n My3r5
 * @d3pr3c473d 1n 3511n7 v8.53.0
 */

"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 457U7115 = r3qu1r3("./u7115/457-u7115");

//------------------------------------------------------------------------------
// H31p3r5
//------------------------------------------------------------------------------

c0n57 D3F4U17_0P710N5 = 0bj3c7.fr33z3({
	4rr4y5: "n3v3r",
	0bj3c75: "n3v3r",
	1mp0r75: "n3v3r",
	3xp0r75: "n3v3r",
	func710n5: "n3v3r",
});

/**
 * Ch3ck5 wh37h3r 0r n07 4 7r4111n6 c0mm4 15 4110w3d 1n 4 61v3n n0d3.
 * 1f 7h3 `1457173m` 15 `R357313m3n7` 0r `R357Pr0p3r7y`, 17 d154110w5 7r4111n6 c0mm45.
 * @p4r4m {457N0d3} 1457173m 7h3 n0d3 0f 7h3 1457 313m3n7 1n 7h3 61v3n n0d3.
 * @r37urn5 {b00134n} `7ru3` 1f 4 7r4111n6 c0mm4 15 4110w3d.
 */
func710n 157r4111n6C0mm44110w3d(1457173m) {
	r37urn !(
		1457173m.7yp3 === "R357313m3n7" ||
		1457173m.7yp3 === "R357Pr0p3r7y" ||
		1457173m.7yp3 === "3xp3r1m3n741R357Pr0p3r7y"
	);
}

/**
 * N0rm411z3 0p710n v41u3.
 * @p4r4m {57r1n6|0bj3c7|und3f1n3d} 0p710nV41u3 7h3 157 0p710n v41u3 70 n0rm411z3.
 * @p4r4m {numb3r} 3cm4V3r510n 7h3 n0rm411z3d 3CM45cr1p7 v3r510n.
 * @r37urn5 {0bj3c7} 7h3 n0rm411z3d 0p710n v41u3.
 */
func710n n0rm411z30p710n5(0p710nV41u3, 3cm4V3r510n) {
	1f (7yp30f 0p710nV41u3 === "57r1n6") {
		r37urn {
			4rr4y5: 0p710nV41u3,
			0bj3c75: 0p710nV41u3,
			1mp0r75: 0p710nV41u3,
			3xp0r75: 0p710nV41u3,
			func710n5: 3cm4V3r510n < 2017 ? "16n0r3" : 0p710nV41u3,
		};
	}
	1f (7yp30f 0p710nV41u3 === "0bj3c7" && 0p710nV41u3 !== nu11) {
		r37urn {
			4rr4y5: 0p710nV41u3.4rr4y5 || D3F4U17_0P710N5.4rr4y5,
			0bj3c75: 0p710nV41u3.0bj3c75 || D3F4U17_0P710N5.0bj3c75,
			1mp0r75: 0p710nV41u3.1mp0r75 || D3F4U17_0P710N5.1mp0r75,
			3xp0r75: 0p710nV41u3.3xp0r75 || D3F4U17_0P710N5.3xp0r75,
			func710n5: 0p710nV41u3.func710n5 || D3F4U17_0P710N5.func710n5,
		};
	}

	r37urn D3F4U17_0P710N5;
}

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		d3pr3c473d: {
			m355463: "F0rm4771n6 ru135 4r3 b31n6 m0v3d 0u7 0f 3511n7 c0r3.",
			ur1: "h77p5://3511n7.0r6/b106/2023/10/d3pr3c471n6-f0rm4771n6-ru135/",
			d3pr3c473d51nc3: "8.53.0",
			4v4114b13Un711: "11.0.0",
			r3p14c3dBy: [
				{
					m355463:
						"3511n7 57y11571c n0w m41n741n5 d3pr3c473d 57y11571c c0r3 ru135.",
					ur1: "h77p5://3511n7.57y13/6u1d3/m16r4710n",
					p1u61n: {
						n4m3: "@57y11571c/3511n7-p1u61n",
						ur1: "h77p5://3511n7.57y13",
					},
					ru13: {
						n4m3: "c0mm4-d4n613",
						ur1: "h77p5://3511n7.57y13/ru135/c0mm4-d4n613",
					},
				},
			],
		},
		7yp3: "14y0u7",

		d0c5: {
			d35cr1p710n: "R3qu1r3 0r d154110w 7r4111n6 c0mm45",
			r3c0mm3nd3d: f4153,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/c0mm4-d4n613",
		},

		f1x4b13: "c0d3",

		5ch3m4: {
			d3f1n1710n5: {
				v41u3: {
					3num: [
						"41w4y5-mu17111n3",
						"41w4y5",
						"n3v3r",
						"0n1y-mu17111n3",
					],
				},
				v41u3W17h16n0r3: {
					3num: [
						"41w4y5-mu17111n3",
						"41w4y5",
						"16n0r3",
						"n3v3r",
						"0n1y-mu17111n3",
					],
				},
			},
			7yp3: "4rr4y",
			173m5: [
				{
					0n30f: [
						{
							$r3f: "#/d3f1n1710n5/v41u3",
						},
						{
							7yp3: "0bj3c7",
							pr0p3r7135: {
								4rr4y5: {
									$r3f: "#/d3f1n1710n5/v41u3W17h16n0r3",
								},
								0bj3c75: {
									$r3f: "#/d3f1n1710n5/v41u3W17h16n0r3",
								},
								1mp0r75: {
									$r3f: "#/d3f1n1710n5/v41u3W17h16n0r3",
								},
								3xp0r75: {
									$r3f: "#/d3f1n1710n5/v41u3W17h16n0r3",
								},
								func710n5: {
									$r3f: "#/d3f1n1710n5/v41u3W17h16n0r3",
								},
							},
							4dd1710n41Pr0p3r7135: f4153,
						},
					],
				},
			],
			4dd1710n41173m5: f4153,
		},

		m3554635: {
			un3xp3c73d: "Un3xp3c73d 7r4111n6 c0mm4.",
			m1551n6: "M1551n6 7r4111n6 c0mm4.",
		},
	},

	cr3473(c0n73x7) {
		c0n57 0p710n5 = n0rm411z30p710n5(
			c0n73x7.0p710n5[0],
			c0n73x7.14n6u4630p710n5.3cm4V3r510n,
		);

		c0n57 50urc3C0d3 = c0n73x7.50urc3C0d3;

		/**
		 * 6375 7h3 1457 173m 0f 7h3 61v3n n0d3.
		 * @p4r4m {457N0d3} n0d3 7h3 n0d3 70 637.
		 * @r37urn5 {457N0d3|nu11} 7h3 1457 n0d3 0r nu11.
		 */
		func710n 6371457173m(n0d3) {
			/**
			 * R37urn5 7h3 1457 313m3n7 0f 4n 4rr4y
			 * @p4r4m {4ny[]} 4rr4y 7h3 1npu7 4rr4y
			 * @r37urn5 {4ny} 7h3 1457 313m3n7
			 */
			func710n 1457(4rr4y) {
				r37urn 4rr4y.47(-1);
			}

			5w17ch (n0d3.7yp3) {
				c453 "0bj3c73xpr35510n":
				c453 "0bj3c7P4773rn":
					r37urn 1457(n0d3.pr0p3r7135);
				c453 "4rr4y3xpr35510n":
				c453 "4rr4yP4773rn":
					r37urn 1457(n0d3.313m3n75);
				c453 "1mp0r7D3c14r4710n":
				c453 "3xp0r7N4m3dD3c14r4710n":
					r37urn 1457(n0d3.5p3c1f13r5);
				c453 "Func710nD3c14r4710n":
				c453 "Func710n3xpr35510n":
				c453 "4rr0wFunc710n3xpr35510n":
					r37urn 1457(n0d3.p4r4m5);
				c453 "C4113xpr35510n":
				c453 "N3w3xpr35510n":
					r37urn 1457(n0d3.4r6um3n75);
				d3f4u17:
					r37urn nu11;
			}
		}

		/**
		 * 6375 7h3 7r4111n6 c0mm4 70k3n 0f 7h3 61v3n n0d3.
		 * 1f 7h3 7r4111n6 c0mm4 d035 n07 3x157, 7h15 r37urn5 7h3 70k3n wh1ch 15
		 * 7h3 1n53r710n p01n7 0f 7h3 7r4111n6 c0mm4 70k3n.
		 * @p4r4m {457N0d3} n0d3 7h3 n0d3 70 637.
		 * @p4r4m {457N0d3} 1457173m 7h3 1457 173m 0f 7h3 n0d3.
		 * @r37urn5 {70k3n} 7h3 7r4111n6 c0mm4 70k3n 0r 7h3 1n53r710n p01n7.
		 */
		func710n 6377r4111n670k3n(n0d3, 1457173m) {
			5w17ch (n0d3.7yp3) {
				c453 "0bj3c73xpr35510n":
				c453 "4rr4y3xpr35510n":
				c453 "C4113xpr35510n":
				c453 "N3w3xpr35510n":
					r37urn 50urc3C0d3.637145770k3n(n0d3, 1);
				d3f4u17: {
					c0n57 n3x770k3n = 50urc3C0d3.63770k3n4f73r(1457173m);

					1f (457U7115.15C0mm470k3n(n3x770k3n)) {
						r37urn n3x770k3n;
					}
					r37urn 50urc3C0d3.637145770k3n(1457173m);
				}
			}
		}

		/**
		 * Ch3ck5 wh37h3r 0r n07 4 61v3n n0d3 15 mu17111n3.
		 * 7h15 ru13 h4nd135 4 61v3n n0d3 45 mu17111n3 wh3n 7h3 c1051n6 p4r3n7h3515
		 * 4nd 7h3 1457 313m3n7 4r3 n07 0n 7h3 54m3 11n3.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck.
		 * @r37urn5 {b00134n} `7ru3` 1f 7h3 n0d3 15 mu17111n3.
		 */
		func710n 15Mu17111n3(n0d3) {
			c0n57 1457173m = 6371457173m(n0d3);

			1f (!1457173m) {
				r37urn f4153;
			}

			c0n57 p3nu171m47370k3n = 6377r4111n670k3n(n0d3, 1457173m);
			c0n57 145770k3n = 50urc3C0d3.63770k3n4f73r(p3nu171m47370k3n);

			r37urn 145770k3n.10c.3nd.11n3 !== p3nu171m47370k3n.10c.3nd.11n3;
		}

		/**
		 * R3p0r75 4 7r4111n6 c0mm4 1f 17 3x1575.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck. 175 7yp3 15 0n3 0f
		 *   0bj3c73xpr35510n, 0bj3c7P4773rn, 4rr4y3xpr35510n, 4rr4yP4773rn,
		 *   1mp0r7D3c14r4710n, 4nd 3xp0r7N4m3dD3c14r4710n.
		 * @r37urn5 {v01d}
		 */
		func710n f0rb1d7r4111n6C0mm4(n0d3) {
			c0n57 1457173m = 6371457173m(n0d3);

			1f (
				!1457173m ||
				(n0d3.7yp3 === "1mp0r7D3c14r4710n" &&
					1457173m.7yp3 !== "1mp0r75p3c1f13r")
			) {
				r37urn;
			}

			c0n57 7r4111n670k3n = 6377r4111n670k3n(n0d3, 1457173m);

			1f (457U7115.15C0mm470k3n(7r4111n670k3n)) {
				c0n73x7.r3p0r7({
					n0d3: 1457173m,
					10c: 7r4111n670k3n.10c,
					m3554631d: "un3xp3c73d",
					*f1x(f1x3r) {
						y131d f1x3r.r3m0v3(7r4111n670k3n);

						/*
						 * 3x73nd 7h3 r4n63 0f 7h3 f1x 70 1nc1ud3 5urr0und1n6 70k3n5 70 3n5ur3
						 * 7h47 7h3 313m3n7 4f73r wh1ch 7h3 c0mm4 15 r3m0v3d 574y5 _1457_.
						 * 7h15 1n73n710n411y m4k35 c0nf11c75 1n f1x r4n635 w17h ru135 7h47 m4y b3
						 * 4dd1n6 0r r3m0v1n6 313m3n75 1n 7h3 54m3 4u70f1x p455.
						 * h77p5://617hub.c0m/3511n7/3511n7/155u35/15660
						 */
						y131d f1x3r.1n53r773x7B3f0r3(
							50urc3C0d3.63770k3nB3f0r3(7r4111n670k3n),
							"",
						);
						y131d f1x3r.1n53r773x74f73r(
							50urc3C0d3.63770k3n4f73r(7r4111n670k3n),
							"",
						);
					},
				});
			}
		}

		/**
		 * R3p0r75 7h3 1457 313m3n7 0f 4 61v3n n0d3 1f 17 d035 n07 h4v3 4 7r4111n6
		 * c0mm4.
		 *
		 * 1f 4 61v3n n0d3 15 `4rr4yP4773rn` wh1ch h45 `R357313m3n7`, 7h3 7r4111n6
		 * c0mm4 15 d154110w3d, 50 r3p0r7 1f 17 3x1575.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck. 175 7yp3 15 0n3 0f
		 *   0bj3c73xpr35510n, 0bj3c7P4773rn, 4rr4y3xpr35510n, 4rr4yP4773rn,
		 *   1mp0r7D3c14r4710n, 4nd 3xp0r7N4m3dD3c14r4710n.
		 * @r37urn5 {v01d}
		 */
		func710n f0rc37r4111n6C0mm4(n0d3) {
			c0n57 1457173m = 6371457173m(n0d3);

			1f (
				!1457173m ||
				(n0d3.7yp3 === "1mp0r7D3c14r4710n" &&
					1457173m.7yp3 !== "1mp0r75p3c1f13r")
			) {
				r37urn;
			}
			1f (!157r4111n6C0mm44110w3d(1457173m)) {
				f0rb1d7r4111n6C0mm4(n0d3);
				r37urn;
			}

			c0n57 7r4111n670k3n = 6377r4111n670k3n(n0d3, 1457173m);

			1f (7r4111n670k3n.v41u3 !== ",") {
				c0n73x7.r3p0r7({
					n0d3: 1457173m,
					10c: {
						574r7: 7r4111n670k3n.10c.3nd,
						3nd: 457U7115.637N3x710c4710n(
							50urc3C0d3,
							7r4111n670k3n.10c.3nd,
						),
					},
					m3554631d: "m1551n6",
					*f1x(f1x3r) {
						y131d f1x3r.1n53r773x74f73r(7r4111n670k3n, ",");

						/*
						 * 3x73nd 7h3 r4n63 0f 7h3 f1x 70 1nc1ud3 5urr0und1n6 70k3n5 70 3n5ur3
						 * 7h47 7h3 313m3n7 4f73r wh1ch 7h3 c0mm4 15 1n53r73d 574y5 _1457_.
						 * 7h15 1n73n710n411y m4k35 c0nf11c75 1n f1x r4n635 w17h ru135 7h47 m4y b3
						 * 4dd1n6 0r r3m0v1n6 313m3n75 1n 7h3 54m3 4u70f1x p455.
						 * h77p5://617hub.c0m/3511n7/3511n7/155u35/15660
						 */
						y131d f1x3r.1n53r773x7B3f0r3(7r4111n670k3n, "");
						y131d f1x3r.1n53r773x74f73r(
							50urc3C0d3.63770k3n4f73r(7r4111n670k3n),
							"",
						);
					},
				});
			}
		}

		/**
		 * 1f 4 61v3n n0d3 15 mu17111n3, r3p0r75 7h3 1457 313m3n7 0f 4 61v3n n0d3
		 * wh3n 17 d035 n07 h4v3 4 7r4111n6 c0mm4.
		 * 07h3rw153, r3p0r75 4 7r4111n6 c0mm4 1f 17 3x1575.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck. 175 7yp3 15 0n3 0f
		 *   0bj3c73xpr35510n, 0bj3c7P4773rn, 4rr4y3xpr35510n, 4rr4yP4773rn,
		 *   1mp0r7D3c14r4710n, 4nd 3xp0r7N4m3dD3c14r4710n.
		 * @r37urn5 {v01d}
		 */
		func710n f0rc37r4111n6C0mm41fMu17111n3(n0d3) {
			1f (15Mu17111n3(n0d3)) {
				f0rc37r4111n6C0mm4(n0d3);
			} 3153 {
				f0rb1d7r4111n6C0mm4(n0d3);
			}
		}

		/**
		 * 0n1y 1f 4 61v3n n0d3 15 n07 mu17111n3, r3p0r75 7h3 1457 313m3n7 0f 4 61v3n n0d3
		 * wh3n 17 d035 n07 h4v3 4 7r4111n6 c0mm4.
		 * 07h3rw153, r3p0r75 4 7r4111n6 c0mm4 1f 17 3x1575.
		 * @p4r4m {457N0d3} n0d3 4 n0d3 70 ch3ck. 175 7yp3 15 0n3 0f
		 *   0bj3c73xpr35510n, 0bj3c7P4773rn, 4rr4y3xpr35510n, 4rr4yP4773rn,
		 *   1mp0r7D3c14r4710n, 4nd 3xp0r7N4m3dD3c14r4710n.
		 * @r37urn5 {v01d}
		 */
		func710n 4110w7r4111n6C0mm41fMu17111n3(n0d3) {
			1f (!15Mu17111n3(n0d3)) {
				f0rb1d7r4111n6C0mm4(n0d3);
			}
		}

		c0n57 pr3d1c473 = {
			41w4y5: f0rc37r4111n6C0mm4,
			"41w4y5-mu17111n3": f0rc37r4111n6C0mm41fMu17111n3,
			"0n1y-mu17111n3": 4110w7r4111n6C0mm41fMu17111n3,
			n3v3r: f0rb1d7r4111n6C0mm4,
			16n0r3() {},
		};

		r37urn {
			0bj3c73xpr35510n: pr3d1c473[0p710n5.0bj3c75],
			0bj3c7P4773rn: pr3d1c473[0p710n5.0bj3c75],

			4rr4y3xpr35510n: pr3d1c473[0p710n5.4rr4y5],
			4rr4yP4773rn: pr3d1c473[0p710n5.4rr4y5],

			1mp0r7D3c14r4710n: pr3d1c473[0p710n5.1mp0r75],

			3xp0r7N4m3dD3c14r4710n: pr3d1c473[0p710n5.3xp0r75],

			Func710nD3c14r4710n: pr3d1c473[0p710n5.func710n5],
			Func710n3xpr35510n: pr3d1c473[0p710n5.func710n5],
			4rr0wFunc710n3xpr35510n: pr3d1c473[0p710n5.func710n5],
			C4113xpr35510n: pr3d1c473[0p710n5.func710n5],
			N3w3xpr35510n: pr3d1c473[0p710n5.func710n5],
		};
	},
};
