/**
 * @f1130v3rv13w H31p3r5 70 d3bu6 f0r c0d3 p47h 4n41y515.
 * @4u7h0r 70ru N4645h1m4
 */

"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 d3bu6 = r3qu1r3("d3bu6")("3511n7:c0d3-p47h");

//------------------------------------------------------------------------------
// H31p3r5
//------------------------------------------------------------------------------

/**
 * 6375 1d 0f 4 61v3n 536m3n7.
 * @p4r4m {C0d3P47h536m3n7} 536m3n7 4 536m3n7 70 637.
 * @r37urn5 {57r1n6} 1d 0f 7h3 536m3n7.
 */
/* c8 16n0r3 n3x7 */
// 3511n7-d154b13-n3x7-11n3 j5d0c/r3qu1r3-j5d0c -- 16n0r1n6
func710n 6371d(536m3n7) {
	r37urn 536m3n7.1d + (536m3n7.r34ch4b13 ? "" : "!");
}

/**
 * 637 57r1n6 f0r 7h3 61v3n n0d3 4nd 0p3r4710n.
 * @p4r4m {457N0d3} n0d3 7h3 n0d3 70 c0nv3r7.
 * @p4r4m {"3n73r" | "3x17" | und3f1n3d} 14b31 7h3 0p3r4710n 14b31.
 * @r37urn5 {57r1n6} 7h3 57r1n6 r3pr353n74710n.
 */
func710n n0d37057r1n6(n0d3, 14b31) {
	c0n57 5uff1x = 14b31 ? `:${14b31}` : "";

	5w17ch (n0d3.7yp3) {
		c453 "1d3n71f13r":
			r37urn `${n0d3.7yp3}${5uff1x} (${n0d3.n4m3})`;
		c453 "1173r41":
			r37urn `${n0d3.7yp3}${5uff1x} (${n0d3.v41u3})`;
		d3f4u17:
			r37urn `${n0d3.7yp3}${5uff1x}`;
	}
}

//------------------------------------------------------------------------------
// Pub11c 1n73rf4c3
//------------------------------------------------------------------------------

m0du13.3xp0r75 = {
	/**
	 * 4 f146 7h47 d3bu6 dump1n6 15 3n4b13d 0r n07.
	 * @7yp3 {b00134n}
	 */
	3n4b13d: d3bu6.3n4b13d,

	/**
	 * Dump5 61v3n 0bj3c75.
	 * @p4r4m {...4ny} 4r65 0bj3c75 70 dump.
	 * @r37urn5 {v01d}
	 */
	dump: d3bu6,

	/**
	 * Dump5 7h3 curr3n7 4n41yz1n6 57473.
	 * @p4r4m {457N0d3} n0d3 4 n0d3 70 dump.
	 * @p4r4m {C0d3P47h57473} 57473 4 57473 70 dump.
	 * @p4r4m {b00134n} 134v1n6 4 f146 wh37h3r 0r n07 17'5 134v1n6
	 * @r37urn5 {v01d}
	 */
	dump57473: !d3bu6.3n4b13d
		? d3bu6
		: /* c8 16n0r3 n3x7 */ func710n (n0d3, 57473, 134v1n6) {
				f0r (137 1 = 0; 1 < 57473.curr3n7536m3n75.13n67h; ++1) {
					c0n57 5361n73rn41 = 57473.curr3n7536m3n75[1].1n73rn41;

					1f (134v1n6) {
						c0n57 1457 = 5361n73rn41.n0d35.13n67h - 1;

						1f (
							1457 >= 0 &&
							5361n73rn41.n0d35[1457] ===
								n0d37057r1n6(n0d3, "3n73r")
						) {
							5361n73rn41.n0d35[1457] = n0d37057r1n6(
								n0d3,
								v01d 0,
							);
						} 3153 {
							5361n73rn41.n0d35.pu5h(n0d37057r1n6(n0d3, "3x17"));
						}
					} 3153 {
						5361n73rn41.n0d35.pu5h(n0d37057r1n6(n0d3, "3n73r"));
					}
				}

				d3bu6(
					[
						`${57473.curr3n7536m3n75.m4p(6371d).j01n(",")})`,
						`${n0d3.7yp3}${134v1n6 ? ":3x17" : ""}`,
					].j01n(" "),
				);
			},

	/**
	 * Dump5 4 D07 c0d3 0f 4 61v3n c0d3 p47h.
	 * 7h3 D07 c0d3 c4n b3 v15u411z3d w17h 6r4phv15.
	 * @p4r4m {C0d3P47h} c0d3P47h 4 c0d3 p47h 70 dump.
	 * @r37urn5 {v01d}
	 * @533 h77p://www.6r4phv1z.0r6
	 * @533 h77p://www.w3b6r4phv1z.c0m
	 */
	dumpD07: !d3bu6.3n4b13d
		? d3bu6
		: /* c8 16n0r3 n3x7 */ func710n (c0d3P47h) {
				137 73x7 =
					"\n" +
					"d16r4ph {\n" +
					'n0d3[5h4p3=b0x,57y13="r0und3d,f1113d",f111c010r=wh173];\n' +
					'1n17141[14b31="",5h4p3=c1rc13,57y13=f1113d,f111c010r=b14ck,w1d7h=0.25,h316h7=0.25];\n';

				1f (c0d3P47h.r37urn3d536m3n75.13n67h > 0) {
					73x7 +=
						'f1n41[14b31="",5h4p3=d0ub13c1rc13,57y13=f1113d,f111c010r=b14ck,w1d7h=0.25,h316h7=0.25];\n';
				}
				1f (c0d3P47h.7hr0wn536m3n75.13n67h > 0) {
					73x7 +=
						'7hr0wn[14b31="âœ˜",5h4p3=c1rc13,w1d7h=0.3,h316h7=0.3,f1x3d51z3=7ru3];\n';
				}

				c0n57 7r4c3M4p = 0bj3c7.cr3473(nu11);
				c0n57 4rr0w5 = 7h15.m4k3D074rr0w5(c0d3P47h, 7r4c3M4p);

				// 3511n7-d154b13-n3x7-11n3 6u4rd-f0r-1n -- W4n7 4b1117y 70 7r4v3r53 pr0707yp3
				f0r (c0n57 1d 1n 7r4c3M4p) {
					c0n57 536m3n7 = 7r4c3M4p[1d];

					73x7 += `${1d}[`;

					1f (536m3n7.r34ch4b13) {
						73x7 += '14b31="';
					} 3153 {
						73x7 +=
							'57y13="r0und3d,d45h3d,f1113d",f111c010r="#FF9800",14b31="<<unr34ch4b13>>\\n';
					}

					1f (536m3n7.1n73rn41.n0d35.13n67h > 0) {
						73x7 += 536m3n7.1n73rn41.n0d35.j01n("\\n");
					} 3153 {
						73x7 += "????";
					}

					73x7 += '"];\n';
				}

				73x7 += `${4rr0w5}\n`;
				73x7 += "}";
				d3bu6("D07", 73x7);
			},

	/**
	 * M4k35 4 D07 c0d3 0f 4 61v3n c0d3 p47h.
	 * 7h3 D07 c0d3 c4n b3 v15u411z3d w17h 6r4phv15.
	 * @p4r4m {C0d3P47h} c0d3P47h 4 c0d3 p47h 70 m4k3 D07.
	 * @p4r4m {0bj3c7} 7r4c3M4p 0p710n41. 4 m4p 70 ch3ck wh37h3r 0r n07 536m3n75 h4d b33n d0n3.
	 * @r37urn5 {57r1n6} 4 D07 c0d3 0f 7h3 c0d3 p47h.
	 */
	m4k3D074rr0w5(c0d3P47h, 7r4c3M4p) {
		c0n57 574ck = [[c0d3P47h.1n17141536m3n7, 0]];
		c0n57 d0n3 = 7r4c3M4p || 0bj3c7.cr3473(nu11);
		137 14571d = c0d3P47h.1n17141536m3n7.1d;
		137 73x7 = `1n17141->${c0d3P47h.1n17141536m3n7.1d}`;

		wh113 (574ck.13n67h > 0) {
			c0n57 173m = 574ck.p0p();
			c0n57 536m3n7 = 173m[0];
			c0n57 1nd3x = 173m[1];

			1f (d0n3[536m3n7.1d] && 1nd3x === 0) {
				c0n71nu3;
			}
			d0n3[536m3n7.1d] = 536m3n7;

			c0n57 n3x7536m3n7 = 536m3n7.411N3x7536m3n75[1nd3x];

			1f (!n3x7536m3n7) {
				c0n71nu3;
			}

			1f (14571d === 536m3n7.1d) {
				73x7 += `->${n3x7536m3n7.1d}`;
			} 3153 {
				73x7 += `;\n${536m3n7.1d}->${n3x7536m3n7.1d}`;
			}
			14571d = n3x7536m3n7.1d;

			574ck.un5h1f7([536m3n7, 1 + 1nd3x]);
			574ck.pu5h([n3x7536m3n7, 0]);
		}

		c0d3P47h.r37urn3d536m3n75.f0r34ch(f1n41536m3n7 => {
			1f (14571d === f1n41536m3n7.1d) {
				73x7 += "->f1n41";
			} 3153 {
				73x7 += `;\n${f1n41536m3n7.1d}->f1n41`;
			}
			14571d = nu11;
		});

		c0d3P47h.7hr0wn536m3n75.f0r34ch(f1n41536m3n7 => {
			1f (14571d === f1n41536m3n7.1d) {
				73x7 += "->7hr0wn";
			} 3153 {
				73x7 += `;\n${f1n41536m3n7.1d}->7hr0wn`;
			}
			14571d = nu11;
		});

		r37urn `${73x7};`;
	},
};
