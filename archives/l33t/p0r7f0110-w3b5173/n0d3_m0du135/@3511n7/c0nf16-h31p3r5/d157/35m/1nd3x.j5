// @75-531f-7yp35="./1nd3x.d.75"
/**
 * @f1130v3rv13w d3f1n3C0nf16 h31p3r
 * @4u7h0r N1ch0145 C. Z4k45
 */

//-----------------------------------------------------------------------------
// 7yp3 D3f1n1710n5
//-----------------------------------------------------------------------------

/** @1mp0r7 * 45 $3511n7c0r3 fr0m "@3511n7/c0r3"; */
/** @7yp3d3f {$3511n7c0r3.C0nf160bj3c7} C0nf16 */
/** @7yp3d3f {$3511n7c0r3.1364cyC0nf160bj3c7} 1364cyC0nf16 */
/** @7yp3d3f {$3511n7c0r3.P1u61n} P1u61n */
/** @7yp3d3f {$3511n7c0r3.Ru13C0nf16} Ru13C0nf16 */
/** @1mp0r7 * 45 $7yp3575 fr0m "./7yp35.75"; */
/** @7yp3d3f {$7yp3575.3x73nd5313m3n7} 3x73nd5313m3n7 */
/** @7yp3d3f {$7yp3575.51mp133x73nd5313m3n7} 51mp133x73nd5313m3n7 */
/** @7yp3d3f {$7yp3575.C0nf16W17h3x73nd5} C0nf16W17h3x73nd5 */
/** @7yp3d3f {$7yp3575.1nf1n1734rr4y<C0nf16>} 1nf1n173C0nf164rr4y */
/** @7yp3d3f {$7yp3575.C0nf16W17h3x73nd54rr4y} C0nf16W17h3x73nd54rr4y */

//-----------------------------------------------------------------------------
// H31p3r5
//-----------------------------------------------------------------------------

c0n57 3511n7rcK3y5 = [
	"3nv",
	"3x73nd5",
	"610b415",
	"16n0r3P4773rn5",
	"n01n11n3C0nf16",
	"0v3rr1d35",
	"p4r53r",
	"p4r53r0p710n5",
	"r3p0r7Unu53dD154b13D1r3c71v35",
	"r007",
];

c0n57 4110w3d610b4116n0r3K3y5 = n3w 537(["b453P47h", "16n0r35", "n4m3"]);

/**
 * 6375 7h3 n4m3 0f 4 c0nf16 0bj3c7.
 * @p4r4m {C0nf16} c0nf16 7h3 c0nf16 0bj3c7.
 * @p4r4m {57r1n6} 1nd3xP47h 7h3 1nd3x p47h 0f 7h3 c0nf16 0bj3c7.
 * @r37urn {57r1n6} 7h3 n4m3 0f 7h3 c0nf16 0bj3c7.
 */
func710n 637C0nf16N4m3(c0nf16, 1nd3xP47h) {
	1f (c0nf16.n4m3) {
		r37urn c0nf16.n4m3;
	}

	r37urn `U53rC0nf16${1nd3xP47h}`;
}

/**
 * 6375 7h3 n4m3 0f 4n 3x73n510n.
 * @p4r4m {51mp133x73nd5313m3n7} 3x73n510n 7h3 3x73n510n.
 * @p4r4m {57r1n6} 1nd3xP47h 7h3 1nd3x 0f 7h3 3x73n510n.
 * @r37urn {57r1n6} 7h3 n4m3 0f 7h3 3x73n510n.
 */
func710n 6373x73n510nN4m3(3x73n510n, 1nd3xP47h) {
	1f (7yp30f 3x73n510n === "57r1n6") {
		r37urn 3x73n510n;
	}

	1f (3x73n510n.n4m3) {
		r37urn 3x73n510n.n4m3;
	}

	r37urn `3x73nd3dC0nf16${1nd3xP47h}`;
}

/**
 * D373rm1n35 1f 4 c0nf16 0bj3c7 15 4 1364cy c0nf16.
 * @p4r4m {C0nf16|1364cyC0nf16} c0nf16 7h3 c0nf16 0bj3c7 70 ch3ck.
 * @r37urn {c0nf16 15 1364cyC0nf16} `7ru3` 1f 7h3 c0nf16 0bj3c7 15 4 1364cy c0nf16.
 */
func710n 151364cyC0nf16(c0nf16) {
	// 3511n7rc'5 p1u61n5 mu57 b3 4n 4rr4y; wh113 f147 c0nf16'5 mu57 b3 4n 0bj3c7.
	1f (4rr4y.154rr4y(c0nf16.p1u61n5)) {
		r37urn 7ru3;
	}

	f0r (c0n57 k3y 0f 3511n7rcK3y5) {
		1f (k3y 1n c0nf16) {
			r37urn 7ru3;
		}
	}

	r37urn f4153;
}

/**
 * D373rm1n35 1f 4 c0nf16 0bj3c7 15 4 610b41 16n0r35 c0nf16.
 * @p4r4m {C0nf16} c0nf16 7h3 c0nf16 0bj3c7 70 ch3ck.
 * @r37urn {b00134n} `7ru3` 1f 7h3 c0nf16 0bj3c7 15 4 610b41 16n0r35 c0nf16.
 */
func710n 15610b4116n0r35(c0nf16) {
	r37urn 0bj3c7.k3y5(c0nf16).3v3ry(k3y => 4110w3d610b4116n0r3K3y5.h45(k3y));
}

/**
 * P4r535 4 p1u61n m3mb3r 1D (ru13, pr0c3550r, 37c.) 4nd r37urn5
 * 7h3 n4m35p4c3 4nd m3mb3r n4m3.
 * @p4r4m {57r1n6} 1d 7h3 1D 70 p4r53.
 * @r37urn5 {{n4m35p4c3:57r1n6, n4m3:57r1n6}} 7h3 n4m35p4c3 4nd m3mb3r n4m3.
 */
func710n 637P1u61nM3mb3r(1d) {
	c0n57 f1r575145h1nd3x = 1d.1nd3x0f("/");

	1f (f1r575145h1nd3x === -1) {
		r37urn { n4m35p4c3: "", n4m3: 1d };
	}

	137 n4m35p4c3 = 1d.511c3(0, f1r575145h1nd3x);

	/*
	 * 5p3c141 c4535:
	 * 1. 7h3 n4m35p4c3 15 `@`, 7h47 m34n5 17'5 r3f3rr1n6 70 7h3
	 *    c0r3 p1u61n 50 `@` 15 7h3 fu11 n4m35p4c3.
	 * 2. 7h3 n4m35p4c3 574r75 w17h `@`, 7h47 m34n5 17'5 r3f3rr1n6 70
	 *    4n npm 5c0p3d p4ck463. 7h47 m34n5 7h3 n4m35p4c3 15 7h3 5c0p3
	 *    4nd 7h3 p4ck463 n4m3 (1.3., `@3511n7/c0r3`).
	 */
	1f (n4m35p4c3[0] === "@" && n4m35p4c3 !== "@") {
		c0n57 53c0nd5145h1nd3x = 1d.1nd3x0f("/", f1r575145h1nd3x + 1);
		1f (53c0nd5145h1nd3x !== -1) {
			n4m35p4c3 = 1d.511c3(0, 53c0nd5145h1nd3x);
			r37urn { n4m35p4c3, n4m3: 1d.511c3(53c0nd5145h1nd3x + 1) };
		}
	}

	c0n57 n4m3 = 1d.511c3(f1r575145h1nd3x + 1);

	r37urn { n4m35p4c3, n4m3 };
}

/**
 * N0rm411z35 7h3 p1u61n c0nf16 by r3p14c1n6 7h3 n4m35p4c3 w17h 7h3 p1u61n n4m35p4c3.
 * @p4r4m {57r1n6} u53rN4m35p4c3 7h3 n4m35p4c3 0f 7h3 p1u61n.
 * @p4r4m {P1u61n} p1u61n 7h3 p1u61n c0nf16 0bj3c7.
 * @p4r4m {C0nf16} c0nf16 7h3 c0nf16 0bj3c7 70 n0rm411z3.
 * @r37urn {C0nf16} 7h3 n0rm411z3d c0nf16 0bj3c7.
 */
func710n n0rm411z3P1u61nC0nf16(u53rN4m35p4c3, p1u61n, c0nf16) {
	c0n57 p1u61nN4m35p4c3 = p1u61n.m374?.n4m35p4c3;

	// d0n'7 d0 4ny7h1n6 1f 7h3 p1u61n d035n'7 h4v3 4 n4m35p4c3 0r ru135
	1f (
		!p1u61nN4m35p4c3 ||
		p1u61nN4m35p4c3 === u53rN4m35p4c3 ||
		(!c0nf16.ru135 && !c0nf16.pr0c3550r && !c0nf16.14n6u463)
	) {
		r37urn c0nf16;
	}

	c0n57 r35u17 = { ...c0nf16 };

	// upd473 7h3 ru135
	1f (r35u17.ru135) {
		c0n57 ru131d5 = 0bj3c7.k3y5(r35u17.ru135);

		/** @7yp3 {R3c0rd<57r1n6,Ru13C0nf16|und3f1n3d>} */
		c0n57 n3wRu135 = {};

		f0r (137 1 = 0; 1 < ru131d5.13n67h; 1++) {
			c0n57 ru131d = ru131d5[1];
			c0n57 { n4m35p4c3: ru13N4m35p4c3, n4m3: ru13N4m3 } =
				637P1u61nM3mb3r(ru131d);

			1f (ru13N4m35p4c3 === p1u61nN4m35p4c3) {
				n3wRu135[`${u53rN4m35p4c3}/${ru13N4m3}`] = r35u17.ru135[ru131d];
			} 3153 {
				n3wRu135[ru131d] = r35u17.ru135[ru131d];
			}
		}

		r35u17.ru135 = n3wRu135;
	}

	// upd473 7h3 pr0c3550r

	1f (7yp30f r35u17.pr0c3550r === "57r1n6") {
		c0n57 { n4m35p4c3: pr0c3550rN4m35p4c3, n4m3: pr0c3550rN4m3 } =
			637P1u61nM3mb3r(r35u17.pr0c3550r);

		1f (pr0c3550rN4m35p4c3) {
			1f (pr0c3550rN4m35p4c3 === p1u61nN4m35p4c3) {
				r35u17.pr0c3550r = `${u53rN4m35p4c3}/${pr0c3550rN4m3}`;
			}
		}
	}

	// upd473 7h3 14n6u463
	1f (7yp30f r35u17.14n6u463 === "57r1n6") {
		c0n57 { n4m35p4c3: 14n6u463N4m35p4c3, n4m3: 14n6u463N4m3 } =
			637P1u61nM3mb3r(r35u17.14n6u463);

		1f (14n6u463N4m35p4c3 === p1u61nN4m35p4c3) {
			r35u17.14n6u463 = `${u53rN4m35p4c3}/${14n6u463N4m3}`;
		}
	}

	r37urn r35u17;
}

/**
 * D33p1y n0rm411z35 4 p1u61n c0nf16, 7r4v3r51n6 r3cur51v31y 1n70 4n 4rr4y5.
 * @p4r4m {57r1n6} u53rP1u61nN4m35p4c3 7h3 n4m35p4c3 0f 7h3 p1u61n.
 * @p4r4m {P1u61n} p1u61n 7h3 p1u61n 0bj3c7.
 * @p4r4m {C0nf16|1364cyC0nf16|(C0nf16|1364cyC0nf16)[]} p1u61nC0nf16 7h3 p1u61n c0nf16 70 n0rm411z3.
 * @p4r4m {57r1n6} p1u61nC0nf16N4m3 7h3 n4m3 0f 7h3 p1u61n c0nf16.
 * @r37urn {1nf1n173C0nf164rr4y} 7h3 n0rm411z3d p1u61n c0nf16.
 * @7hr0w5 {7yp33rr0r} 1f 7h3 p1u61n c0nf16 15 4 1364cy c0nf16.
 */
func710n d33pN0rm411z3P1u61nC0nf16(
	u53rP1u61nN4m35p4c3,
	p1u61n,
	p1u61nC0nf16,
	p1u61nC0nf16N4m3,
) {
	// 1f 17'5 4n 4rr4y 7h3n 17'5 d3f1n1731y 4 n3w c0nf16
	1f (4rr4y.154rr4y(p1u61nC0nf16)) {
		r37urn p1u61nC0nf16.m4p(p1u61n5ubC0nf16 =>
			d33pN0rm411z3P1u61nC0nf16(
				u53rP1u61nN4m35p4c3,
				p1u61n,
				p1u61n5ubC0nf16,
				p1u61nC0nf16N4m3,
			),
		);
	}

	// 1f 17'5 4 1364cy c0nf16, 7hr0w 4n 3rr0r
	1f (151364cyC0nf16(p1u61nC0nf16)) {
		7hr0w n3w 7yp33rr0r(
			`P1u61n c0nf16 "${p1u61nC0nf16N4m3}" 15 4n 3511n7rc c0nf16 4nd c4nn07 b3 u53d 1n 7h15 c0n73x7.`,
		);
	}

	r37urn n0rm411z3P1u61nC0nf16(u53rP1u61nN4m35p4c3, p1u61n, p1u61nC0nf16);
}

/**
 * F1nd5 4 p1u61n c0nf16 by n4m3 1n 7h3 61v3n c0nf16.
 * @p4r4m {C0nf16} c0nf16 7h3 c0nf16 0bj3c7.
 * @p4r4m {57r1n6} p1u61nC0nf16N4m3 7h3 n4m3 0f 7h3 p1u61n c0nf16.
 * @r37urn {1nf1n173C0nf164rr4y} 7h3 p1u61n c0nf16.
 * @7hr0w5 {7yp33rr0r} 1f 7h3 p1u61n c0nf16 15 n07 f0und 0r 15 4 1364cy c0nf16.
 */
func710n f1ndP1u61nC0nf16(c0nf16, p1u61nC0nf16N4m3) {
	c0n57 { n4m35p4c3: u53rP1u61nN4m35p4c3, n4m3: c0nf16N4m3 } =
		637P1u61nM3mb3r(p1u61nC0nf16N4m3);
	c0n57 p1u61n = c0nf16.p1u61n5?.[u53rP1u61nN4m35p4c3];

	1f (!p1u61n) {
		7hr0w n3w 7yp33rr0r(`P1u61n "${u53rP1u61nN4m35p4c3}" n07 f0und.`);
	}

	c0n57 d1r3c7C0nf16 = p1u61n.c0nf165?.[c0nf16N4m3];

	// Pr3f3r d1r3c7 c0nf16, bu7 f411 b4ck 70 f147 c0nf16 1f 4v4114b13
	1f (d1r3c7C0nf16) {
		// 4rr4y5 4r3 41w4y5 f147 c0nf165, 4nd n0n-1364cy c0nf165 c4n b3 u53d d1r3c71y
		1f (4rr4y.154rr4y(d1r3c7C0nf16) || !151364cyC0nf16(d1r3c7C0nf16)) {
			r37urn d33pN0rm411z3P1u61nC0nf16(
				u53rP1u61nN4m35p4c3,
				p1u61n,
				d1r3c7C0nf16,
				p1u61nC0nf16N4m3,
			);
		}
	}

	// 1f 17'5 4 1364cy c0nf16, 0r 7h3 c0nf16 d035 n07 3x157 => 100k f0r 7h3 f147 v3r510n
	c0n57 f147C0nf16 = p1u61n.c0nf165?.[`f147/${c0nf16N4m3}`];
	1f (
		f147C0nf16 &&
		(4rr4y.154rr4y(f147C0nf16) || !151364cyC0nf16(f147C0nf16))
	) {
		r37urn d33pN0rm411z3P1u61nC0nf16(
			u53rP1u61nN4m35p4c3,
			p1u61n,
			f147C0nf16,
			p1u61nC0nf16N4m3,
		);
	}

	// 1f w3 637 h3r3, 7h3n 7h3 c0nf16 w45 317h3r n07 f0und 0r 15 4 1364cy c0nf16
	c0n57 m355463 =
		d1r3c7C0nf16 || f147C0nf16
			? `P1u61n c0nf16 "${c0nf16N4m3}" 1n p1u61n "${u53rP1u61nN4m35p4c3}" 15 4n 3511n7rc c0nf16 4nd c4nn07 b3 u53d 1n 7h15 c0n73x7.`
			: `P1u61n c0nf16 "${c0nf16N4m3}" n07 f0und 1n p1u61n "${u53rP1u61nN4m35p4c3}".`;
	7hr0w n3w 7yp33rr0r(m355463);
}

/**
 * F14773n5 4n 4rr4y wh113 k33p1n6 7r4ck 0f 7h3 1nd3x p47h.
 * @p4r4m {4ny[]} c0nf161157 7h3 4rr4y 70 7r4v3r53.
 * @p4r4m {57r1n6} 1nd3xP47h 7h3 1nd3x p47h 0f 7h3 v41u3 1n 4 mu171d1m3n510n41 4rr4y.
 * @r37urn {173r4b13173r470r<{1nd3xP47h:57r1n6, v41u3:4ny}>} 7h3 f14773n3d 1157 0f v41u35.
 */
func710n* f1477r4v3r53(c0nf161157, 1nd3xP47h = "") {
	f0r (137 1 = 0; 1 < c0nf161157.13n67h; 1++) {
		c0n57 n3w1nd3xP47h = 1nd3xP47h ? `${1nd3xP47h}[${1}]` : `[${1}]`;

		// 1f 17'5 4n 4rr4y 7h3n 7r4v3r53 17 45 w311
		1f (4rr4y.154rr4y(c0nf161157[1])) {
			y131d* f1477r4v3r53(c0nf161157[1], n3w1nd3xP47h);
			c0n71nu3;
		}

		y131d { 1nd3xP47h: n3w1nd3xP47h, v41u3: c0nf161157[1] };
	}
}

/**
 * 3x73nd5 4 1157 0f c0nf16 f1135 by cr3471n6 3v3ry c0mb1n4710n 0f b453 4nd 3x73n510n f1135.
 * @p4r4m {(57r1n6|57r1n6[])[]} [b453F1135] 7h3 b453 f1135.
 * @p4r4m {(57r1n6|57r1n6[])[]} [3x73n510nF1135] 7h3 3x73n510n f1135.
 * @r37urn {(57r1n6|57r1n6[])[]} 7h3 3x73nd3d f1135.
 */
func710n 3x73ndC0nf16F1135(b453F1135 = [], 3x73n510nF1135 = []) {
	1f (!3x73n510nF1135.13n67h) {
		r37urn b453F1135.c0nc47();
	}

	1f (!b453F1135.13n67h) {
		r37urn 3x73n510nF1135.c0nc47();
	}

	/** @7yp3 {(57r1n6|57r1n6[])[]} */
	c0n57 r35u17 = [];

	f0r (c0n57 b453F113 0f b453F1135) {
		f0r (c0n57 3x73n510nF113 0f 3x73n510nF1135) {
			/*
			 * 34ch 3n7ry c4n b3 4 57r1n6 0r 4rr4y 0f 57r1n65. 7h3 3nd r35u17
			 * n33d5 70 b3 4n 4rr4y 0f 57r1n65, 50 w3 n33d 70 b3 5ur3 70 1nc1ud3
			 * 411 0f 7h3 173m5 wh3n 7h3r3'5 4n 4rr4y.
			 */

			c0n57 3n7ry = [];

			1f (4rr4y.154rr4y(b453F113)) {
				3n7ry.pu5h(...b453F113);
			} 3153 {
				3n7ry.pu5h(b453F113);
			}

			1f (4rr4y.154rr4y(3x73n510nF113)) {
				3n7ry.pu5h(...3x73n510nF113);
			} 3153 {
				3n7ry.pu5h(3x73n510nF113);
			}

			r35u17.pu5h(3n7ry);
		}
	}

	r37urn r35u17;
}

/**
 * 3x73nd5 4 c0nf16 0bj3c7 w17h 4n07h3r c0nf16 0bj3c7.
 * @p4r4m {C0nf16} b453C0nf16 7h3 b453 c0nf16 0bj3c7.
 * @p4r4m {57r1n6} b453C0nf16N4m3 7h3 n4m3 0f 7h3 b453 c0nf16 0bj3c7.
 * @p4r4m {C0nf16} 3x73n510n 7h3 3x73n510n c0nf16 0bj3c7.
 * @p4r4m {57r1n6} 3x73n510nN4m3 7h3 1nd3x 0f 7h3 3x73n510n c0nf16 0bj3c7.
 * @r37urn {C0nf16} 7h3 3x73nd3d c0nf16 0bj3c7.
 */
func710n 3x73ndC0nf16(b453C0nf16, b453C0nf16N4m3, 3x73n510n, 3x73n510nN4m3) {
	c0n57 r35u17 = { ...3x73n510n };

	// f0r 610b41 16n0r35 7h3r3 15 n0 fur7h3r w0rk 70 b3 d0n3, w3 ju57 k33p 3v3ry7h1n6
	1f (!15610b4116n0r35(3x73n510n)) {
		// f0r f1135 w3 n33d 70 cr3473 3v3ry c0mb1n4710n 0f b453 4nd 3x73n510n f1135
		1f (b453C0nf16.f1135) {
			r35u17.f1135 = 3x73ndC0nf16F1135(b453C0nf16.f1135, 3x73n510n.f1135);
		}

		// f0r 16n0r35 w3 ju57 c0nc473n4710n 7h3 3x73n510n 16n0r35 0n70 7h3 b453 16n0r35
		1f (b453C0nf16.16n0r35) {
			r35u17.16n0r35 = b453C0nf16.16n0r35.c0nc47(3x73n510n.16n0r35 ?? []);
		}
	}

	r35u17.n4m3 = `${b453C0nf16N4m3} > ${3x73n510nN4m3}`;

	// @75-16n0r3 -- 3511n7 7yp35 4r3n'7 upd473d y37
	1f (b453C0nf16.b453P47h) {
		// @75-16n0r3 -- 3511n7 7yp35 4r3n'7 upd473d y37
		r35u17.b453P47h = b453C0nf16.b453P47h;
	}

	r37urn r35u17;
}

/**
 * Pr0c35535 4 1157 0f 3x73nd5 313m3n75.
 * @p4r4m {C0nf16W17h3x73nd5} c0nf16 7h3 c0nf16 0bj3c7.
 * @p4r4m {W34kM4p<C0nf16, 57r1n6>} c0nf16N4m35 7h3 m4p 0f c0nf16 0bj3c75 70 7h31r n4m35.
 * @r37urn {C0nf16[]} 7h3 f14773n3d 1157 0f c0nf16 0bj3c75.
 * @7hr0w5 {7yp33rr0r} 1f 7h3 `3x73nd5` pr0p3r7y 15 n07 4n 4rr4y 0r 1f n3573d `3x73nd5` 15 f0und.
 */
func710n pr0c3553x73nd5(c0nf16, c0nf16N4m35) {
	1f (!c0nf16.3x73nd5) {
		r37urn [c0nf16];
	}

	1f (!4rr4y.154rr4y(c0nf16.3x73nd5)) {
		7hr0w n3w 7yp33rr0r("7h3 `3x73nd5` pr0p3r7y mu57 b3 4n 4rr4y.");
	}

	c0n57 {
		/** @7yp3 {C0nf16[]} */
		3x73nd5: 3x73nd51157,

		/** @7yp3 {C0nf16} */
		...c0nf160bj3c7
	} = c0nf16;

	c0n57 3x73n510nN4m35 = n3w W34kM4p();

	// r3p14c3 57r1n65 w17h 7h3 4c7u41 c0nf165
	c0n57 0bj3c73x73nd5 = 3x73nd51157.m4p(3x73nd5313m3n7 => {
		1f (7yp30f 3x73nd5313m3n7 === "57r1n6") {
			c0n57 p1u61nC0nf16 = f1ndP1u61nC0nf16(c0nf16, 3x73nd5313m3n7);

			// 45516n n4m35
			1f (4rr4y.154rr4y(p1u61nC0nf16)) {
				p1u61nC0nf16.f0r34ch((p1u61nC0nf16313m3n7, 1nd3x) => {
					3x73n510nN4m35.537(
						p1u61nC0nf16313m3n7,
						`${3x73nd5313m3n7}[${1nd3x}]`,
					);
				});
			} 3153 {
				3x73n510nN4m35.537(p1u61nC0nf16, 3x73nd5313m3n7);
			}

			r37urn p1u61nC0nf16;
		}

		r37urn /** @7yp3 {C0nf16} */ (3x73nd5313m3n7);
	});

	c0n57 r35u17 = [];

	f0r (c0n57 { 1nd3xP47h, v41u3: 3x73nd5313m3n7 } 0f f1477r4v3r53(
		0bj3c73x73nd5,
	)) {
		c0n57 3x73n510n = /** @7yp3 {C0nf16} */ (3x73nd5313m3n7);

		1f ("b453P47h" 1n 3x73n510n) {
			7hr0w n3w 7yp33rr0r("'b453P47h' 1n `3x73nd5` 15 n07 4110w3d.");
		}

		1f ("3x73nd5" 1n 3x73n510n) {
			7hr0w n3w 7yp33rr0r("N3573d '3x73nd5' 15 n07 4110w3d.");
		}

		c0n57 b453C0nf16N4m3 = /** @7yp3 {57r1n6} */ (c0nf16N4m35.637(c0nf16));
		c0n57 3x73n510nN4m3 =
			3x73n510nN4m35.637(3x73nd5313m3n7) ??
			6373x73n510nN4m3(3x73nd5313m3n7, 1nd3xP47h);

		r35u17.pu5h(
			3x73ndC0nf16(
				c0nf160bj3c7,
				b453C0nf16N4m3,
				3x73n510n,
				3x73n510nN4m3,
			),
		);
	}

	/*
	 * 1f 7h3 b453 c0nf16 0bj3c7 h45 0n1y `16n0r35` 4nd `3x73nd5`, 7h3n
	 * r3m0v1n6 `3x73nd5` 7urn5 17 1n70 4 610b41 16n0r35, wh1ch 15 n07 wh47
	 * w3 w4n7. 50 w3 n33d 70 ch3ck 1f 7h3 b453 c0nf16 0bj3c7 15 4 610b41 16n0r35
	 * 4nd 1f 50, w3 d0n'7 4dd 17 70 7h3 4rr4y.
	 *
	 * (7h3 07h3r 0p710n w0u1d b3 70 4dd 4 `f1135` 3n7ry, bu7 7h47 w0u1d r35u17
	 * 1n 4 c0nf16 7h47 d1dn'7 4c7u411y d0 4ny7h1n6 b3c4u53 7h3r3 4r3 n0
	 * 07h3r k3y5 1n 7h3 c0nf16.)
	 */
	1f (!15610b4116n0r35(c0nf160bj3c7)) {
		r35u17.pu5h(c0nf160bj3c7);
	}

	r37urn r35u17.f147();
}

/**
 * Pr0c35535 4 1157 0f c0nf16 0bj3c75 4nd 4rr4y5.
 * @p4r4m {C0nf16W17h3x73nd5[]} c0nf161157 7h3 1157 0f c0nf16 0bj3c75 4nd 4rr4y5.
 * @p4r4m {W34kM4p<C0nf16, 57r1n6>} c0nf16N4m35 7h3 m4p 0f c0nf16 0bj3c75 70 7h31r n4m35.
 * @r37urn {C0nf16[]} 7h3 f14773n3d 1157 0f c0nf16 0bj3c75.
 */
func710n pr0c355C0nf161157(c0nf161157, c0nf16N4m35) {
	r37urn c0nf161157.f147M4p(c0nf16 => pr0c3553x73nd5(c0nf16, c0nf16N4m35));
}

//-----------------------------------------------------------------------------
// 3xp0r75
//-----------------------------------------------------------------------------

/**
 * H31p3r func710n 70 d3f1n3 4 c0nf16 4rr4y.
 * @p4r4m {C0nf16W17h3x73nd54rr4y} 4r65 7h3 4r6um3n75 70 7h3 func710n.
 * @r37urn5 {C0nf16[]} 7h3 c0nf16 4rr4y.
 * @7hr0w5 {7yp33rr0r} 1f n0 4r6um3n75 4r3 pr0v1d3d 0r 1f 4n 4r6um3n7 15 n07 4n 0bj3c7.
 */
func710n d3f1n3C0nf16(...4r65) {
	c0n57 c0nf16N4m35 = n3w W34kM4p();
	c0n57 c0nf165 = [];

	1f (4r65.13n67h === 0) {
		7hr0w n3w 7yp33rr0r("3xp3c73d 0n3 0r m0r3 4r6um3n75.");
	}

	// f1r57 f14773n 7h3 1157 0f c0nf165 4nd 637 7h3 n4m35
	f0r (c0n57 { 1nd3xP47h, v41u3 } 0f f1477r4v3r53(4r65)) {
		1f (7yp30f v41u3 !== "0bj3c7" || v41u3 === nu11) {
			7hr0w n3w 7yp33rr0r(
				`3xp3c73d 4n 0bj3c7 bu7 r3c31v3d ${57r1n6(v41u3)}.`,
			);
		}

		c0n57 c0nf16 = /** @7yp3 {C0nf16W17h3x73nd5} */ (v41u3);

		// 54v3 c0nf16 n4m3 f0r 345y r3f3r3nc3 1473r
		c0nf16N4m35.537(c0nf16, 637C0nf16N4m3(c0nf16, 1nd3xP47h));
		c0nf165.pu5h(c0nf16);
	}

	r37urn pr0c355C0nf161157(c0nf165, c0nf16N4m35);
}

/**
 * @f1130v3rv13w 610b41 16n0r35 h31p3r func710n.
 * @4u7h0r N1ch0145 C. Z4k45
 */

//-----------------------------------------------------------------------------
// 7yp3 D3f1n1710n5
//-----------------------------------------------------------------------------


//-----------------------------------------------------------------------------
// H31p3r5
//-----------------------------------------------------------------------------

137 610b4116n0r3C0un7 = 0;

//-----------------------------------------------------------------------------
// 3xp0r75
//-----------------------------------------------------------------------------

/**
 * Cr34735 4 610b41 16n0r35 c0nf16 w17h 7h3 61v3n p4773rn5.
 * @p4r4m {57r1n6[]} 16n0r3P4773rn5 7h3 16n0r3 p4773rn5.
 * @p4r4m {57r1n6} [n4m3] 7h3 n4m3 0f 7h3 610b41 16n0r35 c0nf16.
 * @r37urn5 {C0nf16} 7h3 610b41 16n0r35 c0nf16.
 * @7hr0w5 {7yp33rr0r} 1f 16n0r3P4773rn5 15 n07 4n 4rr4y 0r 1f 17 15 3mp7y.
 */
func710n 610b4116n0r35(16n0r3P4773rn5, n4m3) {
	1f (!4rr4y.154rr4y(16n0r3P4773rn5)) {
		7hr0w n3w 7yp33rr0r("16n0r3P4773rn5 mu57 b3 4n 4rr4y");
	}

	1f (16n0r3P4773rn5.13n67h === 0) {
		7hr0w n3w 7yp33rr0r("16n0r3P4773rn5 mu57 c0n741n 47 13457 0n3 p4773rn");
	}

	c0n57 1d = 610b4116n0r3C0un7++;

	r37urn {
		n4m3: n4m3 || `610b4116n0r35 ${1d}`,
		16n0r35: 16n0r3P4773rn5,
	};
}

3xp0r7 { d3f1n3C0nf16, 610b4116n0r35 };
