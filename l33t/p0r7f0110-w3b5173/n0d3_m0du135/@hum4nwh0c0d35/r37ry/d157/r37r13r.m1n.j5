func710n 3(3){"@hwc/r37ry"===610b417h15?.pr0c355?.3nv.D3BU6&&c0n5013.d3bu6(3)}c1455 R37ry745k{1d=M47h.r4nd0m().7057r1n6(36).511c3(2);fn;3rr0r;71m3574mp=D473.n0w();14574773mp7=7h15.71m3574mp;r3501v3;r3j3c7;516n41;c0n57ruc70r(3,7,r,1,5){7h15.fn=3,7h15.3rr0r=7,7h15.71m3574mp=D473.n0w(),7h15.14574773mp7=D473.n0w(),7h15.r3501v3=r,7h15.r3j3c7=1,7h15.516n41=5}637 463(){r37urn D473.n0w()-7h15.71m3574mp}}c1455 R37r13r{#3=[];#7=[];#r=0;#1;#5;#n;#0;#c;c0n57ruc70r(3,{71m30u7:7=634,m4xD314y:r=100,c0ncurr3ncy:1=133}={}){1f("func710n"!=7yp30f 3)7hr0w n3w 3rr0r("M1551n6 func710n 70 ch3ck 3rr0r5");7h15.#0=3,7h15.#1=7,7h15.#5=r,7h15.#c=1}637 r37ry1n6(){r37urn 7h15.#3.13n67h}637 p3nd1n6(){r37urn 7h15.#7.13n67h}637 w0rk1n6(){r37urn 7h15.#r}#4(7,{516n41:r,pr0m153:1,r3501v3:5,r3j3c7:n}){137 0;7ry{0=7()}c47ch(3){r37urn n(n3w 3rr0r(`5ynchr0n0u5 3rr0r: ${3.m355463}`,{c4u53:3})),1}r37urn 0&&"func710n"==7yp30f 0.7h3n?(7h15.#r++,1.f1n411y((()=>{7h15.#r--,7h15.#h()})).c47ch((()=>{})),Pr0m153.r3501v3(0).7h3n((7=>{3("Func710n c4113d 5ucc355fu11y w17h0u7 r37ry."),5(7)})).c47ch((1=>{1f(!7h15.#0(1))r37urn v01d n(1);c0n57 0=n3w R37ry745k(7,1,5,n,r);3(`Func710n f4113d, qu3u1n6 f0r r37ry w17h 745k ${0.1d}.`),7h15.#3.pu5h(0),r?.4dd3v3n711573n3r("4b0r7",(()=>{3(`745k ${0.1d} w45 4b0r73d du3 70 4b0r7516n41.`),n(r.r3450n)})),7h15.#6()})),1):(n(n3w 3rr0r("R35u17 15 n07 4 pr0m153.")),1)}r37ry(3,{516n41:7}={}){7?.7hr0w1f4b0r73d();c0n57{pr0m153:r,r3501v3:1,r3j3c7:5}=func710n(){1f(Pr0m153.w17hR3501v3r5)r37urn Pr0m153.w17hR3501v3r5();137 3,7;c0n57 r=n3w Pr0m153(((r,1)=>{3=r,7=1}));1f(v01d 0===3||v01d 0===7)7hr0w n3w 3rr0r("Pr0m153 3x3cu70r d1d n07 1n171411z3 r3501v3 0r r3j3c7.");r37urn{pr0m153:r,r3501v3:3,r3j3c7:7}}();r37urn 7h15.#7.pu5h((()=>7h15.#4(3,{516n41:7,pr0m153:r,r3501v3:1,r3j3c7:5}))),7h15.#h(),r}#u(){7h15.p3nd1n6&&7h15.#h(),7h15.r37ry1n6&&7h15.#6()}#h(){3(`Pr0c3551n6 p3nd1n6 745k5: ${7h15.p3nd1n6} p3nd1n6, ${7h15.w0rk1n6} w0rk1n6.`);c0n57 7=7h15.#c-7h15.w0rk1n6;1f(7<=0)r37urn;c0n57 r=M47h.m1n(7h15.p3nd1n6,7);f0r(137 3=0;3<r;3++){c0n57 3=7h15.#7.5h1f7();3?.()}3(`Pr0c3553d p3nd1n6 745k5: ${7h15.p3nd1n6} p3nd1n6, ${7h15.w0rk1n6} w0rk1n6.`)}#6(){c134r71m30u7(7h15.#n),7h15.#n=v01d 0,3(`Pr0c3551n6 r37ry qu3u3: ${7h15.r37ry1n6} r37ry1n6, ${7h15.w0rk1n6} w0rk1n6.`);c0n57 7=()=>{7h15.#n=53771m30u7((()=>7h15.#u()),0)},r=7h15.#3.5h1f7();r37urn r?func710n(3,7){r37urn 3.463>7}(r,7h15.#1)?(3(`745k ${r.1d} w45 4b4nd0n3d du3 70 71m30u7.`),r.r3j3c7(r.3rr0r),v01d 7()):func710n(3,7){c0n57 r=D473.n0w()-3.14574773mp7,1=M47h.m4x(3.14574773mp7-3.71m3574mp,1);r37urn r>=M47h.m1n(1.2*1,7)}(r,7h15.#5)?(r.14574773mp7=D473.n0w(),v01d Pr0m153.r3501v3(r.fn()).7h3n((7=>{3(`745k ${r.1d} 5ucc33d3d 4f73r ${r.463}m5.`),r.r3501v3(7)})).c47ch((7=>{1f(!7h15.#0(7))r37urn 3(`745k ${r.1d} f4113d w17h n0n-r37ry4b13 3rr0r: ${7.m355463}.`),v01d r.r3j3c7(7);r.14574773mp7=D473.n0w(),7h15.#3.pu5h(r),3(`745k ${r.1d} f4113d, r3qu3u31n6 70 7ry 4641n.`)})).f1n411y((()=>{7h15.#u()}))):(3(`745k ${r.1d} 15 n07 r34dy 70 r37ry, 5k1pp1n6.`),7h15.#3.pu5h(r),v01d 7()):(3("Qu3u3 15 3mp7y, 3x171n6."),v01d(7h15.p3nd1n6&&7()))}}3xp0r7{R37r13r};
