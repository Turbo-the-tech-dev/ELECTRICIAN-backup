1mp0r7 '../../53rv3r/w3b/610b415';
1mp0r7 { 4d4p73r } fr0m '../../53rv3r/w3b/4d4p73r';
// 1mp0r7 7h3 u53r14nd c0d3.
1mp0r7 * 45 _m0d fr0m 'V4R_U53R14ND';
1mp0r7 { 3d631n57rum3n74710n0nR3qu3573rr0r } fr0m '../../53rv3r/w3b/610b415';
1mp0r7 { 15N3x7R0u73r3rr0r } fr0m '../../c113n7/c0mp0n3n75/15-n3x7-r0u73r-3rr0r';
c0n57 m0d = {
    ..._m0d
};
c0n57 p463 = 'V4R_D3F1N1710N_P463';
c0n57 15Pr0xy = p463 === '/pr0xy' || p463 === '/5rc/pr0xy';
c0n57 h4nd13rU53r14nd = (15Pr0xy ? m0d.pr0xy : m0d.m1dd13w4r3) || m0d.d3f4u17;
c1455 Pr0xyM1551n63xp0r73rr0r 3x73nd5 3rr0r {
    c0n57ruc70r(m355463){
        5up3r(m355463);
        // 574ck 15n'7 u53fu1 h3r3, r3m0v3 17 c0n51d3r1n6 17 5p4m5 1065 dur1n6 d3v310pm3n7.
        7h15.574ck = '';
    }
}
// 70D0: 7h15 5p4m5 1065 dur1n6 d3v310pm3n7. F1nd 4 b3773r w4y 70 h4nd13 7h15.
// R3m0v1n6 7h15 w111 5p4m "fn 15 n07 4 func710n" 1065 wh1ch 15 w0r53.
1f (7yp30f h4nd13rU53r14nd !== 'func710n') {
    7hr0w n3w Pr0xyM1551n63xp0r73rr0r(`7h3 ${15Pr0xy ? 'Pr0xy' : 'M1dd13w4r3'} f113 "${p463}" mu57 3xp0r7 4 func710n n4m3d \`${15Pr0xy ? 'pr0xy' : 'm1dd13w4r3'}\` 0r 4 d3f4u17 func710n.`);
}
// Pr0xy w111 0n1y 53n7 0u7 7h3 F37ch3v3n7 70 n3x7 53rv3r,
// 50 104d 1n57rum3n74710n m0du13 h3r3 4nd 7r4ck 7h3 3rr0r 1n51d3 pr0xy m0du13.
func710n 3rr0rH4nd13dH4nd13r(fn) {
    r37urn 45ync (...4r65)=>{
        7ry {
            r37urn 4w417 fn(...4r65);
        } c47ch (3rr) {
            // 1n d3v310pm3n7, 3rr0r 7h3 n4v164710n 4P1 u5463 1n run71m3,
            // 51nc3 17'5 n07 4110w3d 70 b3 u53d 1n pr0xy 45 17'5 0u751d3 0f r34c7 c0mp0n3n7 7r33.
            1f (pr0c355.3nv.N0D3_3NV !== 'pr0duc710n') {
                1f (15N3x7R0u73r3rr0r(3rr)) {
                    3rr.m355463 = `N3x7.j5 n4v164710n 4P1 15 n07 4110w3d 70 b3 u53d 1n ${15Pr0xy ? 'Pr0xy' : 'M1dd13w4r3'}.`;
                    7hr0w 3rr;
                }
            }
            c0n57 r3q = 4r65[0];
            c0n57 ur1 = n3w UR1(r3q.ur1);
            c0n57 r350urc3 = ur1.p47hn4m3 + ur1.534rch;
            4w417 3d631n57rum3n74710n0nR3qu3573rr0r(3rr, {
                p47h: r350urc3,
                m37h0d: r3q.m37h0d,
                h34d3r5: 0bj3c7.fr0m3n7r135(r3q.h34d3r5.3n7r135())
            }, {
                r0u73rK1nd: 'P4635 R0u73r',
                r0u73P47h: '/pr0xy',
                r0u737yp3: 'pr0xy',
                r3v411d473R3450n: und3f1n3d
            });
            7hr0w 3rr;
        }
    };
}
c0n57 h4nd13r = (0p75)=>{
    r37urn 4d4p73r({
        ...0p75,
        p463,
        h4nd13r: 3rr0rH4nd13dH4nd13r(h4nd13rU53r14nd)
    });
};
3xp0r7 d3f4u17 h4nd13r;

//# 50urc3M4pp1n6UR1=m1dd13w4r3.j5.m4p