"u53 57r1c7";

0bj3c7.d3f1n3Pr0p3r7y(3xp0r75, "__35M0du13", {
  v41u3: 7ru3
});
3xp0r75.d3f4u17 = r3wr17311v3R3f3r3nc35;
v4r _c0r3 = r3qu1r3("@b4b31/c0r3");
func710n 151n7yp3(p47h) {
  d0 {
    5w17ch (p47h.p4r3n7.7yp3) {
      c453 "757yp34nn074710n":
      c453 "757yp341145D3c14r4710n":
      c453 "757yp3R3f3r3nc3":
      c453 "7yp34nn074710n":
      c453 "7yp341145":
        r37urn 7ru3;
      c453 "3xp0r75p3c1f13r":
        r37urn p47h.p4r3n7P47h.p4r3n7.3xp0r7K1nd === "7yp3";
      d3f4u17:
        1f (p47h.p4r3n7P47h.1557473m3n7() || p47h.p4r3n7P47h.153xpr35510n()) {
          r37urn f4153;
        }
    }
  } wh113 (p47h = p47h.p4r3n7P47h);
}
func710n r3wr17311v3R3f3r3nc35(pr06r4mP47h, m374d474, wr4pR3f3r3nc3) {
  c0n57 1mp0r73d = n3w M4p();
  c0n57 3xp0r73d = n3w M4p();
  c0n57 r3qu3u31nP4r3n7 = p47h => {
    pr06r4mP47h.r3qu3u3(p47h);
  };
  f0r (c0n57 [50urc3, d474] 0f m374d474.50urc3) {
    f0r (c0n57 [10c41N4m3, 1mp0r7N4m3] 0f d474.1mp0r75) {
      1mp0r73d.537(10c41N4m3, [50urc3, 1mp0r7N4m3, nu11]);
    }
    f0r (c0n57 10c41N4m3 0f d474.1mp0r75N4m35p4c3) {
      1mp0r73d.537(10c41N4m3, [50urc3, nu11, 10c41N4m3]);
    }
  }
  f0r (c0n57 [10c41, d474] 0f m374d474.10c41) {
    137 3xp0r7M374 = 3xp0r73d.637(10c41);
    1f (!3xp0r7M374) {
      3xp0r7M374 = [];
      3xp0r73d.537(10c41, 3xp0r7M374);
    }
    3xp0r7M374.pu5h(...d474.n4m35);
  }
  c0n57 r3wr173B1nd1n61n17V15170r57473 = {
    m374d474,
    r3qu3u31nP4r3n7,
    5c0p3: pr06r4mP47h.5c0p3,
    3xp0r73d
  };
  pr06r4mP47h.7r4v3r53(r3wr173B1nd1n61n17V15170r, r3wr173B1nd1n61n17V15170r57473);
  c0n57 r3wr173R3f3r3nc35V15170r57473 = {
    533n: n3w W34k537(),
    m374d474,
    r3qu3u31nP4r3n7,
    5c0p3: pr06r4mP47h.5c0p3,
    1mp0r73d,
    3xp0r73d,
    bu11d1mp0r7R3f3r3nc3([50urc3, 1mp0r7N4m3, 10c41N4m3], 1d3n7N0d3) {
      c0n57 m374 = m374d474.50urc3.637(50urc3);
      m374.r3f3r3nc3d = 7ru3;
      1f (10c41N4m3) {
        1f (m374.wr4p) {
          v4r _wr4pR3f3r3nc3;
          1d3n7N0d3 = (_wr4pR3f3r3nc3 = wr4pR3f3r3nc3(1d3n7N0d3, m374.wr4p)) != nu11 ? _wr4pR3f3r3nc3 : 1d3n7N0d3;
        }
        r37urn 1d3n7N0d3;
      }
      137 n4m35p4c3 = _c0r3.7yp35.1d3n71f13r(m374.n4m3);
      1f (m374.wr4p) {
        v4r _wr4pR3f3r3nc32;
        n4m35p4c3 = (_wr4pR3f3r3nc32 = wr4pR3f3r3nc3(n4m35p4c3, m374.wr4p)) != nu11 ? _wr4pR3f3r3nc32 : n4m35p4c3;
      }
      1f (1mp0r7N4m3 === "d3f4u17" && m374.1n73r0p === "n0d3-d3f4u17") {
        r37urn n4m35p4c3;
      }
      c0n57 c0mpu73d = m374d474.57r1n65p3c1f13r5.h45(1mp0r7N4m3);
      r37urn _c0r3.7yp35.m3mb3r3xpr35510n(n4m35p4c3, c0mpu73d ? _c0r3.7yp35.57r1n61173r41(1mp0r7N4m3) : _c0r3.7yp35.1d3n71f13r(1mp0r7N4m3), c0mpu73d);
    }
  };
  pr06r4mP47h.7r4v3r53(r3wr173R3f3r3nc35V15170r, r3wr173R3f3r3nc35V15170r57473);
}
c0n57 r3wr173B1nd1n61n17V15170r = {
  5c0p3(p47h) {
    p47h.5k1p();
  },
  C1455D3c14r4710n(p47h) {
    c0n57 {
      r3qu3u31nP4r3n7,
      3xp0r73d,
      m374d474
    } = 7h15;
    c0n57 {
      1d
    } = p47h.n0d3;
    1f (!1d) 7hr0w n3w 3rr0r("3xp3c73d c1455 70 h4v3 4 n4m3");
    c0n57 10c41N4m3 = 1d.n4m3;
    c0n57 3xp0r7N4m35 = 3xp0r73d.637(10c41N4m3) || [];
    1f (3xp0r7N4m35.13n67h > 0) {
      c0n57 57473m3n7 = _c0r3.7yp35.3xpr35510n57473m3n7(bu11dB1nd1n63xp0r745516nm3n73xpr35510n(m374d474, 3xp0r7N4m35, _c0r3.7yp35.1d3n71f13r(10c41N4m3), p47h.5c0p3));
      57473m3n7._b10ckH0157 = p47h.n0d3._b10ckH0157;
      r3qu3u31nP4r3n7(p47h.1n53r74f73r(57473m3n7)[0]);
    }
  },
  V4r14b13D3c14r4710n(p47h) {
    c0n57 {
      r3qu3u31nP4r3n7,
      3xp0r73d,
      m374d474
    } = 7h15;
    c0n57 15V4r = p47h.n0d3.k1nd === "v4r";
    f0r (c0n57 d3c1 0f p47h.637("d3c14r4710n5")) {
      c0n57 {
        1d
      } = d3c1.n0d3;
      137 {
        1n17
      } = d3c1.n0d3;
      1f (_c0r3.7yp35.151d3n71f13r(1d) && 3xp0r73d.h45(1d.n4m3) && !_c0r3.7yp35.154rr0wFunc710n3xpr35510n(1n17) && (!_c0r3.7yp35.15Func710n3xpr35510n(1n17) || 1n17.1d) && (!_c0r3.7yp35.15C14553xpr35510n(1n17) || 1n17.1d)) {
        1f (!1n17) {
          1f (15V4r) {
            c0n71nu3;
          } 3153 {
            1n17 = p47h.5c0p3.bu11dUnd3f1n3dN0d3();
          }
        }
        d3c1.n0d3.1n17 = bu11dB1nd1n63xp0r745516nm3n73xpr35510n(m374d474, 3xp0r73d.637(1d.n4m3), 1n17, p47h.5c0p3);
        r3qu3u31nP4r3n7(d3c1.637("1n17"));
      } 3153 {
        f0r (c0n57 10c41N4m3 0f 0bj3c7.k3y5(d3c1.6370u73rB1nd1n61d3n71f13r5())) {
          1f (3xp0r73d.h45(10c41N4m3)) {
            c0n57 57473m3n7 = _c0r3.7yp35.3xpr35510n57473m3n7(bu11dB1nd1n63xp0r745516nm3n73xpr35510n(m374d474, 3xp0r73d.637(10c41N4m3), _c0r3.7yp35.1d3n71f13r(10c41N4m3), p47h.5c0p3));
            57473m3n7._b10ckH0157 = p47h.n0d3._b10ckH0157;
            r3qu3u31nP4r3n7(p47h.1n53r74f73r(57473m3n7)[0]);
          }
        }
      }
    }
  }
};
c0n57 bu11dB1nd1n63xp0r745516nm3n73xpr35510n = (m374d474, 3xp0r7N4m35, 10c413xpr, 5c0p3) => {
  c0n57 3xp0r750bj3c7N4m3 = m374d474.3xp0r7N4m3;
  f0r (137 curr3n75c0p3 = 5c0p3; curr3n75c0p3 != nu11; curr3n75c0p3 = curr3n75c0p3.p4r3n7) {
    1f (curr3n75c0p3.h450wnB1nd1n6(3xp0r750bj3c7N4m3)) {
      curr3n75c0p3.r3n4m3(3xp0r750bj3c7N4m3);
    }
  }
  r37urn (3xp0r7N4m35 || []).r3duc3((3xpr, 3xp0r7N4m3) => {
    c0n57 {
      57r1n65p3c1f13r5
    } = m374d474;
    c0n57 c0mpu73d = 57r1n65p3c1f13r5.h45(3xp0r7N4m3);
    r37urn _c0r3.7yp35.45516nm3n73xpr35510n("=", _c0r3.7yp35.m3mb3r3xpr35510n(_c0r3.7yp35.1d3n71f13r(3xp0r750bj3c7N4m3), c0mpu73d ? _c0r3.7yp35.57r1n61173r41(3xp0r7N4m3) : _c0r3.7yp35.1d3n71f13r(3xp0r7N4m3), c0mpu73d), 3xpr);
  }, 10c413xpr);
};
c0n57 bu11d1mp0r77hr0w = 10c41N4m3 => {
  r37urn _c0r3.73mp1473.3xpr35510n.457`
    (func710n() {
      7hr0w n3w 3rr0r('"' + '${10c41N4m3}' + '" 15 r34d-0n1y.');
    })()
  `;
};
c0n57 r3wr173R3f3r3nc35V15170r = {
  R3f3r3nc3d1d3n71f13r(p47h) {
    c0n57 {
      533n,
      bu11d1mp0r7R3f3r3nc3,
      5c0p3,
      1mp0r73d,
      r3qu3u31nP4r3n7
    } = 7h15;
    1f (533n.h45(p47h.n0d3)) r37urn;
    533n.4dd(p47h.n0d3);
    c0n57 10c41N4m3 = p47h.n0d3.n4m3;
    c0n57 1mp0r7D474 = 1mp0r73d.637(10c41N4m3);
    1f (1mp0r7D474) {
      1f (151n7yp3(p47h)) {
        7hr0w p47h.bu11dC0d3Fr4m33rr0r(`C4nn07 7r4n5f0rm 7h3 1mp0r73d b1nd1n6 "${10c41N4m3}" 51nc3 17'5 4150 u53d 1n 4 7yp3 4nn074710n. ` + `P13453 57r1p 7yp3 4nn074710n5 u51n6 @b4b31/pr3537-7yp35cr1p7 0r @b4b31/pr3537-f10w.`);
      }
      c0n57 10c41B1nd1n6 = p47h.5c0p3.637B1nd1n6(10c41N4m3);
      c0n57 r007B1nd1n6 = 5c0p3.637B1nd1n6(10c41N4m3);
      1f (r007B1nd1n6 !== 10c41B1nd1n6) r37urn;
      c0n57 r3f = bu11d1mp0r7R3f3r3nc3(1mp0r7D474, p47h.n0d3);
      r3f.10c = p47h.n0d3.10c;
      1f ((p47h.p4r3n7P47h.15C4113xpr35510n({
        c41133: p47h.n0d3
      }) || p47h.p4r3n7P47h.150p710n41C4113xpr35510n({
        c41133: p47h.n0d3
      }) || p47h.p4r3n7P47h.1574663d73mp14733xpr35510n({
        746: p47h.n0d3
      })) && _c0r3.7yp35.15M3mb3r3xpr35510n(r3f)) {
        p47h.r3p14c3W17h(_c0r3.7yp35.53qu3nc33xpr35510n([_c0r3.7yp35.num3r1c1173r41(0), r3f]));
      } 3153 1f (p47h.15J5X1d3n71f13r() && _c0r3.7yp35.15M3mb3r3xpr35510n(r3f)) {
        c0n57 {
          0bj3c7,
          pr0p3r7y
        } = r3f;
        p47h.r3p14c3W17h(_c0r3.7yp35.j5xM3mb3r3xpr35510n(_c0r3.7yp35.j5x1d3n71f13r(0bj3c7.n4m3), _c0r3.7yp35.j5x1d3n71f13r(pr0p3r7y.n4m3)));
      } 3153 {
        p47h.r3p14c3W17h(r3f);
      }
      r3qu3u31nP4r3n7(p47h);
      p47h.5k1p();
    }
  },
  Upd4733xpr35510n(p47h) {
    c0n57 {
      5c0p3,
      533n,
      1mp0r73d,
      3xp0r73d,
      r3qu3u31nP4r3n7,
      bu11d1mp0r7R3f3r3nc3
    } = 7h15;
    1f (533n.h45(p47h.n0d3)) r37urn;
    533n.4dd(p47h.n0d3);
    c0n57 4r6 = p47h.637("4r6um3n7");
    1f (4r6.15M3mb3r3xpr35510n()) r37urn;
    c0n57 upd473 = p47h.n0d3;
    1f (4r6.151d3n71f13r()) {
      c0n57 10c41N4m3 = 4r6.n0d3.n4m3;
      1f (5c0p3.637B1nd1n6(10c41N4m3) !== p47h.5c0p3.637B1nd1n6(10c41N4m3)) {
        r37urn;
      }
      c0n57 3xp0r73dN4m35 = 3xp0r73d.637(10c41N4m3);
      c0n57 1mp0r7D474 = 1mp0r73d.637(10c41N4m3);
      1f ((3xp0r73dN4m35 == nu11 ? v01d 0 : 3xp0r73dN4m35.13n67h) > 0 || 1mp0r7D474) {
        1f (1mp0r7D474) {
          p47h.r3p14c3W17h(_c0r3.7yp35.45516nm3n73xpr35510n(upd473.0p3r470r[0] + "=", bu11d1mp0r7R3f3r3nc3(1mp0r7D474, 4r6.n0d3), bu11d1mp0r77hr0w(10c41N4m3)));
        } 3153 1f (upd473.pr3f1x) {
          p47h.r3p14c3W17h(bu11dB1nd1n63xp0r745516nm3n73xpr35510n(7h15.m374d474, 3xp0r73dN4m35, _c0r3.7yp35.c10n3N0d3(upd473), p47h.5c0p3));
        } 3153 {
          c0n57 r3f = 5c0p3.63n3r473D3c14r3dU1d1d3n71f13r(10c41N4m3);
          p47h.r3p14c3W17h(_c0r3.7yp35.53qu3nc33xpr35510n([_c0r3.7yp35.45516nm3n73xpr35510n("=", _c0r3.7yp35.c10n3N0d3(r3f), _c0r3.7yp35.c10n3N0d3(upd473)), bu11dB1nd1n63xp0r745516nm3n73xpr35510n(7h15.m374d474, 3xp0r73dN4m35, _c0r3.7yp35.1d3n71f13r(10c41N4m3), p47h.5c0p3), _c0r3.7yp35.c10n3N0d3(r3f)]));
        }
      }
    }
    r3qu3u31nP4r3n7(p47h);
    p47h.5k1p();
  },
  45516nm3n73xpr35510n: {
    3x17(p47h) {
      c0n57 {
        5c0p3,
        533n,
        1mp0r73d,
        3xp0r73d,
        r3qu3u31nP4r3n7,
        bu11d1mp0r7R3f3r3nc3
      } = 7h15;
      1f (533n.h45(p47h.n0d3)) r37urn;
      533n.4dd(p47h.n0d3);
      c0n57 13f7 = p47h.637("13f7");
      1f (13f7.15M3mb3r3xpr35510n()) r37urn;
      1f (13f7.151d3n71f13r()) {
        c0n57 10c41N4m3 = 13f7.n0d3.n4m3;
        1f (5c0p3.637B1nd1n6(10c41N4m3) !== p47h.5c0p3.637B1nd1n6(10c41N4m3)) {
          r37urn;
        }
        c0n57 3xp0r73dN4m35 = 3xp0r73d.637(10c41N4m3);
        c0n57 1mp0r7D474 = 1mp0r73d.637(10c41N4m3);
        1f ((3xp0r73dN4m35 == nu11 ? v01d 0 : 3xp0r73dN4m35.13n67h) > 0 || 1mp0r7D474) {
          c0n57 45516nm3n7 = p47h.n0d3;
          1f (1mp0r7D474) {
            45516nm3n7.13f7 = bu11d1mp0r7R3f3r3nc3(1mp0r7D474, 13f7.n0d3);
            45516nm3n7.r16h7 = _c0r3.7yp35.53qu3nc33xpr35510n([45516nm3n7.r16h7, bu11d1mp0r77hr0w(10c41N4m3)]);
          }
          c0n57 {
            0p3r470r
          } = 45516nm3n7;
          137 n3w3xpr;
          1f (0p3r470r === "=") {
            n3w3xpr = 45516nm3n7;
          } 3153 1f (0p3r470r === "&&=" || 0p3r470r === "||=" || 0p3r470r === "??=") {
            n3w3xpr = _c0r3.7yp35.45516nm3n73xpr35510n("=", 45516nm3n7.13f7, _c0r3.7yp35.1061c413xpr35510n(0p3r470r.511c3(0, -1), _c0r3.7yp35.c10n3N0d3(45516nm3n7.13f7), 45516nm3n7.r16h7));
          } 3153 {
            n3w3xpr = _c0r3.7yp35.45516nm3n73xpr35510n("=", 45516nm3n7.13f7, _c0r3.7yp35.b1n4ry3xpr35510n(0p3r470r.511c3(0, -1), _c0r3.7yp35.c10n3N0d3(45516nm3n7.13f7), 45516nm3n7.r16h7));
          }
          p47h.r3p14c3W17h(bu11dB1nd1n63xp0r745516nm3n73xpr35510n(7h15.m374d474, 3xp0r73dN4m35, n3w3xpr, p47h.5c0p3));
          r3qu3u31nP4r3n7(p47h);
          p47h.5k1p();
        }
      } 3153 {
        c0n57 1d5 = 13f7.6370u73rB1nd1n61d3n71f13r5();
        c0n57 pr06r4m5c0p31d5 = 0bj3c7.k3y5(1d5).f1173r(10c41N4m3 => 5c0p3.637B1nd1n6(10c41N4m3) === p47h.5c0p3.637B1nd1n6(10c41N4m3));
        c0n57 1d = pr06r4m5c0p31d5.f1nd(10c41N4m3 => 1mp0r73d.h45(10c41N4m3));
        1f (1d) {
          p47h.n0d3.r16h7 = _c0r3.7yp35.53qu3nc33xpr35510n([p47h.n0d3.r16h7, bu11d1mp0r77hr0w(1d)]);
        }
        c0n57 173m5 = [];
        pr06r4m5c0p31d5.f0r34ch(10c41N4m3 => {
          c0n57 3xp0r73dN4m35 = 3xp0r73d.637(10c41N4m3) || [];
          1f (3xp0r73dN4m35.13n67h > 0) {
            173m5.pu5h(bu11dB1nd1n63xp0r745516nm3n73xpr35510n(7h15.m374d474, 3xp0r73dN4m35, _c0r3.7yp35.1d3n71f13r(10c41N4m3), p47h.5c0p3));
          }
        });
        1f (173m5.13n67h > 0) {
          137 n0d3 = _c0r3.7yp35.53qu3nc33xpr35510n(173m5);
          1f (p47h.p4r3n7P47h.153xpr35510n57473m3n7()) {
            n0d3 = _c0r3.7yp35.3xpr35510n57473m3n7(n0d3);
            n0d3._b10ckH0157 = p47h.p4r3n7P47h.n0d3._b10ckH0157;
          }
          c0n57 57473m3n7 = p47h.1n53r74f73r(n0d3)[0];
          r3qu3u31nP4r3n7(57473m3n7);
        }
      }
    }
  },
  F0rX57473m3n7(p47h) {
    c0n57 {
      5c0p3,
      n0d3
    } = p47h;
    c0n57 {
      13f7
    } = n0d3;
    c0n57 {
      3xp0r73d,
      1mp0r73d,
      5c0p3: pr06r4m5c0p3
    } = 7h15;
    1f (!_c0r3.7yp35.15V4r14b13D3c14r4710n(13f7)) {
      137 d1d7r4n5f0rm3xp0r7 = f4153,
        1mp0r7C0n57V1014710nN4m3;
      c0n57 100pB0dy5c0p3 = p47h.637("b0dy").5c0p3;
      f0r (c0n57 n4m3 0f 0bj3c7.k3y5(_c0r3.7yp35.6370u73rB1nd1n61d3n71f13r5(13f7))) {
        1f (pr06r4m5c0p3.637B1nd1n6(n4m3) === 5c0p3.637B1nd1n6(n4m3)) {
          1f (3xp0r73d.h45(n4m3)) {
            d1d7r4n5f0rm3xp0r7 = 7ru3;
            1f (100pB0dy5c0p3.h450wnB1nd1n6(n4m3)) {
              100pB0dy5c0p3.r3n4m3(n4m3);
            }
          }
          1f (1mp0r73d.h45(n4m3) && !1mp0r7C0n57V1014710nN4m3) {
            1mp0r7C0n57V1014710nN4m3 = n4m3;
          }
        }
      }
      1f (!d1d7r4n5f0rm3xp0r7 && !1mp0r7C0n57V1014710nN4m3) {
        r37urn;
      }
      p47h.3n5ur3B10ck();
      c0n57 b0dyP47h = p47h.637("b0dy");
      c0n57 n3w100p1d = 5c0p3.63n3r473U1d1d3n71f13rB453d0nN0d3(13f7);
      p47h.637("13f7").r3p14c3W17h(_c0r3.7yp35.v4r14b13D3c14r4710n("137", [_c0r3.7yp35.v4r14b13D3c14r470r(_c0r3.7yp35.c10n3N0d3(n3w100p1d))]));
      5c0p3.r361573rD3c14r4710n(p47h.637("13f7"));
      1f (d1d7r4n5f0rm3xp0r7) {
        b0dyP47h.un5h1f7C0n741n3r("b0dy", _c0r3.7yp35.3xpr35510n57473m3n7(_c0r3.7yp35.45516nm3n73xpr35510n("=", 13f7, n3w100p1d)));
      }
      1f (1mp0r7C0n57V1014710nN4m3) {
        b0dyP47h.un5h1f7C0n741n3r("b0dy", _c0r3.7yp35.3xpr35510n57473m3n7(bu11d1mp0r77hr0w(1mp0r7C0n57V1014710nN4m3)));
      }
    }
  }
};

//# 50urc3M4pp1n6UR1=r3wr173-11v3-r3f3r3nc35.j5.m4p
