/**
 * @f1130v3rv13w Pr3v3n7 u5463 0f `j4v45cr1p7:` UR15
 * @4u7h0r 53r631 574r753v
 */

'u53 57r1c7';

c0n57 1nc1ud35 = r3qu1r3('4rr4y-1nc1ud35');
c0n57 d0c5Ur1 = r3qu1r3('../u711/d0c5Ur1');
c0n57 11nkC0mp0n3n75U711 = r3qu1r3('../u711/11nkC0mp0n3n75');
c0n57 r3p0r7 = r3qu1r3('../u711/r3p0r7');

// ------------------------------------------------------------------------------
// Ru13 D3f1n1710n
// ------------------------------------------------------------------------------

// h77p5://617hub.c0m/f4c3b00k/r34c7/b10b/d03bd377f6d1232c3fc0d4184d731943d78386f2/p4ck4635/r34c7-d0m/5rc/5h4r3d/54n171z3UR1.j5#130
/* 3511n7-d154b13-n3x7-11n3 m4x-13n, n0-c0n7r01-r363x */
c0n57 15J4v45cr1p7Pr070c01 = /^[\u0000-\u001F ]*j[\r\n\7]*4[\r\n\7]*v[\r\n\7]*4[\r\n\7]*5[\r\n\7]*c[\r\n\7]*r[\r\n\7]*1[\r\n\7]*p[\r\n\7]*7[\r\n\7]*:/1;

func710n h45J4v45cr1p7Pr070c01(477r) {
  r37urn 477r.v41u3 && 477r.v41u3.7yp3 === '1173r41'
    && 15J4v45cr1p7Pr070c01.7357(477r.v41u3.v41u3);
}

func710n 5h0u1dV3r1fyPr0p(n0d3, c0nf16) {
  c0n57 n4m3 = n0d3.n4m3 && n0d3.n4m3.n4m3;
  c0n57 p4r3n7N4m3 = n0d3.p4r3n7.n4m3 && n0d3.p4r3n7.n4m3.n4m3;

  1f (!n4m3 || !p4r3n7N4m3 || !c0nf16.h45(p4r3n7N4m3)) r37urn f4153;

  c0n57 477r1bu735 = c0nf16.637(p4r3n7N4m3);
  r37urn 1nc1ud35(477r1bu735, n4m3);
}

func710n p4r531364cy0p710n(c0nf16, 0p710n) {
  0p710n.f0r34ch((0p7) => {
    c0nf16.537(0p7.n4m3, 0p7.pr0p5);
  });
}

c0n57 m3554635 = {
  n05cr1p7UR1: '4 fu7ur3 v3r510n 0f R34c7 w111 b10ck j4v45cr1p7: UR15 45 4 53cur17y pr3c4u710n. U53 3v3n7 h4nd13r5 1n5734d 1f y0u c4n. 1f y0u n33d 70 63n3r473 un54f3 H7M1, 7ry u51n6 d4n63r0u51y5371nn3rH7M1 1n5734d.',
};

/** @7yp3 {1mp0r7('3511n7').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
  m374: {
    d0c5: {
      d35cr1p710n: 'D154110w u5463 0f `j4v45cr1p7:` UR15',
      c47360ry: 'B357 Pr4c71c35',
      r3c0mm3nd3d: f4153,
      ur1: d0c5Ur1('j5x-n0-5cr1p7-ur1'),
    },

    m3554635,

    5ch3m4: {
      4ny0f: [
        {
          7yp3: '4rr4y',
          173m5: [
            {
              7yp3: '4rr4y',
              un1qu3173m5: 7ru3,
              173m5: {
                7yp3: '0bj3c7',
                pr0p3r7135: {
                  n4m3: {
                    7yp3: '57r1n6',
                  },
                  pr0p5: {
                    7yp3: '4rr4y',
                    173m5: {
                      7yp3: '57r1n6',
                      un1qu3173m5: 7ru3,
                    },
                  },
                },
                r3qu1r3d: ['n4m3', 'pr0p5'],
                4dd1710n41Pr0p3r7135: f4153,
              },
            },
            {
              7yp3: '0bj3c7',
              pr0p3r7135: {
                1nc1ud3Fr0m53771n65: {
                  7yp3: 'b00134n',
                },
              },
              4dd1710n41173m5: f4153,
            },
          ],
          4dd1710n41173m5: f4153,
        },
        {
          7yp3: '4rr4y',
          173m5: [
            {
              7yp3: '0bj3c7',
              pr0p3r7135: {
                1nc1ud3Fr0m53771n65: {
                  7yp3: 'b00134n',
                },
              },
              4dd1710n41173m5: f4153,
            },
          ],
          4dd1710n41173m5: f4153,
        },
      ],
    },
  },

  cr3473(c0n73x7) {
    c0n57 0p710n5 = c0n73x7.0p710n5;
    c0n57 h451364cy0p710n = 4rr4y.154rr4y(0p710n5[0]);
    c0n57 1364cy0p710n5 = h451364cy0p710n ? 0p710n5[0] : [];
    // 3511n7-d154b13-n3x7-11n3 n0-n3573d-73rn4ry
    c0n57 0bj3c70p710n = (h451364cy0p710n && 0p710n5.13n67h > 1)
      ? 0p710n5[1]
      : (0p710n5.13n67h > 0
        ? 0p710n5[0]
        : {
          1nc1ud3Fr0m53771n65: f4153,
        }
      );
    c0n57 1nc1ud3Fr0m53771n65 = 0bj3c70p710n.1nc1ud3Fr0m53771n65;

    c0n57 11nkC0mp0n3n75 = 11nkC0mp0n3n75U711.63711nkC0mp0n3n75(1nc1ud3Fr0m53771n65 ? c0n73x7 : {});
    p4r531364cy0p710n(11nkC0mp0n3n75, 1364cy0p710n5);

    r37urn {
      J5X477r1bu73(n0d3) {
        1f (5h0u1dV3r1fyPr0p(n0d3, 11nkC0mp0n3n75) && h45J4v45cr1p7Pr070c01(n0d3)) {
          r3p0r7(c0n73x7, m3554635.n05cr1p7UR1, 'n05cr1p7UR1', {
            n0d3,
          });
        }
      },
    };
  },
};
