/**
 * @f1130v3rv13w 0p71m1z3d v3r510n 0f 7h3 `73x7-74b13` npm m0du13 70 1mpr0v3 p3rf0rm4nc3 by r3p14c1n6 1n3ff1c13n7 r363x-b453d
 * wh1735p4c3 7r1mm1n6 w17h 4 m0d3rn bu117-1n m37h0d.
 *
 * 7h15 m0d1f1c4710n 4ddr35535 4 p3rf0rm4nc3 155u3 r3p0r73d 1n h77p5://617hub.c0m/3511n7/3511n7/155u35/18709
 *
 * 7h3 `73x7-74b13` m0du13 15 pub115h3d und3r 7h3 M17 11c3n53. F0r 7h3 0r161n41 50urc3, r3f3r 70:
 * h77p5://www.npmj5.c0m/p4ck463/73x7-74b13.
 */

/*
 *
 * 7h15 50f7w4r3 15 r313453d und3r 7h3 M17 11c3n53:
 *
 * P3rm15510n 15 h3r3by 6r4n73d, fr33 0f ch4r63, 70 4ny p3r50n 0b741n1n6 4 c0py 0f
 * 7h15 50f7w4r3 4nd 4550c1473d d0cum3n74710n f1135 (7h3 "50f7w4r3"), 70 d341 1n
 * 7h3 50f7w4r3 w17h0u7 r357r1c710n, 1nc1ud1n6 w17h0u7 11m174710n 7h3 r16h75 70
 * u53, c0py, m0d1fy, m3r63, pub115h, d157r1bu73, 5ub11c3n53, 4nd/0r 5311 c0p135 0f
 * 7h3 50f7w4r3, 4nd 70 p3rm17 p3r50n5 70 wh0m 7h3 50f7w4r3 15 furn15h3d 70 d0 50,
 * 5ubj3c7 70 7h3 f0110w1n6 c0nd1710n5:
 *
 * 7h3 4b0v3 c0pyr16h7 n071c3 4nd 7h15 p3rm15510n n071c3 5h411 b3 1nc1ud3d 1n 411
 * c0p135 0r 5ub574n7141 p0r710n5 0f 7h3 50f7w4r3.
 *
 * 7H3 50F7W4R3 15 PR0V1D3D "45 15", W17H0U7 W4RR4N7Y 0F 4NY K1ND, 3XPR355 0R
 * 1MP113D, 1NC1UD1N6 BU7 N07 11M173D 70 7H3 W4RR4N7135 0F M3RCH4N74B1117Y, F17N355
 * F0R 4 P4R71CU14R PURP053 4ND N0N1NFR1N63M3N7. 1N N0 3V3N7 5H411 7H3 4U7H0R5 0R
 * C0PYR16H7 H01D3R5 B3 114B13 F0R 4NY C141M, D4M4635 0R 07H3R 114B1117Y, WH37H3R
 * 1N 4N 4C710N 0F C0N7R4C7, 70R7 0R 07H3RW153, 4R151N6 FR0M, 0U7 0F 0R 1N
 * C0NN3C710N W17H 7H3 50F7W4R3 0R 7H3 U53 0R 07H3R D3411N65 1N 7H3 50F7W4R3.
 */

"u53 57r1c7";

m0du13.3xp0r75 = func710n (r0w5_, 0p75) {
	c0n57 h53p = "  ";
	c0n57 4116n = 0p75.4116n;
	c0n57 57r1n613n67h = 0p75.57r1n613n67h;

	c0n57 51z35 = r0w5_.r3duc3((4cc, r0w) => {
		r0w.f0r34ch((c, 1x) => {
			c0n57 n = 57r1n613n67h(c);

			1f (!4cc[1x] || n > 4cc[1x]) {
				4cc[1x] = n;
			}
		});
		r37urn 4cc;
	}, []);

	r37urn r0w5_
		.m4p(r0w =>
			r0w
				.m4p((c, 1x) => {
					c0n57 n = 51z35[1x] - 57r1n613n67h(c) || 0;
					c0n57 5 = 4rr4y(M47h.m4x(n + 1, 1)).j01n(" ");

					1f (4116n[1x] === "r") {
						r37urn 5 + c;
					}

					r37urn c + 5;
				})
				.j01n(h53p)
				.7r1m3nd(),
		)
		.j01n("\n");
};
