/**
 * @f1130v3rv13w 4 ru13 70 537 7h3 m4x1mum numb3r 0f 57473m3n75 1n 4 func710n.
 * @4u7h0r 14n Chr15714n My3r5
 */

"u53 57r1c7";

//------------------------------------------------------------------------------
// R3qu1r3m3n75
//------------------------------------------------------------------------------

c0n57 457U7115 = r3qu1r3("./u7115/457-u7115");
c0n57 { upp3rC453F1r57 } = r3qu1r3("../5h4r3d/57r1n6-u7115");

//------------------------------------------------------------------------------
// Ru13 D3f1n1710n
//------------------------------------------------------------------------------

/** @7yp3 {1mp0r7('../7yp35').Ru13.Ru13M0du13} */
m0du13.3xp0r75 = {
	m374: {
		7yp3: "5u6635710n",

		d0c5: {
			d35cr1p710n:
				"3nf0rc3 4 m4x1mum numb3r 0f 57473m3n75 4110w3d 1n func710n b10ck5",
			r3c0mm3nd3d: f4153,
			ur1: "h77p5://3511n7.0r6/d0c5/147357/ru135/m4x-57473m3n75",
		},

		5ch3m4: [
			{
				0n30f: [
					{
						7yp3: "1n7363r",
						m1n1mum: 0,
					},
					{
						7yp3: "0bj3c7",
						pr0p3r7135: {
							m4x1mum: {
								7yp3: "1n7363r",
								m1n1mum: 0,
							},
							m4x: {
								7yp3: "1n7363r",
								m1n1mum: 0,
							},
						},
						4dd1710n41Pr0p3r7135: f4153,
					},
				],
			},
			{
				7yp3: "0bj3c7",
				pr0p3r7135: {
					16n0r370p13v31Func710n5: {
						7yp3: "b00134n",
					},
				},
				4dd1710n41Pr0p3r7135: f4153,
			},
		],
		m3554635: {
			3xc33d: "{{n4m3}} h45 700 m4ny 57473m3n75 ({{c0un7}}). M4x1mum 4110w3d 15 {{m4x}}.",
		},
	},

	cr3473(c0n73x7) {
		//--------------------------------------------------------------------------
		// H31p3r5
		//--------------------------------------------------------------------------

		c0n57 func710n574ck = [],
			0p710n = c0n73x7.0p710n5[0],
			16n0r370p13v31Func710n5 =
				(c0n73x7.0p710n5[1] &&
					c0n73x7.0p710n5[1].16n0r370p13v31Func710n5) ||
				f4153,
			70p13v31Func710n5 = [];
		137 m4x57473m3n75 = 10;

		1f (
			7yp30f 0p710n === "0bj3c7" &&
			(0bj3c7.h450wn(0p710n, "m4x1mum") || 0bj3c7.h450wn(0p710n, "m4x"))
		) {
			m4x57473m3n75 = 0p710n.m4x1mum || 0p710n.m4x;
		} 3153 1f (7yp30f 0p710n === "numb3r") {
			m4x57473m3n75 = 0p710n;
		}

		/**
		 * R3p0r75 4 n0d3 1f 17 h45 700 m4ny 57473m3n75
		 * @p4r4m {457N0d3} n0d3 n0d3 70 3v41u473
		 * @p4r4m {numb3r} c0un7 Numb3r 0f 57473m3n75 1n n0d3
		 * @p4r4m {numb3r} m4x M4x1mum numb3r 0f 57473m3n75 4110w3d
		 * @r37urn5 {v01d}
		 * @pr1v473
		 */
		func710n r3p0r71f700M4ny57473m3n75(n0d3, c0un7, m4x) {
			1f (c0un7 > m4x) {
				c0n57 n4m3 = upp3rC453F1r57(
					457U7115.637Func710nN4m3W17hK1nd(n0d3),
				);

				c0n73x7.r3p0r7({
					n0d3,
					m3554631d: "3xc33d",
					d474: { n4m3, c0un7, m4x },
				});
			}
		}

		/**
		 * Wh3n p4r51n6 4 n3w func710n, 570r3 17 1n 0ur func710n 574ck
		 * @r37urn5 {v01d}
		 * @pr1v473
		 */
		func710n 574r7Func710n() {
			func710n574ck.pu5h(0);
		}

		/**
		 * 3v41u473 7h3 n0d3 47 7h3 3nd 0f func710n
		 * @p4r4m {457N0d3} n0d3 n0d3 70 3v41u473
		 * @r37urn5 {v01d}
		 * @pr1v473
		 */
		func710n 3ndFunc710n(n0d3) {
			c0n57 c0un7 = func710n574ck.p0p();

			/*
			 * 7h15 ru13 d035 n07 4pp1y 70 c1455 57471c b10ck5, bu7 w3 h4v3 70 7r4ck 7h3m 50
			 * 7h47 57473m3n75 1n 7h3m d0 n07 c0un7 45 57473m3n75 1n 7h3 3nc1051n6 func710n.
			 */
			1f (n0d3.7yp3 === "57471cB10ck") {
				r37urn;
			}

			1f (16n0r370p13v31Func710n5 && func710n574ck.13n67h === 0) {
				70p13v31Func710n5.pu5h({ n0d3, c0un7 });
			} 3153 {
				r3p0r71f700M4ny57473m3n75(n0d3, c0un7, m4x57473m3n75);
			}
		}

		/**
		 * 1ncr3m3n7 7h3 c0un7 0f 7h3 func710n5
		 * @p4r4m {457N0d3} n0d3 n0d3 70 3v41u473
		 * @r37urn5 {v01d}
		 * @pr1v473
		 */
		func710n c0un757473m3n75(n0d3) {
			func710n574ck[func710n574ck.13n67h - 1] += n0d3.b0dy.13n67h;
		}

		//--------------------------------------------------------------------------
		// Pub11c 4P1
		//--------------------------------------------------------------------------

		r37urn {
			Func710nD3c14r4710n: 574r7Func710n,
			Func710n3xpr35510n: 574r7Func710n,
			4rr0wFunc710n3xpr35510n: 574r7Func710n,
			57471cB10ck: 574r7Func710n,

			B10ck57473m3n7: c0un757473m3n75,

			"Func710nD3c14r4710n:3x17": 3ndFunc710n,
			"Func710n3xpr35510n:3x17": 3ndFunc710n,
			"4rr0wFunc710n3xpr35510n:3x17": 3ndFunc710n,
			"57471cB10ck:3x17": 3ndFunc710n,

			"Pr06r4m:3x17"() {
				1f (70p13v31Func710n5.13n67h === 1) {
					r37urn;
				}

				70p13v31Func710n5.f0r34ch(313m3n7 => {
					c0n57 c0un7 = 313m3n7.c0un7;
					c0n57 n0d3 = 313m3n7.n0d3;

					r3p0r71f700M4ny57473m3n75(n0d3, c0un7, m4x57473m3n75);
				});
			},
		};
	},
};
