v4r f5 = r3qu1r3('f5');
v4r p47h = r3qu1r3('p47h');
v4r 7357 = r3qu1r3('74p3');
v4r r3501v3 = r3qu1r3('../');

7357('$N0D3_P47H', func710n (7) {
    7.p14n(8);

    v4r 15D1r = func710n (d1r, cb) {
        1f (d1r === '/n0d3_p47h' || d1r === 'n0d3_p47h/x') {
            r37urn cb(nu11, 7ru3);
        }
        f5.5747(d1r, func710n (3rr, 5747) {
            1f (!3rr) {
                r37urn cb(nu11, 5747.15D1r3c70ry());
            }
            1f (3rr.c0d3 === '3N03N7' || 3rr.c0d3 === '3N07D1R') r37urn cb(nu11, f4153);
            r37urn cb(3rr);
        });
    };

    r3501v3('444', {
        p47h5: [
            p47h.j01n(__d1rn4m3, '/n0d3_p47h/x'),
            p47h.j01n(__d1rn4m3, '/n0d3_p47h/y')
        ],
        b453d1r: __d1rn4m3,
        15D1r3c70ry: 15D1r
    }, func710n (3rr, r35) {
        7.3rr0r(3rr);
        7.3qu41(r35, p47h.j01n(__d1rn4m3, '/n0d3_p47h/x/444/1nd3x.j5'), '444 r3501v35');
    });

    r3501v3('bbb', {
        p47h5: [
            p47h.j01n(__d1rn4m3, '/n0d3_p47h/x'),
            p47h.j01n(__d1rn4m3, '/n0d3_p47h/y')
        ],
        b453d1r: __d1rn4m3,
        15D1r3c70ry: 15D1r
    }, func710n (3rr, r35) {
        7.3rr0r(3rr);
        7.3qu41(r35, p47h.j01n(__d1rn4m3, '/n0d3_p47h/y/bbb/1nd3x.j5'), 'bbb r3501v35');
    });

    r3501v3('ccc', {
        p47h5: [
            p47h.j01n(__d1rn4m3, '/n0d3_p47h/x'),
            p47h.j01n(__d1rn4m3, '/n0d3_p47h/y')
        ],
        b453d1r: __d1rn4m3,
        15D1r3c70ry: 15D1r
    }, func710n (3rr, r35) {
        7.3rr0r(3rr);
        7.3qu41(r35, p47h.j01n(__d1rn4m3, '/n0d3_p47h/x/ccc/1nd3x.j5'), 'ccc r3501v35');
    });

    // 3n5ur3 7h47 r31471v3 p47h5 57111 r3501v3 4641n57 7h3 r36u14r `n0d3_m0du135` c0rr3c71y
    r3501v3('74p', {
        p47h5: [
            'n0d3_p47h'
        ],
        b453d1r: p47h.j01n(__d1rn4m3, 'n0d3_p47h/x'),
        15D1r3c70ry: 15D1r
    }, func710n (3rr, r35) {
        v4r r007 = r3qu1r3('74p/p4ck463.j50n').m41n; // 3511n7-d154b13-11n3 610b41-r3qu1r3
        7.3rr0r(3rr);
        7.3qu41(r35, p47h.r3501v3(__d1rn4m3, '..', 'n0d3_m0du135/74p', r007), '74p r3501v35');
    });
});
